{"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mCircuit breaker for TestService is now OPEN. Will retry after 1000ms\u001b[39m","timestamp":"2025-07-16 16:10:01:101"}
{"error":"Async error","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":500,"timestamp":"2025-07-16 16:10:01:101","url":"/test"}
{"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mCircuit breaker for TestService is now OPEN. Will retry after 1000ms\u001b[39m","timestamp":"2025-07-16 16:10:01:101"}
{"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mCircuit breaker for TestService is now OPEN. Will retry after 1000ms\u001b[39m","timestamp":"2025-07-16 16:10:01:101"}
{"error":{"message":"Async error","status":"error","statusCode":500},"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mUnknown error:\u001b[39m","timestamp":"2025-07-16 16:10:01:101"}
{"code":"TEST_ERROR","error":"Operational error","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":400,"timestamp":"2025-07-16 16:10:01:101","url":"/test"}
{"error":"Programming error","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":500,"timestamp":"2025-07-16 16:10:01:101","url":"/test"}
{"error":{"isOperational":false,"message":"Programming error","status":"error","statusCode":500},"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mUnknown error:\u001b[39m","timestamp":"2025-07-16 16:10:01:101"}
{"error":"Dev error","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in development:\u001b[39m","method":"GET","stack":"Error: Dev error\n    at /Users/oliver/Projects/boutique/test/middleware/errorHandler.test.js:110:14\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/oliver/Projects/boutique/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:280:10)\n    at jsonParser (/Users/oliver/Projects/boutique/node_modules/body-parser/lib/types/json.js:113:7)\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:328:13)\n    at /Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:280:10)\n    at expressInit (/Users/oliver/Projects/boutique/node_modules/express/lib/middleware/init.js:40:5)\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:328:13)\n    at /Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:280:10)\n    at query (/Users/oliver/Projects/boutique/node_modules/express/lib/middleware/query.js:45:5)\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:328:13)\n    at /Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:175:3)\n    at Function.handle (/Users/oliver/Projects/boutique/node_modules/express/lib/application.js:181:10)\n    at Server.app (/Users/oliver/Projects/boutique/node_modules/express/lib/express.js:39:9)\n    at Server.emit (node:events:518:28)\n    at parserOnIncoming (node:_http_server:1155:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-07-16 16:10:01:101","url":"/test"}
{"code":"INVALID_TOKEN","error":"Invalid token. Please log in again!","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":401,"timestamp":"2025-07-16 16:10:01:101","url":"/test"}
{"code":"TOKEN_EXPIRED","error":"Your token has expired! Please log in again.","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":401,"timestamp":"2025-07-16 16:10:01:101","url":"/test"}
{"code":"VALIDATION_ERROR","error":"Invalid input data. Email is required. Password is too short","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":400,"timestamp":"2025-07-16 16:10:01:101","url":"/test"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCircuit breaker for TestService is now HALF_OPEN\u001b[39m","timestamp":"2025-07-16 16:10:02:102"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCircuit breaker for TestService is now CLOSED\u001b[39m","timestamp":"2025-07-16 16:10:02:102"}
{"attempt":1,"error":"Temporary error","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mTest operation failed on attempt 1, retrying in 10ms:\u001b[39m","nextRetryIn":10,"timestamp":"2025-07-16 16:10:02:102"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTest operation succeeded on attempt 2\u001b[39m","timestamp":"2025-07-16 16:10:02:102"}
{"attempt":1,"error":"Persistent error","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mTest operation failed on attempt 1, retrying in 10ms:\u001b[39m","nextRetryIn":10,"timestamp":"2025-07-16 16:10:02:102"}
{"attempts":2,"error":"Persistent error","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mTest operation failed after 2 attempts:\u001b[39m","timestamp":"2025-07-16 16:10:02:102"}
{"attempt":1,"error":"Error 1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mTest operation failed on attempt 1, retrying in 50ms:\u001b[39m","nextRetryIn":50,"timestamp":"2025-07-16 16:10:02:102"}
{"attempt":2,"error":"Error 2","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mTest operation failed on attempt 2, retrying in 100ms:\u001b[39m","nextRetryIn":100,"timestamp":"2025-07-16 16:10:03:103"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTest operation succeeded on attempt 3\u001b[39m","timestamp":"2025-07-16 16:10:03:103"}
{"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mCircuit breaker for TestService is now OPEN. Will retry after 1000ms\u001b[39m","timestamp":"2025-07-16 16:30:33:3033"}
{"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mCircuit breaker for TestService is now OPEN. Will retry after 1000ms\u001b[39m","timestamp":"2025-07-16 16:30:33:3033"}
{"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mCircuit breaker for TestService is now OPEN. Will retry after 1000ms\u001b[39m","timestamp":"2025-07-16 16:30:33:3033"}
{"error":"Async error","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":500,"timestamp":"2025-07-16 16:30:33:3033","url":"/test"}
{"error":{"message":"Async error","status":"error","statusCode":500},"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mUnknown error:\u001b[39m","timestamp":"2025-07-16 16:30:33:3033"}
{"code":"TEST_ERROR","error":"Operational error","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":400,"timestamp":"2025-07-16 16:30:33:3033","url":"/test"}
{"error":"Programming error","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":500,"timestamp":"2025-07-16 16:30:33:3033","url":"/test"}
{"error":{"isOperational":false,"message":"Programming error","status":"error","statusCode":500},"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mUnknown error:\u001b[39m","timestamp":"2025-07-16 16:30:33:3033"}
{"error":"Dev error","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mError in development:\u001b[39m","method":"GET","stack":"Error: Dev error\n    at /Users/oliver/Projects/boutique/test/middleware/errorHandler.test.js:110:14\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/oliver/Projects/boutique/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:280:10)\n    at jsonParser (/Users/oliver/Projects/boutique/node_modules/body-parser/lib/types/json.js:113:7)\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:328:13)\n    at /Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:280:10)\n    at expressInit (/Users/oliver/Projects/boutique/node_modules/express/lib/middleware/init.js:40:5)\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:328:13)\n    at /Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:280:10)\n    at query (/Users/oliver/Projects/boutique/node_modules/express/lib/middleware/query.js:45:5)\n    at Layer.handle [as handle_request] (/Users/oliver/Projects/boutique/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:328:13)\n    at /Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/oliver/Projects/boutique/node_modules/express/lib/router/index.js:175:3)\n    at Function.handle (/Users/oliver/Projects/boutique/node_modules/express/lib/application.js:181:10)\n    at Server.app (/Users/oliver/Projects/boutique/node_modules/express/lib/express.js:39:9)\n    at Server.emit (node:events:518:28)\n    at parserOnIncoming (node:_http_server:1155:12)\n    at HTTPParser.parserOnHeadersComplete (node:_http_common:117:17)","timestamp":"2025-07-16 16:30:33:3033","url":"/test"}
{"code":"INVALID_TOKEN","error":"Invalid token. Please log in again!","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":401,"timestamp":"2025-07-16 16:30:33:3033","url":"/test"}
{"code":"TOKEN_EXPIRED","error":"Your token has expired! Please log in again.","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":401,"timestamp":"2025-07-16 16:30:33:3033","url":"/test"}
{"code":"VALIDATION_ERROR","error":"Invalid input data. Email is required. Password is too short","ip":"::ffff:127.0.0.1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mProduction error:\u001b[39m","method":"GET","statusCode":400,"timestamp":"2025-07-16 16:30:33:3033","url":"/test"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCircuit breaker for TestService is now HALF_OPEN\u001b[39m","timestamp":"2025-07-16 16:30:34:3034"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCircuit breaker for TestService is now CLOSED\u001b[39m","timestamp":"2025-07-16 16:30:34:3034"}
{"attempt":1,"error":"Temporary error","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mTest operation failed on attempt 1, retrying in 10ms:\u001b[39m","nextRetryIn":10,"timestamp":"2025-07-16 16:30:34:3034"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTest operation succeeded on attempt 2\u001b[39m","timestamp":"2025-07-16 16:30:34:3034"}
{"attempt":1,"error":"Persistent error","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mTest operation failed on attempt 1, retrying in 10ms:\u001b[39m","nextRetryIn":10,"timestamp":"2025-07-16 16:30:34:3034"}
{"attempts":2,"error":"Persistent error","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mTest operation failed after 2 attempts:\u001b[39m","timestamp":"2025-07-16 16:30:34:3034"}
{"attempt":1,"error":"Error 1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mTest operation failed on attempt 1, retrying in 50ms:\u001b[39m","nextRetryIn":50,"timestamp":"2025-07-16 16:30:34:3034"}
{"attempt":2,"error":"Error 2","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mTest operation failed on attempt 2, retrying in 100ms:\u001b[39m","nextRetryIn":100,"timestamp":"2025-07-16 16:30:34:3034"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTest operation succeeded on attempt 3\u001b[39m","timestamp":"2025-07-16 16:30:34:3034"}
