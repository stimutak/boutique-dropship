/* ═══════════════════════════════════════════════════════════════════════
   HEADER NAVIGATION - LUXURY NATURAL DESIGN
   Elegant · Premium · Accessible
   ═══════════════════════════════════════════════════════════════════════ */

.header {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: var(--glass-white);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border-bottom: 1px solid var(--luxury-stone);
  box-shadow: var(--shadow-subtle);
  transition: all var(--transition-base);
}

[data-theme="dark"] .header {
  background: rgba(26, 24, 21, 0.95);
  border-bottom-color: var(--luxury-stone);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

/* When the header is used on the home page atop the hero video we
   remove the background and border so the video can be seen
   underneath.  Text colour is set to white via the elements
   themselves rather than the header container; however removing the
   background prevents the glass effect from obscuring the video. */
.header-overlay {
  background: transparent;
  border-bottom: none;
  box-shadow: none;
}

/* Hide the header by translating it upwards.  This is applied when
   scrolling past the hero so that only the sub–menu remains. */
.header-hidden {
  transform: translateY(-100%);
  transition: transform var(--transition-base);
}

/* Sub–menu bar that stays pinned to the top of the viewport when
   scrolling the home page.  It contains only icon links for the cart
   and user account.  The sub–menu is initially positioned above the
   viewport and slides into view when the main header scrolls away. */
.sub-menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 44px;
  padding: 0 var(--space-xl);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  background: var(--glass-white);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border-bottom: 1px solid var(--luxury-stone);
  box-shadow: var(--shadow-subtle);
  z-index: 1100;
  transition: transform var(--transition-base);
}

/* In dark mode the sub–menu uses a darker translucent background. */
[data-theme="dark"] .sub-menu {
  background: rgba(26, 24, 21, 0.95);
  border-bottom-color: var(--luxury-stone);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

/* Icon links inside the sub–menu.  Keep spacing comfortable and
   inherit the colour from the surrounding header. */
.icon-link {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-primary);
  text-decoration: none;
  padding: var(--space-sm);
  margin-left: var(--space-xl);
  position: relative;
}

.icon-link svg {
  width: 20px;
  height: 20px;
}

/* Position the cart badge near the top right of the cart icon. */
.icon-link .cart-badge {
  position: absolute;
  top: -4px;
  right: -10px;
  background: var(--terra-rust);
  color: white;
  border-radius: var(--radius-full);
  padding: 1px 4px;
  font-size: 0.7rem;
  font-weight: 600;
}

.header-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--space-lg) var(--space-2xl);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2xl);
}

/* ═══ LOGO - BRAND IDENTITY ═══ */
.logo {
  font-family: var(--font-display);
  font-size: 1.75rem;
  font-weight: 400;
  background: linear-gradient(135deg, var(--text-primary), var(--bronze-soft));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-decoration: none;
  letter-spacing: -0.5px;
  transition: all var(--transition-fast);
  position: relative;
}

.logo::before {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--sage-leaf), var(--terra-clay));
  transition: width var(--transition-base);
}

.logo:hover {
  transform: translateY(-1px);
}

.logo:hover::before {
  width: 100%;
}

/* ═══ SEARCH BAR - ELEGANT DISCOVERY ═══ */
.search-form {
  flex: 1;
  max-width: 500px;
  position: relative;
}

.search-input {
  width: 100%;
  padding: 0.625rem var(--space-xl);  /* Adjusted padding for better alignment */
  padding-inline-end: 120px;
  border: 1.5px solid var(--luxury-stone);
  border-radius: var(--radius-full);
  background: var(--bg-elevated);
  color: var(--text-primary);
  font-size: 0.95rem;
  font-family: var(--font-body);
  transition: all var(--transition-base);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.03);
  height: 42px;  /* Fixed height for consistency */
}

.search-input::placeholder {
  color: var(--text-muted);
  font-size: 0.9rem;
}

.search-input:focus {
  outline: none;
  background: var(--bg-elevated);
  border-color: var(--sage-leaf);
  box-shadow: 0 0 0 3px rgba(159, 184, 155, 0.15);
}

[data-theme="dark"] .search-input {
  background: var(--luxury-pearl);
  border-color: var(--luxury-stone);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .search-input:focus {
  background: var(--luxury-pearl);
  border-color: var(--sage-leaf);
}

.search-button {
  position: absolute;
  inset-inline-end: 3px;
  top: 50%;
  transform: translateY(-50%);
  height: 36px;  /* Slightly smaller than input for proper inset look */
  padding: 0 var(--space-xl);
  background: linear-gradient(135deg, var(--sage-leaf), var(--sage-forest));
  color: white;
  border: none;
  border-radius: var(--radius-full);
  font-family: var(--font-accent);
  font-weight: 500;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all var(--transition-base);
  box-shadow: var(--shadow-subtle);
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-button::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transform: translateX(-100%);
  transition: transform var(--transition-slow);
}

.search-button:hover {
  transform: translateY(-50%) scale(1.02);
  box-shadow: var(--shadow-soft);
}

.search-button:hover::before {
  transform: translateX(100%);
}

/* ═══ NAVIGATION MENU ═══ */
.nav-menu {
  display: flex;
  align-items: center;
  gap: var(--space-xl);
}

.nav-link {
  font-family: var(--font-accent);
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-primary);
  text-decoration: none;
  padding: var(--space-sm) var(--space-lg);
  border-radius: var(--radius-full);
  transition: all var(--transition-base);
  position: relative;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border: 1.5px solid transparent;
}

.nav-link::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 15%;
  right: 15%;
  height: 2px;
  background: linear-gradient(90deg, var(--sage-leaf), var(--terra-clay));
  transform: scaleX(0);
  transition: transform var(--transition-base);
}

.nav-link:hover {
  color: var(--sage-forest);
  background: linear-gradient(135deg, rgba(159, 184, 155, 0.08), rgba(159, 184, 155, 0.12));
  border-color: var(--sage-mist);
  transform: translateY(-1px);
}

.nav-link:hover::after {
  transform: scaleX(1);
}

/*
  Header overlay styling.  When the header sits on top of a dark hero
  video we invert the colours for better contrast.  This rule sets
  text and interactive elements to white and adjusts form fields so
  they remain visible.  Because of the specificity of the existing
  selectors we explicitly target elements inside the overlay.
*/
.header-overlay .logo,
.header-overlay .nav-link,
.header-overlay .mobile-menu-toggle,
.header-overlay .user-menu-toggle,
.header-overlay .nav-menu .cart-link,
.header-overlay .icon-link {
  color: #ffffff;
}

.header-overlay .nav-link:hover {
  color: var(--sage-leaf);
}

.header-overlay .nav-link::after {
  background: linear-gradient(90deg, var(--sage-leaf), var(--terra-clay));
}

/* Adjust the search bar in overlay mode */
.header-overlay .search-input {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.4);
  color: #ffffff;
}

.header-overlay .search-input::placeholder {
  color: rgba(255, 255, 255, 0.7);
}

.header-overlay .search-button {
  background: linear-gradient(135deg, var(--sage-leaf), var(--sage-forest));
  color: #ffffff;
}

[data-theme="dark"] .nav-link {
  color: var(--text-primary);
}

[data-theme="dark"] .nav-link:hover {
  color: var(--sage-leaf);
  background: rgba(159, 184, 155, 0.1);
  border-color: var(--sage-mist);
}

/* ═══ CART LINK - PREMIUM BADGE ═══ */
.cart-link {
  position: relative;
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  font-weight: 600;
}

.cart-badge {
  position: absolute;
  top: -8px;
  inset-inline-end: -12px;
  background: linear-gradient(135deg, var(--terra-clay), var(--terra-rust));
  color: white;
  font-size: 0.7rem;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: var(--radius-full);
  min-width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-soft);
  border: 1.5px solid var(--bg-elevated);
  animation: cartPulse 3s ease-in-out infinite;
}

@keyframes cartPulse {
  0%, 100% { 
    transform: scale(1);
    box-shadow: 0 2px 4px rgba(185, 121, 97, 0.3);
  }
  50% { 
    transform: scale(1.1);
    box-shadow: 0 3px 8px rgba(185, 121, 97, 0.4);
  }
}

/* ═══ LANGUAGE SELECTOR ═══ */
.language-selector {
  background: white;
  border: 1.5px solid var(--luxury-stone);
  color: var(--text-primary);
  padding: 0.4rem 0.8rem;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-base);
  font-family: var(--font-body);
  font-weight: 500;
  font-size: 0.875rem;
  min-width: auto;
  height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.language-selector:hover {
  background: var(--bg-secondary);
  border-color: var(--sage-mist);
  transform: translateY(-1px);
  box-shadow: var(--shadow-subtle);
}

.language-selector:focus {
  outline: none;
  border-color: var(--sage-leaf);
  box-shadow: 0 0 0 3px rgba(159, 184, 155, 0.15);
}

[data-theme="dark"] .language-selector {
  background: var(--luxury-pearl);
  border-color: var(--luxury-stone);
}

[data-theme="dark"] .language-selector:hover {
  background: var(--luxury-cream);
  border-color: var(--sage-mist);
}

/* ═══ USER MENU - PREMIUM DROPDOWN ═══ */
.user-menu {
  position: relative;
}

.user-menu-toggle {
  background: linear-gradient(135deg, var(--bg-elevated), var(--bg-secondary));
  border: 1.5px solid var(--luxury-stone);
  color: var(--text-primary);
  padding: var(--space-sm) var(--space-xl);
  border-radius: var(--radius-full);
  cursor: pointer;
  font-family: var(--font-accent);
  font-weight: 500;
  font-size: 0.9rem;
  transition: all var(--transition-base);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.user-menu-toggle:hover {
  background: linear-gradient(135deg, var(--sage-mist), var(--ocean-glass));
  border-color: var(--sage-leaf);
  transform: translateY(-1px);
  box-shadow: var(--shadow-soft);
}

[data-theme="dark"] .user-menu-toggle {
  background: var(--luxury-pearl);
  border-color: var(--luxury-stone);
}

[data-theme="dark"] .user-menu-toggle:hover {
  background: linear-gradient(135deg, var(--sage-mist), var(--ocean-glass));
  border-color: var(--sage-leaf);
}

/* ═══ USER DROPDOWN ═══ */
.user-dropdown {
  position: absolute;
  top: calc(100% + 12px);
  inset-inline-end: 0;
  background: var(--bg-elevated);
  border: 1.5px solid var(--luxury-stone);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-luxury);
  min-width: 200px;
  z-index: 1000;
  overflow: hidden;
}

.user-dropdown::before {
  content: '';
  position: absolute;
  top: -6px;
  inset-inline-end: 20px;
  width: 12px;
  height: 12px;
  background: var(--bg-elevated);
  border-top: 1.5px solid var(--luxury-stone);
  border-left: 1.5px solid var(--luxury-stone);
  transform: rotate(45deg);
}

[data-theme="dark"] .user-dropdown {
  background: var(--luxury-pearl);
  border-color: var(--luxury-stone);
}

[data-theme="dark"] .user-dropdown::before {
  background: var(--luxury-pearl);
  border-color: var(--luxury-stone);
}

.dropdown-link {
  display: block;
  padding: var(--space-md) var(--space-xl);
  color: var(--text-primary);
  text-decoration: none;
  font-family: var(--font-accent);
  font-weight: 500;
  font-size: 0.9rem;
  transition: all var(--transition-fast);
  border: none;
  background: none;
  width: 100%;
  text-align: start;
  cursor: pointer;
  position: relative;
}

.dropdown-link::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--sage-leaf);
  transform: scaleY(0);
  transition: transform var(--transition-base);
}

.dropdown-link:hover {
  background: linear-gradient(90deg, rgba(159, 184, 155, 0.1), transparent);
  color: var(--sage-forest);
  padding-inline-start: calc(var(--space-xl) + 4px);
}

.dropdown-link:hover::before {
  transform: scaleY(1);
}

.dropdown-link.admin-link {
  border-top: 1px solid var(--luxury-stone);
  font-weight: 600;
  color: var(--sage-forest);
}

.dropdown-link.logout-button {
  border-top: 1px solid var(--luxury-stone);
  color: var(--terra-rust);
  font-weight: 600;
}

.dropdown-link.logout-button:hover {
  background: linear-gradient(90deg, rgba(185, 121, 97, 0.1), transparent);
  color: var(--terra-earth);
}

/* ═══ MOBILE MENU ═══ */
.mobile-menu-toggle {
  display: none;
  background: var(--bg-elevated);
  border: 1.5px solid var(--luxury-stone);
  color: var(--text-primary);
  font-size: 1.25rem;
  cursor: pointer;
  padding: var(--space-sm);
  border-radius: var(--radius-md);
  transition: all var(--transition-base);
}

.mobile-menu-toggle:hover {
  background: var(--bg-secondary);
  border-color: var(--sage-mist);
  transform: scale(1.05);
}

[data-theme="dark"] .mobile-menu-toggle {
  background: var(--luxury-pearl);
  border-color: var(--luxury-stone);
}

.mobile-menu {
  display: none;
  position: fixed;
  top: 100%;
  left: 0;
  right: 0;
  background: var(--bg-elevated);
  box-shadow: var(--shadow-luxury);
  max-height: calc(100vh - 80px);
  overflow-y: auto;
  transform: translateY(-100vh);
  transition: transform var(--transition-base);
  border-top: 1px solid var(--luxury-stone);
}

.mobile-menu.open {
  transform: translateY(0);
}

.mobile-menu-content {
  padding: var(--space-xl);
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.mobile-nav-link {
  color: var(--text-primary);
  text-decoration: none;
  font-family: var(--font-accent);
  font-weight: 500;
  padding: var(--space-md) var(--space-lg);
  border-radius: var(--radius-md);
  background: var(--bg-secondary);
  transition: all var(--transition-base);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 0.9rem;
}

.mobile-nav-link:hover {
  background: linear-gradient(135deg, var(--sage-mist), var(--ocean-glass));
  transform: translateX(4px);
}

/* ═══ RTL SUPPORT ═══ */
.rtl .nav-link::after {
  left: 15%;
  right: 15%;
}

.rtl .cart-badge {
  right: auto;
  left: -12px;
}

.rtl .dropdown-link {
  text-align: end;
}

.rtl .dropdown-link:hover {
  padding-inline-start: var(--space-xl);
  padding-inline-end: calc(var(--space-xl) + 4px);
}

.rtl .dropdown-link::before {
  left: auto;
  right: 0;
}

.rtl .mobile-nav-link:hover {
  transform: translateX(-4px);
}

/* ═══ RESPONSIVE DESIGN ═══ */
@media (max-width: 768px) {
  .header-content {
    flex-wrap: wrap;
    padding: var(--space-md) var(--space-lg);
    gap: var(--space-lg);
  }
  
  .search-form {
    order: 3;
    width: 100%;
    max-width: none;
    margin-top: var(--space-md);
  }
  
  .nav-menu {
    display: none;
  }
  
  .mobile-menu-toggle {
    display: block;
  }
  
  .mobile-menu {
    display: block;
  }
  
  .logo {
    font-size: 1.5rem;
  }
  
  .search-button {
    padding: var(--space-sm) var(--space-lg);
    font-size: 0.8rem;
  }
}