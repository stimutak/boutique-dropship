8c5a3445e02fcbd08bd8cb09ef20064e
const request = require('supertest');
const express = require('express');
const {
  AppError,
  globalErrorHandler
} = require('../middleware/errorHandler');
const {
  ErrorCodes
} = require('../utils/errorHandler');
describe('Error Standardization Integration', () => {
  let app;
  beforeEach(() => {
    app = express();
    app.use(express.json());

    // Test routes that demonstrate current error patterns
    app.get('/auth-error', (req, res, next) => {
      // Current auth.js pattern
      res.status(401).json({
        success: false,
        error: {
          code: 'INVALID_CREDENTIALS',
          message: 'Invalid email or password'
        }
      });
    });
    app.get('/product-error', (req, res, next) => {
      // Current products.js pattern
      res.status(404).json({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Product not found'
        }
      });
    });
    app.get('/cart-error', (req, res, next) => {
      // Current cart.js pattern
      res.status(500).json({
        success: false,
        error: error.message
      });
    });
    app.get('/payment-webhook-error', (req, res, next) => {
      // Current payments.js webhook pattern
      res.status(400).send('Payment ID is required');
    });

    // Routes using AppError (standardized)
    app.get('/standardized-error', (req, res, next) => {
      next(new AppError('Product not found', 404, ErrorCodes.PRODUCT_NOT_FOUND));
    });
    app.use(globalErrorHandler);
  });
  test('auth route should return standardized error format', async () => {
    const response = await request(app).get('/auth-error').expect(401);
    expect(response.body).toEqual({
      success: false,
      error: {
        code: 'INVALID_CREDENTIALS',
        message: 'Invalid email or password'
      }
    });
  });
  test('product route should return standardized error format', async () => {
    const response = await request(app).get('/product-error').expect(404);
    expect(response.body).toEqual({
      success: false,
      error: {
        code: 'PRODUCT_NOT_FOUND',
        message: 'Product not found'
      }
    });
  });
  test('standardized error using AppError should match format', async () => {
    const response = await request(app).get('/standardized-error').expect(404);
    expect(response.body).toEqual({
      success: false,
      error: {
        code: 'PRODUCT_NOT_FOUND',
        message: 'Product not found'
      }
    });
  });
  test('webhook error should return plain text', async () => {
    const response = await request(app).get('/payment-webhook-error').expect(400);
    expect(response.text).toBe('Payment ID is required');
    expect(response.headers['content-type']).toContain('text/html');
  });
});

// Test to verify all error codes are used consistently
describe('Error Code Usage', () => {
  const routeFiles = [{
    file: 'auth.js',
    codes: ['INVALID_CREDENTIALS', 'USER_EXISTS', 'VALIDATION_ERROR']
  }, {
    file: 'products.js',
    codes: ['PRODUCT_NOT_FOUND', 'PRODUCTS_FETCH_ERROR']
  }, {
    file: 'cart.js',
    codes: ['CART_ADD_ERROR', 'MAX_QUANTITY_EXCEEDED', 'ITEM_NOT_FOUND']
  }, {
    file: 'orders.js',
    codes: ['ORDER_NOT_FOUND', 'ORDER_CREATE_ERROR']
  }, {
    file: 'payments.js',
    codes: ['PAYMENT_FAILED', 'PAYMENT_REQUIRED']
  }];
  test('all route error codes should be defined in ErrorCodes', () => {
    routeFiles.forEach(({
      file,
      codes
    }) => {
      codes.forEach(code => {
        expect(ErrorCodes[code]).toBeDefined();
        expect(ErrorCodes[code]).toBe(code);
      });
    });
  });
});

// Test i18n support for errors
describe('Error i18n Support', () => {
  test('error messages should support translation', () => {
    const mockI18n = key => {
      const translations = {
        'errors.PRODUCT_NOT_FOUND': 'Producto no encontrado',
        'errors.INVALID_CREDENTIALS': 'Correo o contraseña inválidos'
      };
      return translations[key] || key;
    };
    const {
      formatError
    } = require('../utils/errorHandler');
    const spanishError = formatError('PRODUCT_NOT_FOUND', 'Product not found', null, null, mockI18n);
    expect(spanishError.error.message).toBe('Producto no encontrado');
  });
  test('should fallback to default message when translation not found', () => {
    const mockI18n = key => key; // No translations available

    const {
      formatError
    } = require('../utils/errorHandler');
    const error = formatError('CUSTOM_ERROR', 'Custom error message', null, null, mockI18n);
    expect(error.error.message).toBe('Custom error message');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImV4cHJlc3MiLCJBcHBFcnJvciIsImdsb2JhbEVycm9ySGFuZGxlciIsIkVycm9yQ29kZXMiLCJkZXNjcmliZSIsImFwcCIsImJlZm9yZUVhY2giLCJ1c2UiLCJqc29uIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInN0YXR1cyIsInN1Y2Nlc3MiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic2VuZCIsIlBST0RVQ1RfTk9UX0ZPVU5EIiwidGVzdCIsInJlc3BvbnNlIiwiZXhwZWN0IiwiYm9keSIsInRvRXF1YWwiLCJ0ZXh0IiwidG9CZSIsImhlYWRlcnMiLCJ0b0NvbnRhaW4iLCJyb3V0ZUZpbGVzIiwiZmlsZSIsImNvZGVzIiwiZm9yRWFjaCIsInRvQmVEZWZpbmVkIiwibW9ja0kxOG4iLCJrZXkiLCJ0cmFuc2xhdGlvbnMiLCJmb3JtYXRFcnJvciIsInNwYW5pc2hFcnJvciJdLCJzb3VyY2VzIjpbImVycm9yU3RhbmRhcmRpemF0aW9uLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHsgQXBwRXJyb3IsIGdsb2JhbEVycm9ySGFuZGxlciB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9lcnJvckhhbmRsZXInKTtcbmNvbnN0IHsgRXJyb3JDb2RlcyB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZXJyb3JIYW5kbGVyJyk7XG5cbmRlc2NyaWJlKCdFcnJvciBTdGFuZGFyZGl6YXRpb24gSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gIGxldCBhcHA7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYXBwID0gZXhwcmVzcygpO1xuICAgIGFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuICAgIFxuICAgIC8vIFRlc3Qgcm91dGVzIHRoYXQgZGVtb25zdHJhdGUgY3VycmVudCBlcnJvciBwYXR0ZXJuc1xuICAgIGFwcC5nZXQoJy9hdXRoLWVycm9yJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAvLyBDdXJyZW50IGF1dGguanMgcGF0dGVyblxuICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9DUkVERU5USUFMUycsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgYXBwLmdldCgnL3Byb2R1Y3QtZXJyb3InLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgIC8vIEN1cnJlbnQgcHJvZHVjdHMuanMgcGF0dGVyblxuICAgICAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnUFJPRFVDVF9OT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IG5vdCBmb3VuZCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBhcHAuZ2V0KCcvY2FydC1lcnJvcicsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgLy8gQ3VycmVudCBjYXJ0LmpzIHBhdHRlcm5cbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH0pO1xuXG4gICAgYXBwLmdldCgnL3BheW1lbnQtd2ViaG9vay1lcnJvcicsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgLy8gQ3VycmVudCBwYXltZW50cy5qcyB3ZWJob29rIHBhdHRlcm5cbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKCdQYXltZW50IElEIGlzIHJlcXVpcmVkJyk7XG4gICAgfSk7XG5cbiAgICAvLyBSb3V0ZXMgdXNpbmcgQXBwRXJyb3IgKHN0YW5kYXJkaXplZClcbiAgICBhcHAuZ2V0KCcvc3RhbmRhcmRpemVkLWVycm9yJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICBuZXh0KG5ldyBBcHBFcnJvcignUHJvZHVjdCBub3QgZm91bmQnLCA0MDQsIEVycm9yQ29kZXMuUFJPRFVDVF9OT1RfRk9VTkQpKTtcbiAgICB9KTtcblxuICAgIGFwcC51c2UoZ2xvYmFsRXJyb3JIYW5kbGVyKTtcbiAgfSk7XG5cbiAgdGVzdCgnYXV0aCByb3V0ZSBzaG91bGQgcmV0dXJuIHN0YW5kYXJkaXplZCBlcnJvciBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgIC5nZXQoJy9hdXRoLWVycm9yJylcbiAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ0lOVkFMSURfQ1JFREVOVElBTFMnLFxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCdcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgncHJvZHVjdCByb3V0ZSBzaG91bGQgcmV0dXJuIHN0YW5kYXJkaXplZCBlcnJvciBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgIC5nZXQoJy9wcm9kdWN0LWVycm9yJylcbiAgICAgIC5leHBlY3QoNDA0KTtcblxuICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ1BST0RVQ1RfTk9UX0ZPVU5EJyxcbiAgICAgICAgbWVzc2FnZTogJ1Byb2R1Y3Qgbm90IGZvdW5kJ1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICB0ZXN0KCdzdGFuZGFyZGl6ZWQgZXJyb3IgdXNpbmcgQXBwRXJyb3Igc2hvdWxkIG1hdGNoIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgLmdldCgnL3N0YW5kYXJkaXplZC1lcnJvcicpXG4gICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IG5vdCBmb3VuZCdcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgdGVzdCgnd2ViaG9vayBlcnJvciBzaG91bGQgcmV0dXJuIHBsYWluIHRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgIC5nZXQoJy9wYXltZW50LXdlYmhvb2stZXJyb3InKVxuICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgZXhwZWN0KHJlc3BvbnNlLnRleHQpLnRvQmUoJ1BheW1lbnQgSUQgaXMgcmVxdWlyZWQnKTtcbiAgICBleHBlY3QocmVzcG9uc2UuaGVhZGVyc1snY29udGVudC10eXBlJ10pLnRvQ29udGFpbigndGV4dC9odG1sJyk7XG4gIH0pO1xufSk7XG5cbi8vIFRlc3QgdG8gdmVyaWZ5IGFsbCBlcnJvciBjb2RlcyBhcmUgdXNlZCBjb25zaXN0ZW50bHlcbmRlc2NyaWJlKCdFcnJvciBDb2RlIFVzYWdlJywgKCkgPT4ge1xuICBjb25zdCByb3V0ZUZpbGVzID0gW1xuICAgIHsgZmlsZTogJ2F1dGguanMnLCBjb2RlczogWydJTlZBTElEX0NSRURFTlRJQUxTJywgJ1VTRVJfRVhJU1RTJywgJ1ZBTElEQVRJT05fRVJST1InXSB9LFxuICAgIHsgZmlsZTogJ3Byb2R1Y3RzLmpzJywgY29kZXM6IFsnUFJPRFVDVF9OT1RfRk9VTkQnLCAnUFJPRFVDVFNfRkVUQ0hfRVJST1InXSB9LFxuICAgIHsgZmlsZTogJ2NhcnQuanMnLCBjb2RlczogWydDQVJUX0FERF9FUlJPUicsICdNQVhfUVVBTlRJVFlfRVhDRUVERUQnLCAnSVRFTV9OT1RfRk9VTkQnXSB9LFxuICAgIHsgZmlsZTogJ29yZGVycy5qcycsIGNvZGVzOiBbJ09SREVSX05PVF9GT1VORCcsICdPUkRFUl9DUkVBVEVfRVJST1InXSB9LFxuICAgIHsgZmlsZTogJ3BheW1lbnRzLmpzJywgY29kZXM6IFsnUEFZTUVOVF9GQUlMRUQnLCAnUEFZTUVOVF9SRVFVSVJFRCddIH1cbiAgXTtcblxuICB0ZXN0KCdhbGwgcm91dGUgZXJyb3IgY29kZXMgc2hvdWxkIGJlIGRlZmluZWQgaW4gRXJyb3JDb2RlcycsICgpID0+IHtcbiAgICByb3V0ZUZpbGVzLmZvckVhY2goKHsgZmlsZSwgY29kZXMgfSkgPT4ge1xuICAgICAgY29kZXMuZm9yRWFjaChjb2RlID0+IHtcbiAgICAgICAgZXhwZWN0KEVycm9yQ29kZXNbY29kZV0pLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdChFcnJvckNvZGVzW2NvZGVdKS50b0JlKGNvZGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbi8vIFRlc3QgaTE4biBzdXBwb3J0IGZvciBlcnJvcnNcbmRlc2NyaWJlKCdFcnJvciBpMThuIFN1cHBvcnQnLCAoKSA9PiB7XG4gIHRlc3QoJ2Vycm9yIG1lc3NhZ2VzIHNob3VsZCBzdXBwb3J0IHRyYW5zbGF0aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tJMThuID0gKGtleSkgPT4ge1xuICAgICAgY29uc3QgdHJhbnNsYXRpb25zID0ge1xuICAgICAgICAnZXJyb3JzLlBST0RVQ1RfTk9UX0ZPVU5EJzogJ1Byb2R1Y3RvIG5vIGVuY29udHJhZG8nLFxuICAgICAgICAnZXJyb3JzLklOVkFMSURfQ1JFREVOVElBTFMnOiAnQ29ycmVvIG8gY29udHJhc2XDsWEgaW52w6FsaWRvcydcbiAgICAgIH07XG4gICAgICByZXR1cm4gdHJhbnNsYXRpb25zW2tleV0gfHwga2V5O1xuICAgIH07XG5cbiAgICBjb25zdCB7IGZvcm1hdEVycm9yIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvckhhbmRsZXInKTtcbiAgICBcbiAgICBjb25zdCBzcGFuaXNoRXJyb3IgPSBmb3JtYXRFcnJvcignUFJPRFVDVF9OT1RfRk9VTkQnLCAnUHJvZHVjdCBub3QgZm91bmQnLCBudWxsLCBudWxsLCBtb2NrSTE4bik7XG4gICAgZXhwZWN0KHNwYW5pc2hFcnJvci5lcnJvci5tZXNzYWdlKS50b0JlKCdQcm9kdWN0byBubyBlbmNvbnRyYWRvJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBmYWxsYmFjayB0byBkZWZhdWx0IG1lc3NhZ2Ugd2hlbiB0cmFuc2xhdGlvbiBub3QgZm91bmQnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0kxOG4gPSAoa2V5KSA9PiBrZXk7IC8vIE5vIHRyYW5zbGF0aW9ucyBhdmFpbGFibGVcbiAgICBcbiAgICBjb25zdCB7IGZvcm1hdEVycm9yIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvckhhbmRsZXInKTtcbiAgICBcbiAgICBjb25zdCBlcnJvciA9IGZvcm1hdEVycm9yKCdDVVNUT01fRVJST1InLCAnQ3VzdG9tIGVycm9yIG1lc3NhZ2UnLCBudWxsLCBudWxsLCBtb2NrSTE4bik7XG4gICAgZXhwZWN0KGVycm9yLmVycm9yLm1lc3NhZ2UpLnRvQmUoJ0N1c3RvbSBlcnJvciBtZXNzYWdlJyk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFB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