ad0d8eaf89ef10e16f5f6884012d11f3
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');
const userSchema = new mongoose.Schema({
  email: {
    type: String,
    required: true,
    unique: true,
    lowercase: true,
    trim: true
  },
  password: {
    type: String,
    required: true,
    minlength: 6
  },
  firstName: {
    type: String,
    required: true,
    trim: true
  },
  lastName: {
    type: String,
    required: true,
    trim: true
  },
  phone: {
    type: String,
    trim: true
  },
  addresses: [{
    type: {
      type: String,
      enum: ['shipping', 'billing'],
      required: true
    },
    firstName: {
      type: String,
      required: true
    },
    lastName: {
      type: String,
      required: true
    },
    street: {
      type: String,
      required: true
    },
    city: {
      type: String,
      required: true
    },
    state: {
      type: String,
      required: true
    },
    zipCode: {
      type: String,
      required: true
    },
    country: {
      type: String,
      required: true,
      default: 'US'
    },
    phone: String,
    isDefault: {
      type: Boolean,
      default: false
    }
  }],
  isActive: {
    type: Boolean,
    default: true
  },
  isAdmin: {
    type: Boolean,
    default: false
  },
  lastLogin: Date,
  passwordResetToken: String,
  passwordResetExpiry: Date,
  preferences: {
    newsletter: {
      type: Boolean,
      default: false
    },
    notifications: {
      type: Boolean,
      default: true
    },
    emailPreferences: {
      orderConfirmations: {
        type: Boolean,
        default: true
      },
      paymentReceipts: {
        type: Boolean,
        default: true
      },
      orderUpdates: {
        type: Boolean,
        default: true
      },
      promotionalEmails: {
        type: Boolean,
        default: false
      },
      welcomeEmails: {
        type: Boolean,
        default: true
      }
    }
  }
}, {
  timestamps: true
});

// Indexes for performance
userSchema.index({
  email: 1
});
userSchema.index({
  isActive: 1
});
userSchema.index({
  lastLogin: -1
});

// Pre-save middleware
userSchema.pre('save', async function (next) {
  if (!this.isModified('password')) return next();
  this.password = await bcrypt.hash(this.password, 12);
  next();
});

// Authentication method
userSchema.methods.comparePassword = async function (candidatePassword) {
  return bcrypt.compare(candidatePassword, this.password);
};

// Method to get default shipping address
userSchema.methods.getDefaultShippingAddress = function () {
  return this.addresses.find(addr => addr.type === 'shipping' && addr.isDefault) || this.addresses.find(addr => addr.type === 'shipping');
};

// Method to get default billing address
userSchema.methods.getDefaultBillingAddress = function () {
  return this.addresses.find(addr => addr.type === 'billing' && addr.isDefault) || this.addresses.find(addr => addr.type === 'billing') || this.getDefaultShippingAddress(); // Fallback to shipping if no billing
};

// Method to add or update address
userSchema.methods.addAddress = function (addressData) {
  // If this is set as default, unset other defaults of the same type
  if (addressData.isDefault) {
    this.addresses.forEach(addr => {
      if (addr.type === addressData.type) {
        addr.isDefault = false;
      }
    });
  }
  this.addresses.push(addressData);
  return this.save();
};

// Method to update address
userSchema.methods.updateAddress = function (addressId, updateData) {
  const address = this.addresses.id(addressId);
  if (!address) return null;

  // If setting as default, unset other defaults of the same type
  if (updateData.isDefault) {
    this.addresses.forEach(addr => {
      if (addr.type === address.type && addr._id.toString() !== addressId) {
        addr.isDefault = false;
      }
    });
  }
  Object.assign(address, updateData);
  return this.save();
};

// Method to remove address
userSchema.methods.removeAddress = function (addressId) {
  this.addresses.pull(addressId);
  return this.save();
};

// Method to update email preferences
userSchema.methods.updateEmailPreferences = function (preferences) {
  Object.assign(this.preferences.emailPreferences, preferences);
  return this.save();
};

// Method to check if user wants specific email type
userSchema.methods.wantsEmail = function (emailType) {
  if (!this.preferences.notifications) return false;
  return this.preferences.emailPreferences[emailType] !== false;
};

// Method to get public user data (excludes sensitive info)
userSchema.methods.toPublicJSON = function () {
  return {
    _id: this._id,
    email: this.email,
    firstName: this.firstName,
    lastName: this.lastName,
    phone: this.phone,
    addresses: this.addresses,
    preferences: this.preferences,
    createdAt: this.createdAt,
    updatedAt: this.updatedAt
  };
};
module.exports = mongoose.model('User', userSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJiY3J5cHQiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwiZW1haWwiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJsb3dlcmNhc2UiLCJ0cmltIiwicGFzc3dvcmQiLCJtaW5sZW5ndGgiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBob25lIiwiYWRkcmVzc2VzIiwiZW51bSIsInN0cmVldCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJjb3VudHJ5IiwiZGVmYXVsdCIsImlzRGVmYXVsdCIsIkJvb2xlYW4iLCJpc0FjdGl2ZSIsImlzQWRtaW4iLCJsYXN0TG9naW4iLCJEYXRlIiwicGFzc3dvcmRSZXNldFRva2VuIiwicGFzc3dvcmRSZXNldEV4cGlyeSIsInByZWZlcmVuY2VzIiwibmV3c2xldHRlciIsIm5vdGlmaWNhdGlvbnMiLCJlbWFpbFByZWZlcmVuY2VzIiwib3JkZXJDb25maXJtYXRpb25zIiwicGF5bWVudFJlY2VpcHRzIiwib3JkZXJVcGRhdGVzIiwicHJvbW90aW9uYWxFbWFpbHMiLCJ3ZWxjb21lRW1haWxzIiwidGltZXN0YW1wcyIsImluZGV4IiwicHJlIiwibmV4dCIsImlzTW9kaWZpZWQiLCJoYXNoIiwibWV0aG9kcyIsImNvbXBhcmVQYXNzd29yZCIsImNhbmRpZGF0ZVBhc3N3b3JkIiwiY29tcGFyZSIsImdldERlZmF1bHRTaGlwcGluZ0FkZHJlc3MiLCJmaW5kIiwiYWRkciIsImdldERlZmF1bHRCaWxsaW5nQWRkcmVzcyIsImFkZEFkZHJlc3MiLCJhZGRyZXNzRGF0YSIsImZvckVhY2giLCJwdXNoIiwic2F2ZSIsInVwZGF0ZUFkZHJlc3MiLCJhZGRyZXNzSWQiLCJ1cGRhdGVEYXRhIiwiYWRkcmVzcyIsImlkIiwiX2lkIiwidG9TdHJpbmciLCJPYmplY3QiLCJhc3NpZ24iLCJyZW1vdmVBZGRyZXNzIiwicHVsbCIsInVwZGF0ZUVtYWlsUHJlZmVyZW5jZXMiLCJ3YW50c0VtYWlsIiwiZW1haWxUeXBlIiwidG9QdWJsaWNKU09OIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZXMiOlsiVXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIGVtYWlsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgICBsb3dlcmNhc2U6IHRydWUsXG4gICAgdHJpbTogdHJ1ZVxuICB9LFxuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBtaW5sZW5ndGg6IDZcbiAgfSxcbiAgZmlyc3ROYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIHRyaW06IHRydWVcbiAgfSxcbiAgbGFzdE5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdHJpbTogdHJ1ZVxuICB9LFxuICBwaG9uZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB0cmltOiB0cnVlXG4gIH0sXG4gIGFkZHJlc3NlczogW3tcbiAgICB0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBlbnVtOiBbJ3NoaXBwaW5nJywgJ2JpbGxpbmcnXSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBmaXJzdE5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGxhc3ROYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBzdHJlZXQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGNpdHk6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHN0YXRlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICB6aXBDb2RlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjb3VudHJ5OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6ICdVUycgfSxcbiAgICBwaG9uZTogU3RyaW5nLFxuICAgIGlzRGVmYXVsdDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9XG4gIH1dLFxuICBpc0FjdGl2ZToge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9LFxuICBpc0FkbWluOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9LFxuICBsYXN0TG9naW46IERhdGUsXG4gIHBhc3N3b3JkUmVzZXRUb2tlbjogU3RyaW5nLFxuICBwYXNzd29yZFJlc2V0RXhwaXJ5OiBEYXRlLFxuICBwcmVmZXJlbmNlczoge1xuICAgIG5ld3NsZXR0ZXI6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICBub3RpZmljYXRpb25zOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSxcbiAgICBlbWFpbFByZWZlcmVuY2VzOiB7XG4gICAgICBvcmRlckNvbmZpcm1hdGlvbnM6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgICAgcGF5bWVudFJlY2VpcHRzOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSxcbiAgICAgIG9yZGVyVXBkYXRlczogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH0sXG4gICAgICBwcm9tb3Rpb25hbEVtYWlsczogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAgd2VsY29tZUVtYWlsczogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB0cnVlIH1cbiAgICB9XG4gIH1cbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbi8vIEluZGV4ZXMgZm9yIHBlcmZvcm1hbmNlXG51c2VyU2NoZW1hLmluZGV4KHsgZW1haWw6IDEgfSk7XG51c2VyU2NoZW1hLmluZGV4KHsgaXNBY3RpdmU6IDEgfSk7XG51c2VyU2NoZW1hLmluZGV4KHsgbGFzdExvZ2luOiAtMSB9KTtcblxuLy8gUHJlLXNhdmUgbWlkZGxld2FyZVxudXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbihuZXh0KSB7XG4gIGlmICghdGhpcy5pc01vZGlmaWVkKCdwYXNzd29yZCcpKSByZXR1cm4gbmV4dCgpO1xuICB0aGlzLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2godGhpcy5wYXNzd29yZCwgMTIpO1xuICBuZXh0KCk7XG59KTtcblxuLy8gQXV0aGVudGljYXRpb24gbWV0aG9kXG51c2VyU2NoZW1hLm1ldGhvZHMuY29tcGFyZVBhc3N3b3JkID0gYXN5bmMgZnVuY3Rpb24oY2FuZGlkYXRlUGFzc3dvcmQpIHtcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKGNhbmRpZGF0ZVBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkKTtcbn07XG5cbi8vIE1ldGhvZCB0byBnZXQgZGVmYXVsdCBzaGlwcGluZyBhZGRyZXNzXG51c2VyU2NoZW1hLm1ldGhvZHMuZ2V0RGVmYXVsdFNoaXBwaW5nQWRkcmVzcyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5hZGRyZXNzZXMuZmluZChhZGRyID0+IGFkZHIudHlwZSA9PT0gJ3NoaXBwaW5nJyAmJiBhZGRyLmlzRGVmYXVsdCkgfHxcbiAgICAgICAgIHRoaXMuYWRkcmVzc2VzLmZpbmQoYWRkciA9PiBhZGRyLnR5cGUgPT09ICdzaGlwcGluZycpO1xufTtcblxuLy8gTWV0aG9kIHRvIGdldCBkZWZhdWx0IGJpbGxpbmcgYWRkcmVzc1xudXNlclNjaGVtYS5tZXRob2RzLmdldERlZmF1bHRCaWxsaW5nQWRkcmVzcyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5hZGRyZXNzZXMuZmluZChhZGRyID0+IGFkZHIudHlwZSA9PT0gJ2JpbGxpbmcnICYmIGFkZHIuaXNEZWZhdWx0KSB8fFxuICAgICAgICAgdGhpcy5hZGRyZXNzZXMuZmluZChhZGRyID0+IGFkZHIudHlwZSA9PT0gJ2JpbGxpbmcnKSB8fFxuICAgICAgICAgdGhpcy5nZXREZWZhdWx0U2hpcHBpbmdBZGRyZXNzKCk7IC8vIEZhbGxiYWNrIHRvIHNoaXBwaW5nIGlmIG5vIGJpbGxpbmdcbn07XG5cbi8vIE1ldGhvZCB0byBhZGQgb3IgdXBkYXRlIGFkZHJlc3NcbnVzZXJTY2hlbWEubWV0aG9kcy5hZGRBZGRyZXNzID0gZnVuY3Rpb24oYWRkcmVzc0RhdGEpIHtcbiAgLy8gSWYgdGhpcyBpcyBzZXQgYXMgZGVmYXVsdCwgdW5zZXQgb3RoZXIgZGVmYXVsdHMgb2YgdGhlIHNhbWUgdHlwZVxuICBpZiAoYWRkcmVzc0RhdGEuaXNEZWZhdWx0KSB7XG4gICAgdGhpcy5hZGRyZXNzZXMuZm9yRWFjaChhZGRyID0+IHtcbiAgICAgIGlmIChhZGRyLnR5cGUgPT09IGFkZHJlc3NEYXRhLnR5cGUpIHtcbiAgICAgICAgYWRkci5pc0RlZmF1bHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgdGhpcy5hZGRyZXNzZXMucHVzaChhZGRyZXNzRGF0YSk7XG4gIHJldHVybiB0aGlzLnNhdmUoKTtcbn07XG5cbi8vIE1ldGhvZCB0byB1cGRhdGUgYWRkcmVzc1xudXNlclNjaGVtYS5tZXRob2RzLnVwZGF0ZUFkZHJlc3MgPSBmdW5jdGlvbihhZGRyZXNzSWQsIHVwZGF0ZURhdGEpIHtcbiAgY29uc3QgYWRkcmVzcyA9IHRoaXMuYWRkcmVzc2VzLmlkKGFkZHJlc3NJZCk7XG4gIGlmICghYWRkcmVzcykgcmV0dXJuIG51bGw7XG4gIFxuICAvLyBJZiBzZXR0aW5nIGFzIGRlZmF1bHQsIHVuc2V0IG90aGVyIGRlZmF1bHRzIG9mIHRoZSBzYW1lIHR5cGVcbiAgaWYgKHVwZGF0ZURhdGEuaXNEZWZhdWx0KSB7XG4gICAgdGhpcy5hZGRyZXNzZXMuZm9yRWFjaChhZGRyID0+IHtcbiAgICAgIGlmIChhZGRyLnR5cGUgPT09IGFkZHJlc3MudHlwZSAmJiBhZGRyLl9pZC50b1N0cmluZygpICE9PSBhZGRyZXNzSWQpIHtcbiAgICAgICAgYWRkci5pc0RlZmF1bHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgT2JqZWN0LmFzc2lnbihhZGRyZXNzLCB1cGRhdGVEYXRhKTtcbiAgcmV0dXJuIHRoaXMuc2F2ZSgpO1xufTtcblxuLy8gTWV0aG9kIHRvIHJlbW92ZSBhZGRyZXNzXG51c2VyU2NoZW1hLm1ldGhvZHMucmVtb3ZlQWRkcmVzcyA9IGZ1bmN0aW9uKGFkZHJlc3NJZCkge1xuICB0aGlzLmFkZHJlc3Nlcy5wdWxsKGFkZHJlc3NJZCk7XG4gIHJldHVybiB0aGlzLnNhdmUoKTtcbn07XG5cbi8vIE1ldGhvZCB0byB1cGRhdGUgZW1haWwgcHJlZmVyZW5jZXNcbnVzZXJTY2hlbWEubWV0aG9kcy51cGRhdGVFbWFpbFByZWZlcmVuY2VzID0gZnVuY3Rpb24ocHJlZmVyZW5jZXMpIHtcbiAgT2JqZWN0LmFzc2lnbih0aGlzLnByZWZlcmVuY2VzLmVtYWlsUHJlZmVyZW5jZXMsIHByZWZlcmVuY2VzKTtcbiAgcmV0dXJuIHRoaXMuc2F2ZSgpO1xufTtcblxuLy8gTWV0aG9kIHRvIGNoZWNrIGlmIHVzZXIgd2FudHMgc3BlY2lmaWMgZW1haWwgdHlwZVxudXNlclNjaGVtYS5tZXRob2RzLndhbnRzRW1haWwgPSBmdW5jdGlvbihlbWFpbFR5cGUpIHtcbiAgaWYgKCF0aGlzLnByZWZlcmVuY2VzLm5vdGlmaWNhdGlvbnMpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRoaXMucHJlZmVyZW5jZXMuZW1haWxQcmVmZXJlbmNlc1tlbWFpbFR5cGVdICE9PSBmYWxzZTtcbn07XG5cbi8vIE1ldGhvZCB0byBnZXQgcHVibGljIHVzZXIgZGF0YSAoZXhjbHVkZXMgc2Vuc2l0aXZlIGluZm8pXG51c2VyU2NoZW1hLm1ldGhvZHMudG9QdWJsaWNKU09OID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgX2lkOiB0aGlzLl9pZCxcbiAgICBlbWFpbDogdGhpcy5lbWFpbCxcbiAgICBmaXJzdE5hbWU6IHRoaXMuZmlyc3ROYW1lLFxuICAgIGxhc3ROYW1lOiB0aGlzLmxhc3ROYW1lLFxuICAgIHBob25lOiB0aGlzLnBob25lLFxuICAgIGFkZHJlc3NlczogdGhpcy5hZGRyZXNzZXMsXG4gICAgcHJlZmVyZW5jZXM6IHRoaXMucHJlZmVyZW5jZXMsXG4gICAgY3JlYXRlZEF0OiB0aGlzLmNyZWF0ZWRBdCxcbiAgICB1cGRhdGVkQXQ6IHRoaXMudXBkYXRlZEF0XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgdXNlclNjaGVtYSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEMsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBRWxDLE1BQU1FLFVBQVUsR0FBRyxJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FBQztFQUNyQ0MsS0FBSyxFQUFFO0lBQ0xDLElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsSUFBSTtJQUNkQyxNQUFNLEVBQUUsSUFBSTtJQUNaQyxTQUFTLEVBQUUsSUFBSTtJQUNmQyxJQUFJLEVBQUU7RUFDUixDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUNSTixJQUFJLEVBQUVDLE1BQU07SUFDWkMsUUFBUSxFQUFFLElBQUk7SUFDZEssU0FBUyxFQUFFO0VBQ2IsQ0FBQztFQUNEQyxTQUFTLEVBQUU7SUFDVFIsSUFBSSxFQUFFQyxNQUFNO0lBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2RHLElBQUksRUFBRTtFQUNSLENBQUM7RUFDREksUUFBUSxF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LE1BQU0sQ0FBQ0wsT0FBTyxFQUFFRCxVQUFVLENBQUM7RUFDbEMsT0FBTyxJQUFJLENBQUNILElBQUksQ0FBQyxDQUFDO0FBQ3BCLENBQUM7O0FBRUQ7QUFDQXpELFVBQVUsQ0FBQzZDLE9BQU8sQ0FBQ3NCLGFBQWEsR0FBRyxVQUFTUixTQUFTLEVBQUU7RUFDckQsSUFBSSxDQUFDN0MsU0FBUyxDQUFDc0QsSUFBSSxDQUFDVCxTQUFTLENBQUM7RUFDOUIsT0FBTyxJQUFJLENBQUNGLElBQUksQ0FBQyxDQUFDO0FBQ3BCLENBQUM7O0FBRUQ7QUFDQXpELFVBQVUsQ0FBQzZDLE9BQU8sQ0FBQ3dCLHNCQUFzQixHQUFHLFVBQVN2QyxXQUFXLEVBQUU7RUFDaEVtQyxNQUFNLENBQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUNwQyxXQUFXLENBQUNHLGdCQUFnQixFQUFFSCxXQUFXLENBQUM7RUFDN0QsT0FBTyxJQUFJLENBQUMyQixJQUFJLENBQUMsQ0FBQztBQUNwQixDQUFDOztBQUVEO0FBQ0F6RCxVQUFVLENBQUM2QyxPQUFPLENBQUN5QixVQUFVLEdBQUcsVUFBU0MsU0FBUyxFQUFFO0VBQ2xELElBQUksQ0FBQyxJQUFJLENBQUN6QyxXQUFXLENBQUNFLGFBQWEsRUFBRSxPQUFPLEtBQUs7RUFDakQsT0FBTyxJQUFJLENBQUNGLFdBQVcsQ0FBQ0csZ0JBQWdCLENBQUNzQyxTQUFTLENBQUMsS0FBSyxLQUFLO0FBQy9ELENBQUM7O0FBRUQ7QUFDQXZFLFVBQVUsQ0FBQzZDLE9BQU8sQ0FBQzJCLFlBQVksR0FBRyxZQUFXO0VBQzNDLE9BQU87SUFDTFQsR0FBRyxFQUFFLElBQUksQ0FBQ0EsR0FBRztJQUNiN0QsS0FBSyxFQUFFLElBQUksQ0FBQ0EsS0FBSztJQUNqQlMsU0FBUyxFQUFFLElBQUksQ0FBQ0EsU0FBUztJQUN6QkMsUUFBUSxFQUFFLElBQUksQ0FBQ0EsUUFBUTtJQUN2QkMsS0FBSyxFQUFFLElBQUksQ0FBQ0EsS0FBSztJQUNqQkMsU0FBUyxFQUFFLElBQUksQ0FBQ0EsU0FBUztJQUN6QmdCLFdBQVcsRUFBRSxJQUFJLENBQUNBLFdBQVc7SUFDN0IyQyxTQUFTLEVBQUUsSUFBSSxDQUFDQSxTQUFTO0lBQ3pCQyxTQUFTLEVBQUUsSUFBSSxDQUFDQTtFQUNsQixDQUFDO0FBQ0gsQ0FBQztBQUVEQyxNQUFNLENBQUNDLE9BQU8sR0FBRy9FLFFBQVEsQ0FBQ2dGLEtBQUssQ0FBQyxNQUFNLEVBQUU3RSxVQUFVLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=