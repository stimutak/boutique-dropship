e78e01162d32ca1f1210c51db3e208d2
// Mock nodemailer
_getJestObj().mock('nodemailer', () => ({
  createTransport: jest.fn(() => ({
    sendMail: jest.fn()
  }))
}));
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const {
  sendOrderConfirmation,
  sendPaymentReceipt,
  sendOrderStatusUpdate,
  sendWelcomeEmail,
  sendPasswordResetEmail,
  sendWholesalerNotification,
  sendEmail,
  emailTemplates
} = require('../../utils/emailService');
const nodemailer = require('nodemailer');
describe('Email Service', () => {
  let mockTransporter;
  beforeEach(() => {
    mockTransporter = {
      sendMail: jest.fn()
    };
    nodemailer.createTransport.mockReturnValue(mockTransporter);

    // Set up environment variables for tests
    process.env.EMAIL_HOST = 'smtp.test.com';
    process.env.EMAIL_PORT = '587';
    process.env.EMAIL_USER = 'test@example.com';
    process.env.EMAIL_PASS = 'testpass';
  });
  afterEach(() => {
    jest.clearAllMocks();
  });
  describe('sendOrderConfirmation', () => {
    const mockOrderData = {
      orderNumber: 'ORD-123456',
      customerName: 'John Doe',
      items: [{
        productName: 'Crystal Healing Set',
        quantity: 2,
        price: 29.99
      }, {
        productName: 'Essential Oil Bundle',
        quantity: 1,
        price: 45.00
      }],
      total: 104.98,
      shippingAddress: {
        firstName: 'John',
        lastName: 'Doe',
        street: '123 Main St',
        city: 'Anytown',
        state: 'CA',
        zipCode: '12345',
        country: 'US'
      }
    };
    it('should send order confirmation email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendOrderConfirmation('customer@example.com', mockOrderData);
      expect(result.success).toBe(true);
      expect(result.messageId).toBe('test-message-id');
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'customer@example.com',
        subject: 'Order Confirmation - ORD-123456',
        text: expect.stringContaining('Thank you for your order!'),
        html: expect.stringContaining('Order Confirmation')
      });
    });
    it('should handle email sending failure', async () => {
      const error = new Error('SMTP connection failed');
      mockTransporter.sendMail.mockRejectedValue(error);
      const result = await sendOrderConfirmation('customer@example.com', mockOrderData);
      expect(result.success).toBe(false);
      expect(result.error).toBe('SMTP connection failed');
    });
  });
  describe('sendPaymentReceipt', () => {
    const mockPaymentData = {
      orderNumber: 'ORD-123456',
      customerName: 'John Doe',
      total: 104.98,
      paymentMethod: 'Credit Card',
      transactionId: 'txn_123456789',
      paidAt: new Date('2023-12-01T10:00:00Z')
    };
    it('should send payment receipt email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendPaymentReceipt('customer@example.com', mockPaymentData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'customer@example.com',
        subject: 'Payment Receipt - ORD-123456',
        text: expect.stringContaining('Your payment has been successfully processed!'),
        html: expect.stringContaining('Payment Receipt')
      });
    });
  });
  describe('sendOrderStatusUpdate', () => {
    const mockStatusData = {
      orderNumber: 'ORD-123456',
      customerName: 'John Doe',
      status: 'shipped',
      trackingNumber: 'TRK123456789'
    };
    it('should send order status update email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendOrderStatusUpdate('customer@example.com', mockStatusData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'customer@example.com',
        subject: 'Order Update - ORD-123456',
        text: expect.stringContaining('Great news! Your order has been shipped.'),
        html: expect.stringContaining('Order Update')
      });
    });
    it('should handle different order statuses', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const processingData = {
        ...mockStatusData,
        status: 'processing'
      };
      await sendOrderStatusUpdate('customer@example.com', processingData);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith(expect.objectContaining({
        text: expect.stringContaining('Your order is being processed')
      }));
    });
  });
  describe('sendWelcomeEmail', () => {
    const mockUserData = {
      firstName: 'John',
      email: 'john@example.com'
    };
    it('should send welcome email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendWelcomeEmail('john@example.com', mockUserData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'john@example.com',
        subject: 'Welcome to Our Holistic Store!',
        text: expect.stringContaining('Welcome to our holistic wellness community!'),
        html: expect.stringContaining('Welcome to Our Holistic Store!')
      });
    });
  });
  describe('sendPasswordResetEmail', () => {
    const mockResetData = {
      firstName: 'John',
      resetToken: 'reset-token-123',
      resetUrl: 'https://example.com/reset-password?token=reset-token-123'
    };
    it('should send password reset email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendPasswordResetEmail('john@example.com', mockResetData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'john@example.com',
        subject: 'Password Reset Request',
        text: expect.stringContaining('We received a request to reset your password'),
        html: expect.stringContaining('Password Reset Request')
      });
    });
  });
  describe('sendWholesalerNotification', () => {
    const mockOrderData = {
      orderNumber: 'ORD-123456',
      orderDate: '12/1/2023',
      shippingAddress: {
        firstName: 'John',
        lastName: 'Doe',
        street: '123 Main St',
        city: 'Anytown',
        state: 'CA',
        zipCode: '12345',
        country: 'US',
        phone: '555-1234'
      },
      items: [{
        wholesaler: {
          productCode: 'WS-CRYSTAL-001'
        },
        quantity: 2,
        productName: 'Crystal Healing Set'
      }],
      notes: 'Handle with care'
    };
    it('should send wholesaler notification email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendWholesalerNotification('wholesaler@example.com', mockOrderData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'wholesaler@example.com',
        subject: 'New Order - ORD-123456',
        text: expect.stringContaining('We have received a new order that requires fulfillment')
      });
    });
  });
  describe('sendEmail (generic)', () => {
    it('should send generic email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendEmail('recipient@example.com', 'Test Subject', 'Test message content', '<p>Test HTML content</p>');
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'recipient@example.com',
        subject: 'Test Subject',
        text: 'Test message content',
        html: '<p>Test HTML content</p>'
      });
    });
    it('should send text-only email when HTML is not provided', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendEmail('recipient@example.com', 'Test Subject', 'Test message content');
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'recipient@example.com',
        subject: 'Test Subject',
        text: 'Test message content'
      });
    });
  });
  describe('Email Templates', () => {
    it('should generate order confirmation template correctly', () => {
      const orderData = {
        orderNumber: 'ORD-123456',
        customerName: 'John Doe',
        items: [{
          productName: 'Test Product',
          quantity: 1,
          price: 29.99
        }],
        total: 29.99,
        shippingAddress: {
          firstName: 'John',
          lastName: 'Doe',
          street: '123 Main St',
          city: 'Anytown',
          state: 'CA',
          zipCode: '12345',
          country: 'US'
        }
      };
      const template = emailTemplates.orderConfirmation(orderData);
      expect(template.subject).toBe('Order Confirmation - ORD-123456');
      expect(template.text).toContain('Dear John Doe');
      expect(template.text).toContain('Order Number: ORD-123456');
      expect(template.html).toContain('Order Confirmation');
    });
    it('should generate payment receipt template correctly', () => {
      const paymentData = {
        orderNumber: 'ORD-123456',
        customerName: 'John Doe',
        total: 29.99,
        paymentMethod: 'Credit Card',
        transactionId: 'txn_123',
        paidAt: new Date('2023-12-01')
      };
      const template = emailTemplates.paymentReceipt(paymentData);
      expect(template.subject).toBe('Payment Receipt - ORD-123456');
      expect(template.text).toContain('Your payment has been successfully processed!');
      expect(template.html).toContain('Payment Receipt');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJjcmVhdGVUcmFuc3BvcnQiLCJqZXN0IiwiZm4iLCJzZW5kTWFpbCIsInJlcXVpcmUiLCJzZW5kT3JkZXJDb25maXJtYXRpb24iLCJzZW5kUGF5bWVudFJlY2VpcHQiLCJzZW5kT3JkZXJTdGF0dXNVcGRhdGUiLCJzZW5kV2VsY29tZUVtYWlsIiwic2VuZFBhc3N3b3JkUmVzZXRFbWFpbCIsInNlbmRXaG9sZXNhbGVyTm90aWZpY2F0aW9uIiwic2VuZEVtYWlsIiwiZW1haWxUZW1wbGF0ZXMiLCJub2RlbWFpbGVyIiwiZGVzY3JpYmUiLCJtb2NrVHJhbnNwb3J0ZXIiLCJiZWZvcmVFYWNoIiwibW9ja1JldHVyblZhbHVlIiwicHJvY2VzcyIsImVudiIsIkVNQUlMX0hPU1QiLCJFTUFJTF9QT1JUIiwiRU1BSUxfVVNFUiIsIkVNQUlMX1BBU1MiLCJhZnRlckVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja09yZGVyRGF0YSIsIm9yZGVyTnVtYmVyIiwiY3VzdG9tZXJOYW1lIiwiaXRlbXMiLCJwcm9kdWN0TmFtZSIsInF1YW50aXR5IiwicHJpY2UiLCJ0b3RhbCIsInNoaXBwaW5nQWRkcmVzcyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwic3RyZWV0IiwiY2l0eSIsInN0YXRlIiwiemlwQ29kZSIsImNvdW50cnkiLCJpdCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwibWVzc2FnZUlkIiwicmVzdWx0IiwiZXhwZWN0Iiwic3VjY2VzcyIsInRvQmUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImZyb20iLCJ0byIsInN1YmplY3QiLCJ0ZXh0Iiwic3RyaW5nQ29udGFpbmluZyIsImh0bWwiLCJlcnJvciIsIkVycm9yIiwibW9ja1JlamVjdGVkVmFsdWUiLCJtb2NrUGF5bWVudERhdGEiLCJwYXltZW50TWV0aG9kIiwidHJhbnNhY3Rpb25JZCIsInBhaWRBdCIsIkRhdGUiLCJtb2NrU3RhdHVzRGF0YSIsInN0YXR1cyIsInRyYWNraW5nTnVtYmVyIiwicHJvY2Vzc2luZ0RhdGEiLCJvYmplY3RDb250YWluaW5nIiwibW9ja1VzZXJEYXRhIiwiZW1haWwiLCJtb2NrUmVzZXREYXRhIiwicmVzZXRUb2tlbiIsInJlc2V0VXJsIiwib3JkZXJEYXRlIiwicGhvbmUiLCJ3aG9sZXNhbGVyIiwicHJvZHVjdENvZGUiLCJub3RlcyIsIm9yZGVyRGF0YSIsInRlbXBsYXRlIiwib3JkZXJDb25maXJtYXRpb24iLCJ0b0NvbnRhaW4iLCJwYXltZW50RGF0YSIsInBheW1lbnRSZWNlaXB0Il0sInNvdXJjZXMiOlsiZW1haWxTZXJ2aWNlLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1xuICBzZW5kT3JkZXJDb25maXJtYXRpb24sXG4gIHNlbmRQYXltZW50UmVjZWlwdCxcbiAgc2VuZE9yZGVyU3RhdHVzVXBkYXRlLFxuICBzZW5kV2VsY29tZUVtYWlsLFxuICBzZW5kUGFzc3dvcmRSZXNldEVtYWlsLFxuICBzZW5kV2hvbGVzYWxlck5vdGlmaWNhdGlvbixcbiAgc2VuZEVtYWlsLFxuICBlbWFpbFRlbXBsYXRlc1xufSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2VtYWlsU2VydmljZScpO1xuXG4vLyBNb2NrIG5vZGVtYWlsZXJcbmplc3QubW9jaygnbm9kZW1haWxlcicsICgpID0+ICh7XG4gIGNyZWF0ZVRyYW5zcG9ydDogamVzdC5mbigoKSA9PiAoe1xuICAgIHNlbmRNYWlsOiBqZXN0LmZuKClcbiAgfSkpXG59KSk7XG5cbmNvbnN0IG5vZGVtYWlsZXIgPSByZXF1aXJlKCdub2RlbWFpbGVyJyk7XG5cbmRlc2NyaWJlKCdFbWFpbCBTZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgbW9ja1RyYW5zcG9ydGVyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tUcmFuc3BvcnRlciA9IHtcbiAgICAgIHNlbmRNYWlsOiBqZXN0LmZuKClcbiAgICB9O1xuICAgIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0Lm1vY2tSZXR1cm5WYWx1ZShtb2NrVHJhbnNwb3J0ZXIpO1xuICAgIFxuICAgIC8vIFNldCB1cCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZm9yIHRlc3RzXG4gICAgcHJvY2Vzcy5lbnYuRU1BSUxfSE9TVCA9ICdzbXRwLnRlc3QuY29tJztcbiAgICBwcm9jZXNzLmVudi5FTUFJTF9QT1JUID0gJzU4Nyc7XG4gICAgcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiA9ICd0ZXN0QGV4YW1wbGUuY29tJztcbiAgICBwcm9jZXNzLmVudi5FTUFJTF9QQVNTID0gJ3Rlc3RwYXNzJztcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlbmRPcmRlckNvbmZpcm1hdGlvbicsICgpID0+IHtcbiAgICBjb25zdCBtb2NrT3JkZXJEYXRhID0ge1xuICAgICAgb3JkZXJOdW1iZXI6ICdPUkQtMTIzNDU2JyxcbiAgICAgIGN1c3RvbWVyTmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgIGl0ZW1zOiBbXG4gICAgICAgIHsgcHJvZHVjdE5hbWU6ICdDcnlzdGFsIEhlYWxpbmcgU2V0JywgcXVhbnRpdHk6IDIsIHByaWNlOiAyOS45OSB9LFxuICAgICAgICB7IHByb2R1Y3ROYW1lOiAnRXNzZW50aWFsIE9pbCBCdW5kbGUnLCBxdWFudGl0eTogMSwgcHJpY2U6IDQ1LjAwIH1cbiAgICAgIF0sXG4gICAgICB0b3RhbDogMTA0Ljk4LFxuICAgICAgc2hpcHBpbmdBZGRyZXNzOiB7XG4gICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgICAgIHN0cmVldDogJzEyMyBNYWluIFN0JyxcbiAgICAgICAgY2l0eTogJ0FueXRvd24nLFxuICAgICAgICBzdGF0ZTogJ0NBJyxcbiAgICAgICAgemlwQ29kZTogJzEyMzQ1JyxcbiAgICAgICAgY291bnRyeTogJ1VTJ1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IG1lc3NhZ2VJZDogJ3Rlc3QtbWVzc2FnZS1pZCcgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlbmRPcmRlckNvbmZpcm1hdGlvbignY3VzdG9tZXJAZXhhbXBsZS5jb20nLCBtb2NrT3JkZXJEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlSWQpLnRvQmUoJ3Rlc3QtbWVzc2FnZS1pZCcpO1xuICAgICAgZXhwZWN0KG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmcm9tOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHRvOiAnY3VzdG9tZXJAZXhhbXBsZS5jb20nLFxuICAgICAgICBzdWJqZWN0OiAnT3JkZXIgQ29uZmlybWF0aW9uIC0gT1JELTEyMzQ1NicsXG4gICAgICAgIHRleHQ6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdUaGFuayB5b3UgZm9yIHlvdXIgb3JkZXIhJyksXG4gICAgICAgIGh0bWw6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdPcmRlciBDb25maXJtYXRpb24nKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbWFpbCBzZW5kaW5nIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignU01UUCBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgbW9ja1RyYW5zcG9ydGVyLnNlbmRNYWlsLm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZE9yZGVyQ29uZmlybWF0aW9uKCdjdXN0b21lckBleGFtcGxlLmNvbScsIG1vY2tPcmRlckRhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnU01UUCBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2VuZFBheW1lbnRSZWNlaXB0JywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tQYXltZW50RGF0YSA9IHtcbiAgICAgIG9yZGVyTnVtYmVyOiAnT1JELTEyMzQ1NicsXG4gICAgICBjdXN0b21lck5hbWU6ICdKb2huIERvZScsXG4gICAgICB0b3RhbDogMTA0Ljk4LFxuICAgICAgcGF5bWVudE1ldGhvZDogJ0NyZWRpdCBDYXJkJyxcbiAgICAgIHRyYW5zYWN0aW9uSWQ6ICd0eG5fMTIzNDU2Nzg5JyxcbiAgICAgIHBhaWRBdDogbmV3IERhdGUoJzIwMjMtMTItMDFUMTA6MDA6MDBaJylcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBzZW5kIHBheW1lbnQgcmVjZWlwdCBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kUGF5bWVudFJlY2VpcHQoJ2N1c3RvbWVyQGV4YW1wbGUuY29tJywgbW9ja1BheW1lbnREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmcm9tOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHRvOiAnY3VzdG9tZXJAZXhhbXBsZS5jb20nLFxuICAgICAgICBzdWJqZWN0OiAnUGF5bWVudCBSZWNlaXB0IC0gT1JELTEyMzQ1NicsXG4gICAgICAgIHRleHQ6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdZb3VyIHBheW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHByb2Nlc3NlZCEnKSxcbiAgICAgICAgaHRtbDogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1BheW1lbnQgUmVjZWlwdCcpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlbmRPcmRlclN0YXR1c1VwZGF0ZScsICgpID0+IHtcbiAgICBjb25zdCBtb2NrU3RhdHVzRGF0YSA9IHtcbiAgICAgIG9yZGVyTnVtYmVyOiAnT1JELTEyMzQ1NicsXG4gICAgICBjdXN0b21lck5hbWU6ICdKb2huIERvZScsXG4gICAgICBzdGF0dXM6ICdzaGlwcGVkJyxcbiAgICAgIHRyYWNraW5nTnVtYmVyOiAnVFJLMTIzNDU2Nzg5J1xuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgb3JkZXIgc3RhdHVzIHVwZGF0ZSBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kT3JkZXJTdGF0dXNVcGRhdGUoJ2N1c3RvbWVyQGV4YW1wbGUuY29tJywgbW9ja1N0YXR1c0RhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja1RyYW5zcG9ydGVyLnNlbmRNYWlsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGZyb206ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgdG86ICdjdXN0b21lckBleGFtcGxlLmNvbScsXG4gICAgICAgIHN1YmplY3Q6ICdPcmRlciBVcGRhdGUgLSBPUkQtMTIzNDU2JyxcbiAgICAgICAgdGV4dDogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ0dyZWF0IG5ld3MhIFlvdXIgb3JkZXIgaGFzIGJlZW4gc2hpcHBlZC4nKSxcbiAgICAgICAgaHRtbDogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ09yZGVyIFVwZGF0ZScpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBvcmRlciBzdGF0dXNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IG1lc3NhZ2VJZDogJ3Rlc3QtbWVzc2FnZS1pZCcgfSk7XG5cbiAgICAgIGNvbnN0IHByb2Nlc3NpbmdEYXRhID0geyAuLi5tb2NrU3RhdHVzRGF0YSwgc3RhdHVzOiAncHJvY2Vzc2luZycgfTtcbiAgICAgIGF3YWl0IHNlbmRPcmRlclN0YXR1c1VwZGF0ZSgnY3VzdG9tZXJAZXhhbXBsZS5jb20nLCBwcm9jZXNzaW5nRGF0YSk7XG5cbiAgICAgIGV4cGVjdChtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGV4dDogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1lvdXIgb3JkZXIgaXMgYmVpbmcgcHJvY2Vzc2VkJylcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZW5kV2VsY29tZUVtYWlsJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tVc2VyRGF0YSA9IHtcbiAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJ1xuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgd2VsY29tZSBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kV2VsY29tZUVtYWlsKCdqb2huQGV4YW1wbGUuY29tJywgbW9ja1VzZXJEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmcm9tOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHRvOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICAgIHN1YmplY3Q6ICdXZWxjb21lIHRvIE91ciBIb2xpc3RpYyBTdG9yZSEnLFxuICAgICAgICB0ZXh0OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnV2VsY29tZSB0byBvdXIgaG9saXN0aWMgd2VsbG5lc3MgY29tbXVuaXR5IScpLFxuICAgICAgICBodG1sOiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnV2VsY29tZSB0byBPdXIgSG9saXN0aWMgU3RvcmUhJylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCcsICgpID0+IHtcbiAgICBjb25zdCBtb2NrUmVzZXREYXRhID0ge1xuICAgICAgZmlyc3ROYW1lOiAnSm9obicsXG4gICAgICByZXNldFRva2VuOiAncmVzZXQtdG9rZW4tMTIzJyxcbiAgICAgIHJlc2V0VXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9yZXNldC1wYXNzd29yZD90b2tlbj1yZXNldC10b2tlbi0xMjMnXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgc2VuZCBwYXNzd29yZCByZXNldCBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKCdqb2huQGV4YW1wbGUuY29tJywgbW9ja1Jlc2V0RGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZnJvbTogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICB0bzogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICBzdWJqZWN0OiAnUGFzc3dvcmQgUmVzZXQgUmVxdWVzdCcsXG4gICAgICAgIHRleHQ6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdXZSByZWNlaXZlZCBhIHJlcXVlc3QgdG8gcmVzZXQgeW91ciBwYXNzd29yZCcpLFxuICAgICAgICBodG1sOiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnUGFzc3dvcmQgUmVzZXQgUmVxdWVzdCcpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlbmRXaG9sZXNhbGVyTm90aWZpY2F0aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tPcmRlckRhdGEgPSB7XG4gICAgICBvcmRlck51bWJlcjogJ09SRC0xMjM0NTYnLFxuICAgICAgb3JkZXJEYXRlOiAnMTIvMS8yMDIzJyxcbiAgICAgIHNoaXBwaW5nQWRkcmVzczoge1xuICAgICAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICBzdHJlZXQ6ICcxMjMgTWFpbiBTdCcsXG4gICAgICAgIGNpdHk6ICdBbnl0b3duJyxcbiAgICAgICAgc3RhdGU6ICdDQScsXG4gICAgICAgIHppcENvZGU6ICcxMjM0NScsXG4gICAgICAgIGNvdW50cnk6ICdVUycsXG4gICAgICAgIHBob25lOiAnNTU1LTEyMzQnXG4gICAgICB9LFxuICAgICAgaXRlbXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHdob2xlc2FsZXI6IHsgcHJvZHVjdENvZGU6ICdXUy1DUllTVEFMLTAwMScgfSxcbiAgICAgICAgICBxdWFudGl0eTogMixcbiAgICAgICAgICBwcm9kdWN0TmFtZTogJ0NyeXN0YWwgSGVhbGluZyBTZXQnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBub3RlczogJ0hhbmRsZSB3aXRoIGNhcmUnXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgc2VuZCB3aG9sZXNhbGVyIG5vdGlmaWNhdGlvbiBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kV2hvbGVzYWxlck5vdGlmaWNhdGlvbignd2hvbGVzYWxlckBleGFtcGxlLmNvbScsIG1vY2tPcmRlckRhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja1RyYW5zcG9ydGVyLnNlbmRNYWlsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGZyb206ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgdG86ICd3aG9sZXNhbGVyQGV4YW1wbGUuY29tJyxcbiAgICAgICAgc3ViamVjdDogJ05ldyBPcmRlciAtIE9SRC0xMjM0NTYnLFxuICAgICAgICB0ZXh0OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnV2UgaGF2ZSByZWNlaXZlZCBhIG5ldyBvcmRlciB0aGF0IHJlcXVpcmVzIGZ1bGZpbGxtZW50JylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2VuZEVtYWlsIChnZW5lcmljKScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNlbmQgZ2VuZXJpYyBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kRW1haWwoXG4gICAgICAgICdyZWNpcGllbnRAZXhhbXBsZS5jb20nLFxuICAgICAgICAnVGVzdCBTdWJqZWN0JyxcbiAgICAgICAgJ1Rlc3QgbWVzc2FnZSBjb250ZW50JyxcbiAgICAgICAgJzxwPlRlc3QgSFRNTCBjb250ZW50PC9wPidcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZnJvbTogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICB0bzogJ3JlY2lwaWVudEBleGFtcGxlLmNvbScsXG4gICAgICAgIHN1YmplY3Q6ICdUZXN0IFN1YmplY3QnLFxuICAgICAgICB0ZXh0OiAnVGVzdCBtZXNzYWdlIGNvbnRlbnQnLFxuICAgICAgICBodG1sOiAnPHA+VGVzdCBIVE1MIGNvbnRlbnQ8L3A+J1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgdGV4dC1vbmx5IGVtYWlsIHdoZW4gSFRNTCBpcyBub3QgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kRW1haWwoXG4gICAgICAgICdyZWNpcGllbnRAZXhhbXBsZS5jb20nLFxuICAgICAgICAnVGVzdCBTdWJqZWN0JyxcbiAgICAgICAgJ1Rlc3QgbWVzc2FnZSBjb250ZW50J1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmcm9tOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHRvOiAncmVjaXBpZW50QGV4YW1wbGUuY29tJyxcbiAgICAgICAgc3ViamVjdDogJ1Rlc3QgU3ViamVjdCcsXG4gICAgICAgIHRleHQ6ICdUZXN0IG1lc3NhZ2UgY29udGVudCdcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRW1haWwgVGVtcGxhdGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgb3JkZXIgY29uZmlybWF0aW9uIHRlbXBsYXRlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9yZGVyRGF0YSA9IHtcbiAgICAgICAgb3JkZXJOdW1iZXI6ICdPUkQtMTIzNDU2JyxcbiAgICAgICAgY3VzdG9tZXJOYW1lOiAnSm9obiBEb2UnLFxuICAgICAgICBpdGVtczogW3sgcHJvZHVjdE5hbWU6ICdUZXN0IFByb2R1Y3QnLCBxdWFudGl0eTogMSwgcHJpY2U6IDI5Ljk5IH1dLFxuICAgICAgICB0b3RhbDogMjkuOTksXG4gICAgICAgIHNoaXBwaW5nQWRkcmVzczoge1xuICAgICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICAgIGxhc3ROYW1lOiAnRG9lJyxcbiAgICAgICAgICBzdHJlZXQ6ICcxMjMgTWFpbiBTdCcsXG4gICAgICAgICAgY2l0eTogJ0FueXRvd24nLFxuICAgICAgICAgIHN0YXRlOiAnQ0EnLFxuICAgICAgICAgIHppcENvZGU6ICcxMjM0NScsXG4gICAgICAgICAgY291bnRyeTogJ1VTJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGVtYWlsVGVtcGxhdGVzLm9yZGVyQ29uZmlybWF0aW9uKG9yZGVyRGF0YSk7XG5cbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5zdWJqZWN0KS50b0JlKCdPcmRlciBDb25maXJtYXRpb24gLSBPUkQtMTIzNDU2Jyk7XG4gICAgICBleHBlY3QodGVtcGxhdGUudGV4dCkudG9Db250YWluKCdEZWFyIEpvaG4gRG9lJyk7XG4gICAgICBleHBlY3QodGVtcGxhdGUudGV4dCkudG9Db250YWluKCdPcmRlciBOdW1iZXI6IE9SRC0xMjM0NTYnKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5odG1sKS50b0NvbnRhaW4oJ09yZGVyIENvbmZpcm1hdGlvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBwYXltZW50IHJlY2VpcHQgdGVtcGxhdGUgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgcGF5bWVudERhdGEgPSB7XG4gICAgICAgIG9yZGVyTnVtYmVyOiAnT1JELTEyMzQ1NicsXG4gICAgICAgIGN1c3RvbWVyTmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgdG90YWw6IDI5Ljk5LFxuICAgICAgICBwYXltZW50TWV0aG9kOiAnQ3JlZGl0IENhcmQnLFxuICAgICAgICB0cmFuc2FjdGlvbklkOiAndHhuXzEyMycsXG4gICAgICAgIHBhaWRBdDogbmV3IERhdGUoJzIwMjMtMTItMDEnKVxuICAgICAgfTtcblxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBlbWFpbFRlbXBsYXRlcy5wYXltZW50UmVjZWlwdChwYXltZW50RGF0YSk7XG5cbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5zdWJqZWN0KS50b0JlKCdQYXltZW50IFJlY2VpcHQgLSBPUkQtMTIzNDU2Jyk7XG4gICAgICBleHBlY3QodGVtcGxhdGUudGV4dCkudG9Db250YWluKCdZb3VyIHBheW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHByb2Nlc3NlZCEnKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5odG1sKS50b0NvbnRhaW4oJ1BheW1lbnQgUmVjZWlwdCcpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBV0E7QUFDQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsWUFBWSxFQUFFLE9BQU87RUFDN0JDLGVBQWUsRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsT0FBTztJQUM5QkMsUUFBUSxFQUFFRixJQUFJLENBQUNDLEVBQUUsQ0FBQztFQUNwQixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQztBQUFDLFNBQUFKLFlBQUE7RUFBQTtJQUFBRztFQUFBLElBQUFHLE9BQUE7RUFBQU4sV0FBQSxHQUFBQSxDQUFBLEtBQUFHLElBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUE7QUFoQkosTUFBTTtFQUNKSSxxQkFBcUI7RUFDckJDLGtCQUFrQjtFQUNsQkMscUJBQXFCO0VBQ3JCQyxnQkFBZ0I7RUFDaEJDLHNCQUFzQjtFQUN0QkMsMEJBQTBCO0VBQzFCQyxTQUFTO0VBQ1RDO0FBQ0YsQ0FBQyxHQUFHUixPQUFPLENBQUMsMEJBQTBCLENBQUM7QUFTdkMsTUFBTVMsVUFBVSxHQUFHVCxPQUFPLENBQUMsWUFBWSxDQUFDO0FBRXhDVSxRQUFRLENBQUMsZUFBZSxFQUFFLE1BQU07RUFDOUIsSUFBSUMsZUFBZTtFQUVuQkMsVUFBVSxDQUFDLE1BQU07SUFDZkQsZUFBZSxHQUFHO01BQ2hCWixRQUFRLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFDRFcsVUFBVSxDQUFDYixlQUFlLENBQUNpQixlQUFlLENBQUNGLGVBQWUsQ0FBQzs7SUFFM0Q7SUFDQUcsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFVBQVUsR0FBRyxlQUFlO0lBQ3hDRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0UsVUFBVSxHQUFHLEtBQUs7SUFDOUJILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxVQUFVLEdBQUcsa0JBQWtCO0lBQzNDSixPQUFPLENBQUNDLEdB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