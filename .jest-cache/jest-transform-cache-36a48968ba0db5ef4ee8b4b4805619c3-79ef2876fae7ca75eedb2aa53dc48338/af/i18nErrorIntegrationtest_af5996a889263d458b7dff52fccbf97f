29983a482041ec7efc60394bffd58edb
const request = require('supertest');
const express = require('express');
const {
  AppError,
  globalErrorHandler
} = require('../middleware/errorHandler');
const {
  i18nMiddleware
} = require('../utils/i18n');
const {
  errorResponse,
  ErrorCodes
} = require('../utils/errorHandler');
describe('i18n Error Integration', () => {
  let app;
  beforeEach(() => {
    app = express();
    app.use(express.json());
    app.use(i18nMiddleware);
    app.use(errorResponse);

    // Test routes
    app.get('/test-apperror', (req, res, next) => {
      next(new AppError('Product not found', 404, ErrorCodes.PRODUCT_NOT_FOUND));
    });
    app.get('/test-res-error', (req, res) => {
      res.error(404, ErrorCodes.PRODUCT_NOT_FOUND, 'Product not found');
    });
    app.get('/test-validation', (req, res) => {
      const mockValidationErrors = {
        array: () => [{
          msg: 'Invalid email',
          param: 'email',
          location: 'body'
        }]
      };
      res.validationError(mockValidationErrors);
    });
    app.use(globalErrorHandler);
  });
  describe('Error message translation', () => {
    test('should return English error by default', async () => {
      const response = await request(app).get('/test-apperror').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Product not found'
        }
      });
    });
    test('should return Spanish error when locale is es', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'es').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Producto no encontrado'
        }
      });
    });
    test('should return French error when locale is fr', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'fr').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Produit non trouvé'
        }
      });
    });
    test('should return Arabic error when locale is ar', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'ar').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'المنتج غير موجود'
        }
      });
    });
    test('should return Hebrew error when locale is he', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'he').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'המוצר לא נמצא'
        }
      });
    });
    test('should handle Chinese locale', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'zh').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: '产品未找到'
        }
      });
    });
    test('should handle Japanese locale', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'ja').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: '商品が見つかりません'
        }
      });
    });
    test('should handle German locale', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'de').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Produkt nicht gefunden'
        }
      });
    });
  });
  describe('Error response helpers', () => {
    test('res.error should return translated error', async () => {
      const response = await request(app).get('/test-res-error').set('x-locale', 'es').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Producto no encontrado'
        }
      });
    });
    test('validation errors should use default locale', async () => {
      const response = await request(app).get('/test-validation').expect(400);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: [{
            field: 'email',
            message: 'Invalid email',
            location: 'body'
          }]
        }
      });
    });
  });
  describe('Development mode', () => {
    const originalEnv = process.env.NODE_ENV;
    beforeEach(() => {
      process.env.NODE_ENV = 'development';
    });
    afterEach(() => {
      process.env.NODE_ENV = originalEnv;
    });
    test('should include additional debug info in development', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'es').expect(404);
      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('PRODUCT_NOT_FOUND');
      expect(response.body.error.message).toBe('Producto no encontrado');
      expect(response.body.error.originalMessage).toBe('Product not found');
      expect(response.body.error.locale).toBe('es');
      expect(response.body.error.stack).toBeDefined();
    });
  });
  describe('RTL language support', () => {
    test('should set RTL flag for Arabic', async () => {
      const app = express();
      app.use(i18nMiddleware);
      app.get('/test-rtl', (req, res) => {
        res.json({
          locale: req.locale,
          isRTL: req.isRTL
        });
      });
      const response = await request(app).get('/test-rtl').set('x-locale', 'ar').expect(200);
      expect(response.body).toEqual({
        locale: 'ar',
        isRTL: true
      });
    });
    test('should set RTL flag for Hebrew', async () => {
      const app = express();
      app.use(i18nMiddleware);
      app.get('/test-rtl', (req, res) => {
        res.json({
          locale: req.locale,
          isRTL: req.isRTL
        });
      });
      const response = await request(app).get('/test-rtl').set('x-locale', 'he').expect(200);
      expect(response.body).toEqual({
        locale: 'he',
        isRTL: true
      });
    });
    test('should not set RTL flag for LTR languages', async () => {
      const app = express();
      app.use(i18nMiddleware);
      app.get('/test-rtl', (req, res) => {
        res.json({
          locale: req.locale,
          isRTL: req.isRTL
        });
      });
      const response = await request(app).get('/test-rtl').set('x-locale', 'en').expect(200);
      expect(response.body).toEqual({
        locale: 'en',
        isRTL: false
      });
    });
  });
  describe('Fallback behavior', () => {
    test('should fallback to English for unsupported locale', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'ru') // Russian not supported
      .expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Product not found'
        }
      });
    });
    test('should use default message when translation missing', async () => {
      const app = express();
      app.use(express.json());
      app.use(i18nMiddleware);
      app.get('/test-custom', (req, res, next) => {
        // Using a code that doesn't exist in translations
        next(new AppError('This is a custom error', 400, 'CUSTOM_ERROR_CODE'));
      });
      app.use(globalErrorHandler);
      const response = await request(app).get('/test-custom').set('x-locale', 'es').expect(400);
      expect(response.body.error.message).toBe('This is a custom error');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImV4cHJlc3MiLCJBcHBFcnJvciIsImdsb2JhbEVycm9ySGFuZGxlciIsImkxOG5NaWRkbGV3YXJlIiwiZXJyb3JSZXNwb25zZSIsIkVycm9yQ29kZXMiLCJkZXNjcmliZSIsImFwcCIsImJlZm9yZUVhY2giLCJ1c2UiLCJqc29uIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsIlBST0RVQ1RfTk9UX0ZPVU5EIiwiZXJyb3IiLCJtb2NrVmFsaWRhdGlvbkVycm9ycyIsImFycmF5IiwibXNnIiwicGFyYW0iLCJsb2NhdGlvbiIsInZhbGlkYXRpb25FcnJvciIsInRlc3QiLCJyZXNwb25zZSIsImV4cGVjdCIsImJvZHkiLCJ0b0VxdWFsIiwic3VjY2VzcyIsImNvZGUiLCJtZXNzYWdlIiwic2V0IiwiZGV0YWlscyIsImZpZWxkIiwib3JpZ2luYWxFbnYiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJhZnRlckVhY2giLCJ0b0JlIiwib3JpZ2luYWxNZXNzYWdlIiwibG9jYWxlIiwic3RhY2siLCJ0b0JlRGVmaW5lZCIsImlzUlRMIl0sInNvdXJjZXMiOlsiaTE4bkVycm9ySW50ZWdyYXRpb24udGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgeyBBcHBFcnJvciwgZ2xvYmFsRXJyb3JIYW5kbGVyIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2Vycm9ySGFuZGxlcicpO1xuY29uc3QgeyBpMThuTWlkZGxld2FyZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvaTE4bicpO1xuY29uc3QgeyBlcnJvclJlc3BvbnNlLCBFcnJvckNvZGVzIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvckhhbmRsZXInKTtcblxuZGVzY3JpYmUoJ2kxOG4gRXJyb3IgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gIGxldCBhcHA7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgYXBwID0gZXhwcmVzcygpO1xuICAgIGFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuICAgIGFwcC51c2UoaTE4bk1pZGRsZXdhcmUpO1xuICAgIGFwcC51c2UoZXJyb3JSZXNwb25zZSk7XG5cbiAgICAvLyBUZXN0IHJvdXRlc1xuICAgIGFwcC5nZXQoJy90ZXN0LWFwcGVycm9yJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICBuZXh0KG5ldyBBcHBFcnJvcignUHJvZHVjdCBub3QgZm91bmQnLCA0MDQsIEVycm9yQ29kZXMuUFJPRFVDVF9OT1RfRk9VTkQpKTtcbiAgICB9KTtcblxuICAgIGFwcC5nZXQoJy90ZXN0LXJlcy1lcnJvcicsIChyZXEsIHJlcykgPT4ge1xuICAgICAgcmVzLmVycm9yKDQwNCwgRXJyb3JDb2Rlcy5QUk9EVUNUX05PVF9GT1VORCwgJ1Byb2R1Y3Qgbm90IGZvdW5kJyk7XG4gICAgfSk7XG5cbiAgICBhcHAuZ2V0KCcvdGVzdC12YWxpZGF0aW9uJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVmFsaWRhdGlvbkVycm9ycyA9IHtcbiAgICAgICAgYXJyYXk6ICgpID0+IFtcbiAgICAgICAgICB7IG1zZzogJ0ludmFsaWQgZW1haWwnLCBwYXJhbTogJ2VtYWlsJywgbG9jYXRpb246ICdib2R5JyB9XG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgICByZXMudmFsaWRhdGlvbkVycm9yKG1vY2tWYWxpZGF0aW9uRXJyb3JzKTtcbiAgICB9KTtcblxuICAgIGFwcC51c2UoZ2xvYmFsRXJyb3JIYW5kbGVyKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIG1lc3NhZ2UgdHJhbnNsYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBFbmdsaXNoIGVycm9yIGJ5IGRlZmF1bHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1hcHBlcnJvcicpXG4gICAgICAgIC5leHBlY3QoNDA0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnUFJPRFVDVF9OT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IG5vdCBmb3VuZCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIFNwYW5pc2ggZXJyb3Igd2hlbiBsb2NhbGUgaXMgZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1hcHBlcnJvcicpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ2VzJylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1Byb2R1Y3RvIG5vIGVuY29udHJhZG8nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBGcmVuY2ggZXJyb3Igd2hlbiBsb2NhbGUgaXMgZnInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1hcHBlcnJvcicpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ2ZyJylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1Byb2R1aXQgbm9uIHRyb3V2w6knXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBBcmFiaWMgZXJyb3Igd2hlbiBsb2NhbGUgaXMgYXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1hcHBlcnJvcicpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ2FyJylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ9in2YTZhdmG2KrYrCDYutmK2LEg2YXZiNis2YjYrydcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIEhlYnJldyBlcnJvciB3aGVuIGxvY2FsZSBpcyBoZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy90ZXN0LWFwcGVycm9yJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnaGUnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1BST0RVQ1RfTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAn15TXnteV16bXqCDXnNeQINeg157XpteQJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgQ2hpbmVzZSBsb2NhbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1hcHBlcnJvcicpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ3poJylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ+S6p+WTgeacquaJvuWIsCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIEphcGFuZXNlIGxvY2FsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy90ZXN0LWFwcGVycm9yJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnamEnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1BST0RVQ1RfTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAn5ZWG5ZOB44GM6KaL44Gk44GL44KK44G+44Gb44KTJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgR2VybWFuIGxvY2FsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy90ZXN0LWFwcGVycm9yJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnZGUnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1BST0RVQ1RfTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAnUHJvZHVrdCBuaWNodCBnZWZ1bmRlbidcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciByZXNwb25zZSBoZWxwZXJzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Jlcy5lcnJvciBzaG91bGQgcmV0dXJuIHRyYW5zbGF0ZWQgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1yZXMtZXJyb3InKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdlcycpXG4gICAgICAgIC5leHBlY3QoNDA0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnUFJPRFVDVF9OT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0byBubyBlbmNvbnRyYWRvJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3ZhbGlkYXRpb24gZXJyb3JzIHNob3VsZCB1c2UgZGVmYXVsdCBsb2NhbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC12YWxpZGF0aW9uJylcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBkYXRhJyxcbiAgICAgICAgICBkZXRhaWxzOiBbXG4gICAgICAgICAgICB7IGZpZWxkOiAnZW1haWwnLCBtZXNzYWdlOiAnSW52YWxpZCBlbWFpbCcsIGxvY2F0aW9uOiAnYm9keScgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEZXZlbG9wbWVudCBtb2RlJywgKCkgPT4ge1xuICAgIGNvbnN0IG9yaWdpbmFsRW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gJ2RldmVsb3BtZW50JztcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IG9yaWdpbmFsRW52O1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGluY2x1ZGUgYWRkaXRpb25hbCBkZWJ1ZyBpbmZvIGluIGRldmVsb3BtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtYXBwZXJyb3InKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdlcycpXG4gICAgICAgIC5leHBlY3QoNDA0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvci5jb2RlKS50b0JlKCdQUk9EVUNUX05PVF9GT1VORCcpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IubWVzc2FnZSkudG9CZSgnUHJvZHVjdG8gbm8gZW5jb250cmFkbycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3Iub3JpZ2luYWxNZXNzYWdlKS50b0JlKCdQcm9kdWN0IG5vdCBmb3VuZCcpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IubG9jYWxlKS50b0JlKCdlcycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3Iuc3RhY2spLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSVEwgbGFuZ3VhZ2Ugc3VwcG9ydCcsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc2V0IFJUTCBmbGFnIGZvciBBcmFiaWMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gICAgICBhcHAudXNlKGkxOG5NaWRkbGV3YXJlKTtcbiAgICAgIFxuICAgICAgYXBwLmdldCgnL3Rlc3QtcnRsJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICBsb2NhbGU6IHJlcS5sb2NhbGUsXG4gICAgICAgICAgaXNSVEw6IHJlcS5pc1JUTFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1ydGwnKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdhcicpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBsb2NhbGU6ICdhcicsXG4gICAgICAgIGlzUlRMOiB0cnVlXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBzZXQgUlRMIGZsYWcgZm9yIEhlYnJldycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbiAgICAgIGFwcC51c2UoaTE4bk1pZGRsZXdhcmUpO1xuICAgICAgXG4gICAgICBhcHAuZ2V0KCcvdGVzdC1ydGwnLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLmpzb24oe1xuICAgICAgICAgIGxvY2FsZTogcmVxLmxvY2FsZSxcbiAgICAgICAgICBpc1JUTDogcmVxLmlzUlRMXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy90ZXN0LXJ0bCcpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ2hlJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIGxvY2FsZTogJ2hlJyxcbiAgICAgICAgaXNSVEw6IHRydWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG5vdCBzZXQgUlRMIGZsYWcgZm9yIExUUiBsYW5ndWFnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gICAgICBhcHAudXNlKGkxOG5NaWRkbGV3YXJlKTtcbiAgICAgIFxuICAgICAgYXBwLmdldCgnL3Rlc3QtcnRsJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICBsb2NhbGU6IHJlcS5sb2NhbGUsXG4gICAgICAgICAgaXNSVEw6IHJlcS5pc1JUTFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1ydGwnKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdlbicpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBsb2NhbGU6ICdlbicsXG4gICAgICAgIGlzUlRMOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGYWxsYmFjayBiZWhhdmlvcicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgZmFsbGJhY2sgdG8gRW5nbGlzaCBmb3IgdW5zdXBwb3J0ZWQgbG9jYWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtYXBwZXJyb3InKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdydScpIC8vIFJ1c3NpYW4gbm90IHN1cHBvcnRlZFxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1BST0RVQ1RfTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAnUHJvZHVjdCBub3QgZm91bmQnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHVzZSBkZWZhdWx0IG1lc3NhZ2Ugd2hlbiB0cmFuc2xhdGlvbiBtaXNzaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBwID0gZXhwcmVzcygpO1xuICAgICAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gICAgICBhcHAudXNlKGkxOG5NaWRkbGV3YXJlKTtcbiAgICAgIFxuICAgICAgYXBwLmdldCgnL3Rlc3QtY3VzdG9tJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIC8vIFVzaW5nIGEgY29kZSB0aGF0IGRvZXNuJ3QgZXhpc3QgaW4gdHJhbnNsYXRpb25zXG4gICAgICAgIG5leHQobmV3IEFwcEVycm9yKCdUaGlzIGlzIGEgY3VzdG9tIGVycm9yJywgNDAwLCAnQ1VTVE9NX0VSUk9SX0NPREUnKSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgYXBwLnVzZShnbG9iYWxFcnJvckhhbmRsZXIpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1jdXN0b20nKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdlcycpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IubWVzc2FnZSkudG9CZSgnVGhpcyBpcyBhIGN1c3RvbSBlcnJvcicpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNO0VBQUVFLFFBQVE7RUFBRUM7QUFBbUIsQ0FBQyxHQUFHSCxPQUFPLENBQUMsNEJBQTRCLENBQUM7QUFDOUUsTUFBTTtFQUFFSTtBQUFlLENBQUMsR0FBR0osT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUNuRCxNQUFNO0VBQUVLLGFBQWE7RUFBRUM7QUFBVyxDQUFDLEdBQUdOLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUV0RU8sUUFBUSxDQUFDLHdCQUF3QixFQUFFLE1BQU07RUFDdkMsSUFBSUMsR0FBRztFQUVQQyxVQUFVLENBQUMsTUFBTTtJQUNmRCxHQUFHLEdBQUdQLE9BQU8sQ0FBQyxDQUFDO0lBQ2ZPLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDVCxPQUFPLENBQUNVLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDdkJILEdBQUcsQ0FBQ0UsR0FBRyxDQUFDTixjQUFjLENBQUM7SUFDdkJJLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDTCxhQUFhLENBQUM7O0lBRXRCO0lBQ0FHLEdBQUcsQ0FBQ0ks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