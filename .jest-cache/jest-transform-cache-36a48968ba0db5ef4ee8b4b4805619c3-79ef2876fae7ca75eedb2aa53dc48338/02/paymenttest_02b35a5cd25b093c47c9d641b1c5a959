e22d82914569590c6e5e3d3b233bce12
const request = require('supertest');
const app = require('../../server');
const Order = require('../../models/Order');
const Product = require('../../models/Product');
const {
  connectDB,
  clearDB,
  closeDB
} = require('../setup/testDb');
describe('Payment Integration Tests', () => {
  let agent;
  let testOrder;
  let csrfToken;
  beforeAll(async () => {
    await connectDB();
  });
  afterAll(async () => {
    await closeDB();
  });
  beforeEach(async () => {
    await clearDB();
    agent = request.agent(app);

    // Get CSRF token
    const csrfRes = await agent.get('/api/csrf-token');
    csrfToken = csrfRes.body.csrfToken;

    // Create test product
    const product = await Product.create({
      name: 'Test Product',
      slug: 'test-product',
      description: 'Test description',
      price: 50.00,
      category: 'other',
      images: [{
        url: 'test.jpg',
        alt: 'Test'
      }]
    });

    // Create test order
    testOrder = await Order.create({
      orderNumber: `TEST-${Date.now()}`,
      items: [{
        product: product._id,
        quantity: 2,
        price: 50.00
      }],
      subtotal: 100.00,
      shipping: 10.00,
      tax: 11.00,
      total: 121.00,
      customer: null,
      guestInfo: {
        email: 'test@example.com',
        firstName: 'Test',
        lastName: 'User'
      },
      shippingAddress: {
        firstName: 'Test',
        lastName: 'User',
        street: '123 Test St',
        city: 'Paris',
        state: 'IDF',
        zipCode: '75001',
        country: 'FR'
      },
      billingAddress: {
        firstName: 'Test',
        lastName: 'User',
        street: '123 Test St',
        city: 'Paris',
        state: 'IDF',
        zipCode: '75001',
        country: 'FR'
      },
      status: 'pending',
      paymentStatus: 'pending'
    });
  });
  describe('Demo Payment', () => {
    test('should complete demo payment successfully', async () => {
      const res = await agent.post(`/api/payments/demo-complete/${testOrder._id}`).set('X-CSRF-Token', csrfToken).send({});
      expect(res.status).toBe(200);
      expect(res.body.success).toBe(true);
      expect(res.body.message).toBe('Demo payment completed successfully');
      expect(res.body.order.status).toBe('processing');

      // Verify order was updated
      const updatedOrder = await Order.findById(testOrder._id);
      expect(updatedOrder.status).toBe('processing');
      expect(updatedOrder.paymentStatus).toBe('paid');
      expect(updatedOrder.paymentMethod).toBe('demo');
    });
    test('should not allow demo payment for already paid order', async () => {
      // Mark order as paid
      testOrder.paymentStatus = 'paid';
      testOrder.status = 'processing';
      await testOrder.save();
      const res = await agent.post(`/api/payments/demo-complete/${testOrder._id}`).set('X-CSRF-Token', csrfToken).send({});
      expect(res.status).toBe(400);
      expect(res.body.error.code).toBe('ORDER_ALREADY_PAID');
    });
    test('should handle invalid order ID', async () => {
      const res = await agent.post('/api/payments/demo-complete/invalid-id').set('X-CSRF-Token', csrfToken).send({});
      expect(res.status).toBe(400);
      expect(res.body.error.code).toBe('VALIDATION_ERROR');
    });
  });
  describe('Payment Creation', () => {
    test('should handle Mollie unavailability gracefully', async () => {
      const res = await agent.post('/api/payments/create').set('X-CSRF-Token', csrfToken).send({
        orderId: testOrder._id,
        paymentMethod: 'ideal',
        returnUrl: 'http://localhost:3000/payment-success'
      });
      expect(res.status).toBe(503);
      expect(res.body.error.code).toBe('MOLLIE_API_ERROR');
      expect(res.body.error.message).toContain('demo payment');
    });
  });
  describe('Webhook Processing', () => {
    test('should validate webhook requests', async () => {
      const res = await request(app).post('/api/payments/webhook').send({
        id: 'tr_test123'
      });

      // Should fail without proper Mollie setup
      expect(res.status).toBe(500);
    });
  });
  describe('Payment Status', () => {
    test('should get payment status for order', async () => {
      // Complete demo payment first
      await agent.post(`/api/payments/demo-complete/${testOrder._id}`).set('X-CSRF-Token', csrfToken).send({});
      const res = await agent.get(`/api/payments/status/${testOrder._id}`).set('X-CSRF-Token', csrfToken);
      expect(res.status).toBe(200);
      expect(res.body.success).toBe(true);
      expect(res.body.paymentStatus).toBe('paid');
      expect(res.body.order).toBeDefined();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImFwcCIsIk9yZGVyIiwiUHJvZHVjdCIsImNvbm5lY3REQiIsImNsZWFyREIiLCJjbG9zZURCIiwiZGVzY3JpYmUiLCJhZ2VudCIsInRlc3RPcmRlciIsImNzcmZUb2tlbiIsImJlZm9yZUFsbCIsImFmdGVyQWxsIiwiYmVmb3JlRWFjaCIsImNzcmZSZXMiLCJnZXQiLCJib2R5IiwicHJvZHVjdCIsImNyZWF0ZSIsIm5hbWUiLCJzbHVnIiwiZGVzY3JpcHRpb24iLCJwcmljZSIsImNhdGVnb3J5IiwiaW1hZ2VzIiwidXJsIiwiYWx0Iiwib3JkZXJOdW1iZXIiLCJEYXRlIiwibm93IiwiaXRlbXMiLCJfaWQiLCJxdWFudGl0eSIsInN1YnRvdGFsIiwic2hpcHBpbmciLCJ0YXgiLCJ0b3RhbCIsImN1c3RvbWVyIiwiZ3Vlc3RJbmZvIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInNoaXBwaW5nQWRkcmVzcyIsInN0cmVldCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJjb3VudHJ5IiwiYmlsbGluZ0FkZHJlc3MiLCJzdGF0dXMiLCJwYXltZW50U3RhdHVzIiwidGVzdCIsInJlcyIsInBvc3QiLCJzZXQiLCJzZW5kIiwiZXhwZWN0IiwidG9CZSIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwib3JkZXIiLCJ1cGRhdGVkT3JkZXIiLCJmaW5kQnlJZCIsInBheW1lbnRNZXRob2QiLCJzYXZlIiwiZXJyb3IiLCJjb2RlIiwib3JkZXJJZCIsInJldHVyblVybCIsInRvQ29udGFpbiIsImlkIiwidG9CZURlZmluZWQiXSwic291cmNlcyI6WyJwYXltZW50LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xuY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vLi4vc2VydmVyJyk7XG5jb25zdCBPcmRlciA9IHJlcXVpcmUoJy4uLy4uL21vZGVscy9PcmRlcicpO1xuY29uc3QgUHJvZHVjdCA9IHJlcXVpcmUoJy4uLy4uL21vZGVscy9Qcm9kdWN0Jyk7XG5jb25zdCB7IGNvbm5lY3REQiwgY2xlYXJEQiwgY2xvc2VEQiB9ID0gcmVxdWlyZSgnLi4vc2V0dXAvdGVzdERiJyk7XG5cbmRlc2NyaWJlKCdQYXltZW50IEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBsZXQgYWdlbnQ7XG4gIGxldCB0ZXN0T3JkZXI7XG4gIGxldCBjc3JmVG9rZW47XG5cbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGNsb3NlREIoKTtcbiAgfSk7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgY2xlYXJEQigpO1xuICAgIGFnZW50ID0gcmVxdWVzdC5hZ2VudChhcHApO1xuICAgIFxuICAgIC8vIEdldCBDU1JGIHRva2VuXG4gICAgY29uc3QgY3NyZlJlcyA9IGF3YWl0IGFnZW50LmdldCgnL2FwaS9jc3JmLXRva2VuJyk7XG4gICAgY3NyZlRva2VuID0gY3NyZlJlcy5ib2R5LmNzcmZUb2tlbjtcblxuICAgIC8vIENyZWF0ZSB0ZXN0IHByb2R1Y3RcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5jcmVhdGUoe1xuICAgICAgbmFtZTogJ1Rlc3QgUHJvZHVjdCcsXG4gICAgICBzbHVnOiAndGVzdC1wcm9kdWN0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBkZXNjcmlwdGlvbicsXG4gICAgICBwcmljZTogNTAuMDAsXG4gICAgICBjYXRlZ29yeTogJ290aGVyJyxcbiAgICAgIGltYWdlczogW3sgdXJsOiAndGVzdC5qcGcnLCBhbHQ6ICdUZXN0JyB9XVxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIHRlc3Qgb3JkZXJcbiAgICB0ZXN0T3JkZXIgPSBhd2FpdCBPcmRlci5jcmVhdGUoe1xuICAgICAgb3JkZXJOdW1iZXI6IGBURVNULSR7RGF0ZS5ub3coKX1gLFxuICAgICAgaXRlbXM6IFt7XG4gICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QuX2lkLFxuICAgICAgICBxdWFudGl0eTogMixcbiAgICAgICAgcHJpY2U6IDUwLjAwXG4gICAgICB9XSxcbiAgICAgIHN1YnRvdGFsOiAxMDAuMDAsXG4gICAgICBzaGlwcGluZzogMTAuMDAsXG4gICAgICB0YXg6IDExLjAwLFxuICAgICAgdG90YWw6IDEyMS4wMCxcbiAgICAgIGN1c3RvbWVyOiBudWxsLFxuICAgICAgZ3Vlc3RJbmZvOiB7XG4gICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInXG4gICAgICB9LFxuICAgICAgc2hpcHBpbmdBZGRyZXNzOiB7XG4gICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICBzdHJlZXQ6ICcxMjMgVGVzdCBTdCcsXG4gICAgICAgIGNpdHk6ICdQYXJpcycsXG4gICAgICAgIHN0YXRlOiAnSURGJyxcbiAgICAgICAgemlwQ29kZTogJzc1MDAxJyxcbiAgICAgICAgY291bnRyeTogJ0ZSJ1xuICAgICAgfSxcbiAgICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICBzdHJlZXQ6ICcxMjMgVGVzdCBTdCcsXG4gICAgICAgIGNpdHk6ICdQYXJpcycsXG4gICAgICAgIHN0YXRlOiAnSURGJyxcbiAgICAgICAgemlwQ29kZTogJzc1MDAxJyxcbiAgICAgICAgY291bnRyeTogJ0ZSJ1xuICAgICAgfSxcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgcGF5bWVudFN0YXR1czogJ3BlbmRpbmcnXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEZW1vIFBheW1lbnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNvbXBsZXRlIGRlbW8gcGF5bWVudCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdChgL2FwaS9wYXltZW50cy9kZW1vLWNvbXBsZXRlLyR7dGVzdE9yZGVyLl9pZH1gKVxuICAgICAgICAuc2V0KCdYLUNTUkYtVG9rZW4nLCBjc3JmVG9rZW4pXG4gICAgICAgIC5zZW5kKHt9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLnRvQmUoJ0RlbW8gcGF5bWVudCBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICBleHBlY3QocmVzLmJvZHkub3JkZXIuc3RhdHVzKS50b0JlKCdwcm9jZXNzaW5nJyk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBvcmRlciB3YXMgdXBkYXRlZFxuICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQodGVzdE9yZGVyLl9pZCk7XG4gICAgICBleHBlY3QodXBkYXRlZE9yZGVyLnN0YXR1cykudG9CZSgncHJvY2Vzc2luZycpO1xuICAgICAgZXhwZWN0KHVwZGF0ZWRPcmRlci5wYXltZW50U3RhdHVzKS50b0JlKCdwYWlkJyk7XG4gICAgICBleHBlY3QodXBkYXRlZE9yZGVyLnBheW1lbnRNZXRob2QpLnRvQmUoJ2RlbW8nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBub3QgYWxsb3cgZGVtbyBwYXltZW50IGZvciBhbHJlYWR5IHBhaWQgb3JkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNYXJrIG9yZGVyIGFzIHBhaWRcbiAgICAgIHRlc3RPcmRlci5wYXltZW50U3RhdHVzID0gJ3BhaWQnO1xuICAgICAgdGVzdE9yZGVyLnN0YXR1cyA9ICdwcm9jZXNzaW5nJztcbiAgICAgIGF3YWl0IHRlc3RPcmRlci5zYXZlKCk7XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KGAvYXBpL3BheW1lbnRzL2RlbW8tY29tcGxldGUvJHt0ZXN0T3JkZXIuX2lkfWApXG4gICAgICAgIC5zZXQoJ1gtQ1NSRi1Ub2tlbicsIGNzcmZUb2tlbilcbiAgICAgICAgLnNlbmQoe30pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmVycm9yLmNvZGUpLnRvQmUoJ09SREVSX0FMUkVBRFlfUEFJRCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIG9yZGVyIElEJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLnBvc3QoJy9hcGkvcGF5bWVudHMvZGVtby1jb21wbGV0ZS9pbnZhbGlkLWlkJylcbiAgICAgICAgLnNldCgnWC1DU1JGLVRva2VuJywgY3NyZlRva2VuKVxuICAgICAgICAuc2VuZCh7fSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGF5bWVudCBDcmVhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIE1vbGxpZSB1bmF2YWlsYWJpbGl0eSBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLnBvc3QoJy9hcGkvcGF5bWVudHMvY3JlYXRlJylcbiAgICAgICAgLnNldCgnWC1DU1JGLVRva2VuJywgY3NyZlRva2VuKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgb3JkZXJJZDogdGVzdE9yZGVyLl9pZCxcbiAgICAgICAgICBwYXltZW50TWV0aG9kOiAnaWRlYWwnLFxuICAgICAgICAgIHJldHVyblVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9wYXltZW50LXN1Y2Nlc3MnXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSg1MDMpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmVycm9yLmNvZGUpLnRvQmUoJ01PTExJRV9BUElfRVJST1InKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2RlbW8gcGF5bWVudCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnV2ViaG9vayBQcm9jZXNzaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSB3ZWJob29rIHJlcXVlc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL3BheW1lbnRzL3dlYmhvb2snKVxuICAgICAgICAuc2VuZCh7IGlkOiAndHJfdGVzdDEyMycgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBmYWlsIHdpdGhvdXQgcHJvcGVyIE1vbGxpZSBzZXR1cFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BheW1lbnQgU3RhdHVzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBnZXQgcGF5bWVudCBzdGF0dXMgZm9yIG9yZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ29tcGxldGUgZGVtbyBwYXltZW50IGZpcnN0XG4gICAgICBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdChgL2FwaS9wYXltZW50cy9kZW1vLWNvbXBsZXRlLyR7dGVzdE9yZGVyLl9pZH1gKVxuICAgICAgICAuc2V0KCdYLUNTUkYtVG9rZW4nLCBjc3JmVG9rZW4pXG4gICAgICAgIC5zZW5kKHt9KTtcblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLmdldChgL2FwaS9wYXltZW50cy9zdGF0dXMvJHt0ZXN0T3JkZXIuX2lkfWApXG4gICAgICAgIC5zZXQoJ1gtQ1NSRi1Ub2tlbicsIGNzcmZUb2tlbik7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5wYXltZW50U3RhdHVzKS50b0JlKCdwYWlkJyk7XG4gICAgICBleHBlY3QocmVzLmJvZHkub3JkZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsR0FBRyxHQUFHRCxPQUFPLENBQUMsY0FBYyxDQUFDO0FBQ25DLE1BQU1FLEtBQUssR0FBR0YsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQzNDLE1BQU1HLE9BQU8sR0FBR0gsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBQy9DLE1BQU07RUFBRUksU0FBUztFQUFFQyxPQUFPO0VBQUVDO0FBQVEsQ0FBQyxHQUFHTixPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFFbEVPLFFBQVEsQ0FBQywyQkFBMkIsRUFBRSxNQUFNO0VBQzFDLElBQUlDLEtBQUs7RUFDVCxJQUFJQyxTQUFTO0VBQ2IsSUFBSUMsU0FBUztFQUViQyxTQUFTLENBQUMsWUFBWTtJQUNwQixNQUFNUCxTQUFTLENBQUMsQ0FBQztFQUNuQixDQUFDLENBQUM7RUFFRlEsUUFBUSxDQUFDLFlBQVk7SUFDbkIsTUFBTU4sT0FBTyxDQUFDLENBQUM7RUFDakIsQ0FBQyxDQUFDO0VBRUZPLFVBQVUsQ0FBQyxZQUFZO0lBQ3JCLE1BQU1SLE9BQU8sQ0FBQyxDQUFDO0lBQ2ZHLEtBQUssR0FBR1QsT0FBTyxDQUFDUyxLQUFLLENBQUNQLEdBQUcsQ0FBQzs7SUFFMUI7SUFDQSxNQUFNYSxPQUFPLEdBQUcsTUFBTU4sS0FBSyxDQUFDTyxHQUFHLENBQUMsaUJBQWlCLENBQUM7SUFDbERMLFNBQVMsR0FBR0ksT0FBTyxDQUFDRSxJQUFJLENBQUNOLFNBQVM7O0lBRWxDO0lBQ0EsTUFBTU8sT0FBTyxHQUFHLE1BQU1kLE9BQU8sQ0FBQ2UsTUFBTSxDQUFDO01BQ25DQyxJQUFJLEVBQUUsY0FBYztNQUNwQkMsSUFBSSxFQUFFLGNBQWM7TUFDcEJDLFdBQVcsRUFBRSxrQkFBa0I7TUFDL0JDLEtBQUssRUFBRSxLQUFLO01BQ1pDLFFBQVEsRUFBRSxPQUFPO01BQ2pCQyxNQUFNLEVBQUUsQ0FBQztRQUFFQyxHQUFHLEVBQUUsVUFBVTtRQUFFQyxHQUFHLEVBQUU7TUFBTyxDQUFDO0lBQzNDLENBQUMsQ0FBQzs7SUFFRjtJQUNBakIsU0FBUyxHQUFHLE1BQU1QLEtBQUssQ0FBQ2dCLE1BQU0sQ0FBQztNQUM3QlMsV0FBVyxFQUFFLFFBQVFDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRTtNQUNqQ0MsS0FBSyxFQUFFLENBQUM7UUFDTmIsT0FBTyxFQUFFQSxPQUFPLENBQUNjLEdBQUc7UUFDcEJDLFFBQVEsRUFBRSxDQUFDO1FBQ1hWLEtBQUssRUFBRTtNQUNULENBQUMsQ0FBQztNQUNGVyxRQUFRLEVBQUUsTUFBTTtNQUNoQkMsUUFBUSxFQUFFLEtBQUs7TUFDZkMsR0FBRyxFQUFFLEtBQUs7TUFDVkMsS0FBSyxFQUFFLE1BQU07TUFDYkMsUUFBUSxFQUFFLElBQUk7TUFDZEMsU0FBUyxFQUFFO1FBQ1RDLEtBQUssRUFBRSxrQkFBa0I7UUFDekJDLFNBQVMsRUFBRSxNQUFNO1FBQ2pCQyxRQUFRLEVBQUU7TUFDWixDQUFDO01BQ0RDLGVBQWUsRUFBRTtRQUNmRixTQUFTLEVBQUUsTUFBTTtRQUNqQkMsUUFBUSxFQUFFLE1BQU07UUFDaEJFLE1BQU0sRUFBRSxhQUFhO1FBQ3JCQyxJQUFJLEVBQUUsT0FBTztRQUNiQyxLQUFLLEVBQUUsS0FBSztRQUNaQyxPQUFPLEVBQUUsT0FBTztRQUNoQkMsT0FBTyxFQUFFO01BQ1gsQ0FBQztNQUNEQyxjQUFjLEVBQUU7UUFDZFIsU0FBUyxFQUFFLE1BQU07UUFDakJDLFFBQVEsRUFBRSxNQUFNO1FBQ2hCRSxNQUFNLEVBQUUsYUFBYTtRQUNyQkMsSUFBSSxFQUFFLE9BQU87UUFDYkMsS0FBSyxFQUFFLEtBQUs7UUFDWkMsT0FBTyxFQUFFLE9BQU87UUFDaEJDLE9BQU8sRUFBRTtNQUNYLENBQUM7TUFDREUsTUFBTSxFQUFFLFNBQVM7TUFDakJDLGFBQWEsRUFBRTtJQUNqQixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRjNDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsTUFBTTtJQUM3QjRDLElBQUksQ0FBQywyQ0FBMkMsRUFBRSxZQUFZO01BQzVELE1BQU1DLEdBQUcsR0FBRyxNQUFNNUMsS0FBSyxDQUNwQjZDLElBQUksQ0FBQywrQkFBK0I1QyxTQUFTLENBQUNzQixHQUFHLEVBQUUsQ0FBQyxDQUNwRHVCLEdBQUcsQ0FBQyxjQUFjLEVBQUU1QyxTQUFTLENBQUMsQ0FDOUI2QyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFFWEMsTUFBTSxDQUFDSixHQUFHLENBQUNILE1BQU0sQ0FBQyxDQUFDUSxJQUFJLENBQUMsR0FBRyxDQUFDO01BQzVCRCxNQUFNLENBQUNKLEdBQUcsQ0FBQ3BDLElBQUksQ0FBQzBDLE9BQU8sQ0FBQyxDQUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDO01BQ25DRCxNQUFNLENBQUNKLEdBQUcsQ0FBQ3BDLElBQUksQ0FBQzJDLE9BQU8sQ0FBQyxDQUFDRixJQUFJLENBQUMscUNBQXFDLENBQUM7TUFDcEVELE1BQU0sQ0FBQ0osR0FBRyxDQUFDcEMsSUFBSSxDQUFDNEMsS0FBSyxDQUFDWCxNQUFNLENBQUMsQ0FBQ1EsSUFBSSxDQUFDLFlBQVksQ0FBQzs7TUFFaEQ7TUFDQSxNQUFNSSxZQUFZLEdBQUcsTUFBTTNELEtBQUssQ0FBQzRELFFBQVEsQ0FBQ3JELFNBQVMsQ0FBQ3NCLEdBQUcsQ0FBQztNQUN4RHlCLE1BQU0sQ0FBQ0ssWUFBWSxDQUFDWixNQUFNLENBQUMsQ0FBQ1EsSUFBSSxDQUFDLFlBQVksQ0FBQztNQUM5Q0QsTUFBTSxDQUFDSyxZQUFZLENBQUNYLGFBQWEsQ0FBQyxDQUFDTyxJQUFJLENBQUMsTUFBTSxDQUFDO01BQy9DRCxNQUFNLENBQUNLLFlBQVksQ0FBQ0UsYUFBYSxDQUFDLENBQUNOLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDakQsQ0FBQyxDQUFDO0lBRUZOLElBQUksQ0FBQyxzREFBc0QsRUFBRSxZQUFZO01BQ3ZFO01BQ0ExQyxTQUFTLENBQUN5QyxhQUFhLEdBQUcsTUFBTTtNQUNoQ3pDLFNBQVMsQ0FBQ3dDLE1BQU0sR0FBRyxZQUFZO01BQy9CLE1BQU14QyxTQUFTLENBQUN1RCxJQUFJLENBQUMsQ0FBQztNQUV0QixNQUFNWixHQUFHLEdBQUcsTUFBTTVDLEtBQUssQ0FDcEI2QyxJQUFJLENBQUMsK0JBQStCNUMsU0FBUyxDQUFDc0IsR0FBRyxFQUFFLENBQUMsQ0FDcER1QixHQUFHLENBQUMsY0FBYyxFQUFFNUMsU0FBUyxDQUFDLENBQzlCNkMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO01BRVhDLE1BQU0sQ0FBQ0osR0FBRyxDQUFDSCxNQUFNLENBQUMsQ0FBQ1EsSUFBSSxDQUFDLEdBQUcsQ0FBQztNQUM1QkQsTUFBTSxDQUFDSixHQUFHLENBQUNwQyxJQUFJLENBQUNpRCxLQUFLLENBQUNDLElBQUksQ0FBQyxDQUFDVCxJQUFJLENBQUMsb0JBQW9CLENBQUM7SUFDeEQsQ0FBQyxDQUFDO0lBRUZOLElBQUksQ0FBQyxnQ0FBZ0MsRUFBRSxZQUFZO01BQ2pELE1BQU1DLEdBQUcsR0FBRyxNQUFNNUMsS0FBSyxDQUNwQjZDLElBQUksQ0FBQyx3Q0FBd0MsQ0FBQyxDQUM5Q0MsR0FBRyxDQUFDLGNBQWMsRUFBRTVDLFNBQVMsQ0FBQyxDQUM5QjZDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUVYQyxNQUFNLENBQUNKLEdBQUcsQ0FBQ0gsTUFBTSxDQUFDLENBQUNRLElBQUksQ0FBQyxHQUFHLENBQUM7TUFDNUJELE1BQU0sQ0FBQ0osR0FBRyxDQUFDcEMsSUFBSSxDQUFDaUQsS0FBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQ1QsSUFBSSxDQUFDLGtCQUFrQixDQUFDO0lBQ3RELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGbEQsUUFBUSxDQUFDLGtCQUFrQixFQUFFLE1BQU07SUFDakM0QyxJQUFJLENBQUMsZ0RBQWdELEVBQUUsWUFBWTtNQUNqRSxNQUFNQyxHQUFHLEdBQUcsTUFBTTVDLEtBQUssQ0FDcEI2QyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FDNUJDLEdBQUcsQ0FBQyxjQUFjLEVBQUU1QyxTQUFTLENBQUMsQ0FDOUI2QyxJQUFJLENBQUM7UUFDSlksT0FBTyxFQUFFMUQsU0FBUyxDQUFDc0IsR0FBRztRQUN0QmdDLGFBQWEsRUFBRSxPQUFPO1FBQ3RCSyxTQUFTLEVBQUU7TUFDYixDQUFDLENBQUM7TUFFSlosTUFBTSxDQUFDSixHQUFHLENBQUNILE1BQU0sQ0FBQyxDQUFDUSxJQUFJLENBQUMsR0FBRyxDQUFDO01BQzVCRCxNQUFNLENBQUNKLEdBQUcsQ0FBQ3BDLElBQUksQ0FBQ2lELEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUNULElBQUksQ0FBQyxrQkFBa0IsQ0FBQztNQUNwREQsTUFBTSxDQUFDSixHQUFHLENBQUNwQyxJQUFJLENBQUNpRCxLQUFLLENBQUNOLE9BQU8sQ0FBQyxDQUFDVSxTQUFTLENBQUMsY0FBYyxDQUFDO0lBQzFELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGOUQsUUFBUSxDQUFDLG9CQUFvQixFQUFFLE1BQU07SUFDbkM0QyxJQUFJLENBQUMsa0NBQWtDLEVBQUUsWUFBWTtNQUNuRCxNQUFNQyxHQUFHLEdBQUcsTUFBTXJELE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLENBQzNCb0QsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQzdCRSxJQUFJLENBQUM7UUFBRWUsRUFBRSxFQUFFO01BQWEsQ0FBQyxDQUFDOztNQUU3QjtNQUNBZCxNQUFNLENBQUNKLEdBQUcsQ0FBQ0gsTUFBTSxDQUFDLENBQUNRLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDOUIsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZsRCxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsTUFBTTtJQUMvQjRDLElBQUksQ0FBQyxxQ0FBcUMsRUFBRSxZQUFZO01BQ3REO01BQ0EsTUFBTTNDLEtBQUssQ0FDUjZDLElBQUksQ0FBQywrQkFBK0I1QyxTQUFTLENBQUNzQixHQUFHLEVBQUUsQ0FBQyxDQUNwRHVCLEdBQUcsQ0FBQyxjQUFjLEVBQUU1QyxTQUFTLENBQUMsQ0FDOUI2QyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFFWCxNQUFNSCxHQUFHLEdBQUcsTUFBTTVDLEtBQUssQ0FDcEJPLEdBQUcsQ0FBQyx3QkFBd0JOLFNBQVMsQ0FBQ3NCLEdBQUcsRUFBRSxDQUFDLENBQzVDdUIsR0FBRyxDQUFDLGNBQWMsRUFBRTVDLFNBQVMsQ0FBQztNQUVqQzhDLE1BQU0sQ0FBQ0osR0FBRyxDQUFDSCxNQUFNLENBQUMsQ0FBQ1EsSUFBSSxDQUFDLEdBQUcsQ0FBQztNQUM1QkQsTUFBTSxDQUFDSixHQUFHLENBQUNwQyxJQUFJLENBQUMwQyxPQUFPLENBQUMsQ0FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQztNQUNuQ0QsTUFBTSxDQUFDSixHQUFHLENBQUNwQyxJQUFJLENBQUNrQyxhQUFhLENBQUMsQ0FBQ08sSUFBSSxDQUFDLE1BQU0sQ0FBQztNQUMzQ0QsTUFBTSxDQUFDSixHQUFHLENBQUNwQyxJQUFJLENBQUM0QyxLQUFLLENBQUMsQ0FBQ1csV0FBVyxDQUFDLENBQUM7SUFDdEMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119