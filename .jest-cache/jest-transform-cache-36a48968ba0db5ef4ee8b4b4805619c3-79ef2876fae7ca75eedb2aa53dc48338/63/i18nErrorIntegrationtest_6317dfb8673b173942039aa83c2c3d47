8b642cc511b2277b72a336b017cda550
const request = require('supertest');
const express = require('express');
const {
  AppError,
  globalErrorHandler
} = require('../middleware/errorHandler');
const {
  i18nMiddleware
} = require('../utils/i18n');
const {
  errorResponse,
  ErrorCodes
} = require('../utils/errorHandler');
describe('i18n Error Integration', () => {
  let app;
  beforeEach(() => {
    app = express();
    app.use(express.json());
    app.use(i18nMiddleware);
    app.use(errorResponse);

    // Test routes
    app.get('/test-apperror', (req, res, next) => {
      next(new AppError('Product not found', 404, ErrorCodes.PRODUCT_NOT_FOUND));
    });
    app.get('/test-res-error', (req, res) => {
      // Debug: log i18n function
      console.log('req.i18n exists:', !!req.i18n);
      console.log('req.locale:', req.locale);
      res.error(404, ErrorCodes.PRODUCT_NOT_FOUND, 'Product not found');
    });
    app.get('/test-validation', (req, res) => {
      const mockValidationErrors = {
        array: () => [{
          msg: 'Invalid email',
          param: 'email',
          location: 'body'
        }]
      };
      res.validationError(mockValidationErrors);
    });
    app.use(globalErrorHandler);
  });
  describe('Error message translation', () => {
    test('should return English error by default', async () => {
      const response = await request(app).get('/test-apperror').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Product not found'
        }
      });
    });
    test('should return Spanish error when locale is es', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'es').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Producto no encontrado'
        }
      });
    });
    test('should return French error when locale is fr', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'fr').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Produit non trouvé'
        }
      });
    });
    test('should return Arabic error when locale is ar', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'ar').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'المنتج غير موجود'
        }
      });
    });
    test('should return Hebrew error when locale is he', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'he').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'המוצר לא נמצא'
        }
      });
    });
    test('should handle Chinese locale', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'zh').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: '产品未找到'
        }
      });
    });
    test('should handle Japanese locale', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'ja').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: '商品が見つかりません'
        }
      });
    });
    test('should handle German locale', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'de').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Produkt nicht gefunden'
        }
      });
    });
  });
  describe('Error response helpers', () => {
    test('res.error should return translated error', async () => {
      const response = await request(app).get('/test-res-error').set('x-locale', 'es').expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Producto no encontrado'
        }
      });
    });
    test('validation errors should use default locale', async () => {
      const response = await request(app).get('/test-validation').expect(400);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: [{
            field: 'email',
            message: 'Invalid email',
            location: 'body'
          }]
        }
      });
    });
  });
  describe('Development mode', () => {
    const originalEnv = process.env.NODE_ENV;
    beforeEach(() => {
      process.env.NODE_ENV = 'development';
    });
    afterEach(() => {
      process.env.NODE_ENV = originalEnv;
    });
    test('should include additional debug info in development', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'es').expect(404);
      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('PRODUCT_NOT_FOUND');
      expect(response.body.error.message).toBe('Producto no encontrado');
      expect(response.body.error.originalMessage).toBe('Product not found');
      expect(response.body.error.locale).toBe('es');
      expect(response.body.error.stack).toBeDefined();
    });
  });
  describe('RTL language support', () => {
    test('should set RTL flag for Arabic', async () => {
      const app = express();
      app.use(i18nMiddleware);
      app.get('/test-rtl', (req, res) => {
        res.json({
          locale: req.locale,
          isRTL: req.isRTL
        });
      });
      const response = await request(app).get('/test-rtl').set('x-locale', 'ar').expect(200);
      expect(response.body).toEqual({
        locale: 'ar',
        isRTL: true
      });
    });
    test('should set RTL flag for Hebrew', async () => {
      const app = express();
      app.use(i18nMiddleware);
      app.get('/test-rtl', (req, res) => {
        res.json({
          locale: req.locale,
          isRTL: req.isRTL
        });
      });
      const response = await request(app).get('/test-rtl').set('x-locale', 'he').expect(200);
      expect(response.body).toEqual({
        locale: 'he',
        isRTL: true
      });
    });
    test('should not set RTL flag for LTR languages', async () => {
      const app = express();
      app.use(i18nMiddleware);
      app.get('/test-rtl', (req, res) => {
        res.json({
          locale: req.locale,
          isRTL: req.isRTL
        });
      });
      const response = await request(app).get('/test-rtl').set('x-locale', 'en').expect(200);
      expect(response.body).toEqual({
        locale: 'en',
        isRTL: false
      });
    });
  });
  describe('Fallback behavior', () => {
    test('should fallback to English for unsupported locale', async () => {
      const response = await request(app).get('/test-apperror').set('x-locale', 'ru') // Russian not supported
      .expect(404);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Product not found'
        }
      });
    });
    test('should use default message when translation missing', async () => {
      const app = express();
      app.use(express.json());
      app.use(i18nMiddleware);
      app.get('/test-custom', (req, res, next) => {
        // Using a code that doesn't exist in translations
        next(new AppError('This is a custom error', 400, 'CUSTOM_ERROR_CODE'));
      });
      app.use(globalErrorHandler);
      const response = await request(app).get('/test-custom').set('x-locale', 'es').expect(400);
      expect(response.body.error.message).toBe('This is a custom error');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImV4cHJlc3MiLCJBcHBFcnJvciIsImdsb2JhbEVycm9ySGFuZGxlciIsImkxOG5NaWRkbGV3YXJlIiwiZXJyb3JSZXNwb25zZSIsIkVycm9yQ29kZXMiLCJkZXNjcmliZSIsImFwcCIsImJlZm9yZUVhY2giLCJ1c2UiLCJqc29uIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsIlBST0RVQ1RfTk9UX0ZPVU5EIiwiY29uc29sZSIsImxvZyIsImkxOG4iLCJsb2NhbGUiLCJlcnJvciIsIm1vY2tWYWxpZGF0aW9uRXJyb3JzIiwiYXJyYXkiLCJtc2ciLCJwYXJhbSIsImxvY2F0aW9uIiwidmFsaWRhdGlvbkVycm9yIiwidGVzdCIsInJlc3BvbnNlIiwiZXhwZWN0IiwiYm9keSIsInRvRXF1YWwiLCJzdWNjZXNzIiwiY29kZSIsIm1lc3NhZ2UiLCJzZXQiLCJkZXRhaWxzIiwiZmllbGQiLCJvcmlnaW5hbEVudiIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImFmdGVyRWFjaCIsInRvQmUiLCJvcmlnaW5hbE1lc3NhZ2UiLCJzdGFjayIsInRvQmVEZWZpbmVkIiwiaXNSVEwiXSwic291cmNlcyI6WyJpMThuRXJyb3JJbnRlZ3JhdGlvbi50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCB7IEFwcEVycm9yLCBnbG9iYWxFcnJvckhhbmRsZXIgfSA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmUvZXJyb3JIYW5kbGVyJyk7XG5jb25zdCB7IGkxOG5NaWRkbGV3YXJlIH0gPSByZXF1aXJlKCcuLi91dGlscy9pMThuJyk7XG5jb25zdCB7IGVycm9yUmVzcG9uc2UsIEVycm9yQ29kZXMgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2Vycm9ySGFuZGxlcicpO1xuXG5kZXNjcmliZSgnaTE4biBFcnJvciBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgbGV0IGFwcDtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBhcHAgPSBleHByZXNzKCk7XG4gICAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gICAgYXBwLnVzZShpMThuTWlkZGxld2FyZSk7XG4gICAgYXBwLnVzZShlcnJvclJlc3BvbnNlKTtcblxuICAgIC8vIFRlc3Qgcm91dGVzXG4gICAgYXBwLmdldCgnL3Rlc3QtYXBwZXJyb3InLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgIG5leHQobmV3IEFwcEVycm9yKCdQcm9kdWN0IG5vdCBmb3VuZCcsIDQwNCwgRXJyb3JDb2Rlcy5QUk9EVUNUX05PVF9GT1VORCkpO1xuICAgIH0pO1xuXG4gICAgYXBwLmdldCgnL3Rlc3QtcmVzLWVycm9yJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAvLyBEZWJ1ZzogbG9nIGkxOG4gZnVuY3Rpb25cbiAgICAgIGNvbnNvbGUubG9nKCdyZXEuaTE4biBleGlzdHM6JywgISFyZXEuaTE4bik7XG4gICAgICBjb25zb2xlLmxvZygncmVxLmxvY2FsZTonLCByZXEubG9jYWxlKTtcbiAgICAgIHJlcy5lcnJvcig0MDQsIEVycm9yQ29kZXMuUFJPRFVDVF9OT1RfRk9VTkQsICdQcm9kdWN0IG5vdCBmb3VuZCcpO1xuICAgIH0pO1xuXG4gICAgYXBwLmdldCgnL3Rlc3QtdmFsaWRhdGlvbicsIChyZXEsIHJlcykgPT4ge1xuICAgICAgY29uc3QgbW9ja1ZhbGlkYXRpb25FcnJvcnMgPSB7XG4gICAgICAgIGFycmF5OiAoKSA9PiBbXG4gICAgICAgICAgeyBtc2c6ICdJbnZhbGlkIGVtYWlsJywgcGFyYW06ICdlbWFpbCcsIGxvY2F0aW9uOiAnYm9keScgfVxuICAgICAgICBdXG4gICAgICB9O1xuICAgICAgcmVzLnZhbGlkYXRpb25FcnJvcihtb2NrVmFsaWRhdGlvbkVycm9ycyk7XG4gICAgfSk7XG5cbiAgICBhcHAudXNlKGdsb2JhbEVycm9ySGFuZGxlcik7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBtZXNzYWdlIHRyYW5zbGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gRW5nbGlzaCBlcnJvciBieSBkZWZhdWx0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtYXBwZXJyb3InKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1BST0RVQ1RfTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAnUHJvZHVjdCBub3QgZm91bmQnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBTcGFuaXNoIGVycm9yIHdoZW4gbG9jYWxlIGlzIGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtYXBwZXJyb3InKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdlcycpXG4gICAgICAgIC5leHBlY3QoNDA0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnUFJPRFVDVF9OT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0byBubyBlbmNvbnRyYWRvJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gRnJlbmNoIGVycm9yIHdoZW4gbG9jYWxlIGlzIGZyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtYXBwZXJyb3InKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdmcicpXG4gICAgICAgIC5leHBlY3QoNDA0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnUFJPRFVDVF9OT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWl0IG5vbiB0cm91dsOpJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gQXJhYmljIGVycm9yIHdoZW4gbG9jYWxlIGlzIGFyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtYXBwZXJyb3InKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdhcicpXG4gICAgICAgIC5leHBlY3QoNDA0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnUFJPRFVDVF9OT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICfYp9mE2YXZhtiq2Kwg2LrZitixINmF2YjYrNmI2K8nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBIZWJyZXcgZXJyb3Igd2hlbiBsb2NhbGUgaXMgaGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1hcHBlcnJvcicpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ2hlJylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ9eU157Xldem16gg15zXkCDXoNee16bXkCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIENoaW5lc2UgbG9jYWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtYXBwZXJyb3InKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICd6aCcpXG4gICAgICAgIC5leHBlY3QoNDA0KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnUFJPRFVDVF9OT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICfkuqflk4HmnKrmib7liLAnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBKYXBhbmVzZSBsb2NhbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1hcHBlcnJvcicpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ2phJylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ+WVhuWTgeOBjOimi+OBpOOBi+OCiuOBvuOBm+OCkydcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIEdlcm1hbiBsb2NhbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1hcHBlcnJvcicpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ2RlJylcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1Byb2R1a3QgbmljaHQgZ2VmdW5kZW4nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgcmVzcG9uc2UgaGVscGVycycsICgpID0+IHtcbiAgICB0ZXN0KCdyZXMuZXJyb3Igc2hvdWxkIHJldHVybiB0cmFuc2xhdGVkIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtcmVzLWVycm9yJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnZXMnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1BST0RVQ1RfTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAnUHJvZHVjdG8gbm8gZW5jb250cmFkbydcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCd2YWxpZGF0aW9uIGVycm9ycyBzaG91bGQgdXNlIGRlZmF1bHQgbG9jYWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtdmFsaWRhdGlvbicpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZGF0YScsXG4gICAgICAgICAgZGV0YWlsczogW1xuICAgICAgICAgICAgeyBmaWVsZDogJ2VtYWlsJywgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwnLCBsb2NhdGlvbjogJ2JvZHknIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGV2ZWxvcG1lbnQgbW9kZScsICgpID0+IHtcbiAgICBjb25zdCBvcmlnaW5hbEVudiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9ICdkZXZlbG9wbWVudCc7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBvcmlnaW5hbEVudjtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBpbmNsdWRlIGFkZGl0aW9uYWwgZGVidWcgaW5mbyBpbiBkZXZlbG9wbWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy90ZXN0LWFwcGVycm9yJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnZXMnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IuY29kZSkudG9CZSgnUFJPRFVDVF9OT1RfRk9VTkQnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yLm1lc3NhZ2UpLnRvQmUoJ1Byb2R1Y3RvIG5vIGVuY29udHJhZG8nKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yLm9yaWdpbmFsTWVzc2FnZSkudG9CZSgnUHJvZHVjdCBub3QgZm91bmQnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yLmxvY2FsZSkudG9CZSgnZXMnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yLnN0YWNrKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUlRMIGxhbmd1YWdlIHN1cHBvcnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHNldCBSVEwgZmxhZyBmb3IgQXJhYmljJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBwID0gZXhwcmVzcygpO1xuICAgICAgYXBwLnVzZShpMThuTWlkZGxld2FyZSk7XG4gICAgICBcbiAgICAgIGFwcC5nZXQoJy90ZXN0LXJ0bCcsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgbG9jYWxlOiByZXEubG9jYWxlLFxuICAgICAgICAgIGlzUlRMOiByZXEuaXNSVExcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtcnRsJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnYXInKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgICAgbG9jYWxlOiAnYXInLFxuICAgICAgICBpc1JUTDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgc2V0IFJUTCBmbGFnIGZvciBIZWJyZXcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcHAgPSBleHByZXNzKCk7XG4gICAgICBhcHAudXNlKGkxOG5NaWRkbGV3YXJlKTtcbiAgICAgIFxuICAgICAgYXBwLmdldCgnL3Rlc3QtcnRsJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgICBsb2NhbGU6IHJlcS5sb2NhbGUsXG4gICAgICAgICAgaXNSVEw6IHJlcS5pc1JUTFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdC1ydGwnKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdoZScpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBsb2NhbGU6ICdoZScsXG4gICAgICAgIGlzUlRMOiB0cnVlXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBub3Qgc2V0IFJUTCBmbGFnIGZvciBMVFIgbGFuZ3VhZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXBwID0gZXhwcmVzcygpO1xuICAgICAgYXBwLnVzZShpMThuTWlkZGxld2FyZSk7XG4gICAgICBcbiAgICAgIGFwcC5nZXQoJy90ZXN0LXJ0bCcsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICByZXMuanNvbih7XG4gICAgICAgICAgbG9jYWxlOiByZXEubG9jYWxlLFxuICAgICAgICAgIGlzUlRMOiByZXEuaXNSVExcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtcnRsJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnZW4nKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgICAgbG9jYWxlOiAnZW4nLFxuICAgICAgICBpc1JUTDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRmFsbGJhY2sgYmVoYXZpb3InLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGZhbGxiYWNrIHRvIEVuZ2xpc2ggZm9yIHVuc3VwcG9ydGVkIGxvY2FsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy90ZXN0LWFwcGVycm9yJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAncnUnKSAvLyBSdXNzaWFuIG5vdCBzdXBwb3J0ZWRcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1Byb2R1Y3Qgbm90IGZvdW5kJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB1c2UgZGVmYXVsdCBtZXNzYWdlIHdoZW4gdHJhbnNsYXRpb24gbWlzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbiAgICAgIGFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuICAgICAgYXBwLnVzZShpMThuTWlkZGxld2FyZSk7XG4gICAgICBcbiAgICAgIGFwcC5nZXQoJy90ZXN0LWN1c3RvbScsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICAvLyBVc2luZyBhIGNvZGUgdGhhdCBkb2Vzbid0IGV4aXN0IGluIHRyYW5zbGF0aW9uc1xuICAgICAgICBuZXh0KG5ldyBBcHBFcnJvcignVGhpcyBpcyBhIGN1c3RvbSBlcnJvcicsIDQwMCwgJ0NVU1RPTV9FUlJPUl9DT0RFJykpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGFwcC51c2UoZ2xvYmFsRXJyb3JIYW5kbGVyKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QtY3VzdG9tJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnZXMnKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yLm1lc3NhZ2UpLnRvQmUoJ1RoaXMgaXMgYSBjdXN0b20gZXJyb3InKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNwQyxNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFRSxRQUFRO0VBQUVDO0FBQW1CLENBQUMsR0FBR0gsT0FBTyxDQUFDLDRCQUE0QixDQUFDO0FBQzlFLE1BQU07RUFBRUk7QUFBZSxDQUFDLEdBQUdKLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDbkQsTUFBTTtFQUFFSyxhQUFhO0VBQUVDO0FBQVcsQ0FBQyxHQUFHTixPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFFdEVPLFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxNQUFNO0VBQ3ZDLElBQUlDLEdBQUc7RUFFUEMsVUFBVSxDQUFDLE1BQU07SUFDZkQsR0FBRyxHQUFHUCxPQUFPLENBQUMsQ0FBQztJQUNm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Q0FBQztFQUVGekMsUUFBUSxDQUFDLG1CQUFtQixFQUFFLE1BQU07SUFDbENxQixJQUFJLENBQUMsbURBQW1ELEVBQUUsWUFBWTtNQUNwRSxNQUFNQyxRQUFRLEdBQUcsTUFBTTlCLE9BQU8sQ0FBQ1MsR0FBRyxDQUFDLENBQ2hDSSxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FDckJ3QixHQUFHLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO01BQUEsQ0FDdEJOLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDRCxRQUFRLENBQUNFLElBQUksQ0FBQyxDQUFDQyxPQUFPLENBQUM7UUFDNUJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RaLEtBQUssRUFBRTtVQUNMYSxJQUFJLEVBQUUsbUJBQW1CO1VBQ3pCQyxPQUFPLEVBQUU7UUFDWDtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztJQUVGUCxJQUFJLENBQUMscURBQXFELEVBQUUsWUFBWTtNQUN0RSxNQUFNcEIsR0FBRyxHQUFHUCxPQUFPLENBQUMsQ0FBQztNQUNyQk8sR0FBRyxDQUFDRSxHQUFHLENBQUNULE9BQU8sQ0FBQ1UsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUN2QkgsR0FBRyxDQUFDRSxHQUFHLENBQUNOLGNBQWMsQ0FBQztNQUV2QkksR0FBRyxDQUFDSSxHQUFHLENBQUMsY0FBYyxFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7UUFDMUM7UUFDQUEsSUFBSSxDQUFDLElBQUliLFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxHQUFHLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztNQUN4RSxDQUFDLENBQUM7TUFFRk0sR0FBRyxDQUFDRSxHQUFHLENBQUNQLGtCQUFrQixDQUFDO01BRTNCLE1BQU0wQixRQUFRLEdBQUcsTUFBTTlCLE9BQU8sQ0FBQ1MsR0FBRyxDQUFDLENBQ2hDSSxHQUFHLENBQUMsY0FBYyxDQUFDLENBQ25Cd0IsR0FBRyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FDckJOLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDRCxRQUFRLENBQUNFLElBQUksQ0FBQ1YsS0FBSyxDQUFDYyxPQUFPLENBQUMsQ0FBQ1MsSUFBSSxDQUFDLHdCQUF3QixDQUFDO0lBQ3BFLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==