1f630d398b46e9a7c88546f946e7309e
const request = require('supertest');
const app = require('../../server');
const Product = require('../../models/Product');
const Order = require('../../models/Order');
const {
  connectDB,
  clearDB,
  closeDB
} = require('../setup/testDb');
describe('Checkout Flow Integration Tests', () => {
  let agent;
  let testProduct;
  let csrfToken;
  beforeAll(async () => {
    await connectDB();
  });
  afterAll(async () => {
    await closeDB();
  });
  beforeEach(async () => {
    await clearDB();
    agent = request.agent(app);

    // Create test product
    testProduct = await Product.create({
      name: 'Test Crystal',
      slug: 'test-crystal',
      description: 'A test crystal product',
      price: 29.99,
      category: 'crystals',
      images: [{
        url: 'https://example.com/crystal.jpg',
        alt: 'Test Crystal'
      }],
      inventory: {
        inStock: true,
        quantity: 10
      }
    });

    // Get CSRF token
    const csrfRes = await agent.get('/api/csrf-token');
    csrfToken = csrfRes.body.csrfToken;
  });
  describe('Guest Checkout', () => {
    test('should complete full guest checkout flow', async () => {
      // 1. Add to cart
      const cartRes = await agent.post('/api/cart/add').set('X-CSRF-Token', csrfToken).send({
        productId: testProduct._id,
        quantity: 2
      });
      expect(cartRes.status).toBe(200);
      expect(cartRes.body.success).toBe(true);
      expect(cartRes.body.cart.items).toHaveLength(1);
      expect(cartRes.body.cart.items[0].quantity).toBe(2);

      // 2. Create order
      const orderData = {
        items: [{
          productId: testProduct._id,
          quantity: 2,
          price: testProduct.price
        }],
        guestInfo: {
          firstName: 'Test',
          lastName: 'Customer',
          email: 'test@example.com',
          phone: '+33 6 12 34 56 78'
        },
        shippingAddress: {
          firstName: 'Test',
          lastName: 'Customer',
          street: '123 Test Street',
          city: 'Paris',
          state: 'IDF',
          zipCode: '75001',
          country: 'FR'
        },
        billingAddress: {
          firstName: 'Test',
          lastName: 'Customer',
          street: '123 Test Street',
          city: 'Paris',
          state: 'IDF',
          zipCode: '75001',
          country: 'FR'
        }
      };
      const orderRes = await agent.post('/api/orders').set('X-CSRF-Token', csrfToken).send(orderData);
      expect(orderRes.status).toBe(201);
      expect(orderRes.body.success).toBe(true);
      expect(orderRes.body.order).toBeDefined();
      expect(orderRes.body.order.total).toBe(59.98 + 5.99 + 8.17); // items + shipping + tax

      const orderId = orderRes.body.order._id;

      // 3. Complete demo payment
      const paymentRes = await agent.post(`/api/payments/demo-complete/${orderId}`).set('X-CSRF-Token', csrfToken).send({});
      expect(paymentRes.status).toBe(200);
      expect(paymentRes.body.success).toBe(true);
      expect(paymentRes.body.order.status).toBe('processing');

      // 4. Verify order status
      const order = await Order.findById(orderId);
      expect(order.status).toBe('processing');
      expect(order.paymentStatus).toBe('paid');
    });
    test('should validate guest information', async () => {
      const invalidOrderData = {
        items: [{
          productId: testProduct._id,
          quantity: 1,
          price: testProduct.price
        }],
        guestInfo: {
          firstName: '',
          // Missing required field
          lastName: 'Customer',
          email: 'invalid-email',
          // Invalid email
          phone: '123' // Too short
        },
        shippingAddress: {
          firstName: 'Test',
          lastName: 'Customer',
          street: '',
          // Missing required field
          city: 'Paris',
          state: 'IDF',
          zipCode: '75001',
          country: 'FR'
        }
      };
      const res = await agent.post('/api/orders').set('X-CSRF-Token', csrfToken).send(invalidOrderData);
      expect(res.status).toBe(400);
      expect(res.body.success).toBe(false);
      expect(res.body.error.code).toBe('VALIDATION_ERROR');
      expect(res.body.error.details).toBeDefined();
      expect(res.body.error.details.length).toBeGreaterThan(0);
    });
  });
  describe('Cart Persistence', () => {
    test('should persist cart across sessions', async () => {
      // Add to cart
      await agent.post('/api/cart/add').set('X-CSRF-Token', csrfToken).send({
        productId: testProduct._id,
        quantity: 1
      });

      // Get cart
      const cartRes1 = await agent.get('/api/cart').set('X-CSRF-Token', csrfToken);
      expect(cartRes1.body.cart.items).toHaveLength(1);
      const sessionCookie = cartRes1.headers['set-cookie'];

      // Create new agent with same session
      const agent2 = request.agent(app);

      // Get new CSRF token but use same session
      const csrfRes2 = await agent2.get('/api/csrf-token').set('Cookie', sessionCookie);
      const csrfToken2 = csrfRes2.body.csrfToken;

      // Get cart with new agent
      const cartRes2 = await agent2.get('/api/cart').set('X-CSRF-Token', csrfToken2).set('Cookie', sessionCookie);
      expect(cartRes2.body.cart.items).toHaveLength(1);
      expect(cartRes2.body.cart.items[0].product._id).toBe(testProduct._id.toString());
    });
  });
  describe('Inventory Management', () => {
    test('should prevent ordering out of stock items', async () => {
      // Set product out of stock
      testProduct.inventory.inStock = false;
      testProduct.inventory.quantity = 0;
      await testProduct.save();
      const res = await agent.post('/api/cart/add').set('X-CSRF-Token', csrfToken).send({
        productId: testProduct._id,
        quantity: 1
      });
      expect(res.status).toBe(400);
      expect(res.body.error.code).toBe('PRODUCT_UNAVAILABLE');
    });
    test('should prevent ordering more than available quantity', async () => {
      testProduct.inventory.quantity = 5;
      await testProduct.save();
      const res = await agent.post('/api/cart/add').set('X-CSRF-Token', csrfToken).send({
        productId: testProduct._id,
        quantity: 10
      });
      expect(res.status).toBe(400);
      expect(res.body.error.code).toBe('INSUFFICIENT_STOCK');
    });
  });
  describe('Session and CSRF', () => {
    test('should reject requests without CSRF token', async () => {
      const res = await agent.post('/api/cart/add').send({
        productId: testProduct._id,
        quantity: 1
      });
      expect(res.status).toBe(403);
      expect(res.body.error.code).toBe('CSRF_ERROR');
    });
    test('should provide session info in CSRF endpoint', async () => {
      const res = await agent.get('/api/csrf-token');
      expect(res.body.success).toBe(true);
      expect(res.body.csrfToken).toBeDefined();
      expect(res.body.sessionInfo).toBeDefined();
      expect(res.body.sessionInfo.isGuest).toBe(true);
      expect(res.body.sessionInfo.hasCart).toBe(false);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImFwcCIsIlByb2R1Y3QiLCJPcmRlciIsImNvbm5lY3REQiIsImNsZWFyREIiLCJjbG9zZURCIiwiZGVzY3JpYmUiLCJhZ2VudCIsInRlc3RQcm9kdWN0IiwiY3NyZlRva2VuIiwiYmVmb3JlQWxsIiwiYWZ0ZXJBbGwiLCJiZWZvcmVFYWNoIiwiY3JlYXRlIiwibmFtZSIsInNsdWciLCJkZXNjcmlwdGlvbiIsInByaWNlIiwiY2F0ZWdvcnkiLCJpbWFnZXMiLCJ1cmwiLCJhbHQiLCJpbnZlbnRvcnkiLCJpblN0b2NrIiwicXVhbnRpdHkiLCJjc3JmUmVzIiwiZ2V0IiwiYm9keSIsInRlc3QiLCJjYXJ0UmVzIiwicG9zdCIsInNldCIsInNlbmQiLCJwcm9kdWN0SWQiLCJfaWQiLCJleHBlY3QiLCJzdGF0dXMiLCJ0b0JlIiwic3VjY2VzcyIsImNhcnQiLCJpdGVtcyIsInRvSGF2ZUxlbmd0aCIsIm9yZGVyRGF0YSIsImd1ZXN0SW5mbyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJwaG9uZSIsInNoaXBwaW5nQWRkcmVzcyIsInN0cmVldCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJjb3VudHJ5IiwiYmlsbGluZ0FkZHJlc3MiLCJvcmRlclJlcyIsIm9yZGVyIiwidG9CZURlZmluZWQiLCJ0b3RhbCIsIm9yZGVySWQiLCJwYXltZW50UmVzIiwiZmluZEJ5SWQiLCJwYXltZW50U3RhdHVzIiwiaW52YWxpZE9yZGVyRGF0YSIsInJlcyIsImVycm9yIiwiY29kZSIsImRldGFpbHMiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJjYXJ0UmVzMSIsInNlc3Npb25Db29raWUiLCJoZWFkZXJzIiwiYWdlbnQyIiwiY3NyZlJlczIiLCJjc3JmVG9rZW4yIiwiY2FydFJlczIiLCJwcm9kdWN0IiwidG9TdHJpbmciLCJzYXZlIiwic2Vzc2lvbkluZm8iLCJpc0d1ZXN0IiwiaGFzQ2FydCJdLCJzb3VyY2VzIjpbImNoZWNrb3V0LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xuY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vLi4vc2VydmVyJyk7XG5jb25zdCBQcm9kdWN0ID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzL1Byb2R1Y3QnKTtcbmNvbnN0IE9yZGVyID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzL09yZGVyJyk7XG5jb25zdCB7IGNvbm5lY3REQiwgY2xlYXJEQiwgY2xvc2VEQiB9ID0gcmVxdWlyZSgnLi4vc2V0dXAvdGVzdERiJyk7XG5cbmRlc2NyaWJlKCdDaGVja291dCBGbG93IEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBsZXQgYWdlbnQ7XG4gIGxldCB0ZXN0UHJvZHVjdDtcbiAgbGV0IGNzcmZUb2tlbjtcblxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGNvbm5lY3REQigpO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgY2xvc2VEQigpO1xuICB9KTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBjbGVhckRCKCk7XG4gICAgYWdlbnQgPSByZXF1ZXN0LmFnZW50KGFwcCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHRlc3QgcHJvZHVjdFxuICAgIHRlc3RQcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5jcmVhdGUoe1xuICAgICAgbmFtZTogJ1Rlc3QgQ3J5c3RhbCcsXG4gICAgICBzbHVnOiAndGVzdC1jcnlzdGFsJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQSB0ZXN0IGNyeXN0YWwgcHJvZHVjdCcsXG4gICAgICBwcmljZTogMjkuOTksXG4gICAgICBjYXRlZ29yeTogJ2NyeXN0YWxzJyxcbiAgICAgIGltYWdlczogW3tcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9jcnlzdGFsLmpwZycsXG4gICAgICAgIGFsdDogJ1Rlc3QgQ3J5c3RhbCdcbiAgICAgIH1dLFxuICAgICAgaW52ZW50b3J5OiB7XG4gICAgICAgIGluU3RvY2s6IHRydWUsXG4gICAgICAgIHF1YW50aXR5OiAxMFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gR2V0IENTUkYgdG9rZW5cbiAgICBjb25zdCBjc3JmUmVzID0gYXdhaXQgYWdlbnQuZ2V0KCcvYXBpL2NzcmYtdG9rZW4nKTtcbiAgICBjc3JmVG9rZW4gPSBjc3JmUmVzLmJvZHkuY3NyZlRva2VuO1xuICB9KTtcblxuICBkZXNjcmliZSgnR3Vlc3QgQ2hlY2tvdXQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNvbXBsZXRlIGZ1bGwgZ3Vlc3QgY2hlY2tvdXQgZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIDEuIEFkZCB0byBjYXJ0XG4gICAgICBjb25zdCBjYXJ0UmVzID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLnBvc3QoJy9hcGkvY2FydC9hZGQnKVxuICAgICAgICAuc2V0KCdYLUNTUkYtVG9rZW4nLCBjc3JmVG9rZW4pXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBwcm9kdWN0SWQ6IHRlc3RQcm9kdWN0Ll9pZCxcbiAgICAgICAgICBxdWFudGl0eTogMlxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNhcnRSZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QoY2FydFJlcy5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY2FydFJlcy5ib2R5LmNhcnQuaXRlbXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChjYXJ0UmVzLmJvZHkuY2FydC5pdGVtc1swXS5xdWFudGl0eSkudG9CZSgyKTtcblxuICAgICAgLy8gMi4gQ3JlYXRlIG9yZGVyXG4gICAgICBjb25zdCBvcmRlckRhdGEgPSB7XG4gICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgIHByb2R1Y3RJZDogdGVzdFByb2R1Y3QuX2lkLFxuICAgICAgICAgIHF1YW50aXR5OiAyLFxuICAgICAgICAgIHByaWNlOiB0ZXN0UHJvZHVjdC5wcmljZVxuICAgICAgICB9XSxcbiAgICAgICAgZ3Vlc3RJbmZvOiB7XG4gICAgICAgICAgZmlyc3ROYW1lOiAnVGVzdCcsXG4gICAgICAgICAgbGFzdE5hbWU6ICdDdXN0b21lcicsXG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwaG9uZTogJyszMyA2IDEyIDM0IDU2IDc4J1xuICAgICAgICB9LFxuICAgICAgICBzaGlwcGluZ0FkZHJlc3M6IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICdUZXN0JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ0N1c3RvbWVyJyxcbiAgICAgICAgICBzdHJlZXQ6ICcxMjMgVGVzdCBTdHJlZXQnLFxuICAgICAgICAgIGNpdHk6ICdQYXJpcycsXG4gICAgICAgICAgc3RhdGU6ICdJREYnLFxuICAgICAgICAgIHppcENvZGU6ICc3NTAwMScsXG4gICAgICAgICAgY291bnRyeTogJ0ZSJ1xuICAgICAgICB9LFxuICAgICAgICBiaWxsaW5nQWRkcmVzczoge1xuICAgICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnQ3VzdG9tZXInLFxuICAgICAgICAgIHN0cmVldDogJzEyMyBUZXN0IFN0cmVldCcsXG4gICAgICAgICAgY2l0eTogJ1BhcmlzJyxcbiAgICAgICAgICBzdGF0ZTogJ0lERicsXG4gICAgICAgICAgemlwQ29kZTogJzc1MDAxJyxcbiAgICAgICAgICBjb3VudHJ5OiAnRlInXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG9yZGVyUmVzID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLnBvc3QoJy9hcGkvb3JkZXJzJylcbiAgICAgICAgLnNldCgnWC1DU1JGLVRva2VuJywgY3NyZlRva2VuKVxuICAgICAgICAuc2VuZChvcmRlckRhdGEpO1xuICAgICAgXG4gICAgICBleHBlY3Qob3JkZXJSZXMuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICBleHBlY3Qob3JkZXJSZXMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG9yZGVyUmVzLmJvZHkub3JkZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3Qob3JkZXJSZXMuYm9keS5vcmRlci50b3RhbCkudG9CZSg1OS45OCArIDUuOTkgKyA4LjE3KTsgLy8gaXRlbXMgKyBzaGlwcGluZyArIHRheFxuICAgICAgXG4gICAgICBjb25zdCBvcmRlcklkID0gb3JkZXJSZXMuYm9keS5vcmRlci5faWQ7XG5cbiAgICAgIC8vIDMuIENvbXBsZXRlIGRlbW8gcGF5bWVudFxuICAgICAgY29uc3QgcGF5bWVudFJlcyA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KGAvYXBpL3BheW1lbnRzL2RlbW8tY29tcGxldGUvJHtvcmRlcklkfWApXG4gICAgICAgIC5zZXQoJ1gtQ1NSRi1Ub2tlbicsIGNzcmZUb2tlbilcbiAgICAgICAgLnNlbmQoe30pO1xuICAgICAgXG4gICAgICBleHBlY3QocGF5bWVudFJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChwYXltZW50UmVzLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChwYXltZW50UmVzLmJvZHkub3JkZXIuc3RhdHVzKS50b0JlKCdwcm9jZXNzaW5nJyk7XG5cbiAgICAgIC8vIDQuIFZlcmlmeSBvcmRlciBzdGF0dXNcbiAgICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQob3JkZXJJZCk7XG4gICAgICBleHBlY3Qob3JkZXIuc3RhdHVzKS50b0JlKCdwcm9jZXNzaW5nJyk7XG4gICAgICBleHBlY3Qob3JkZXIucGF5bWVudFN0YXR1cykudG9CZSgncGFpZCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHZhbGlkYXRlIGd1ZXN0IGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZE9yZGVyRGF0YSA9IHtcbiAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgcHJvZHVjdElkOiB0ZXN0UHJvZHVjdC5faWQsXG4gICAgICAgICAgcXVhbnRpdHk6IDEsXG4gICAgICAgICAgcHJpY2U6IHRlc3RQcm9kdWN0LnByaWNlXG4gICAgICAgIH1dLFxuICAgICAgICBndWVzdEluZm86IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICcnLCAgLy8gTWlzc2luZyByZXF1aXJlZCBmaWVsZFxuICAgICAgICAgIGxhc3ROYW1lOiAnQ3VzdG9tZXInLFxuICAgICAgICAgIGVtYWlsOiAnaW52YWxpZC1lbWFpbCcsIC8vIEludmFsaWQgZW1haWxcbiAgICAgICAgICBwaG9uZTogJzEyMycgLy8gVG9vIHNob3J0XG4gICAgICAgIH0sXG4gICAgICAgIHNoaXBwaW5nQWRkcmVzczoge1xuICAgICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnQ3VzdG9tZXInLFxuICAgICAgICAgIHN0cmVldDogJycsICAvLyBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkXG4gICAgICAgICAgY2l0eTogJ1BhcmlzJyxcbiAgICAgICAgICBzdGF0ZTogJ0lERicsXG4gICAgICAgICAgemlwQ29kZTogJzc1MDAxJyxcbiAgICAgICAgICBjb3VudHJ5OiAnRlInXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KCcvYXBpL29yZGVycycpXG4gICAgICAgIC5zZXQoJ1gtQ1NSRi1Ub2tlbicsIGNzcmZUb2tlbilcbiAgICAgICAgLnNlbmQoaW52YWxpZE9yZGVyRGF0YSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmVycm9yLmRldGFpbHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuZXJyb3IuZGV0YWlscy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhcnQgUGVyc2lzdGVuY2UnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHBlcnNpc3QgY2FydCBhY3Jvc3Mgc2Vzc2lvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBZGQgdG8gY2FydFxuICAgICAgYXdhaXQgYWdlbnRcbiAgICAgICAgLnBvc3QoJy9hcGkvY2FydC9hZGQnKVxuICAgICAgICAuc2V0KCdYLUNTUkYtVG9rZW4nLCBjc3JmVG9rZW4pXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBwcm9kdWN0SWQ6IHRlc3RQcm9kdWN0Ll9pZCxcbiAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICB9KTtcblxuICAgICAgLy8gR2V0IGNhcnRcbiAgICAgIGNvbnN0IGNhcnRSZXMxID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLmdldCgnL2FwaS9jYXJ0JylcbiAgICAgICAgLnNldCgnWC1DU1JGLVRva2VuJywgY3NyZlRva2VuKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNhcnRSZXMxLmJvZHkuY2FydC5pdGVtcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgY29uc3Qgc2Vzc2lvbkNvb2tpZSA9IGNhcnRSZXMxLmhlYWRlcnNbJ3NldC1jb29raWUnXTtcblxuICAgICAgLy8gQ3JlYXRlIG5ldyBhZ2VudCB3aXRoIHNhbWUgc2Vzc2lvblxuICAgICAgY29uc3QgYWdlbnQyID0gcmVxdWVzdC5hZ2VudChhcHApO1xuICAgICAgXG4gICAgICAvLyBHZXQgbmV3IENTUkYgdG9rZW4gYnV0IHVzZSBzYW1lIHNlc3Npb25cbiAgICAgIGNvbnN0IGNzcmZSZXMyID0gYXdhaXQgYWdlbnQyXG4gICAgICAgIC5nZXQoJy9hcGkvY3NyZi10b2tlbicpXG4gICAgICAgIC5zZXQoJ0Nvb2tpZScsIHNlc3Npb25Db29raWUpO1xuICAgICAgXG4gICAgICBjb25zdCBjc3JmVG9rZW4yID0gY3NyZlJlczIuYm9keS5jc3JmVG9rZW47XG5cbiAgICAgIC8vIEdldCBjYXJ0IHdpdGggbmV3IGFnZW50XG4gICAgICBjb25zdCBjYXJ0UmVzMiA9IGF3YWl0IGFnZW50MlxuICAgICAgICAuZ2V0KCcvYXBpL2NhcnQnKVxuICAgICAgICAuc2V0KCdYLUNTUkYtVG9rZW4nLCBjc3JmVG9rZW4yKVxuICAgICAgICAuc2V0KCdDb29raWUnLCBzZXNzaW9uQ29va2llKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNhcnRSZXMyLmJvZHkuY2FydC5pdGVtcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGNhcnRSZXMyLmJvZHkuY2FydC5pdGVtc1swXS5wcm9kdWN0Ll9pZCkudG9CZSh0ZXN0UHJvZHVjdC5faWQudG9TdHJpbmcoKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnZlbnRvcnkgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcHJldmVudCBvcmRlcmluZyBvdXQgb2Ygc3RvY2sgaXRlbXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTZXQgcHJvZHVjdCBvdXQgb2Ygc3RvY2tcbiAgICAgIHRlc3RQcm9kdWN0LmludmVudG9yeS5pblN0b2NrID0gZmFsc2U7XG4gICAgICB0ZXN0UHJvZHVjdC5pbnZlbnRvcnkucXVhbnRpdHkgPSAwO1xuICAgICAgYXdhaXQgdGVzdFByb2R1Y3Quc2F2ZSgpO1xuXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9jYXJ0L2FkZCcpXG4gICAgICAgIC5zZXQoJ1gtQ1NSRi1Ub2tlbicsIGNzcmZUb2tlbilcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHByb2R1Y3RJZDogdGVzdFByb2R1Y3QuX2lkLFxuICAgICAgICAgIHF1YW50aXR5OiAxXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1BST0RVQ1RfVU5BVkFJTEFCTEUnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcmV2ZW50IG9yZGVyaW5nIG1vcmUgdGhhbiBhdmFpbGFibGUgcXVhbnRpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICB0ZXN0UHJvZHVjdC5pbnZlbnRvcnkucXVhbnRpdHkgPSA1O1xuICAgICAgYXdhaXQgdGVzdFByb2R1Y3Quc2F2ZSgpO1xuXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9jYXJ0L2FkZCcpXG4gICAgICAgIC5zZXQoJ1gtQ1NSRi1Ub2tlbicsIGNzcmZUb2tlbilcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHByb2R1Y3RJZDogdGVzdFByb2R1Y3QuX2lkLFxuICAgICAgICAgIHF1YW50aXR5OiAxMFxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5lcnJvci5jb2RlKS50b0JlKCdJTlNVRkZJQ0lFTlRfU1RPQ0snKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Nlc3Npb24gYW5kIENTUkYnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJlamVjdCByZXF1ZXN0cyB3aXRob3V0IENTUkYgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9jYXJ0L2FkZCcpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBwcm9kdWN0SWQ6IHRlc3RQcm9kdWN0Ll9pZCxcbiAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoNDAzKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5lcnJvci5jb2RlKS50b0JlKCdDU1JGX0VSUk9SJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJvdmlkZSBzZXNzaW9uIGluZm8gaW4gQ1NSRiBlbmRwb2ludCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFnZW50LmdldCgnL2FwaS9jc3JmLXRva2VuJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmNzcmZUb2tlbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5zZXNzaW9uSW5mbykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5zZXNzaW9uSW5mby5pc0d1ZXN0KS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LnNlc3Npb25JbmZvLmhhc0NhcnQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1DLEdBQUcsR0FBR0QsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNRSxPQUFPLEdBQUdGLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUMvQyxNQUFNRyxLQUFLLEdBQUdILE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztBQUMzQyxNQUFNO0VBQUVJLFNBQVM7RUFBRUMsT0FBTztFQUFFQztBQUFRLENBQUMsR0FBR04sT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBRWxFTyxRQUFRLENBQUMsaUNBQWlDLEVBQUUsTUFBTTtFQUNoRCxJQUFJQyxLQUFLO0VBQ1QsSUFBSUMsV0FBVztFQUNmLElBQUlDLFNBQVM7RUFF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