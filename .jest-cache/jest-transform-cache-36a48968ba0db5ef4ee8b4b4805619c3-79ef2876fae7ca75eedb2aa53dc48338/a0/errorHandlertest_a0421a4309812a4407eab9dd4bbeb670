ecb3720568c74ccd27e2f1f223f80a75
const request = require('supertest');
const express = require('express');
const {
  AppError,
  globalErrorHandler,
  catchAsync
} = require('../../middleware/errorHandler');
describe('Error Handling Middleware', () => {
  let app;
  beforeEach(() => {
    app = express();
    app.use(express.json());
  });
  describe('AppError', () => {
    test('should create operational error with correct properties', () => {
      const error = new AppError('Test error', 400, 'TEST_ERROR');
      expect(error.message).toBe('Test error');
      expect(error.statusCode).toBe(400);
      expect(error.code).toBe('TEST_ERROR');
      expect(error.isOperational).toBe(true);
      expect(error.status).toBe('fail');
    });
    test('should create server error with correct status', () => {
      const error = new AppError('Server error', 500, 'SERVER_ERROR');
      expect(error.status).toBe('error');
    });
  });
  describe('catchAsync', () => {
    test('should catch async errors and pass to next', async () => {
      const asyncRoute = catchAsync(async (req, res, next) => {
        throw new Error('Async error');
      });
      app.get('/test', asyncRoute);
      app.use(globalErrorHandler);
      const response = await request(app).get('/test').expect(500);
      expect(response.body.success).toBe(false);
      expect(response.body.error.message).toBe('Something went wrong!');
    });
    test('should handle successful async operations', async () => {
      const asyncRoute = catchAsync(async (req, res, next) => {
        res.json({
          success: true,
          message: 'Success'
        });
      });
      app.get('/test', asyncRoute);
      const response = await request(app).get('/test').expect(200);
      expect(response.body.success).toBe(true);
      expect(response.body.message).toBe('Success');
    });
  });
  describe('globalErrorHandler', () => {
    beforeEach(() => {
      process.env.NODE_ENV = 'test';
    });
    test('should handle operational errors in production', async () => {
      process.env.NODE_ENV = 'production';
      app.get('/test', (req, res, next) => {
        next(new AppError('Operational error', 400, 'TEST_ERROR'));
      });
      app.use(globalErrorHandler);
      const response = await request(app).get('/test').expect(400);
      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('TEST_ERROR');
      expect(response.body.error.message).toBe('Operational error');
      expect(response.body.error.stack).toBeUndefined();
    });
    test('should handle non-operational errors in production', async () => {
      process.env.NODE_ENV = 'production';
      app.get('/test', (req, res, next) => {
        const error = new Error('Programming error');
        error.isOperational = false;
        next(error);
      });
      app.use(globalErrorHandler);
      const response = await request(app).get('/test').expect(500);
      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('INTERNAL_ERROR');
      expect(response.body.error.message).toBe('Something went wrong!');
    });
    test('should include stack trace in development', async () => {
      process.env.NODE_ENV = 'development';
      app.get('/test', (req, res, next) => {
        next(new AppError('Dev error', 400, 'DEV_ERROR'));
      });
      app.use(globalErrorHandler);
      const response = await request(app).get('/test').expect(400);
      expect(response.body.success).toBe(false);
      expect(response.body.error.stack).toBeDefined();
    });
    test('should handle JWT errors', async () => {
      process.env.NODE_ENV = 'production';
      app.get('/test', (req, res, next) => {
        const error = new Error('jwt malformed');
        error.name = 'JsonWebTokenError';
        next(error);
      });
      app.use(globalErrorHandler);
      const response = await request(app).get('/test').expect(401);
      expect(response.body.error.code).toBe('INVALID_TOKEN');
    });
    test('should handle expired JWT errors', async () => {
      process.env.NODE_ENV = 'production';
      app.get('/test', (req, res, next) => {
        const error = new Error('jwt expired');
        error.name = 'TokenExpiredError';
        next(error);
      });
      app.use(globalErrorHandler);
      const response = await request(app).get('/test').expect(401);
      expect(response.body.error.code).toBe('TOKEN_EXPIRED');
    });
    test('should handle validation errors', async () => {
      process.env.NODE_ENV = 'production';
      app.get('/test', (req, res, next) => {
        const error = new Error('Validation failed');
        error.name = 'ValidationError';
        error.errors = {
          email: {
            message: 'Email is required'
          },
          password: {
            message: 'Password is too short'
          }
        };
        next(error);
      });
      app.use(globalErrorHandler);
      const response = await request(app).get('/test').expect(400);
      expect(response.body.error.code).toBe('VALIDATION_ERROR');
      expect(response.body.error.message).toContain('Email is required');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImV4cHJlc3MiLCJBcHBFcnJvciIsImdsb2JhbEVycm9ySGFuZGxlciIsImNhdGNoQXN5bmMiLCJkZXNjcmliZSIsImFwcCIsImJlZm9yZUVhY2giLCJ1c2UiLCJqc29uIiwidGVzdCIsImVycm9yIiwiZXhwZWN0IiwibWVzc2FnZSIsInRvQmUiLCJzdGF0dXNDb2RlIiwiY29kZSIsImlzT3BlcmF0aW9uYWwiLCJzdGF0dXMiLCJhc3luY1JvdXRlIiwicmVxIiwicmVzIiwibmV4dCIsIkVycm9yIiwiZ2V0IiwicmVzcG9uc2UiLCJib2R5Iiwic3VjY2VzcyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInN0YWNrIiwidG9CZVVuZGVmaW5lZCIsInRvQmVEZWZpbmVkIiwibmFtZSIsImVycm9ycyIsImVtYWlsIiwicGFzc3dvcmQiLCJ0b0NvbnRhaW4iXSwic291cmNlcyI6WyJlcnJvckhhbmRsZXIudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgeyBBcHBFcnJvciwgZ2xvYmFsRXJyb3JIYW5kbGVyLCBjYXRjaEFzeW5jIH0gPSByZXF1aXJlKCcuLi8uLi9taWRkbGV3YXJlL2Vycm9ySGFuZGxlcicpO1xuXG5kZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcgTWlkZGxld2FyZScsICgpID0+IHtcbiAgbGV0IGFwcDtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBhcHAgPSBleHByZXNzKCk7XG4gICAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBcHBFcnJvcicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIG9wZXJhdGlvbmFsIGVycm9yIHdpdGggY29ycmVjdCBwcm9wZXJ0aWVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgQXBwRXJyb3IoJ1Rlc3QgZXJyb3InLCA0MDAsICdURVNUX0VSUk9SJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0JlKCdUZXN0IGVycm9yJyk7XG4gICAgICBleHBlY3QoZXJyb3Iuc3RhdHVzQ29kZSkudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KGVycm9yLmNvZGUpLnRvQmUoJ1RFU1RfRVJST1InKTtcbiAgICAgIGV4cGVjdChlcnJvci5pc09wZXJhdGlvbmFsKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGVycm9yLnN0YXR1cykudG9CZSgnZmFpbCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBzZXJ2ZXIgZXJyb3Igd2l0aCBjb3JyZWN0IHN0YXR1cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEFwcEVycm9yKCdTZXJ2ZXIgZXJyb3InLCA1MDAsICdTRVJWRVJfRVJST1InKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGVycm9yLnN0YXR1cykudG9CZSgnZXJyb3InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NhdGNoQXN5bmMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNhdGNoIGFzeW5jIGVycm9ycyBhbmQgcGFzcyB0byBuZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXN5bmNSb3V0ZSA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXN5bmMgZXJyb3InKTtcbiAgICAgIH0pO1xuXG4gICAgICBhcHAuZ2V0KCcvdGVzdCcsIGFzeW5jUm91dGUpO1xuICAgICAgYXBwLnVzZShnbG9iYWxFcnJvckhhbmRsZXIpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdCcpXG4gICAgICAgIC5leHBlY3QoNTAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvci5tZXNzYWdlKS50b0JlKCdTb21ldGhpbmcgd2VudCB3cm9uZyEnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc3VjY2Vzc2Z1bCBhc3luYyBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXN5bmNSb3V0ZSA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ1N1Y2Nlc3MnIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGFwcC5nZXQoJy90ZXN0JywgYXN5bmNSb3V0ZSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy90ZXN0JylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubWVzc2FnZSkudG9CZSgnU3VjY2VzcycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2xvYmFsRXJyb3JIYW5kbGVyJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSAndGVzdCc7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG9wZXJhdGlvbmFsIGVycm9ycyBpbiBwcm9kdWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSAncHJvZHVjdGlvbic7XG4gICAgICBcbiAgICAgIGFwcC5nZXQoJy90ZXN0JywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIG5leHQobmV3IEFwcEVycm9yKCdPcGVyYXRpb25hbCBlcnJvcicsIDQwMCwgJ1RFU1RfRVJST1InKSk7XG4gICAgICB9KTtcbiAgICAgIGFwcC51c2UoZ2xvYmFsRXJyb3JIYW5kbGVyKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QnKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IuY29kZSkudG9CZSgnVEVTVF9FUlJPUicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IubWVzc2FnZSkudG9CZSgnT3BlcmF0aW9uYWwgZXJyb3InKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yLnN0YWNrKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG5vbi1vcGVyYXRpb25hbCBlcnJvcnMgaW4gcHJvZHVjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gJ3Byb2R1Y3Rpb24nO1xuICAgICAgXG4gICAgICBhcHAuZ2V0KCcvdGVzdCcsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignUHJvZ3JhbW1pbmcgZXJyb3InKTtcbiAgICAgICAgZXJyb3IuaXNPcGVyYXRpb25hbCA9IGZhbHNlO1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgICAgYXBwLnVzZShnbG9iYWxFcnJvckhhbmRsZXIpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdCcpXG4gICAgICAgIC5leHBlY3QoNTAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvci5jb2RlKS50b0JlKCdJTlRFUk5BTF9FUlJPUicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IubWVzc2FnZSkudG9CZSgnU29tZXRoaW5nIHdlbnQgd3JvbmchJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaW5jbHVkZSBzdGFjayB0cmFjZSBpbiBkZXZlbG9wbWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gJ2RldmVsb3BtZW50JztcbiAgICAgIFxuICAgICAgYXBwLmdldCgnL3Rlc3QnLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgbmV4dChuZXcgQXBwRXJyb3IoJ0RldiBlcnJvcicsIDQwMCwgJ0RFVl9FUlJPUicpKTtcbiAgICAgIH0pO1xuICAgICAgYXBwLnVzZShnbG9iYWxFcnJvckhhbmRsZXIpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvdGVzdCcpXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvci5zdGFjaykudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgSldUIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gJ3Byb2R1Y3Rpb24nO1xuICAgICAgXG4gICAgICBhcHAuZ2V0KCcvdGVzdCcsIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignand0IG1hbGZvcm1lZCcpO1xuICAgICAgICBlcnJvci5uYW1lID0gJ0pzb25XZWJUb2tlbkVycm9yJztcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgICB9KTtcbiAgICAgIGFwcC51c2UoZ2xvYmFsRXJyb3JIYW5kbGVyKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QnKVxuICAgICAgICAuZXhwZWN0KDQwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yLmNvZGUpLnRvQmUoJ0lOVkFMSURfVE9LRU4nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZXhwaXJlZCBKV1QgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSAncHJvZHVjdGlvbic7XG4gICAgICBcbiAgICAgIGFwcC5nZXQoJy90ZXN0JywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdqd3QgZXhwaXJlZCcpO1xuICAgICAgICBlcnJvci5uYW1lID0gJ1Rva2VuRXhwaXJlZEVycm9yJztcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgICB9KTtcbiAgICAgIGFwcC51c2UoZ2xvYmFsRXJyb3JIYW5kbGVyKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL3Rlc3QnKVxuICAgICAgICAuZXhwZWN0KDQwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yLmNvZGUpLnRvQmUoJ1RPS0VOX0VYUElSRUQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdmFsaWRhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9ICdwcm9kdWN0aW9uJztcbiAgICAgIFxuICAgICAgYXBwLmdldCgnL3Rlc3QnLCAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1ZhbGlkYXRpb24gZmFpbGVkJyk7XG4gICAgICAgIGVycm9yLm5hbWUgPSAnVmFsaWRhdGlvbkVycm9yJztcbiAgICAgICAgZXJyb3IuZXJyb3JzID0ge1xuICAgICAgICAgIGVtYWlsOiB7IG1lc3NhZ2U6ICdFbWFpbCBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgICBwYXNzd29yZDogeyBtZXNzYWdlOiAnUGFzc3dvcmQgaXMgdG9vIHNob3J0JyB9XG4gICAgICAgIH07XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgICBhcHAudXNlKGdsb2JhbEVycm9ySGFuZGxlcik7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy90ZXN0JylcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ0VtYWlsIGlzIHJlcXVpcmVkJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU07RUFBRUUsUUFBUTtFQUFFQyxrQkFBa0I7RUFBRUM7QUFBVyxDQUFDLEdBQUdKLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztBQUU3RkssUUFBUSxDQUFDLDJCQUEyQixFQUFFLE1BQU07RUFDMUMsSUFBSUMsR0FBRztFQUVQQyxVQUFVLENBQUMsTUFBTTtJQUNmRCxHQUFHLEdBQUdMLE9BQU8sQ0FBQyxDQUFDO0lBQ2ZLLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDUCxPQUFPLENBQUNRLElBQUksQ0FBQyxDQUFDLENBQUM7RUFDekIsQ0FBQyxD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