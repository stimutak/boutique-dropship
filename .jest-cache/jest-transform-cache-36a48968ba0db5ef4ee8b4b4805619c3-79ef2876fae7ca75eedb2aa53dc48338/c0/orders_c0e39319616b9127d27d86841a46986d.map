{"version":3,"names":["express","require","router","Router","body","validationResult","Order","Product","User","authenticateToken","requireAuth","validateCSRFToken","validateGuestCheckout","isEmail","normalizeEmail","withMessage","trim","isLength","min","max","optional","isString","isArray","isMongoId","isInt","post","req","res","errors","isEmpty","status","json","success","error","code","message","details","array","guestInfo","shippingAddress","billingAddress","items","requestItems","notes","referralSource","orderItems","subtotal","productIds","map","item","productId","products","find","_id","$in","productMap","Map","p","toString","product","get","isActive","itemTotal","price","quantity","push","wholesaler","name","email","productCode","notified","tax","Math","round","shipping","total","orderData","payment","method","user","customer","firstName","lastName","phone","order","create","populate","sendOrderConfirmation","emailData","orderNumber","customerName","productName","emailResult","console","emailError","createdAt","notificationAttempts","data","useDefaultAddresses","finalShippingAddress","finalBillingAddress","defaultShipping","getDefaultShippingAddress","defaultBilling","getDefaultBillingAddress","toObject","type","isDefault","itemsToProcess","length","findById","cart","wantsEmail","updatedAt","Date","save","session","params","id","isAdmin","toPublicJSON","page","parseInt","query","limit","skip","orders","sort","totalOrders","countDocuments","totalPages","ceil","publicOrders","pagination","currentPage","hasNextPage","hasPrevPage","put","trackingNumber","validStatuses","includes","updateData","findByIdAndUpdate","new","sendOrderStatusUpdate","customerEmail","shouldSendEmail","preferences","emailPreferences","orderUpdates","statusData","module","exports"],"sources":["orders.js"],"sourcesContent":["const express = require('express');\nconst router = express.Router();\nconst { body, validationResult } = require('express-validator');\nconst Order = require('../models/Order');\nconst Product = require('../models/Product');\nconst User = require('../models/User');\nconst { authenticateToken, requireAuth } = require('../middleware/auth');\nconst { validateCSRFToken } = require('../middleware/sessionCSRF');\n\n// Validation middleware for guest checkout\nconst validateGuestCheckout = [\n  body('guestInfo.email')\n    .isEmail()\n    .normalizeEmail()\n    .withMessage('Valid email is required'),\n  body('guestInfo.firstName')\n    .trim()\n    .isLength({ min: 1, max: 50 })\n    .withMessage('First name is required and must be less than 50 characters'),\n  body('guestInfo.lastName')\n    .trim()\n    .isLength({ min: 1, max: 50 })\n    .withMessage('Last name is required and must be less than 50 characters'),\n  body('guestInfo.phone')\n    .optional()\n    .isString()\n    .isLength({ min: 7, max: 30 })\n    .withMessage('Phone number must be between 7 and 30 characters'),\n  body('shippingAddress.firstName')\n    .trim()\n    .isLength({ min: 1, max: 50 })\n    .withMessage('Shipping first name is required'),\n  body('shippingAddress.lastName')\n    .trim()\n    .isLength({ min: 1, max: 50 })\n    .withMessage('Shipping last name is required'),\n  body('shippingAddress.street')\n    .trim()\n    .isLength({ min: 1, max: 100 })\n    .withMessage('Shipping street address is required'),\n  body('shippingAddress.city')\n    .trim()\n    .isLength({ min: 1, max: 50 })\n    .withMessage('Shipping city is required'),\n  body('shippingAddress.state')\n    .trim()\n    .isLength({ min: 2, max: 50 })\n    .withMessage('Shipping state is required'),\n  body('shippingAddress.zipCode')\n    .trim()\n    .isLength({ min: 5, max: 10 })\n    .withMessage('Valid shipping zip code is required'),\n  body('shippingAddress.country')\n    .trim()\n    .isLength({ min: 2, max: 50 })\n    .withMessage('Valid country code is required'),\n  body('billingAddress.firstName')\n    .trim()\n    .isLength({ min: 1, max: 50 })\n    .withMessage('Billing first name is required'),\n  body('billingAddress.lastName')\n    .trim()\n    .isLength({ min: 1, max: 50 })\n    .withMessage('Billing last name is required'),\n  body('billingAddress.street')\n    .trim()\n    .isLength({ min: 1, max: 100 })\n    .withMessage('Billing street address is required'),\n  body('billingAddress.city')\n    .trim()\n    .isLength({ min: 1, max: 50 })\n    .withMessage('Billing city is required'),\n  body('billingAddress.state')\n    .trim()\n    .isLength({ min: 2, max: 50 })\n    .withMessage('Billing state is required'),\n  body('billingAddress.zipCode')\n    .trim()\n    .isLength({ min: 5, max: 10 })\n    .withMessage('Valid billing zip code is required'),\n  body('billingAddress.country')\n    .trim()\n    .isLength({ min: 2, max: 50 })\n    .withMessage('Valid country code is required'),\n  body('items')\n    .isArray({ min: 1 })\n    .withMessage('At least one item is required'),\n  body('items.*.productId')\n    .isMongoId()\n    .withMessage('Valid product ID is required'),\n  body('items.*.quantity')\n    .isInt({ min: 1, max: 99 })\n    .withMessage('Quantity must be between 1 and 99'),\n  body('referralSource')\n    .optional()\n    .trim()\n    .isLength({ max: 100 })\n    .withMessage('Referral source must be less than 100 characters')\n];\n\n// Create order (both guest and authenticated)\nrouter.post('/', authenticateToken, validateGuestCheckout, validateCSRFToken, async (req, res) => {\n  try {\n    // Check validation errors\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      return res.status(400).json({\n        success: false,\n        error: {\n          code: 'VALIDATION_ERROR',\n          message: 'Invalid input data',\n          details: errors.array()\n        }\n      });\n    }\n\n    const {\n      guestInfo,\n      shippingAddress,\n      billingAddress,\n      items: requestItems,\n      notes,\n      referralSource\n    } = req.body;\n\n    // Validate and process cart items - FIXED N+1 QUERY\n    const orderItems = [];\n    let subtotal = 0;\n\n    // Batch fetch all products at once to avoid N+1 queries\n    const productIds = requestItems.map(item => item.productId);\n    const products = await Product.find({ _id: { $in: productIds } });\n    const productMap = new Map(products.map(p => [p._id.toString(), p]));\n\n    for (const item of requestItems) {\n      const product = productMap.get(item.productId);\n      \n      if (!product || !product.isActive) {\n        return res.status(400).json({\n          success: false,\n          error: {\n            code: 'INVALID_PRODUCT',\n            message: `Product ${item.productId} not found or unavailable`\n          }\n        });\n      }\n\n      const itemTotal = product.price * item.quantity;\n      subtotal += itemTotal;\n\n      orderItems.push({\n        product: product._id,\n        quantity: item.quantity,\n        price: product.price,\n        wholesaler: {\n          name: product.wholesaler.name,\n          email: product.wholesaler.email,\n          productCode: product.wholesaler.productCode,\n          notified: false\n        }\n      });\n    }\n\n    // Calculate totals (simplified - you may want to add tax calculation)\n    const tax = Math.round(subtotal * 0.08 * 100) / 100; // 8% tax rate\n    const shipping = subtotal > 50 ? 0 : 5.99; // Free shipping over $50\n    const total = Math.round((subtotal + tax + shipping) * 100) / 100;\n\n    // Create order\n    const orderData = {\n      items: orderItems,\n      shippingAddress,\n      billingAddress,\n      subtotal: Math.round(subtotal * 100) / 100,\n      tax,\n      shipping,\n      total,\n      payment: {\n        method: 'other', // Will be updated when payment is processed\n        status: 'pending'\n      },\n      status: 'pending',\n      notes,\n      referralSource\n    };\n\n    // Add customer ID if user is authenticated\n    if (req.user) {\n      orderData.customer = req.user._id;\n      // For registered users, populate guest info from their profile\n      orderData.guestInfo = {\n        firstName: req.user.firstName,\n        lastName: req.user.lastName,\n        email: req.user.email,\n        phone: req.user.phone || guestInfo?.phone\n      };\n    } else {\n      // For guest checkout, use provided guest info\n      orderData.guestInfo = guestInfo;\n    }\n\n    const order = await Order.create(orderData);\n    \n    // Populate product details for email\n    await order.populate('items.product', 'name slug images');\n\n    // Send order confirmation email\n    try {\n      const { sendOrderConfirmation } = require('../utils/emailService');\n      \n      const emailData = {\n        orderNumber: order.orderNumber,\n        customerName: `${order.guestInfo.firstName} ${order.guestInfo.lastName}`,\n        items: order.items.map(item => ({\n          productName: item.product.name,\n          quantity: item.quantity,\n          price: item.price\n        })),\n        total: order.total,\n        shippingAddress: order.shippingAddress\n      };\n\n      const emailResult = await sendOrderConfirmation(order.guestInfo.email, emailData);\n      if (!emailResult.success) {\n        console.error('Failed to send order confirmation email:', emailResult.error);\n      }\n    } catch (emailError) {\n      console.error('Error sending order confirmation email:', emailError);\n    }\n\n    // Note: Cart will be cleared after successful payment, not here\n    // This allows users to retry payment if it fails\n\n    res.status(201).json({\n      success: true,\n      message: 'Order created successfully',\n      order: {\n        _id: order._id,\n        orderNumber: order.orderNumber,\n        total: order.total,\n        status: order.status,\n        createdAt: order.createdAt\n      }\n    });\n\n  } catch (error) {\n    console.error('Error creating order:', error);\n    res.status(500).json({\n      success: false,\n      error: {\n        code: 'ORDER_CREATION_ERROR',\n        message: 'Failed to create order'\n      }\n    });\n  }\n});\n\n// Create order (guest checkout) - explicit guest route\nrouter.post('/guest', validateGuestCheckout, async (req, res) => {\n  try {\n    // Check validation errors\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      return res.status(400).json({\n        success: false,\n        error: {\n          code: 'VALIDATION_ERROR',\n          message: 'Invalid input data',\n          details: errors.array()\n        }\n      });\n    }\n\n    const {\n      guestInfo,\n      shippingAddress,\n      billingAddress,\n      items: requestItems,\n      notes,\n      referralSource\n    } = req.body;\n\n    // Validate and process cart items - FIXED N+1 QUERY\n    const orderItems = [];\n    let subtotal = 0;\n\n    // Batch fetch all products at once to avoid N+1 queries\n    const productIds = requestItems.map(item => item.productId);\n    const products = await Product.find({ _id: { $in: productIds } });\n    const productMap = new Map(products.map(p => [p._id.toString(), p]));\n\n    for (const item of requestItems) {\n      const product = productMap.get(item.productId);\n      \n      if (!product || !product.isActive) {\n        return res.status(400).json({\n          success: false,\n          error: {\n            code: 'INVALID_PRODUCT',\n            message: `Product ${item.productId} not found or unavailable`\n          }\n        });\n      }\n\n      const itemTotal = product.price * item.quantity;\n      subtotal += itemTotal;\n\n      orderItems.push({\n        product: product._id,\n        quantity: item.quantity,\n        price: product.price,\n        wholesaler: {\n          name: product.wholesaler.name,\n          email: product.wholesaler.email,\n          productCode: product.wholesaler.productCode,\n          notified: false,\n          notificationAttempts: 0\n        }\n      });\n    }\n\n    // Calculate totals\n    const tax = subtotal * 0.08; // 8% tax rate\n    const shipping = subtotal > 50 ? 0 : 9.99; // Free shipping over $50\n    const total = subtotal + tax + shipping;\n\n    // Create order\n    const orderData = {\n      guestInfo,\n      items: orderItems,\n      shippingAddress,\n      billingAddress: billingAddress || shippingAddress,\n      subtotal,\n      tax,\n      shipping,\n      total,\n      payment: {\n        method: 'card',\n        status: 'pending'\n      },\n      status: 'pending',\n      notes,\n      referralSource\n    };\n\n    const order = await Order.create(orderData);\n\n    res.status(201).json({\n      success: true,\n      message: 'Guest order created successfully',\n      data: {\n        order: {\n          _id: order._id,\n          orderNumber: order.orderNumber,\n          guestInfo: order.guestInfo,\n          items: order.items,\n          shippingAddress: order.shippingAddress,\n          billingAddress: order.billingAddress,\n          subtotal: order.subtotal,\n          tax: order.tax,\n          shipping: order.shipping,\n          total: order.total,\n          status: order.status,\n          createdAt: order.createdAt\n        }\n      }\n    });\n\n  } catch (error) {\n    console.error('Error creating guest order:', error);\n    res.status(500).json({\n      success: false,\n      error: {\n        code: 'ORDER_CREATION_ERROR',\n        message: 'Failed to create guest order'\n      }\n    });\n  }\n});\n\n// Create order for registered user\nrouter.post('/registered', authenticateToken, validateCSRFToken, async (req, res) => {\n  try {\n    // Ensure user is authenticated\n    if (!req.user) {\n      return res.status(401).json({\n        success: false,\n        error: {\n          code: 'AUTHENTICATION_REQUIRED',\n          message: 'You must be logged in to place an order'\n        }\n      });\n    }\n\n    const {\n      shippingAddress,\n      billingAddress,\n      items: requestItems,\n      notes,\n      referralSource,\n      useDefaultAddresses = false\n    } = req.body;\n\n    // Use default addresses if requested and available\n    let finalShippingAddress = shippingAddress;\n    let finalBillingAddress = billingAddress;\n\n    if (useDefaultAddresses) {\n      const defaultShipping = req.user.getDefaultShippingAddress();\n      const defaultBilling = req.user.getDefaultBillingAddress();\n      \n      if (defaultShipping) {\n        finalShippingAddress = defaultShipping.toObject();\n        delete finalShippingAddress._id;\n        delete finalShippingAddress.type;\n        delete finalShippingAddress.isDefault;\n      }\n      \n      if (defaultBilling) {\n        finalBillingAddress = defaultBilling.toObject();\n        delete finalBillingAddress._id;\n        delete finalBillingAddress.type;\n        delete finalBillingAddress.isDefault;\n      }\n    }\n\n    // Validate required addresses\n    if (!finalShippingAddress || !finalBillingAddress) {\n      return res.status(400).json({\n        success: false,\n        error: {\n          code: 'MISSING_ADDRESSES',\n          message: 'Shipping and billing addresses are required'\n        }\n      });\n    }\n\n    // Get items from user's cart if not provided\n    let itemsToProcess = requestItems;\n    if (!itemsToProcess || itemsToProcess.length === 0) {\n      // Fetch from user's cart\n      const user = await User.findById(req.user._id);\n      if (!user.cart || !user.cart.items || user.cart.items.length === 0) {\n        return res.status(400).json({\n          success: false,\n          error: {\n            code: 'EMPTY_CART',\n            message: 'Your cart is empty'\n          }\n        });\n      }\n      itemsToProcess = user.cart.items.map(item => ({\n        productId: item.product,\n        quantity: item.quantity\n      }));\n    }\n\n    // Validate and process cart items (same logic as guest checkout)\n    const orderItems = [];\n    let subtotal = 0;\n\n    for (const item of itemsToProcess) {\n      const product = await Product.findById(item.productId);\n      \n      if (!product || !product.isActive) {\n        return res.status(400).json({\n          success: false,\n          error: {\n            code: 'INVALID_PRODUCT',\n            message: `Product ${item.productId} not found or unavailable`\n          }\n        });\n      }\n\n      const itemTotal = product.price * item.quantity;\n      subtotal += itemTotal;\n\n      orderItems.push({\n        product: product._id,\n        quantity: item.quantity,\n        price: product.price,\n        wholesaler: {\n          name: product.wholesaler.name,\n          email: product.wholesaler.email,\n          productCode: product.wholesaler.productCode,\n          notified: false\n        }\n      });\n    }\n\n    // Calculate totals\n    const tax = Math.round(subtotal * 0.08 * 100) / 100;\n    const shipping = subtotal > 50 ? 0 : 5.99;\n    const total = Math.round((subtotal + tax + shipping) * 100) / 100;\n\n    // Create order for registered user\n    const orderData = {\n      customer: req.user._id,\n      items: orderItems,\n      shippingAddress: finalShippingAddress,\n      billingAddress: finalBillingAddress,\n      subtotal: Math.round(subtotal * 100) / 100,\n      tax,\n      shipping,\n      total,\n      payment: {\n        method: 'other',\n        status: 'pending'\n      },\n      status: 'pending',\n      notes,\n      referralSource\n    };\n\n    const order = await Order.create(orderData);\n    \n    // Populate product details for email\n    await order.populate('items.product', 'name slug images');\n\n    // Send order confirmation email for registered user\n    try {\n      if (req.user.wantsEmail('orderConfirmations')) {\n        const { sendOrderConfirmation } = require('../utils/emailService');\n        \n        const emailData = {\n          orderNumber: order.orderNumber,\n          customerName: `${req.user.firstName} ${req.user.lastName}`,\n          items: order.items.map(item => ({\n            productName: item.product.name,\n            quantity: item.quantity,\n            price: item.price\n          })),\n          total: order.total,\n          shippingAddress: order.shippingAddress\n        };\n\n        const emailResult = await sendOrderConfirmation(req.user.email, emailData);\n        if (!emailResult.success) {\n          console.error('Failed to send order confirmation email:', emailResult.error);\n        }\n      }\n    } catch (emailError) {\n      console.error('Error sending order confirmation email:', emailError);\n    }\n\n    // Clear user's cart\n    const user = await User.findById(req.user._id);\n    user.cart = { items: [], updatedAt: new Date() };\n    await user.save();\n    \n    // Clear cart session\n    if (req.session && req.session.cart) {\n      req.session.cart = [];\n    }\n\n    res.status(201).json({\n      success: true,\n      message: 'Order created successfully',\n      order: {\n        _id: order._id,\n        orderNumber: order.orderNumber,\n        total: order.total,\n        status: order.status,\n        createdAt: order.createdAt\n      }\n    });\n\n  } catch (error) {\n    console.error('Error creating registered user order:', error);\n    res.status(500).json({\n      success: false,\n      error: {\n        code: 'ORDER_CREATION_ERROR',\n        message: 'Failed to create order'\n      }\n    });\n  }\n});\n\n// Get order by ID (supports both authenticated and guest orders)\nrouter.get('/:id', authenticateToken, async (req, res) => {\n  try {\n    const order = await Order.findById(req.params.id)\n      .populate('items.product', '-wholesaler')\n      .populate('customer', 'firstName lastName email');\n\n    if (!order) {\n      return res.status(404).json({\n        success: false,\n        error: {\n          code: 'ORDER_NOT_FOUND',\n          message: 'Order not found'\n        }\n      });\n    }\n\n    // For guest orders, allow access without authentication\n    // For authenticated users, check ownership (unless admin)\n    if (req.user) {\n      if (!req.user.isAdmin && order.customer && order.customer._id.toString() !== req.user._id.toString()) {\n        return res.status(403).json({\n          success: false,\n          error: {\n            code: 'ACCESS_DENIED',\n            message: 'You can only access your own orders'\n          }\n        });\n      }\n    }\n    // Guest orders (no customer field) are accessible without auth\n\n    // Return public order data (excludes sensitive wholesaler info)\n    res.json({\n      success: true,\n      data: {\n        order: order.toPublicJSON()\n      }\n    });\n\n  } catch (error) {\n    console.error('Error fetching order:', error);\n    res.status(500).json({\n      success: false,\n      error: {\n        code: 'ORDER_FETCH_ERROR',\n        message: 'Failed to fetch order'\n      }\n    });\n  }\n});\n\n// Get order history for registered user\nrouter.get('/', authenticateToken, async (req, res) => {\n  try {\n    // Ensure user is authenticated\n    if (!req.user) {\n      return res.status(401).json({\n        success: false,\n        error: {\n          code: 'AUTHENTICATION_REQUIRED',\n          message: 'You must be logged in to view orders'\n        }\n      });\n    }\n\n    const page = parseInt(req.query.page) || 1;\n    const limit = parseInt(req.query.limit) || 10;\n    const skip = (page - 1) * limit;\n\n    \n    const orders = await Order.find({ customer: req.user._id })\n      .populate('items.product', 'name slug images price')\n      .sort({ createdAt: -1 })\n      .skip(skip)\n      .limit(limit);\n\n    const totalOrders = await Order.countDocuments({ customer: req.user._id });\n    const totalPages = Math.ceil(totalOrders / limit);\n    \n    \n\n    // Return public order data\n    const publicOrders = orders.map(order => order.toPublicJSON());\n\n    res.json({\n      success: true,\n      data: {\n        orders: publicOrders,\n        pagination: {\n          currentPage: page,\n          totalPages,\n          totalOrders,\n          hasNextPage: page < totalPages,\n          hasPrevPage: page > 1\n        }\n      }\n    });\n\n  } catch (error) {\n    console.error('Error fetching order history:', error);\n    res.status(500).json({\n      success: false,\n      error: {\n        code: 'ORDER_HISTORY_ERROR',\n        message: 'Failed to fetch order history'\n      }\n    });\n  }\n});\n\n// Associate order with authenticated user\nrouter.post('/:id/associate', requireAuth, async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    // Find the order\n    const order = await Order.findById(id);\n    if (!order) {\n      return res.status(404).json({\n        success: false,\n        error: {\n          code: 'ORDER_NOT_FOUND',\n          message: 'Order not found'\n        }\n      });\n    }\n\n    // Check if order is already associated with a user\n    if (order.customer) {\n      return res.status(400).json({\n        success: false,\n        error: {\n          code: 'ORDER_ALREADY_ASSOCIATED',\n          message: 'Order is already associated with a user'\n        }\n      });\n    }\n\n    // Associate order with the authenticated user\n    order.customer = req.user._id;\n    await order.save();\n\n    res.json({\n      success: true,\n      message: 'Order successfully associated with your account'\n    });\n\n  } catch (error) {\n    console.error('Error associating order:', error);\n    res.status(500).json({\n      success: false,\n      error: {\n        code: 'ORDER_ASSOCIATION_ERROR',\n        message: 'Failed to associate order with account'\n      }\n    });\n  }\n});\n\n// Update order status (admin only - placeholder for now)\nrouter.put('/:id/status', async (req, res) => {\n  try {\n    const { status, trackingNumber } = req.body;\n    \n    const validStatuses = ['pending', 'processing', 'shipped', 'delivered', 'cancelled'];\n    if (!validStatuses.includes(status)) {\n      return res.status(400).json({\n        success: false,\n        error: {\n          code: 'INVALID_STATUS',\n          message: 'Invalid order status'\n        }\n      });\n    }\n\n    const updateData = { status };\n    if (trackingNumber) {\n      updateData.trackingNumber = trackingNumber;\n    }\n\n    const order = await Order.findByIdAndUpdate(\n      req.params.id,\n      updateData,\n      { new: true }\n    ).populate('customer', 'firstName lastName email preferences');\n\n    if (!order) {\n      return res.status(404).json({\n        success: false,\n        error: {\n          code: 'ORDER_NOT_FOUND',\n          message: 'Order not found'\n        }\n      });\n    }\n\n    // Send status update email\n    try {\n      const { sendOrderStatusUpdate } = require('../utils/emailService');\n      \n      let customerEmail, customerName, shouldSendEmail = true;\n      \n      if (order.customer) {\n        // Registered user\n        customerEmail = order.customer.email;\n        customerName = `${order.customer.firstName} ${order.customer.lastName}`;\n        shouldSendEmail = order.customer.preferences?.emailPreferences?.orderUpdates !== false;\n      } else {\n        // Guest user\n        customerEmail = order.guestInfo.email;\n        customerName = `${order.guestInfo.firstName} ${order.guestInfo.lastName}`;\n      }\n\n      if (shouldSendEmail && ['processing', 'shipped', 'delivered'].includes(status)) {\n        const statusData = {\n          orderNumber: order.orderNumber,\n          customerName,\n          status,\n          trackingNumber\n        };\n\n        const emailResult = await sendOrderStatusUpdate(customerEmail, statusData);\n        if (!emailResult.success) {\n          console.error('Failed to send order status update email:', emailResult.error);\n        }\n      }\n    } catch (emailError) {\n      console.error('Error sending order status update email:', emailError);\n    }\n\n    res.json({\n      success: true,\n      message: 'Order status updated',\n      order: {\n        _id: order._id,\n        orderNumber: order.orderNumber,\n        status: order.status,\n        trackingNumber: order.trackingNumber,\n        updatedAt: order.updatedAt\n      }\n    });\n\n  } catch (error) {\n    console.error('Error updating order status:', error);\n    res.status(500).json({\n      success: false,\n      error: {\n        code: 'ORDER_UPDATE_ERROR',\n        message: 'Failed to update order status'\n      }\n    });\n  }\n});\n\nmodule.exports = router;"],"mappings":"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","ignoreList":[]}