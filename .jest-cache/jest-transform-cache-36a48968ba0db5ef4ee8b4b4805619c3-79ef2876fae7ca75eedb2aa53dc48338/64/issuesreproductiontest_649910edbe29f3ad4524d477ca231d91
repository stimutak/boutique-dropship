6c9b80171f761ddd4510915b32d4be1f
const request = require('supertest');
const mongoose = require('mongoose');
const jwt = require('jsonwebtoken');
const app = require('../server');
const User = require('../models/User');
const Product = require('../models/Product');
const Order = require('../models/Order');

// Test user data
const testUser = {
  email: 'testuser@example.com',
  password: 'TestPassword123!',
  firstName: 'Test',
  lastName: 'User',
  phone: '1234567890'
};
const testProduct = {
  name: 'Test Product',
  slug: 'test-product',
  description: 'Test product description',
  shortDescription: 'Short test description',
  price: 29.99,
  category: 'crystals',
  images: [{
    url: 'test.jpg',
    alt: 'Test image',
    isPrimary: true
  }],
  isActive: true,
  wholesaler: {
    name: 'Test Wholesaler',
    email: 'wholesaler@example.com',
    productCode: 'TEST001',
    cost: 15.00
  }
};
describe('GitHub Issues Reproduction Tests', () => {
  let product;
  let validToken;
  let invalidToken;
  let sessionCookie;
  let server;
  beforeAll(async () => {
    // Don't reconnect if already connected
    if (mongoose.connection.readyState !== 1) {
      await mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/holistic-store-test', {
        useNewUrlParser: true,
        useUnifiedTopology: true
      });
    }

    // Clean up database
    await User.deleteMany({});
    await Product.deleteMany({});
    await Order.deleteMany({});

    // Create test product
    product = await Product.create(testProduct);

    // Generate invalid token
    invalidToken = jwt.sign({
      userId: '123456789012345678901234'
    }, 'wrongsecret');
  });
  afterAll(async () => {
    // Don't close the connection that server.js is using
    // await mongoose.connection.close();
  });
  beforeEach(async () => {
    // Clean up users before each test
    await User.deleteMany({});
    await Order.deleteMany({});
  });

  // Issue #13: "placing an order as logged in says you must be logged in to checkout"
  describe('Issue #13: Order placement as logged-in user', () => {
    beforeEach(async () => {
      // Create and login user
      const registerRes = await request(app).post('/api/auth/register').send(testUser);
      validToken = registerRes.body.data.token;
    });
    test('FAILING: Should allow logged-in user to place order without authentication error', async () => {
      // Add item to cart
      await request(app).post('/api/cart/add').set('Authorization', `Bearer ${validToken}`).send({
        productId: product._id,
        quantity: 1
      });

      // Place order
      const orderData = {
        items: [{
          productId: product._id,
          quantity: 1,
          price: product.price
        }],
        shippingAddress: {
          firstName: 'Test',
          lastName: 'User',
          street: '123 Test St',
          city: 'Test City',
          state: 'TS',
          zipCode: '12345',
          country: 'US'
        },
        billingAddress: {
          firstName: 'Test',
          lastName: 'User',
          street: '123 Test St',
          city: 'Test City',
          state: 'TS',
          zipCode: '12345',
          country: 'US'
        }
      };
      const response = await request(app).post('/api/orders/registered').set('Authorization', `Bearer ${validToken}`).send(orderData);
      expect(response.status).not.toBe(401);
      expect(response.body.error?.message).not.toContain('must be logged in');
      expect(response.status).toBe(201);
      expect(response.body.success).toBe(true);
    });
  });

  // Issue #12: "logging in says cannot sync with ? and then acts as if logged in but without name"
  describe('Issue #12: Login sync error', () => {
    test('FAILING: Should properly sync user data after login', async () => {
      // Register user
      await request(app).post('/api/auth/register').send(testUser);

      // Login
      const loginRes = await request(app).post('/api/auth/login').send({
        email: testUser.email,
        password: testUser.password
      });
      expect(loginRes.status).toBe(200);
      expect(loginRes.body.success).toBe(true);
      expect(loginRes.body.data.user).toBeDefined();
      expect(loginRes.body.data.user.firstName).toBe(testUser.firstName);
      expect(loginRes.body.data.user.lastName).toBe(testUser.lastName);

      // Verify token works
      const profileRes = await request(app).get('/api/auth/profile').set('Authorization', `Bearer ${loginRes.body.data.token}`);
      expect(profileRes.status).toBe(200);
      expect(profileRes.body.data.user.firstName).toBe(testUser.firstName);
    });
  });

  // Issue #11: "registering presents itself as logged in but unable to do anything"
  describe('Issue #11: Registration login state', () => {
    test('FAILING: Should be fully logged in after registration', async () => {
      const registerRes = await request(app).post('/api/auth/register').send(testUser);
      expect(registerRes.status).toBe(201);
      expect(registerRes.body.data.token).toBeDefined();
      expect(registerRes.body.data.user).toBeDefined();
      const token = registerRes.body.data.token;

      // Should be able to access protected routes
      const profileRes = await request(app).get('/api/auth/profile').set('Authorization', `Bearer ${token}`);
      expect(profileRes.status).toBe(200);
      expect(profileRes.body.success).toBe(true);

      // Should be able to add to cart
      const cartRes = await request(app).post('/api/cart/add').set('Authorization', `Bearer ${token}`).send({
        productId: product._id,
        quantity: 1
      });
      expect(cartRes.status).toBe(200);
      expect(cartRes.body.success).toBe(true);
    });
  });

  // Issue #10: "bad login presents as logged in without being able to do anything"
  describe('Issue #10: Bad login state', () => {
    test('FAILING: Should not appear logged in after failed login', async () => {
      // Register user first
      await request(app).post('/api/auth/register').send(testUser);

      // Try bad login
      const badLoginRes = await request(app).post('/api/auth/login').send({
        email: testUser.email,
        password: 'wrongpassword'
      });
      expect(badLoginRes.status).toBe(401);
      expect(badLoginRes.body.success).toBe(false);
      expect(badLoginRes.body.data?.token).toBeUndefined();
      expect(badLoginRes.body.data?.user).toBeUndefined();
    });
  });

  // Issue #9: "trying to update profile presents login screen even when logged in"
  describe('Issue #9: Profile update authentication', () => {
    beforeEach(async () => {
      const registerRes = await request(app).post('/api/auth/register').send(testUser);
      validToken = registerRes.body.data.token;
    });
    test('FAILING: Should allow profile update without re-authentication', async () => {
      const updateRes = await request(app).put('/api/auth/profile').set('Authorization', `Bearer ${validToken}`).send({
        firstName: 'Updated',
        lastName: 'Name'
      });
      expect(updateRes.status).toBe(200);
      expect(updateRes.body.success).toBe(true);
      expect(updateRes.body.data.user.firstName).toBe('Updated');

      // Should still be authenticated after update
      const profileRes = await request(app).get('/api/auth/profile').set('Authorization', `Bearer ${validToken}`);
      expect(profileRes.status).toBe(200);
      expect(profileRes.body.data.user.firstName).toBe('Updated');
    });
  });

  // Issue #8 & #7: Guest checkout issues
  describe('Issues #8 & #7: Guest checkout', () => {
    test('FAILING: Should allow guest checkout', async () => {
      const guestOrderData = {
        guestInfo: {
          email: 'guest@example.com',
          firstName: 'Guest',
          lastName: 'User',
          phone: '9876543210'
        },
        items: [{
          productId: product._id,
          quantity: 1,
          price: product.price
        }],
        shippingAddress: {
          firstName: 'Guest',
          lastName: 'User',
          street: '456 Guest Ave',
          city: 'Guest City',
          state: 'GS',
          zipCode: '54321',
          country: 'US'
        },
        billingAddress: {
          firstName: 'Guest',
          lastName: 'User',
          street: '456 Guest Ave',
          city: 'Guest City',
          state: 'GS',
          zipCode: '54321',
          country: 'US'
        }
      };
      const response = await request(app).post('/api/orders').send(guestOrderData);
      expect(response.status).toBe(201);
      expect(response.body.success).toBe(true);
      expect(response.body.order).toBeDefined();
      expect(response.body.order._id).toBeDefined();
    });
  });

  // Issue #6 & #4: Profile and address management
  describe('Issues #6 & #4: Profile and address management', () => {
    beforeEach(async () => {
      const registerRes = await request(app).post('/api/auth/register').send(testUser);
      validToken = registerRes.body.data.token;
    });
    test('FAILING: Should update profile without issues', async () => {
      const updateData = {
        firstName: 'UpdatedFirst',
        lastName: 'UpdatedLast',
        phone: '5555555555'
      };
      const response = await request(app).put('/api/auth/profile').set('Authorization', `Bearer ${validToken}`).send(updateData);
      expect(response.status).toBe(200);
      expect(response.body.success).toBe(true);
      expect(response.body.data.user.firstName).toBe('UpdatedFirst');
    });
    test('FAILING: Should add address to profile', async () => {
      const addressData = {
        type: 'shipping',
        firstName: 'Test',
        lastName: 'User',
        street: '789 Address St',
        city: 'Address City',
        state: 'AS',
        zipCode: '11111',
        country: 'US',
        isDefault: true
      };
      const response = await request(app).post('/api/auth/addresses').set('Authorization', `Bearer ${validToken}`).send(addressData);
      expect(response.status).toBe(201);
      expect(response.body.success).toBe(true);
      expect(response.body.user.addresses).toHaveLength(1);
      expect(response.body.user.addresses[0].street).toBe('789 Address St');
    });
  });

  // Issues #5, #3: Cart persistence
  describe('Issues #5 & #3: Cart persistence', () => {
    let userId;
    beforeEach(async () => {
      const registerRes = await request(app).post('/api/auth/register').send(testUser);
      validToken = registerRes.body.data.token;
      userId = registerRes.body.data.user._id;
    });
    test('FAILING: Should persist cart for registered users', async () => {
      // Add item to cart
      const addRes = await request(app).post('/api/cart/add').set('Authorization', `Bearer ${validToken}`).send({
        productId: product._id,
        quantity: 2
      });
      expect(addRes.status).toBe(200);

      // Simulate new session - get cart
      const cartRes = await request(app).get('/api/cart').set('Authorization', `Bearer ${validToken}`);
      expect(cartRes.status).toBe(200);
      expect(cartRes.body.data.items).toHaveLength(1);
      expect(cartRes.body.data.items[0].quantity).toBe(2);
      expect(cartRes.body.data.items[0].product._id).toBe(product._id.toString());
    });
    test('FAILING: Guest cart should merge on login', async () => {
      // Add items as guest
      const guestRes = await request(app).post('/api/cart/add').send({
        productId: product._id,
        quantity: 1
      });
      const sessionId = guestRes.headers['x-session-id'];
      expect(sessionId).toBeDefined();

      // Login with existing user
      const loginRes = await request(app).post('/api/auth/login').set('x-session-id', sessionId).send({
        email: testUser.email,
        password: testUser.password,
        guestCartItems: [{
          productId: product._id,
          quantity: 1
        }]
      });
      expect(loginRes.status).toBe(200);

      // Check cart after login
      const cartRes = await request(app).get('/api/cart').set('Authorization', `Bearer ${loginRes.body.data.token}`);
      expect(cartRes.body.data.items).toHaveLength(1);
      expect(cartRes.body.data.items[0].quantity).toBe(1);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiand0IiwiYXBwIiwiVXNlciIsIlByb2R1Y3QiLCJPcmRlciIsInRlc3RVc2VyIiwiZW1haWwiLCJwYXNzd29yZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicGhvbmUiLCJ0ZXN0UHJvZHVjdCIsIm5hbWUiLCJzbHVnIiwiZGVzY3JpcHRpb24iLCJzaG9ydERlc2NyaXB0aW9uIiwicHJpY2UiLCJjYXRlZ29yeSIsImltYWdlcyIsInVybCIsImFsdCIsImlzUHJpbWFyeSIsImlzQWN0aXZlIiwid2hvbGVzYWxlciIsInByb2R1Y3RDb2RlIiwiY29zdCIsImRlc2NyaWJlIiwicHJvZHVjdCIsInZhbGlkVG9rZW4iLCJpbnZhbGlkVG9rZW4iLCJzZXNzaW9uQ29va2llIiwic2VydmVyIiwiYmVmb3JlQWxsIiwiY29ubmVjdGlvbiIsInJlYWR5U3RhdGUiLCJjb25uZWN0IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiZGVsZXRlTWFueSIsImNyZWF0ZSIsInNpZ24iLCJ1c2VySWQiLCJhZnRlckFsbCIsImJlZm9yZUVhY2giLCJyZWdpc3RlclJlcyIsInBvc3QiLCJzZW5kIiwiYm9keSIsImRhdGEiLCJ0b2tlbiIsInRlc3QiLCJzZXQiLCJwcm9kdWN0SWQiLCJfaWQiLCJxdWFudGl0eSIsIm9yZGVyRGF0YSIsIml0ZW1zIiwic2hpcHBpbmdBZGRyZXNzIiwic3RyZWV0IiwiY2l0eSIsInN0YXRlIiwiemlwQ29kZSIsImNvdW50cnkiLCJiaWxsaW5nQWRkcmVzcyIsInJlc3BvbnNlIiwiZXhwZWN0Iiwic3RhdHVzIiwibm90IiwidG9CZSIsImVycm9yIiwibWVzc2FnZSIsInRvQ29udGFpbiIsInN1Y2Nlc3MiLCJsb2dpblJlcyIsInVzZXIiLCJ0b0JlRGVmaW5lZCIsInByb2ZpbGVSZXMiLCJnZXQiLCJjYXJ0UmVzIiwiYmFkTG9naW5SZXMiLCJ0b0JlVW5kZWZpbmVkIiwidXBkYXRlUmVzIiwicHV0IiwiZ3Vlc3RPcmRlckRhdGEiLCJndWVzdEluZm8iLCJvcmRlciIsInVwZGF0ZURhdGEiLCJhZGRyZXNzRGF0YSIsInR5cGUiLCJpc0RlZmF1bHQiLCJhZGRyZXNzZXMiLCJ0b0hhdmVMZW5ndGgiLCJhZGRSZXMiLCJ0b1N0cmluZyIsImd1ZXN0UmVzIiwic2Vzc2lvbklkIiwiaGVhZGVycyIsImd1ZXN0Q2FydEl0ZW1zIl0sInNvdXJjZXMiOlsiaXNzdWVzLXJlcHJvZHVjdGlvbi50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xuY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vc2VydmVyJyk7XG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL1VzZXInKTtcbmNvbnN0IFByb2R1Y3QgPSByZXF1aXJlKCcuLi9tb2RlbHMvUHJvZHVjdCcpO1xuY29uc3QgT3JkZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvT3JkZXInKTtcblxuLy8gVGVzdCB1c2VyIGRhdGFcbmNvbnN0IHRlc3RVc2VyID0ge1xuICBlbWFpbDogJ3Rlc3R1c2VyQGV4YW1wbGUuY29tJyxcbiAgcGFzc3dvcmQ6ICdUZXN0UGFzc3dvcmQxMjMhJyxcbiAgZmlyc3ROYW1lOiAnVGVzdCcsXG4gIGxhc3ROYW1lOiAnVXNlcicsXG4gIHBob25lOiAnMTIzNDU2Nzg5MCdcbn07XG5cbmNvbnN0IHRlc3RQcm9kdWN0ID0ge1xuICBuYW1lOiAnVGVzdCBQcm9kdWN0JyxcbiAgc2x1ZzogJ3Rlc3QtcHJvZHVjdCcsXG4gIGRlc2NyaXB0aW9uOiAnVGVzdCBwcm9kdWN0IGRlc2NyaXB0aW9uJyxcbiAgc2hvcnREZXNjcmlwdGlvbjogJ1Nob3J0IHRlc3QgZGVzY3JpcHRpb24nLFxuICBwcmljZTogMjkuOTksXG4gIGNhdGVnb3J5OiAnY3J5c3RhbHMnLFxuICBpbWFnZXM6IFt7XG4gICAgdXJsOiAndGVzdC5qcGcnLFxuICAgIGFsdDogJ1Rlc3QgaW1hZ2UnLFxuICAgIGlzUHJpbWFyeTogdHJ1ZVxuICB9XSxcbiAgaXNBY3RpdmU6IHRydWUsXG4gIHdob2xlc2FsZXI6IHtcbiAgICBuYW1lOiAnVGVzdCBXaG9sZXNhbGVyJyxcbiAgICBlbWFpbDogJ3dob2xlc2FsZXJAZXhhbXBsZS5jb20nLFxuICAgIHByb2R1Y3RDb2RlOiAnVEVTVDAwMScsXG4gICAgY29zdDogMTUuMDBcbiAgfVxufTtcblxuZGVzY3JpYmUoJ0dpdEh1YiBJc3N1ZXMgUmVwcm9kdWN0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBsZXQgcHJvZHVjdDtcbiAgbGV0IHZhbGlkVG9rZW47XG4gIGxldCBpbnZhbGlkVG9rZW47XG4gIGxldCBzZXNzaW9uQ29va2llO1xuICBsZXQgc2VydmVyO1xuXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gRG9uJ3QgcmVjb25uZWN0IGlmIGFscmVhZHkgY29ubmVjdGVkXG4gICAgaWYgKG1vbmdvb3NlLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSAhPT0gMSkge1xuICAgICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChwcm9jZXNzLmVudi5NT05HT0RCX1VSSSB8fCAnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9ob2xpc3RpYy1zdG9yZS10ZXN0Jywge1xuICAgICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gICAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2xlYW4gdXAgZGF0YWJhc2VcbiAgICBhd2FpdCBVc2VyLmRlbGV0ZU1hbnkoe30pO1xuICAgIGF3YWl0IFByb2R1Y3QuZGVsZXRlTWFueSh7fSk7XG4gICAgYXdhaXQgT3JkZXIuZGVsZXRlTWFueSh7fSk7XG5cbiAgICAvLyBDcmVhdGUgdGVzdCBwcm9kdWN0XG4gICAgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuY3JlYXRlKHRlc3RQcm9kdWN0KTtcblxuICAgIC8vIEdlbmVyYXRlIGludmFsaWQgdG9rZW5cbiAgICBpbnZhbGlkVG9rZW4gPSBqd3Quc2lnbih7IHVzZXJJZDogJzEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNCcgfSwgJ3dyb25nc2VjcmV0Jyk7XG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICAvLyBEb24ndCBjbG9zZSB0aGUgY29ubmVjdGlvbiB0aGF0IHNlcnZlci5qcyBpcyB1c2luZ1xuICAgIC8vIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgfSk7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ2xlYW4gdXAgdXNlcnMgYmVmb3JlIGVhY2ggdGVzdFxuICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSh7fSk7XG4gICAgYXdhaXQgT3JkZXIuZGVsZXRlTWFueSh7fSk7XG4gIH0pO1xuXG4gIC8vIElzc3VlICMxMzogXCJwbGFjaW5nIGFuIG9yZGVyIGFzIGxvZ2dlZCBpbiBzYXlzIHlvdSBtdXN0IGJlIGxvZ2dlZCBpbiB0byBjaGVja291dFwiXG4gIGRlc2NyaWJlKCdJc3N1ZSAjMTM6IE9yZGVyIHBsYWNlbWVudCBhcyBsb2dnZWQtaW4gdXNlcicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhbmQgbG9naW4gdXNlclxuICAgICAgY29uc3QgcmVnaXN0ZXJSZXMgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXV0aC9yZWdpc3RlcicpXG4gICAgICAgIC5zZW5kKHRlc3RVc2VyKTtcbiAgICAgIFxuICAgICAgdmFsaWRUb2tlbiA9IHJlZ2lzdGVyUmVzLmJvZHkuZGF0YS50b2tlbjtcbiAgICB9KTtcblxuICAgIHRlc3QoJ0ZBSUxJTkc6IFNob3VsZCBhbGxvdyBsb2dnZWQtaW4gdXNlciB0byBwbGFjZSBvcmRlciB3aXRob3V0IGF1dGhlbnRpY2F0aW9uIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQWRkIGl0ZW0gdG8gY2FydFxuICAgICAgYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2NhcnQvYWRkJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt2YWxpZFRva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBwcm9kdWN0SWQ6IHByb2R1Y3QuX2lkLFxuICAgICAgICAgIHF1YW50aXR5OiAxXG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBQbGFjZSBvcmRlclxuICAgICAgY29uc3Qgb3JkZXJEYXRhID0ge1xuICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICBwcm9kdWN0SWQ6IHByb2R1Y3QuX2lkLFxuICAgICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgICAgIHByaWNlOiBwcm9kdWN0LnByaWNlXG4gICAgICAgIH1dLFxuICAgICAgICBzaGlwcGluZ0FkZHJlc3M6IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICdUZXN0JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICAgIHN0cmVldDogJzEyMyBUZXN0IFN0JyxcbiAgICAgICAgICBjaXR5OiAnVGVzdCBDaXR5JyxcbiAgICAgICAgICBzdGF0ZTogJ1RTJyxcbiAgICAgICAgICB6aXBDb2RlOiAnMTIzNDUnLFxuICAgICAgICAgIGNvdW50cnk6ICdVUydcbiAgICAgICAgfSxcbiAgICAgICAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICdUZXN0JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICAgIHN0cmVldDogJzEyMyBUZXN0IFN0JyxcbiAgICAgICAgICBjaXR5OiAnVGVzdCBDaXR5JyxcbiAgICAgICAgICBzdGF0ZTogJ1RTJyxcbiAgICAgICAgICB6aXBDb2RlOiAnMTIzNDUnLFxuICAgICAgICAgIGNvdW50cnk6ICdVUydcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvb3JkZXJzL3JlZ2lzdGVyZWQnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3ZhbGlkVG9rZW59YClcbiAgICAgICAgLnNlbmQob3JkZXJEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykubm90LnRvQmUoNDAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yPy5tZXNzYWdlKS5ub3QudG9Db250YWluKCdtdXN0IGJlIGxvZ2dlZCBpbicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gSXNzdWUgIzEyOiBcImxvZ2dpbmcgaW4gc2F5cyBjYW5ub3Qgc3luYyB3aXRoID8gYW5kIHRoZW4gYWN0cyBhcyBpZiBsb2dnZWQgaW4gYnV0IHdpdGhvdXQgbmFtZVwiXG4gIGRlc2NyaWJlKCdJc3N1ZSAjMTI6IExvZ2luIHN5bmMgZXJyb3InLCAoKSA9PiB7XG4gICAgdGVzdCgnRkFJTElORzogU2hvdWxkIHByb3Blcmx5IHN5bmMgdXNlciBkYXRhIGFmdGVyIGxvZ2luJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gUmVnaXN0ZXIgdXNlclxuICAgICAgYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2VuZCh0ZXN0VXNlcik7XG5cbiAgICAgIC8vIExvZ2luXG4gICAgICBjb25zdCBsb2dpblJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2xvZ2luJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiB0ZXN0VXNlci5lbWFpbCxcbiAgICAgICAgICBwYXNzd29yZDogdGVzdFVzZXIucGFzc3dvcmRcbiAgICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChsb2dpblJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChsb2dpblJlcy5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobG9naW5SZXMuYm9keS5kYXRhLnVzZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobG9naW5SZXMuYm9keS5kYXRhLnVzZXIuZmlyc3ROYW1lKS50b0JlKHRlc3RVc2VyLmZpcnN0TmFtZSk7XG4gICAgICBleHBlY3QobG9naW5SZXMuYm9keS5kYXRhLnVzZXIubGFzdE5hbWUpLnRvQmUodGVzdFVzZXIubGFzdE5hbWUpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgdG9rZW4gd29ya3NcbiAgICAgIGNvbnN0IHByb2ZpbGVSZXMgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldCgnL2FwaS9hdXRoL3Byb2ZpbGUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2xvZ2luUmVzLmJvZHkuZGF0YS50b2tlbn1gKTtcblxuICAgICAgZXhwZWN0KHByb2ZpbGVSZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocHJvZmlsZVJlcy5ib2R5LmRhdGEudXNlci5maXJzdE5hbWUpLnRvQmUodGVzdFVzZXIuZmlyc3ROYW1lKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gSXNzdWUgIzExOiBcInJlZ2lzdGVyaW5nIHByZXNlbnRzIGl0c2VsZiBhcyBsb2dnZWQgaW4gYnV0IHVuYWJsZSB0byBkbyBhbnl0aGluZ1wiXG4gIGRlc2NyaWJlKCdJc3N1ZSAjMTE6IFJlZ2lzdHJhdGlvbiBsb2dpbiBzdGF0ZScsICgpID0+IHtcbiAgICB0ZXN0KCdGQUlMSU5HOiBTaG91bGQgYmUgZnVsbHkgbG9nZ2VkIGluIGFmdGVyIHJlZ2lzdHJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlZ2lzdGVyUmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2VuZCh0ZXN0VXNlcik7XG5cbiAgICAgIGV4cGVjdChyZWdpc3RlclJlcy5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZWdpc3RlclJlcy5ib2R5LmRhdGEudG9rZW4pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVnaXN0ZXJSZXMuYm9keS5kYXRhLnVzZXIpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgIGNvbnN0IHRva2VuID0gcmVnaXN0ZXJSZXMuYm9keS5kYXRhLnRva2VuO1xuXG4gICAgICAvLyBTaG91bGQgYmUgYWJsZSB0byBhY2Nlc3MgcHJvdGVjdGVkIHJvdXRlc1xuICAgICAgY29uc3QgcHJvZmlsZVJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL2F1dGgvcHJvZmlsZScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YCk7XG5cbiAgICAgIGV4cGVjdChwcm9maWxlUmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHByb2ZpbGVSZXMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBTaG91bGQgYmUgYWJsZSB0byBhZGQgdG8gY2FydFxuICAgICAgY29uc3QgY2FydFJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9jYXJ0L2FkZCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHByb2R1Y3RJZDogcHJvZHVjdC5faWQsXG4gICAgICAgICAgcXVhbnRpdHk6IDFcbiAgICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjYXJ0UmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGNhcnRSZXMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBJc3N1ZSAjMTA6IFwiYmFkIGxvZ2luIHByZXNlbnRzIGFzIGxvZ2dlZCBpbiB3aXRob3V0IGJlaW5nIGFibGUgdG8gZG8gYW55dGhpbmdcIlxuICBkZXNjcmliZSgnSXNzdWUgIzEwOiBCYWQgbG9naW4gc3RhdGUnLCAoKSA9PiB7XG4gICAgdGVzdCgnRkFJTElORzogU2hvdWxkIG5vdCBhcHBlYXIgbG9nZ2VkIGluIGFmdGVyIGZhaWxlZCBsb2dpbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFJlZ2lzdGVyIHVzZXIgZmlyc3RcbiAgICAgIGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL3JlZ2lzdGVyJylcbiAgICAgICAgLnNlbmQodGVzdFVzZXIpO1xuXG4gICAgICAvLyBUcnkgYmFkIGxvZ2luXG4gICAgICBjb25zdCBiYWRMb2dpblJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2xvZ2luJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiB0ZXN0VXNlci5lbWFpbCxcbiAgICAgICAgICBwYXNzd29yZDogJ3dyb25ncGFzc3dvcmQnXG4gICAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoYmFkTG9naW5SZXMuc3RhdHVzKS50b0JlKDQwMSk7XG4gICAgICBleHBlY3QoYmFkTG9naW5SZXMuYm9keS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChiYWRMb2dpblJlcy5ib2R5LmRhdGE/LnRva2VuKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICBleHBlY3QoYmFkTG9naW5SZXMuYm9keS5kYXRhPy51c2VyKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIElzc3VlICM5OiBcInRyeWluZyB0byB1cGRhdGUgcHJvZmlsZSBwcmVzZW50cyBsb2dpbiBzY3JlZW4gZXZlbiB3aGVuIGxvZ2dlZCBpblwiXG4gIGRlc2NyaWJlKCdJc3N1ZSAjOTogUHJvZmlsZSB1cGRhdGUgYXV0aGVudGljYXRpb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZWdpc3RlclJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL3JlZ2lzdGVyJylcbiAgICAgICAgLnNlbmQodGVzdFVzZXIpO1xuICAgICAgXG4gICAgICB2YWxpZFRva2VuID0gcmVnaXN0ZXJSZXMuYm9keS5kYXRhLnRva2VuO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnRkFJTElORzogU2hvdWxkIGFsbG93IHByb2ZpbGUgdXBkYXRlIHdpdGhvdXQgcmUtYXV0aGVudGljYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVSZXMgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnB1dCgnL2FwaS9hdXRoL3Byb2ZpbGUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3ZhbGlkVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGZpcnN0TmFtZTogJ1VwZGF0ZWQnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnTmFtZSdcbiAgICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh1cGRhdGVSZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QodXBkYXRlUmVzLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh1cGRhdGVSZXMuYm9keS5kYXRhLnVzZXIuZmlyc3ROYW1lKS50b0JlKCdVcGRhdGVkJyk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBzdGlsbCBiZSBhdXRoZW50aWNhdGVkIGFmdGVyIHVwZGF0ZVxuICAgICAgY29uc3QgcHJvZmlsZVJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL2F1dGgvcHJvZmlsZScpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dmFsaWRUb2tlbn1gKTtcblxuICAgICAgZXhwZWN0KHByb2ZpbGVSZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocHJvZmlsZVJlcy5ib2R5LmRhdGEudXNlci5maXJzdE5hbWUpLnRvQmUoJ1VwZGF0ZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gSXNzdWUgIzggJiAjNzogR3Vlc3QgY2hlY2tvdXQgaXNzdWVzXG4gIGRlc2NyaWJlKCdJc3N1ZXMgIzggJiAjNzogR3Vlc3QgY2hlY2tvdXQnLCAoKSA9PiB7XG4gICAgdGVzdCgnRkFJTElORzogU2hvdWxkIGFsbG93IGd1ZXN0IGNoZWNrb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZ3Vlc3RPcmRlckRhdGEgPSB7XG4gICAgICAgIGd1ZXN0SW5mbzoge1xuICAgICAgICAgIGVtYWlsOiAnZ3Vlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ0d1ZXN0JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICAgIHBob25lOiAnOTg3NjU0MzIxMCdcbiAgICAgICAgfSxcbiAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgcHJvZHVjdElkOiBwcm9kdWN0Ll9pZCxcbiAgICAgICAgICBxdWFudGl0eTogMSxcbiAgICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZVxuICAgICAgICB9XSxcbiAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiB7XG4gICAgICAgICAgZmlyc3ROYW1lOiAnR3Vlc3QnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgICAgICAgc3RyZWV0OiAnNDU2IEd1ZXN0IEF2ZScsXG4gICAgICAgICAgY2l0eTogJ0d1ZXN0IENpdHknLFxuICAgICAgICAgIHN0YXRlOiAnR1MnLFxuICAgICAgICAgIHppcENvZGU6ICc1NDMyMScsXG4gICAgICAgICAgY291bnRyeTogJ1VTJ1xuICAgICAgICB9LFxuICAgICAgICBiaWxsaW5nQWRkcmVzczoge1xuICAgICAgICAgIGZpcnN0TmFtZTogJ0d1ZXN0JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICAgIHN0cmVldDogJzQ1NiBHdWVzdCBBdmUnLFxuICAgICAgICAgIGNpdHk6ICdHdWVzdCBDaXR5JyxcbiAgICAgICAgICBzdGF0ZTogJ0dTJyxcbiAgICAgICAgICB6aXBDb2RlOiAnNTQzMjEnLFxuICAgICAgICAgIGNvdW50cnk6ICdVUydcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvb3JkZXJzJylcbiAgICAgICAgLnNlbmQoZ3Vlc3RPcmRlckRhdGEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkub3JkZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5vcmRlci5faWQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIElzc3VlICM2ICYgIzQ6IFByb2ZpbGUgYW5kIGFkZHJlc3MgbWFuYWdlbWVudFxuICBkZXNjcmliZSgnSXNzdWVzICM2ICYgIzQ6IFByb2ZpbGUgYW5kIGFkZHJlc3MgbWFuYWdlbWVudCcsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlZ2lzdGVyUmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2VuZCh0ZXN0VXNlcik7XG4gICAgICBcbiAgICAgIHZhbGlkVG9rZW4gPSByZWdpc3RlclJlcy5ib2R5LmRhdGEudG9rZW47XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdGQUlMSU5HOiBTaG91bGQgdXBkYXRlIHByb2ZpbGUgd2l0aG91dCBpc3N1ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgICAgICBmaXJzdE5hbWU6ICdVcGRhdGVkRmlyc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VwZGF0ZWRMYXN0JyxcbiAgICAgICAgcGhvbmU6ICc1NTU1NTU1NTU1J1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnB1dCgnL2FwaS9hdXRoL3Byb2ZpbGUnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3ZhbGlkVG9rZW59YClcbiAgICAgICAgLnNlbmQodXBkYXRlRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5kYXRhLnVzZXIuZmlyc3ROYW1lKS50b0JlKCdVcGRhdGVkRmlyc3QnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ0ZBSUxJTkc6IFNob3VsZCBhZGQgYWRkcmVzcyB0byBwcm9maWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWRkcmVzc0RhdGEgPSB7XG4gICAgICAgIHR5cGU6ICdzaGlwcGluZycsXG4gICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICBzdHJlZXQ6ICc3ODkgQWRkcmVzcyBTdCcsXG4gICAgICAgIGNpdHk6ICdBZGRyZXNzIENpdHknLFxuICAgICAgICBzdGF0ZTogJ0FTJyxcbiAgICAgICAgemlwQ29kZTogJzExMTExJyxcbiAgICAgICAgY291bnRyeTogJ1VTJyxcbiAgICAgICAgaXNEZWZhdWx0OiB0cnVlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2FkZHJlc3NlcycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dmFsaWRUb2tlbn1gKVxuICAgICAgICAuc2VuZChhZGRyZXNzRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS51c2VyLmFkZHJlc3NlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkudXNlci5hZGRyZXNzZXNbMF0uc3RyZWV0KS50b0JlKCc3ODkgQWRkcmVzcyBTdCcpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBJc3N1ZXMgIzUsICMzOiBDYXJ0IHBlcnNpc3RlbmNlXG4gIGRlc2NyaWJlKCdJc3N1ZXMgIzUgJiAjMzogQ2FydCBwZXJzaXN0ZW5jZScsICgpID0+IHtcbiAgICBsZXQgdXNlcklkO1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZWdpc3RlclJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL3JlZ2lzdGVyJylcbiAgICAgICAgLnNlbmQodGVzdFVzZXIpO1xuICAgICAgXG4gICAgICB2YWxpZFRva2VuID0gcmVnaXN0ZXJSZXMuYm9keS5kYXRhLnRva2VuO1xuICAgICAgdXNlcklkID0gcmVnaXN0ZXJSZXMuYm9keS5kYXRhLnVzZXIuX2lkO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnRkFJTElORzogU2hvdWxkIHBlcnNpc3QgY2FydCBmb3IgcmVnaXN0ZXJlZCB1c2VycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFkZCBpdGVtIHRvIGNhcnRcbiAgICAgIGNvbnN0IGFkZFJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9jYXJ0L2FkZCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dmFsaWRUb2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgcHJvZHVjdElkOiBwcm9kdWN0Ll9pZCxcbiAgICAgICAgICBxdWFudGl0eTogMlxuICAgICAgICB9KTtcblxuICAgICAgZXhwZWN0KGFkZFJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcblxuICAgICAgLy8gU2ltdWxhdGUgbmV3IHNlc3Npb24gLSBnZXQgY2FydFxuICAgICAgY29uc3QgY2FydFJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL2NhcnQnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3ZhbGlkVG9rZW59YCk7XG5cbiAgICAgIGV4cGVjdChjYXJ0UmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KGNhcnRSZXMuYm9keS5kYXRhLml0ZW1zKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoY2FydFJlcy5ib2R5LmRhdGEuaXRlbXNbMF0ucXVhbnRpdHkpLnRvQmUoMik7XG4gICAgICBleHBlY3QoY2FydFJlcy5ib2R5LmRhdGEuaXRlbXNbMF0ucHJvZHVjdC5faWQpLnRvQmUocHJvZHVjdC5faWQudG9TdHJpbmcoKSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdGQUlMSU5HOiBHdWVzdCBjYXJ0IHNob3VsZCBtZXJnZSBvbiBsb2dpbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFkZCBpdGVtcyBhcyBndWVzdFxuICAgICAgY29uc3QgZ3Vlc3RSZXMgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvY2FydC9hZGQnKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgcHJvZHVjdElkOiBwcm9kdWN0Ll9pZCxcbiAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICB9KTtcblxuICAgICAgY29uc3Qgc2Vzc2lvbklkID0gZ3Vlc3RSZXMuaGVhZGVyc1sneC1zZXNzaW9uLWlkJ107XG4gICAgICBleHBlY3Qoc2Vzc2lvbklkKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyBMb2dpbiB3aXRoIGV4aXN0aW5nIHVzZXJcbiAgICAgIGNvbnN0IGxvZ2luUmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvbG9naW4nKVxuICAgICAgICAuc2V0KCd4LXNlc3Npb24taWQnLCBzZXNzaW9uSWQpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBlbWFpbDogdGVzdFVzZXIuZW1haWwsXG4gICAgICAgICAgcGFzc3dvcmQ6IHRlc3RVc2VyLnBhc3N3b3JkLFxuICAgICAgICAgIGd1ZXN0Q2FydEl0ZW1zOiBbe1xuICAgICAgICAgICAgcHJvZHVjdElkOiBwcm9kdWN0Ll9pZCxcbiAgICAgICAgICAgIHF1YW50aXR5OiAxXG4gICAgICAgICAgfV1cbiAgICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChsb2dpblJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcblxuICAgICAgLy8gQ2hlY2sgY2FydCBhZnRlciBsb2dpblxuICAgICAgY29uc3QgY2FydFJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL2NhcnQnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke2xvZ2luUmVzLmJvZHkuZGF0YS50b2tlbn1gKTtcblxuICAgICAgZXhwZWN0KGNhcnRSZXMuYm9keS5kYXRhLml0ZW1zKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoY2FydFJlcy5ib2R5LmRhdGEuaXRlbXNbMF0ucXVhbnRpdHkpLnRvQmUoMSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDcEMsTUFBTUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLE1BQU1FLEdBQUcsR0FBR0YsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNRyxHQUFHLEdBQUdILE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDaEMsTUFBTUksSUFBSSxHQUFHSixPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDdEMsTUFBTUssT0FBTyxHQUFHTCxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDNUMsTUFBTU0sS0FBSyxHQUFHTixPQUFPLENBQUMsaUJBQWlCLENBQUM7O0FBRXhDO0FBQ0EsTUFBTU8sUUFBUSxHQUFHO0VBQ2ZDLEtBQUssRUFBRSxzQkFBc0I7RUFDN0JDLFFBQVEsRUFBRSxrQkFBa0I7RUFDNUJDLFNBQVMsRUFBRSxNQUFNO0VBQ2pCQyxRQUFRLEVBQUUsTUFBTTtFQUNoQkMsS0FBSyxFQUFFO0FBQ1QsQ0FBQztBQUVELE1BQU1DLFdBQVcsR0FBRztFQUNsQkMsSUFBSSxFQUFFLGNBQWM7RUFDcEJDLElBQUksRUFBRSxjQUFjO0VBQ3BCQyxXQUFXLEVBQUUsMEJBQTBCO0VBQ3ZDQyxnQkFBZ0IsRUFBRSx3QkFBd0I7RUFDMUNDLEtBQUssRUFBRSxLQUFLO0VBQ1pDLFFBQVEsRUFBRSxVQUFVO0VBQ3BCQyxNQUFNLEVBQUUsQ0FBQztJQUNQQyxHQUFHLEVBQUUsVUFBVTtJQUNmQyxHQUFHLEVBQUUsWUFBWTtJQUNqQkMsU0FBUyxFQUFFO0VBQ2IsQ0FBQyxDQUFDO0VBQ0ZDLFFBQVEsRUFBRSxJQUFJO0VBQ2RDLFVBQVUsRUFBRTtJQUNWWCxJQUFJLEVBQUUsaUJBQWlCO0lBQ3ZCTixLQUFLLEVBQUUsd0JBQXdCO0lBQy9Ca0IsV0FBVyxFQUFFLFNBQVM7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