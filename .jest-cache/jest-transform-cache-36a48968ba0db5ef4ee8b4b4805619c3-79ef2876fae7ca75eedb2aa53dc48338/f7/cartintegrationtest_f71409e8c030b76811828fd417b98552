2802d326f8d1cd47e40f1edf4798664a
/**
 * @jest-environment node
 */

const request = require('supertest');
const mongoose = require('mongoose');
const {
  MongoMemoryServer
} = require('mongodb-memory-server');
const app = require('../server');
const Product = require('../models/Product');
const User = require('../models/User');
const Cart = require('../models/Cart');
let mongoServer;
describe('Cart Integration Tests - Docker Environment', () => {
  beforeAll(async () => {
    // Create in-memory MongoDB instance
    mongoServer = await MongoMemoryServer.create();
    const mongoUri = mongoServer.getUri();

    // Connect to the in-memory database
    await mongoose.connect(mongoUri);
  });
  afterAll(async () => {
    await mongoose.disconnect();
    await mongoServer.stop();
  });
  beforeEach(async () => {
    // Clear all data
    await Product.deleteMany({});
    await User.deleteMany({});
    await Cart.deleteMany({});
  });
  describe('Add to Cart - Docker Environment Simulation', () => {
    let testProduct;
    let agent;
    let csrfToken;
    let sessionId;
    beforeEach(async () => {
      // Create test product
      testProduct = await Product.create({
        name: 'Test Crystal',
        slug: 'test-crystal',
        description: 'A test crystal',
        shortDescription: 'Test crystal',
        price: 29.99,
        category: 'crystals',
        isActive: true,
        stock: 10,
        wholesaler: {
          name: 'Test Wholesaler',
          email: 'test@wholesaler.com',
          productCode: 'TEST-001',
          cost: 15.00
        }
      });

      // Create agent to maintain session/cookies
      agent = request.agent(app);
    });
    it('should handle add to cart with CSRF token correctly', async () => {
      // Step 1: Get CSRF token (simulating page load)
      const csrfResponse = await agent.get('/api/csrf-token').expect(200);
      expect(csrfResponse.body.success).toBe(true);
      expect(csrfResponse.body.csrfToken).toBeTruthy();
      csrfToken = csrfResponse.body.csrfToken;

      // Step 2: Add to cart with CSRF token
      const addResponse = await agent.post('/api/cart/add').set('x-csrf-token', csrfToken).send({
        productId: testProduct._id.toString(),
        quantity: 1
      }).expect(200);
      expect(addResponse.body.success).toBe(true);
      expect(addResponse.body.message).toBe('Item added to cart');
      expect(addResponse.body.data.cart.items).toHaveLength(1);
      expect(addResponse.body.data.cart.items[0].quantity).toBe(1);
    });
    it('should reject add to cart without CSRF token', async () => {
      // Try to add without getting CSRF token first
      const response = await agent.post('/api/cart/add').send({
        productId: testProduct._id.toString(),
        quantity: 1
      }).expect(403);
      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('CSRF_TOKEN_MISMATCH');
    });
    it('should handle guest session correctly in Docker environment', async () => {
      // Step 1: Get CSRF token to establish session
      const csrfResponse = await agent.get('/api/csrf-token').expect(200);
      csrfToken = csrfResponse.body.csrfToken;

      // Step 2: Add to cart as guest
      const addResponse = await agent.post('/api/cart/add').set('x-csrf-token', csrfToken).set('x-guest-session-id', 'guest_123_test').send({
        productId: testProduct._id.toString(),
        quantity: 2
      }).expect(200);
      expect(addResponse.body.success).toBe(true);

      // Step 3: Fetch cart to verify persistence
      const cartResponse = await agent.get('/api/cart').set('x-guest-session-id', 'guest_123_test').expect(200);
      expect(cartResponse.body.success).toBe(true);
      expect(cartResponse.body.data.cart.items).toHaveLength(1);
      expect(cartResponse.body.data.cart.items[0].quantity).toBe(2);
    });
    it('should handle authenticated user add to cart', async () => {
      // Create test user
      const testUser = await User.create({
        email: 'test@example.com',
        password: 'Password123!',
        firstName: 'Test',
        lastName: 'User',
        isVerified: true
      });

      // Login to get JWT cookie
      const loginResponse = await agent.post('/api/auth/login').send({
        email: 'test@example.com',
        password: 'Password123!'
      }).expect(200);
      expect(loginResponse.body.success).toBe(true);

      // Get CSRF token after login
      const csrfResponse = await agent.get('/api/csrf-token').expect(200);
      csrfToken = csrfResponse.body.csrfToken;

      // Add to cart as authenticated user
      const addResponse = await agent.post('/api/cart/add').set('x-csrf-token', csrfToken).send({
        productId: testProduct._id.toString(),
        quantity: 3
      }).expect(200);
      expect(addResponse.body.success).toBe(true);
      expect(addResponse.body.data.cart.items).toHaveLength(1);
      expect(addResponse.body.data.cart.items[0].quantity).toBe(3);

      // Verify cart is saved to user
      const updatedUser = await User.findById(testUser._id);
      expect(updatedUser.cart.items).toHaveLength(1);
      expect(updatedUser.cart.items[0].quantity).toBe(3);
    });
    it('should handle concurrent cart operations', async () => {
      // Get CSRF token
      const csrfResponse = await agent.get('/api/csrf-token').expect(200);
      csrfToken = csrfResponse.body.csrfToken;

      // Simulate concurrent add to cart operations
      const promises = [];
      for (let i = 0; i < 5; i++) {
        promises.push(agent.post('/api/cart/add').set('x-csrf-token', csrfToken).set('x-guest-session-id', 'guest_concurrent_test').send({
          productId: testProduct._id.toString(),
          quantity: 1
        }));
      }
      const results = await Promise.all(promises);

      // All should succeed
      results.forEach(res => {
        expect(res.status).toBe(200);
        expect(res.body.success).toBe(true);
      });

      // Final cart should have quantity 5
      const cartResponse = await agent.get('/api/cart').set('x-guest-session-id', 'guest_concurrent_test').expect(200);
      expect(cartResponse.body.data.cart.items).toHaveLength(1);
      expect(cartResponse.body.data.cart.items[0].quantity).toBe(5);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiTW9uZ29NZW1vcnlTZXJ2ZXIiLCJhcHAiLCJQcm9kdWN0IiwiVXNlciIsIkNhcnQiLCJtb25nb1NlcnZlciIsImRlc2NyaWJlIiwiYmVmb3JlQWxsIiwiY3JlYXRlIiwibW9uZ29VcmkiLCJnZXRVcmkiLCJjb25uZWN0IiwiYWZ0ZXJBbGwiLCJkaXNjb25uZWN0Iiwic3RvcCIsImJlZm9yZUVhY2giLCJkZWxldGVNYW55IiwidGVzdFByb2R1Y3QiLCJhZ2VudCIsImNzcmZUb2tlbiIsInNlc3Npb25JZCIsIm5hbWUiLCJzbHVnIiwiZGVzY3JpcHRpb24iLCJzaG9ydERlc2NyaXB0aW9uIiwicHJpY2UiLCJjYXRlZ29yeSIsImlzQWN0aXZlIiwic3RvY2siLCJ3aG9sZXNhbGVyIiwiZW1haWwiLCJwcm9kdWN0Q29kZSIsImNvc3QiLCJpdCIsImNzcmZSZXNwb25zZSIsImdldCIsImV4cGVjdCIsImJvZHkiLCJzdWNjZXNzIiwidG9CZSIsInRvQmVUcnV0aHkiLCJhZGRSZXNwb25zZSIsInBvc3QiLCJzZXQiLCJzZW5kIiwicHJvZHVjdElkIiwiX2lkIiwidG9TdHJpbmciLCJxdWFudGl0eSIsIm1lc3NhZ2UiLCJkYXRhIiwiY2FydCIsIml0ZW1zIiwidG9IYXZlTGVuZ3RoIiwicmVzcG9uc2UiLCJlcnJvciIsImNvZGUiLCJjYXJ0UmVzcG9uc2UiLCJ0ZXN0VXNlciIsInBhc3N3b3JkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJpc1ZlcmlmaWVkIiwibG9naW5SZXNwb25zZSIsInVwZGF0ZWRVc2VyIiwiZmluZEJ5SWQiLCJwcm9taXNlcyIsImkiLCJwdXNoIiwicmVzdWx0cyIsIlByb21pc2UiLCJhbGwiLCJmb3JFYWNoIiwicmVzIiwic3RhdHVzIl0sInNvdXJjZXMiOlsiY2FydC1pbnRlZ3JhdGlvbi50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGplc3QtZW52aXJvbm1lbnQgbm9kZVxuICovXG5cbmNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IHsgTW9uZ29NZW1vcnlTZXJ2ZXIgfSA9IHJlcXVpcmUoJ21vbmdvZGItbWVtb3J5LXNlcnZlcicpO1xuY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vc2VydmVyJyk7XG5jb25zdCBQcm9kdWN0ID0gcmVxdWlyZSgnLi4vbW9kZWxzL1Byb2R1Y3QnKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvVXNlcicpO1xuY29uc3QgQ2FydCA9IHJlcXVpcmUoJy4uL21vZGVscy9DYXJ0Jyk7XG5cbmxldCBtb25nb1NlcnZlcjtcblxuZGVzY3JpYmUoJ0NhcnQgSW50ZWdyYXRpb24gVGVzdHMgLSBEb2NrZXIgRW52aXJvbm1lbnQnLCAoKSA9PiB7XG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ3JlYXRlIGluLW1lbW9yeSBNb25nb0RCIGluc3RhbmNlXG4gICAgbW9uZ29TZXJ2ZXIgPSBhd2FpdCBNb25nb01lbW9yeVNlcnZlci5jcmVhdGUoKTtcbiAgICBjb25zdCBtb25nb1VyaSA9IG1vbmdvU2VydmVyLmdldFVyaSgpO1xuICAgIFxuICAgIC8vIENvbm5lY3QgdG8gdGhlIGluLW1lbW9yeSBkYXRhYmFzZVxuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QobW9uZ29VcmkpO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgbW9uZ29vc2UuZGlzY29ubmVjdCgpO1xuICAgIGF3YWl0IG1vbmdvU2VydmVyLnN0b3AoKTtcbiAgfSk7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ2xlYXIgYWxsIGRhdGFcbiAgICBhd2FpdCBQcm9kdWN0LmRlbGV0ZU1hbnkoe30pO1xuICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSh7fSk7XG4gICAgYXdhaXQgQ2FydC5kZWxldGVNYW55KHt9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FkZCB0byBDYXJ0IC0gRG9ja2VyIEVudmlyb25tZW50IFNpbXVsYXRpb24nLCAoKSA9PiB7XG4gICAgbGV0IHRlc3RQcm9kdWN0O1xuICAgIGxldCBhZ2VudDtcbiAgICBsZXQgY3NyZlRva2VuO1xuICAgIGxldCBzZXNzaW9uSWQ7XG5cbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSB0ZXN0IHByb2R1Y3RcbiAgICAgIHRlc3RQcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5jcmVhdGUoe1xuICAgICAgICBuYW1lOiAnVGVzdCBDcnlzdGFsJyxcbiAgICAgICAgc2x1ZzogJ3Rlc3QtY3J5c3RhbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQSB0ZXN0IGNyeXN0YWwnLFxuICAgICAgICBzaG9ydERlc2NyaXB0aW9uOiAnVGVzdCBjcnlzdGFsJyxcbiAgICAgICAgcHJpY2U6IDI5Ljk5LFxuICAgICAgICBjYXRlZ29yeTogJ2NyeXN0YWxzJyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHN0b2NrOiAxMCxcbiAgICAgICAgd2hvbGVzYWxlcjoge1xuICAgICAgICAgIG5hbWU6ICdUZXN0IFdob2xlc2FsZXInLFxuICAgICAgICAgIGVtYWlsOiAndGVzdEB3aG9sZXNhbGVyLmNvbScsXG4gICAgICAgICAgcHJvZHVjdENvZGU6ICdURVNULTAwMScsXG4gICAgICAgICAgY29zdDogMTUuMDBcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENyZWF0ZSBhZ2VudCB0byBtYWludGFpbiBzZXNzaW9uL2Nvb2tpZXNcbiAgICAgIGFnZW50ID0gcmVxdWVzdC5hZ2VudChhcHApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYWRkIHRvIGNhcnQgd2l0aCBDU1JGIHRva2VuIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFN0ZXAgMTogR2V0IENTUkYgdG9rZW4gKHNpbXVsYXRpbmcgcGFnZSBsb2FkKVxuICAgICAgY29uc3QgY3NyZlJlc3BvbnNlID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLmdldCgnL2FwaS9jc3JmLXRva2VuJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QoY3NyZlJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjc3JmUmVzcG9uc2UuYm9keS5jc3JmVG9rZW4pLnRvQmVUcnV0aHkoKTtcbiAgICAgIGNzcmZUb2tlbiA9IGNzcmZSZXNwb25zZS5ib2R5LmNzcmZUb2tlbjtcblxuICAgICAgLy8gU3RlcCAyOiBBZGQgdG8gY2FydCB3aXRoIENTUkYgdG9rZW5cbiAgICAgIGNvbnN0IGFkZFJlc3BvbnNlID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLnBvc3QoJy9hcGkvY2FydC9hZGQnKVxuICAgICAgICAuc2V0KCd4LWNzcmYtdG9rZW4nLCBjc3JmVG9rZW4pXG4gICAgICAgIC5zZW5kKHsgXG4gICAgICAgICAgcHJvZHVjdElkOiB0ZXN0UHJvZHVjdC5faWQudG9TdHJpbmcoKSwgXG4gICAgICAgICAgcXVhbnRpdHk6IDEgXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KGFkZFJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChhZGRSZXNwb25zZS5ib2R5Lm1lc3NhZ2UpLnRvQmUoJ0l0ZW0gYWRkZWQgdG8gY2FydCcpO1xuICAgICAgZXhwZWN0KGFkZFJlc3BvbnNlLmJvZHkuZGF0YS5jYXJ0Lml0ZW1zKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoYWRkUmVzcG9uc2UuYm9keS5kYXRhLmNhcnQuaXRlbXNbMF0ucXVhbnRpdHkpLnRvQmUoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBhZGQgdG8gY2FydCB3aXRob3V0IENTUkYgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUcnkgdG8gYWRkIHdpdGhvdXQgZ2V0dGluZyBDU1JGIHRva2VuIGZpcnN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KCcvYXBpL2NhcnQvYWRkJylcbiAgICAgICAgLnNlbmQoeyBcbiAgICAgICAgICBwcm9kdWN0SWQ6IHRlc3RQcm9kdWN0Ll9pZC50b1N0cmluZygpLCBcbiAgICAgICAgICBxdWFudGl0eTogMSBcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCg0MDMpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yLmNvZGUpLnRvQmUoJ0NTUkZfVE9LRU5fTUlTTUFUQ0gnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGd1ZXN0IHNlc3Npb24gY29ycmVjdGx5IGluIERvY2tlciBlbnZpcm9ubWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFN0ZXAgMTogR2V0IENTUkYgdG9rZW4gdG8gZXN0YWJsaXNoIHNlc3Npb25cbiAgICAgIGNvbnN0IGNzcmZSZXNwb25zZSA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5nZXQoJy9hcGkvY3NyZi10b2tlbicpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcbiAgICAgIFxuICAgICAgY3NyZlRva2VuID0gY3NyZlJlc3BvbnNlLmJvZHkuY3NyZlRva2VuO1xuXG4gICAgICAvLyBTdGVwIDI6IEFkZCB0byBjYXJ0IGFzIGd1ZXN0XG4gICAgICBjb25zdCBhZGRSZXNwb25zZSA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KCcvYXBpL2NhcnQvYWRkJylcbiAgICAgICAgLnNldCgneC1jc3JmLXRva2VuJywgY3NyZlRva2VuKVxuICAgICAgICAuc2V0KCd4LWd1ZXN0LXNlc3Npb24taWQnLCAnZ3Vlc3RfMTIzX3Rlc3QnKVxuICAgICAgICAuc2VuZCh7IFxuICAgICAgICAgIHByb2R1Y3RJZDogdGVzdFByb2R1Y3QuX2lkLnRvU3RyaW5nKCksIFxuICAgICAgICAgIHF1YW50aXR5OiAyIFxuICAgICAgICB9KVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChhZGRSZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFN0ZXAgMzogRmV0Y2ggY2FydCB0byB2ZXJpZnkgcGVyc2lzdGVuY2VcbiAgICAgIGNvbnN0IGNhcnRSZXNwb25zZSA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5nZXQoJy9hcGkvY2FydCcpXG4gICAgICAgIC5zZXQoJ3gtZ3Vlc3Qtc2Vzc2lvbi1pZCcsICdndWVzdF8xMjNfdGVzdCcpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KGNhcnRSZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY2FydFJlc3BvbnNlLmJvZHkuZGF0YS5jYXJ0Lml0ZW1zKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoY2FydFJlc3BvbnNlLmJvZHkuZGF0YS5jYXJ0Lml0ZW1zWzBdLnF1YW50aXR5KS50b0JlKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYXV0aGVudGljYXRlZCB1c2VyIGFkZCB0byBjYXJ0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIHRlc3QgdXNlclxuICAgICAgY29uc3QgdGVzdFVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAnUGFzc3dvcmQxMjMhJyxcbiAgICAgICAgZmlyc3ROYW1lOiAnVGVzdCcsXG4gICAgICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgICAgIGlzVmVyaWZpZWQ6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICAvLyBMb2dpbiB0byBnZXQgSldUIGNvb2tpZVxuICAgICAgY29uc3QgbG9naW5SZXNwb25zZSA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvbG9naW4nKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ1Bhc3N3b3JkMTIzISdcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QobG9naW5SZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIEdldCBDU1JGIHRva2VuIGFmdGVyIGxvZ2luXG4gICAgICBjb25zdCBjc3JmUmVzcG9uc2UgPSBhd2FpdCBhZ2VudFxuICAgICAgICAuZ2V0KCcvYXBpL2NzcmYtdG9rZW4nKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG4gICAgICBcbiAgICAgIGNzcmZUb2tlbiA9IGNzcmZSZXNwb25zZS5ib2R5LmNzcmZUb2tlbjtcblxuICAgICAgLy8gQWRkIHRvIGNhcnQgYXMgYXV0aGVudGljYXRlZCB1c2VyXG4gICAgICBjb25zdCBhZGRSZXNwb25zZSA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KCcvYXBpL2NhcnQvYWRkJylcbiAgICAgICAgLnNldCgneC1jc3JmLXRva2VuJywgY3NyZlRva2VuKVxuICAgICAgICAuc2VuZCh7IFxuICAgICAgICAgIHByb2R1Y3RJZDogdGVzdFByb2R1Y3QuX2lkLnRvU3RyaW5nKCksIFxuICAgICAgICAgIHF1YW50aXR5OiAzIFxuICAgICAgICB9KVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChhZGRSZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoYWRkUmVzcG9uc2UuYm9keS5kYXRhLmNhcnQuaXRlbXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChhZGRSZXNwb25zZS5ib2R5LmRhdGEuY2FydC5pdGVtc1swXS5xdWFudGl0eSkudG9CZSgzKTtcblxuICAgICAgLy8gVmVyaWZ5IGNhcnQgaXMgc2F2ZWQgdG8gdXNlclxuICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHRlc3RVc2VyLl9pZCk7XG4gICAgICBleHBlY3QodXBkYXRlZFVzZXIuY2FydC5pdGVtcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHVwZGF0ZWRVc2VyLmNhcnQuaXRlbXNbMF0ucXVhbnRpdHkpLnRvQmUoMyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IGNhcnQgb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEdldCBDU1JGIHRva2VuXG4gICAgICBjb25zdCBjc3JmUmVzcG9uc2UgPSBhd2FpdCBhZ2VudFxuICAgICAgICAuZ2V0KCcvYXBpL2NzcmYtdG9rZW4nKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG4gICAgICBcbiAgICAgIGNzcmZUb2tlbiA9IGNzcmZSZXNwb25zZS5ib2R5LmNzcmZUb2tlbjtcblxuICAgICAgLy8gU2ltdWxhdGUgY29uY3VycmVudCBhZGQgdG8gY2FydCBvcGVyYXRpb25zXG4gICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgcHJvbWlzZXMucHVzaChcbiAgICAgICAgICBhZ2VudFxuICAgICAgICAgICAgLnBvc3QoJy9hcGkvY2FydC9hZGQnKVxuICAgICAgICAgICAgLnNldCgneC1jc3JmLXRva2VuJywgY3NyZlRva2VuKVxuICAgICAgICAgICAgLnNldCgneC1ndWVzdC1zZXNzaW9uLWlkJywgJ2d1ZXN0X2NvbmN1cnJlbnRfdGVzdCcpXG4gICAgICAgICAgICAuc2VuZCh7IFxuICAgICAgICAgICAgICBwcm9kdWN0SWQ6IHRlc3RQcm9kdWN0Ll9pZC50b1N0cmluZygpLCBcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IDEgXG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgXG4gICAgICAvLyBBbGwgc2hvdWxkIHN1Y2NlZWRcbiAgICAgIHJlc3VsdHMuZm9yRWFjaChyZXMgPT4ge1xuICAgICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgICBleHBlY3QocmVzLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGaW5hbCBjYXJ0IHNob3VsZCBoYXZlIHF1YW50aXR5IDVcbiAgICAgIGNvbnN0IGNhcnRSZXNwb25zZSA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5nZXQoJy9hcGkvY2FydCcpXG4gICAgICAgIC5zZXQoJ3gtZ3Vlc3Qtc2Vzc2lvbi1pZCcsICdndWVzdF9jb25jdXJyZW50X3Rlc3QnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChjYXJ0UmVzcG9uc2UuYm9keS5kYXRhLmNhcnQuaXRlbXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChjYXJ0UmVzcG9uc2UuYm9keS5kYXRhLmNhcnQuaXRlbXNbMF0ucXVhbnRpdHkpLnRvQmUoNSk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1DLFFBQVEsR0FBR0QsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNwQyxNQUFNO0VBQUVFO0FBQWtCLENBQUMsR0FBR0YsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQzlELE1BQU1HLEdBQUcsR0FBR0gsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNoQyxNQUFNSSxPQUFPLEdBQUdKLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztB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