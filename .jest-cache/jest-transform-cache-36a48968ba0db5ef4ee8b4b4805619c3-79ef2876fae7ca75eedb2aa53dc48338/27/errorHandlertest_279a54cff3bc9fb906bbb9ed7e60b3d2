098f3d5002345a50aee79d112b78c875
const {
  describe,
  it,
  expect,
  beforeEach
} = require('@jest/globals');
const {
  formatError,
  createValidationError,
  ErrorCodes
} = require('../utils/errorHandler');
describe('Error Handler Utilities', () => {
  describe('formatError', () => {
    it('should format error with code and message', () => {
      const result = formatError('USER_NOT_FOUND', 'User not found');
      expect(result).toEqual({
        success: false,
        error: {
          code: 'USER_NOT_FOUND',
          message: 'User not found'
        }
      });
    });
    it('should include field when provided', () => {
      const result = formatError('INVALID_EMAIL', 'Invalid email format', 'email');
      expect(result).toEqual({
        success: false,
        error: {
          code: 'INVALID_EMAIL',
          message: 'Invalid email format',
          field: 'email'
        }
      });
    });
    it('should handle additional data', () => {
      const result = formatError('VALIDATION_ERROR', 'Validation failed', null, {
        details: [{
          field: 'email',
          message: 'Required'
        }]
      });
      expect(result).toEqual({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Validation failed',
          details: [{
            field: 'email',
            message: 'Required'
          }]
        }
      });
    });
  });
  describe('createValidationError', () => {
    it('should format express-validator errors', () => {
      const validationErrors = {
        array: () => [{
          msg: 'Invalid email',
          param: 'email',
          location: 'body'
        }, {
          msg: 'Password too short',
          param: 'password',
          location: 'body'
        }]
      };
      const result = createValidationError(validationErrors);
      expect(result).toEqual({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: [{
            field: 'email',
            message: 'Invalid email',
            location: 'body'
          }, {
            field: 'password',
            message: 'Password too short',
            location: 'body'
          }]
        }
      });
    });
    it('should handle empty validation errors', () => {
      const validationErrors = {
        array: () => []
      };
      const result = createValidationError(validationErrors);
      expect(result).toEqual({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: []
        }
      });
    });
  });
  describe('ErrorCodes', () => {
    it('should contain common error codes', () => {
      expect(ErrorCodes.VALIDATION_ERROR).toBe('VALIDATION_ERROR');
      expect(ErrorCodes.NOT_FOUND).toBe('NOT_FOUND');
      expect(ErrorCodes.UNAUTHORIZED).toBe('UNAUTHORIZED');
      expect(ErrorCodes.FORBIDDEN).toBe('FORBIDDEN');
      expect(ErrorCodes.INTERNAL_ERROR).toBe('INTERNAL_ERROR');
    });
    it('should contain authentication error codes', () => {
      expect(ErrorCodes.INVALID_CREDENTIALS).toBe('INVALID_CREDENTIALS');
      expect(ErrorCodes.USER_EXISTS).toBe('USER_EXISTS');
      expect(ErrorCodes.TOKEN_INVALID).toBe('TOKEN_INVALID');
      expect(ErrorCodes.TOKEN_EXPIRED).toBe('TOKEN_EXPIRED');
    });
    it('should contain product error codes', () => {
      expect(ErrorCodes.PRODUCT_NOT_FOUND).toBe('PRODUCT_NOT_FOUND');
      expect(ErrorCodes.INVALID_PRODUCT_ID).toBe('INVALID_PRODUCT_ID');
      expect(ErrorCodes.PRODUCTS_FETCH_ERROR).toBe('PRODUCTS_FETCH_ERROR');
    });
    it('should contain cart error codes', () => {
      expect(ErrorCodes.CART_ADD_ERROR).toBe('CART_ADD_ERROR');
      expect(ErrorCodes.CART_UPDATE_ERROR).toBe('CART_UPDATE_ERROR');
      expect(ErrorCodes.ITEM_NOT_FOUND).toBe('ITEM_NOT_FOUND');
      expect(ErrorCodes.MAX_QUANTITY_EXCEEDED).toBe('MAX_QUANTITY_EXCEEDED');
    });
    it('should contain order error codes', () => {
      expect(ErrorCodes.ORDER_NOT_FOUND).toBe('ORDER_NOT_FOUND');
      expect(ErrorCodes.ORDER_CREATE_ERROR).toBe('ORDER_CREATE_ERROR');
      expect(ErrorCodes.INVALID_ORDER_STATUS).toBe('INVALID_ORDER_STATUS');
    });
    it('should contain payment error codes', () => {
      expect(ErrorCodes.PAYMENT_FAILED).toBe('PAYMENT_FAILED');
      expect(ErrorCodes.PAYMENT_METHOD_INVALID).toBe('PAYMENT_METHOD_INVALID');
      expect(ErrorCodes.INSUFFICIENT_FUNDS).toBe('INSUFFICIENT_FUNDS');
    });
  });
  describe('i18n support', () => {
    it('should use i18n key when available', () => {
      // Mock i18n function
      const mockI18n = key => {
        const translations = {
          'errors.USER_NOT_FOUND': 'User not found',
          'errors.INVALID_EMAIL': 'Invalid email format'
        };
        return translations[key] || key;
      };
      const result = formatError('USER_NOT_FOUND', 'User not found', null, null, mockI18n);
      expect(result.error.message).toBe('User not found');
    });
    it('should fallback to provided message when i18n key not found', () => {
      const mockI18n = key => key; // Return key when not found

      const result = formatError('CUSTOM_ERROR', 'Custom error message', null, null, mockI18n);
      expect(result.error.message).toBe('Custom error message');
    });
  });
});
describe('Error Response Middleware', () => {
  let req, res, next;
  beforeEach(() => {
    req = {
      headers: {
        'x-locale': 'en'
      }
    };
    res = {
      status: jest.fn().mockReturnThis(),
      json: jest.fn()
    };
    next = jest.fn();
  });
  it('should add error helper methods to response object', () => {
    const {
      errorResponse
    } = require('../utils/errorHandler');
    errorResponse(req, res, next);
    expect(typeof res.error).toBe('function');
    expect(typeof res.validationError).toBe('function');
    expect(next).toHaveBeenCalled();
  });
  it('should send formatted error with status code', () => {
    const {
      errorResponse
    } = require('../utils/errorHandler');
    errorResponse(req, res, next);
    res.error(404, 'USER_NOT_FOUND', 'User not found');
    expect(res.status).toHaveBeenCalledWith(404);
    expect(res.json).toHaveBeenCalledWith({
      success: false,
      error: {
        code: 'USER_NOT_FOUND',
        message: 'User not found'
      }
    });
  });
  it('should handle validation errors', () => {
    const {
      errorResponse
    } = require('../utils/errorHandler');
    errorResponse(req, res, next);
    const validationErrors = {
      array: () => [{
        msg: 'Invalid email',
        param: 'email',
        location: 'body'
      }]
    };
    res.validationError(validationErrors);
    expect(res.status).toHaveBeenCalledWith(400);
    expect(res.json).toHaveBeenCalledWith({
      success: false,
      error: {
        code: 'VALIDATION_ERROR',
        message: 'Invalid input data',
        details: [{
          field: 'email',
          message: 'Invalid email',
          location: 'body'
        }]
      }
    });
  });
});

// Test for specific route error patterns
describe('Route Error Patterns', () => {
  it('should handle auth route errors consistently', () => {
    const error = formatError('INVALID_CREDENTIALS', 'Invalid email or password');
    expect(error).toMatchObject({
      success: false,
      error: {
        code: 'INVALID_CREDENTIALS',
        message: 'Invalid email or password'
      }
    });
  });
  it('should handle product route errors consistently', () => {
    const error = formatError('PRODUCT_NOT_FOUND', 'Product not found');
    expect(error).toMatchObject({
      success: false,
      error: {
        code: 'PRODUCT_NOT_FOUND',
        message: 'Product not found'
      }
    });
  });
  it('should handle cart route errors consistently', () => {
    const error = formatError('MAX_QUANTITY_EXCEEDED', 'Cannot exceed maximum quantity of 99');
    expect(error).toMatchObject({
      success: false,
      error: {
        code: 'MAX_QUANTITY_EXCEEDED',
        message: 'Cannot exceed maximum quantity of 99'
      }
    });
  });
  it('should handle payment webhook errors with plain text', () => {
    // Webhooks often need plain text responses
    const {
      webhookError
    } = require('../utils/errorHandler');
    const res = {
      status: jest.fn().mockReturnThis(),
      send: jest.fn()
    };
    webhookError(res, 400, 'Payment ID is required');
    expect(res.status).toHaveBeenCalledWith(400);
    expect(res.send).toHaveBeenCalledWith('Payment ID is required');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0IiwiZXhwZWN0IiwiYmVmb3JlRWFjaCIsInJlcXVpcmUiLCJmb3JtYXRFcnJvciIsImNyZWF0ZVZhbGlkYXRpb25FcnJvciIsIkVycm9yQ29kZXMiLCJyZXN1bHQiLCJ0b0VxdWFsIiwic3VjY2VzcyIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJmaWVsZCIsImRldGFpbHMiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiYXJyYXkiLCJtc2ciLCJwYXJhbSIsImxvY2F0aW9uIiwiVkFMSURBVElPTl9FUlJPUiIsInRvQmUiLCJOT1RfRk9VTkQiLCJVTkFVVEhPUklaRUQiLCJGT1JCSURERU4iLCJJTlRFUk5BTF9FUlJPUiIsIklOVkFMSURfQ1JFREVOVElBTFMiLCJVU0VSX0VYSVNUUyIsIlRPS0VOX0lOVkFMSUQiLCJUT0tFTl9FWFBJUkVEIiwiUFJPRFVDVF9OT1RfRk9VTkQiLCJJTlZBTElEX1BST0RVQ1RfSUQiLCJQUk9EVUNUU19GRVRDSF9FUlJPUiIsIkNBUlRfQUREX0VSUk9SIiwiQ0FSVF9VUERBVEVfRVJST1IiLCJJVEVNX05PVF9GT1VORCIsIk1BWF9RVUFOVElUWV9FWENFRURFRCIsIk9SREVSX05PVF9GT1VORCIsIk9SREVSX0NSRUFURV9FUlJPUiIsIklOVkFMSURfT1JERVJfU1RBVFVTIiwiUEFZTUVOVF9GQUlMRUQiLCJQQVlNRU5UX01FVEhPRF9JTlZBTElEIiwiSU5TVUZGSUNJRU5UX0ZVTkRTIiwibW9ja0kxOG4iLCJrZXkiLCJ0cmFuc2xhdGlvbnMiLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVycyIsInN0YXR1cyIsImplc3QiLCJmbiIsIm1vY2tSZXR1cm5UaGlzIiwianNvbiIsImVycm9yUmVzcG9uc2UiLCJ2YWxpZGF0aW9uRXJyb3IiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ0b01hdGNoT2JqZWN0Iiwid2ViaG9va0Vycm9yIiwic2VuZCJdLCJzb3VyY2VzIjpbImVycm9ySGFuZGxlci50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2ggfSA9IHJlcXVpcmUoJ0BqZXN0L2dsb2JhbHMnKTtcbmNvbnN0IHsgZm9ybWF0RXJyb3IsIGNyZWF0ZVZhbGlkYXRpb25FcnJvciwgRXJyb3JDb2RlcyB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZXJyb3JIYW5kbGVyJyk7XG5cbmRlc2NyaWJlKCdFcnJvciBIYW5kbGVyIFV0aWxpdGllcycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2Zvcm1hdEVycm9yJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZm9ybWF0IGVycm9yIHdpdGggY29kZSBhbmQgbWVzc2FnZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdEVycm9yKCdVU0VSX05PVF9GT1VORCcsICdVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1VTRVJfTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIGZpZWxkIHdoZW4gcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBmb3JtYXRFcnJvcignSU5WQUxJRF9FTUFJTCcsICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcsICdlbWFpbCcpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ0lOVkFMSURfRU1BSUwnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCcsXG4gICAgICAgICAgZmllbGQ6ICdlbWFpbCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhZGRpdGlvbmFsIGRhdGEnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBmb3JtYXRFcnJvcignVkFMSURBVElPTl9FUlJPUicsICdWYWxpZGF0aW9uIGZhaWxlZCcsIG51bGwsIHtcbiAgICAgICAgZGV0YWlsczogW3sgZmllbGQ6ICdlbWFpbCcsIG1lc3NhZ2U6ICdSZXF1aXJlZCcgfV1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdWYWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgZGV0YWlsczogW3sgZmllbGQ6ICdlbWFpbCcsIG1lc3NhZ2U6ICdSZXF1aXJlZCcgfV1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmVhdGVWYWxpZGF0aW9uRXJyb3InLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBmb3JtYXQgZXhwcmVzcy12YWxpZGF0b3IgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IHtcbiAgICAgICAgYXJyYXk6ICgpID0+IFtcbiAgICAgICAgICB7IG1zZzogJ0ludmFsaWQgZW1haWwnLCBwYXJhbTogJ2VtYWlsJywgbG9jYXRpb246ICdib2R5JyB9LFxuICAgICAgICAgIHsgbXNnOiAnUGFzc3dvcmQgdG9vIHNob3J0JywgcGFyYW06ICdwYXNzd29yZCcsIGxvY2F0aW9uOiAnYm9keScgfVxuICAgICAgICBdXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjcmVhdGVWYWxpZGF0aW9uRXJyb3IodmFsaWRhdGlvbkVycm9ycyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZGF0YScsXG4gICAgICAgICAgZGV0YWlsczogW1xuICAgICAgICAgICAgeyBmaWVsZDogJ2VtYWlsJywgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwnLCBsb2NhdGlvbjogJ2JvZHknIH0sXG4gICAgICAgICAgICB7IGZpZWxkOiAncGFzc3dvcmQnLCBtZXNzYWdlOiAnUGFzc3dvcmQgdG9vIHNob3J0JywgbG9jYXRpb246ICdib2R5JyB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHZhbGlkYXRpb24gZXJyb3JzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IHtcbiAgICAgICAgYXJyYXk6ICgpID0+IFtdXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjcmVhdGVWYWxpZGF0aW9uRXJyb3IodmFsaWRhdGlvbkVycm9ycyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZGF0YScsXG4gICAgICAgICAgZGV0YWlsczogW11cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvckNvZGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29udGFpbiBjb21tb24gZXJyb3IgY29kZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5WQUxJREFUSU9OX0VSUk9SKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5OT1RfRk9VTkQpLnRvQmUoJ05PVF9GT1VORCcpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuVU5BVVRIT1JJWkVEKS50b0JlKCdVTkFVVEhPUklaRUQnKTtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLkZPUkJJRERFTikudG9CZSgnRk9SQklEREVOJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5JTlRFUk5BTF9FUlJPUikudG9CZSgnSU5URVJOQUxfRVJST1InKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY29udGFpbiBhdXRoZW50aWNhdGlvbiBlcnJvciBjb2RlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLklOVkFMSURfQ1JFREVOVElBTFMpLnRvQmUoJ0lOVkFMSURfQ1JFREVOVElBTFMnKTtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLlVTRVJfRVhJU1RTKS50b0JlKCdVU0VSX0VYSVNUUycpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuVE9LRU5fSU5WQUxJRCkudG9CZSgnVE9LRU5fSU5WQUxJRCcpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuVE9LRU5fRVhQSVJFRCkudG9CZSgnVE9LRU5fRVhQSVJFRCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb250YWluIHByb2R1Y3QgZXJyb3IgY29kZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5QUk9EVUNUX05PVF9GT1VORCkudG9CZSgnUFJPRFVDVF9OT1RfRk9VTkQnKTtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLklOVkFMSURfUFJPRFVDVF9JRCkudG9CZSgnSU5WQUxJRF9QUk9EVUNUX0lEJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5QUk9EVUNUU19GRVRDSF9FUlJPUikudG9CZSgnUFJPRFVDVFNfRkVUQ0hfRVJST1InKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY29udGFpbiBjYXJ0IGVycm9yIGNvZGVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuQ0FSVF9BRERfRVJST1IpLnRvQmUoJ0NBUlRfQUREX0VSUk9SJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5DQVJUX1VQREFURV9FUlJPUikudG9CZSgnQ0FSVF9VUERBVEVfRVJST1InKTtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLklURU1fTk9UX0ZPVU5EKS50b0JlKCdJVEVNX05PVF9GT1VORCcpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuTUFYX1FVQU5USVRZX0VYQ0VFREVEKS50b0JlKCdNQVhfUVVBTlRJVFlfRVhDRUVERUQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY29udGFpbiBvcmRlciBlcnJvciBjb2RlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLk9SREVSX05PVF9GT1VORCkudG9CZSgnT1JERVJfTk9UX0ZPVU5EJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5PUkRFUl9DUkVBVEVfRVJST1IpLnRvQmUoJ09SREVSX0NSRUFURV9FUlJPUicpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuSU5WQUxJRF9PUkRFUl9TVEFUVVMpLnRvQmUoJ0lOVkFMSURfT1JERVJfU1RBVFVTJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNvbnRhaW4gcGF5bWVudCBlcnJvciBjb2RlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLlBBWU1FTlRfRkFJTEVEKS50b0JlKCdQQVlNRU5UX0ZBSUxFRCcpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuUEFZTUVOVF9NRVRIT0RfSU5WQUxJRCkudG9CZSgnUEFZTUVOVF9NRVRIT0RfSU5WQUxJRCcpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuSU5TVUZGSUNJRU5UX0ZVTkRTKS50b0JlKCdJTlNVRkZJQ0lFTlRfRlVORFMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2kxOG4gc3VwcG9ydCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVzZSBpMThuIGtleSB3aGVuIGF2YWlsYWJsZScsICgpID0+IHtcbiAgICAgIC8vIE1vY2sgaTE4biBmdW5jdGlvblxuICAgICAgY29uc3QgbW9ja0kxOG4gPSAoa2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcbiAgICAgICAgICAnZXJyb3JzLlVTRVJfTk9UX0ZPVU5EJzogJ1VzZXIgbm90IGZvdW5kJyxcbiAgICAgICAgICAnZXJyb3JzLklOVkFMSURfRU1BSUwnOiAnSW52YWxpZCBlbWFpbCBmb3JtYXQnXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0cmFuc2xhdGlvbnNba2V5XSB8fCBrZXk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBmb3JtYXRFcnJvcignVVNFUl9OT1RfRk9VTkQnLCAnVXNlciBub3QgZm91bmQnLCBudWxsLCBudWxsLCBtb2NrSTE4bik7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLnRvQmUoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZhbGxiYWNrIHRvIHByb3ZpZGVkIG1lc3NhZ2Ugd2hlbiBpMThuIGtleSBub3QgZm91bmQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrSTE4biA9IChrZXkpID0+IGtleTsgLy8gUmV0dXJuIGtleSB3aGVuIG5vdCBmb3VuZFxuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBmb3JtYXRFcnJvcignQ1VTVE9NX0VSUk9SJywgJ0N1c3RvbSBlcnJvciBtZXNzYWdlJywgbnVsbCwgbnVsbCwgbW9ja0kxOG4pO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvci5tZXNzYWdlKS50b0JlKCdDdXN0b20gZXJyb3IgbWVzc2FnZScpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnRXJyb3IgUmVzcG9uc2UgTWlkZGxld2FyZScsICgpID0+IHtcbiAgbGV0IHJlcSwgcmVzLCBuZXh0O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHJlcSA9IHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ3gtbG9jYWxlJzogJ2VuJ1xuICAgICAgfVxuICAgIH07XG4gICAgcmVzID0ge1xuICAgICAgc3RhdHVzOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGpzb246IGplc3QuZm4oKVxuICAgIH07XG4gICAgbmV4dCA9IGplc3QuZm4oKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBhZGQgZXJyb3IgaGVscGVyIG1ldGhvZHMgdG8gcmVzcG9uc2Ugb2JqZWN0JywgKCkgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3JSZXNwb25zZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZXJyb3JIYW5kbGVyJyk7XG4gICAgXG4gICAgZXJyb3JSZXNwb25zZShyZXEsIHJlcywgbmV4dCk7XG4gICAgXG4gICAgZXhwZWN0KHR5cGVvZiByZXMuZXJyb3IpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgZXhwZWN0KHR5cGVvZiByZXMudmFsaWRhdGlvbkVycm9yKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIGV4cGVjdChuZXh0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgc2VuZCBmb3JtYXR0ZWQgZXJyb3Igd2l0aCBzdGF0dXMgY29kZScsICgpID0+IHtcbiAgICBjb25zdCB7IGVycm9yUmVzcG9uc2UgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL2Vycm9ySGFuZGxlcicpO1xuICAgIFxuICAgIGVycm9yUmVzcG9uc2UocmVxLCByZXMsIG5leHQpO1xuICAgIHJlcy5lcnJvcig0MDQsICdVU0VSX05PVF9GT1VORCcsICdVc2VyIG5vdCBmb3VuZCcpO1xuICAgIFxuICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDQpO1xuICAgIGV4cGVjdChyZXMuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnVVNFUl9OT1RfRk9VTkQnLFxuICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIHZhbGlkYXRpb24gZXJyb3JzJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3JSZXNwb25zZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZXJyb3JIYW5kbGVyJyk7XG4gICAgXG4gICAgZXJyb3JSZXNwb25zZShyZXEsIHJlcywgbmV4dCk7XG4gICAgXG4gICAgY29uc3QgdmFsaWRhdGlvbkVycm9ycyA9IHtcbiAgICAgIGFycmF5OiAoKSA9PiBbXG4gICAgICAgIHsgbXNnOiAnSW52YWxpZCBlbWFpbCcsIHBhcmFtOiAnZW1haWwnLCBsb2NhdGlvbjogJ2JvZHknIH1cbiAgICAgIF1cbiAgICB9O1xuICAgIFxuICAgIHJlcy52YWxpZGF0aW9uRXJyb3IodmFsaWRhdGlvbkVycm9ycyk7XG4gICAgXG4gICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMCk7XG4gICAgZXhwZWN0KHJlcy5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZGF0YScsXG4gICAgICAgIGRldGFpbHM6IFtcbiAgICAgICAgICB7IGZpZWxkOiAnZW1haWwnLCBtZXNzYWdlOiAnSW52YWxpZCBlbWFpbCcsIGxvY2F0aW9uOiAnYm9keScgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbi8vIFRlc3QgZm9yIHNwZWNpZmljIHJvdXRlIGVycm9yIHBhdHRlcm5zXG5kZXNjcmliZSgnUm91dGUgRXJyb3IgUGF0dGVybnMnLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgaGFuZGxlIGF1dGggcm91dGUgZXJyb3JzIGNvbnNpc3RlbnRseScsICgpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IGZvcm1hdEVycm9yKCdJTlZBTElEX0NSRURFTlRJQUxTJywgJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnKTtcbiAgICBleHBlY3QoZXJyb3IpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnSU5WQUxJRF9DUkVERU5USUFMUycsXG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJ1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhbmRsZSBwcm9kdWN0IHJvdXRlIGVycm9ycyBjb25zaXN0ZW50bHknLCAoKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBmb3JtYXRFcnJvcignUFJPRFVDVF9OT1RfRk9VTkQnLCAnUHJvZHVjdCBub3QgZm91bmQnKTtcbiAgICBleHBlY3QoZXJyb3IpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnUFJPRFVDVF9OT1RfRk9VTkQnLFxuICAgICAgICBtZXNzYWdlOiAnUHJvZHVjdCBub3QgZm91bmQnXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIGNhcnQgcm91dGUgZXJyb3JzIGNvbnNpc3RlbnRseScsICgpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IGZvcm1hdEVycm9yKCdNQVhfUVVBTlRJVFlfRVhDRUVERUQnLCAnQ2Fubm90IGV4Y2VlZCBtYXhpbXVtIHF1YW50aXR5IG9mIDk5Jyk7XG4gICAgZXhwZWN0KGVycm9yKS50b01hdGNoT2JqZWN0KHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ01BWF9RVUFOVElUWV9FWENFRURFRCcsXG4gICAgICAgIG1lc3NhZ2U6ICdDYW5ub3QgZXhjZWVkIG1heGltdW0gcXVhbnRpdHkgb2YgOTknXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIHBheW1lbnQgd2ViaG9vayBlcnJvcnMgd2l0aCBwbGFpbiB0ZXh0JywgKCkgPT4ge1xuICAgIC8vIFdlYmhvb2tzIG9mdGVuIG5lZWQgcGxhaW4gdGV4dCByZXNwb25zZXNcbiAgICBjb25zdCB7IHdlYmhvb2tFcnJvciB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZXJyb3JIYW5kbGVyJyk7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgc3RhdHVzOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIHNlbmQ6IGplc3QuZm4oKVxuICAgIH07XG4gICAgXG4gICAgd2ViaG9va0Vycm9yKHJlcywgNDAwLCAnUGF5bWVudCBJRCBpcyByZXF1aXJlZCcpO1xuICAgIFxuICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDApO1xuICAgIGV4cGVjdChyZXMuc2VuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1BheW1lbnQgSUQgaXMgcmVxdWlyZWQnKTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU07RUFBRUEsUUFBUTtFQUFFQyxFQUFFO0VBQUVDLE1BQU07RUFBRUM7QUFBVyxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDckUsTUFBTTtFQUFFQyxXQUFXO0VBQUVDLHFCQUFxQjtFQUFFQztBQUFXLENBQUMsR0FBR0gsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBRTNGSixRQUFRLENBQUMseUJBQXlCLEVBQUUsTUFBTTtFQUN4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