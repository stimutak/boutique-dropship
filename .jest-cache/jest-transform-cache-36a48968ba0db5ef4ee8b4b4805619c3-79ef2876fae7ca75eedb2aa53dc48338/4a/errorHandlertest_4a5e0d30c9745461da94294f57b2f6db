60396929b1142128c679c10c808d7d13
const {
  describe,
  it,
  expect,
  beforeEach
} = require('@jest/globals');
const {
  formatError,
  createValidationError,
  ErrorCodes
} = require('../utils/errorHandler');
describe('Error Handler Utilities', () => {
  describe('formatError', () => {
    it('should format error with code and message', () => {
      const result = formatError('USER_NOT_FOUND', 'User not found');
      expect(result).toEqual({
        success: false,
        error: {
          code: 'USER_NOT_FOUND',
          message: 'User not found'
        }
      });
    });
    it('should include field when provided', () => {
      const result = formatError('INVALID_EMAIL', 'Invalid email format', 'email');
      expect(result).toEqual({
        success: false,
        error: {
          code: 'INVALID_EMAIL',
          message: 'Invalid email format',
          field: 'email'
        }
      });
    });
    it('should handle additional data', () => {
      const result = formatError('VALIDATION_ERROR', 'Validation failed', null, {
        details: [{
          field: 'email',
          message: 'Required'
        }]
      });
      expect(result).toEqual({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Validation failed',
          details: [{
            field: 'email',
            message: 'Required'
          }]
        }
      });
    });
  });
  describe('createValidationError', () => {
    it('should format express-validator errors', () => {
      const validationErrors = {
        array: () => [{
          msg: 'Invalid email',
          param: 'email',
          location: 'body'
        }, {
          msg: 'Password too short',
          param: 'password',
          location: 'body'
        }]
      };
      const result = createValidationError(validationErrors);
      expect(result).toEqual({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: [{
            field: 'email',
            message: 'Invalid email',
            location: 'body'
          }, {
            field: 'password',
            message: 'Password too short',
            location: 'body'
          }]
        }
      });
    });
    it('should handle empty validation errors', () => {
      const validationErrors = {
        array: () => []
      };
      const result = createValidationError(validationErrors);
      expect(result).toEqual({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: []
        }
      });
    });
  });
  describe('ErrorCodes', () => {
    it('should contain common error codes', () => {
      expect(ErrorCodes.VALIDATION_ERROR).toBe('VALIDATION_ERROR');
      expect(ErrorCodes.NOT_FOUND).toBe('NOT_FOUND');
      expect(ErrorCodes.UNAUTHORIZED).toBe('UNAUTHORIZED');
      expect(ErrorCodes.FORBIDDEN).toBe('FORBIDDEN');
      expect(ErrorCodes.INTERNAL_ERROR).toBe('INTERNAL_ERROR');
    });
    it('should contain authentication error codes', () => {
      expect(ErrorCodes.INVALID_CREDENTIALS).toBe('INVALID_CREDENTIALS');
      expect(ErrorCodes.USER_EXISTS).toBe('USER_EXISTS');
      expect(ErrorCodes.TOKEN_INVALID).toBe('TOKEN_INVALID');
      expect(ErrorCodes.TOKEN_EXPIRED).toBe('TOKEN_EXPIRED');
    });
    it('should contain product error codes', () => {
      expect(ErrorCodes.PRODUCT_NOT_FOUND).toBe('PRODUCT_NOT_FOUND');
      expect(ErrorCodes.INVALID_PRODUCT_ID).toBe('INVALID_PRODUCT_ID');
      expect(ErrorCodes.PRODUCTS_FETCH_ERROR).toBe('PRODUCTS_FETCH_ERROR');
    });
    it('should contain cart error codes', () => {
      expect(ErrorCodes.CART_ADD_ERROR).toBe('CART_ADD_ERROR');
      expect(ErrorCodes.CART_UPDATE_ERROR).toBe('CART_UPDATE_ERROR');
      expect(ErrorCodes.ITEM_NOT_FOUND).toBe('ITEM_NOT_FOUND');
      expect(ErrorCodes.MAX_QUANTITY_EXCEEDED).toBe('MAX_QUANTITY_EXCEEDED');
    });
    it('should contain order error codes', () => {
      expect(ErrorCodes.ORDER_NOT_FOUND).toBe('ORDER_NOT_FOUND');
      expect(ErrorCodes.ORDER_CREATE_ERROR).toBe('ORDER_CREATE_ERROR');
      expect(ErrorCodes.INVALID_ORDER_STATUS).toBe('INVALID_ORDER_STATUS');
    });
    it('should contain payment error codes', () => {
      expect(ErrorCodes.PAYMENT_FAILED).toBe('PAYMENT_FAILED');
      expect(ErrorCodes.PAYMENT_METHOD_INVALID).toBe('PAYMENT_METHOD_INVALID');
      expect(ErrorCodes.INSUFFICIENT_FUNDS).toBe('INSUFFICIENT_FUNDS');
    });
  });
  describe('i18n support', () => {
    it('should use i18n key when available', () => {
      // Mock i18n function that matches the actual signature
      const mockI18n = (code, defaultMessage) => {
        const translations = {
          'USER_NOT_FOUND': 'User not found',
          'INVALID_EMAIL': 'Invalid email format'
        };
        return translations[code] || defaultMessage || code;
      };
      const result = formatError('USER_NOT_FOUND', 'User not found', null, null, mockI18n);
      expect(result.error.message).toBe('User not found');
    });
    it('should fallback to provided message when i18n key not found', () => {
      const mockI18n = (code, defaultMessage) => defaultMessage || code; // Return default message when not found

      const result = formatError('CUSTOM_ERROR', 'Custom error message', null, null, mockI18n);
      expect(result.error.message).toBe('Custom error message');
    });
  });
});
describe('Error Response Middleware', () => {
  let req, res, next;
  beforeEach(() => {
    req = {
      headers: {
        'x-locale': 'en'
      }
    };
    res = {
      status: jest.fn().mockReturnThis(),
      json: jest.fn()
    };
    next = jest.fn();
  });
  it('should add error helper methods to response object', () => {
    const {
      errorResponse
    } = require('../utils/errorHandler');
    errorResponse(req, res, next);
    expect(typeof res.error).toBe('function');
    expect(typeof res.validationError).toBe('function');
    expect(next).toHaveBeenCalled();
  });
  it('should send formatted error with status code', () => {
    const {
      errorResponse
    } = require('../utils/errorHandler');
    errorResponse(req, res, next);
    res.error(404, 'USER_NOT_FOUND', 'User not found');
    expect(res.status).toHaveBeenCalledWith(404);
    expect(res.json).toHaveBeenCalledWith({
      success: false,
      error: {
        code: 'USER_NOT_FOUND',
        message: 'User not found'
      }
    });
  });
  it('should handle validation errors', () => {
    const {
      errorResponse
    } = require('../utils/errorHandler');
    errorResponse(req, res, next);
    const validationErrors = {
      array: () => [{
        msg: 'Invalid email',
        param: 'email',
        location: 'body'
      }]
    };
    res.validationError(validationErrors);
    expect(res.status).toHaveBeenCalledWith(400);
    expect(res.json).toHaveBeenCalledWith({
      success: false,
      error: {
        code: 'VALIDATION_ERROR',
        message: 'Invalid input data',
        details: [{
          field: 'email',
          message: 'Invalid email',
          location: 'body'
        }]
      }
    });
  });
});

// Test for specific route error patterns
describe('Route Error Patterns', () => {
  it('should handle auth route errors consistently', () => {
    const error = formatError('INVALID_CREDENTIALS', 'Invalid email or password');
    expect(error).toMatchObject({
      success: false,
      error: {
        code: 'INVALID_CREDENTIALS',
        message: 'Invalid email or password'
      }
    });
  });
  it('should handle product route errors consistently', () => {
    const error = formatError('PRODUCT_NOT_FOUND', 'Product not found');
    expect(error).toMatchObject({
      success: false,
      error: {
        code: 'PRODUCT_NOT_FOUND',
        message: 'Product not found'
      }
    });
  });
  it('should handle cart route errors consistently', () => {
    const error = formatError('MAX_QUANTITY_EXCEEDED', 'Cannot exceed maximum quantity of 99');
    expect(error).toMatchObject({
      success: false,
      error: {
        code: 'MAX_QUANTITY_EXCEEDED',
        message: 'Cannot exceed maximum quantity of 99'
      }
    });
  });
  it('should handle payment webhook errors with plain text', () => {
    // Webhooks often need plain text responses
    const {
      webhookError
    } = require('../utils/errorHandler');
    const res = {
      status: jest.fn().mockReturnThis(),
      send: jest.fn()
    };
    webhookError(res, 400, 'Payment ID is required');
    expect(res.status).toHaveBeenCalledWith(400);
    expect(res.send).toHaveBeenCalledWith('Payment ID is required');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0IiwiZXhwZWN0IiwiYmVmb3JlRWFjaCIsInJlcXVpcmUiLCJmb3JtYXRFcnJvciIsImNyZWF0ZVZhbGlkYXRpb25FcnJvciIsIkVycm9yQ29kZXMiLCJyZXN1bHQiLCJ0b0VxdWFsIiwic3VjY2VzcyIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJmaWVsZCIsImRldGFpbHMiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiYXJyYXkiLCJtc2ciLCJwYXJhbSIsImxvY2F0aW9uIiwiVkFMSURBVElPTl9FUlJPUiIsInRvQmUiLCJOT1RfRk9VTkQiLCJVTkFVVEhPUklaRUQiLCJGT1JCSURERU4iLCJJTlRFUk5BTF9FUlJPUiIsIklOVkFMSURfQ1JFREVOVElBTFMiLCJVU0VSX0VYSVNUUyIsIlRPS0VOX0lOVkFMSUQiLCJUT0tFTl9FWFBJUkVEIiwiUFJPRFVDVF9OT1RfRk9VTkQiLCJJTlZBTElEX1BST0RVQ1RfSUQiLCJQUk9EVUNUU19GRVRDSF9FUlJPUiIsIkNBUlRfQUREX0VSUk9SIiwiQ0FSVF9VUERBVEVfRVJST1IiLCJJVEVNX05PVF9GT1VORCIsIk1BWF9RVUFOVElUWV9FWENFRURFRCIsIk9SREVSX05PVF9GT1VORCIsIk9SREVSX0NSRUFURV9FUlJPUiIsIklOVkFMSURfT1JERVJfU1RBVFVTIiwiUEFZTUVOVF9GQUlMRUQiLCJQQVlNRU5UX01FVEhPRF9JTlZBTElEIiwiSU5TVUZGSUNJRU5UX0ZVTkRTIiwibW9ja0kxOG4iLCJkZWZhdWx0TWVzc2FnZSIsInRyYW5zbGF0aW9ucyIsInJlcSIsInJlcyIsIm5leHQiLCJoZWFkZXJzIiwic3RhdHVzIiwiamVzdCIsImZuIiwibW9ja1JldHVyblRoaXMiLCJqc29uIiwiZXJyb3JSZXNwb25zZSIsInZhbGlkYXRpb25FcnJvciIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInRvTWF0Y2hPYmplY3QiLCJ3ZWJob29rRXJyb3IiLCJzZW5kIl0sInNvdXJjZXMiOlsiZXJyb3JIYW5kbGVyLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCB9ID0gcmVxdWlyZSgnQGplc3QvZ2xvYmFscycpO1xuY29uc3QgeyBmb3JtYXRFcnJvciwgY3JlYXRlVmFsaWRhdGlvbkVycm9yLCBFcnJvckNvZGVzIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvckhhbmRsZXInKTtcblxuZGVzY3JpYmUoJ0Vycm9yIEhhbmRsZXIgVXRpbGl0aWVzJywgKCkgPT4ge1xuICBkZXNjcmliZSgnZm9ybWF0RXJyb3InLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBmb3JtYXQgZXJyb3Igd2l0aCBjb2RlIGFuZCBtZXNzYWdlJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZm9ybWF0RXJyb3IoJ1VTRVJfTk9UX0ZPVU5EJywgJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVVNFUl9OT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgZmllbGQgd2hlbiBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdEVycm9yKCdJTlZBTElEX0VNQUlMJywgJ0ludmFsaWQgZW1haWwgZm9ybWF0JywgJ2VtYWlsJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9FTUFJTCcsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwgZm9ybWF0JyxcbiAgICAgICAgICBmaWVsZDogJ2VtYWlsJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFkZGl0aW9uYWwgZGF0YScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdEVycm9yKCdWQUxJREFUSU9OX0VSUk9SJywgJ1ZhbGlkYXRpb24gZmFpbGVkJywgbnVsbCwge1xuICAgICAgICBkZXRhaWxzOiBbeyBmaWVsZDogJ2VtYWlsJywgbWVzc2FnZTogJ1JlcXVpcmVkJyB9XVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ1ZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICBkZXRhaWxzOiBbeyBmaWVsZDogJ2VtYWlsJywgbWVzc2FnZTogJ1JlcXVpcmVkJyB9XVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NyZWF0ZVZhbGlkYXRpb25FcnJvcicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZvcm1hdCBleHByZXNzLXZhbGlkYXRvciBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0ge1xuICAgICAgICBhcnJheTogKCkgPT4gW1xuICAgICAgICAgIHsgbXNnOiAnSW52YWxpZCBlbWFpbCcsIHBhcmFtOiAnZW1haWwnLCBsb2NhdGlvbjogJ2JvZHknIH0sXG4gICAgICAgICAgeyBtc2c6ICdQYXNzd29yZCB0b28gc2hvcnQnLCBwYXJhbTogJ3Bhc3N3b3JkJywgbG9jYXRpb246ICdib2R5JyB9XG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNyZWF0ZVZhbGlkYXRpb25FcnJvcih2YWxpZGF0aW9uRXJyb3JzKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBkYXRhJyxcbiAgICAgICAgICBkZXRhaWxzOiBbXG4gICAgICAgICAgICB7IGZpZWxkOiAnZW1haWwnLCBtZXNzYWdlOiAnSW52YWxpZCBlbWFpbCcsIGxvY2F0aW9uOiAnYm9keScgfSxcbiAgICAgICAgICAgIHsgZmllbGQ6ICdwYXNzd29yZCcsIG1lc3NhZ2U6ICdQYXNzd29yZCB0b28gc2hvcnQnLCBsb2NhdGlvbjogJ2JvZHknIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgdmFsaWRhdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0ge1xuICAgICAgICBhcnJheTogKCkgPT4gW11cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNyZWF0ZVZhbGlkYXRpb25FcnJvcih2YWxpZGF0aW9uRXJyb3JzKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBkYXRhJyxcbiAgICAgICAgICBkZXRhaWxzOiBbXVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yQ29kZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjb250YWluIGNvbW1vbiBlcnJvciBjb2RlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLlZBTElEQVRJT05fRVJST1IpLnRvQmUoJ1ZBTElEQVRJT05fRVJST1InKTtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLk5PVF9GT1VORCkudG9CZSgnTk9UX0ZPVU5EJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5VTkFVVEhPUklaRUQpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuRk9SQklEREVOKS50b0JlKCdGT1JCSURERU4nKTtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLklOVEVSTkFMX0VSUk9SKS50b0JlKCdJTlRFUk5BTF9FUlJPUicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb250YWluIGF1dGhlbnRpY2F0aW9uIGVycm9yIGNvZGVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuSU5WQUxJRF9DUkVERU5USUFMUykudG9CZSgnSU5WQUxJRF9DUkVERU5USUFMUycpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuVVNFUl9FWElTVFMpLnRvQmUoJ1VTRVJfRVhJU1RTJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5UT0tFTl9JTlZBTElEKS50b0JlKCdUT0tFTl9JTlZBTElEJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5UT0tFTl9FWFBJUkVEKS50b0JlKCdUT0tFTl9FWFBJUkVEJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNvbnRhaW4gcHJvZHVjdCBlcnJvciBjb2RlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLlBST0RVQ1RfTk9UX0ZPVU5EKS50b0JlKCdQUk9EVUNUX05PVF9GT1VORCcpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuSU5WQUxJRF9QUk9EVUNUX0lEKS50b0JlKCdJTlZBTElEX1BST0RVQ1RfSUQnKTtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLlBST0RVQ1RTX0ZFVENIX0VSUk9SKS50b0JlKCdQUk9EVUNUU19GRVRDSF9FUlJPUicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb250YWluIGNhcnQgZXJyb3IgY29kZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5DQVJUX0FERF9FUlJPUikudG9CZSgnQ0FSVF9BRERfRVJST1InKTtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLkNBUlRfVVBEQVRFX0VSUk9SKS50b0JlKCdDQVJUX1VQREFURV9FUlJPUicpO1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuSVRFTV9OT1RfRk9VTkQpLnRvQmUoJ0lURU1fTk9UX0ZPVU5EJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5NQVhfUVVBTlRJVFlfRVhDRUVERUQpLnRvQmUoJ01BWF9RVUFOVElUWV9FWENFRURFRCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb250YWluIG9yZGVyIGVycm9yIGNvZGVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuT1JERVJfTk9UX0ZPVU5EKS50b0JlKCdPUkRFUl9OT1RfRk9VTkQnKTtcbiAgICAgIGV4cGVjdChFcnJvckNvZGVzLk9SREVSX0NSRUFURV9FUlJPUikudG9CZSgnT1JERVJfQ1JFQVRFX0VSUk9SJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5JTlZBTElEX09SREVSX1NUQVRVUykudG9CZSgnSU5WQUxJRF9PUkRFUl9TVEFUVVMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY29udGFpbiBwYXltZW50IGVycm9yIGNvZGVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVycm9yQ29kZXMuUEFZTUVOVF9GQUlMRUQpLnRvQmUoJ1BBWU1FTlRfRkFJTEVEJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5QQVlNRU5UX01FVEhPRF9JTlZBTElEKS50b0JlKCdQQVlNRU5UX01FVEhPRF9JTlZBTElEJyk7XG4gICAgICBleHBlY3QoRXJyb3JDb2Rlcy5JTlNVRkZJQ0lFTlRfRlVORFMpLnRvQmUoJ0lOU1VGRklDSUVOVF9GVU5EUycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnaTE4biBzdXBwb3J0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXNlIGkxOG4ga2V5IHdoZW4gYXZhaWxhYmxlJywgKCkgPT4ge1xuICAgICAgLy8gTW9jayBpMThuIGZ1bmN0aW9uIHRoYXQgbWF0Y2hlcyB0aGUgYWN0dWFsIHNpZ25hdHVyZVxuICAgICAgY29uc3QgbW9ja0kxOG4gPSAoY29kZSwgZGVmYXVsdE1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb25zID0ge1xuICAgICAgICAgICdVU0VSX05PVF9GT1VORCc6ICdVc2VyIG5vdCBmb3VuZCcsXG4gICAgICAgICAgJ0lOVkFMSURfRU1BSUwnOiAnSW52YWxpZCBlbWFpbCBmb3JtYXQnXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0cmFuc2xhdGlvbnNbY29kZV0gfHwgZGVmYXVsdE1lc3NhZ2UgfHwgY29kZTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdEVycm9yKCdVU0VSX05PVF9GT1VORCcsICdVc2VyIG5vdCBmb3VuZCcsIG51bGwsIG51bGwsIG1vY2tJMThuKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IubWVzc2FnZSkudG9CZSgnVXNlciBub3QgZm91bmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZmFsbGJhY2sgdG8gcHJvdmlkZWQgbWVzc2FnZSB3aGVuIGkxOG4ga2V5IG5vdCBmb3VuZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tJMThuID0gKGNvZGUsIGRlZmF1bHRNZXNzYWdlKSA9PiBkZWZhdWx0TWVzc2FnZSB8fCBjb2RlOyAvLyBSZXR1cm4gZGVmYXVsdCBtZXNzYWdlIHdoZW4gbm90IGZvdW5kXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdEVycm9yKCdDVVNUT01fRVJST1InLCAnQ3VzdG9tIGVycm9yIG1lc3NhZ2UnLCBudWxsLCBudWxsLCBtb2NrSTE4bik7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yLm1lc3NhZ2UpLnRvQmUoJ0N1c3RvbSBlcnJvciBtZXNzYWdlJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdFcnJvciBSZXNwb25zZSBNaWRkbGV3YXJlJywgKCkgPT4ge1xuICBsZXQgcmVxLCByZXMsIG5leHQ7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgcmVxID0ge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICAneC1sb2NhbGUnOiAnZW4nXG4gICAgICB9XG4gICAgfTtcbiAgICByZXMgPSB7XG4gICAgICBzdGF0dXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAganNvbjogamVzdC5mbigpXG4gICAgfTtcbiAgICBuZXh0ID0gamVzdC5mbigpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGFkZCBlcnJvciBoZWxwZXIgbWV0aG9kcyB0byByZXNwb25zZSBvYmplY3QnLCAoKSA9PiB7XG4gICAgY29uc3QgeyBlcnJvclJlc3BvbnNlIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvckhhbmRsZXInKTtcbiAgICBcbiAgICBlcnJvclJlc3BvbnNlKHJlcSwgcmVzLCBuZXh0KTtcbiAgICBcbiAgICBleHBlY3QodHlwZW9mIHJlcy5lcnJvcikudG9CZSgnZnVuY3Rpb24nKTtcbiAgICBleHBlY3QodHlwZW9mIHJlcy52YWxpZGF0aW9uRXJyb3IpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgZXhwZWN0KG5leHQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBzZW5kIGZvcm1hdHRlZCBlcnJvciB3aXRoIHN0YXR1cyBjb2RlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgZXJyb3JSZXNwb25zZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZXJyb3JIYW5kbGVyJyk7XG4gICAgXG4gICAgZXJyb3JSZXNwb25zZShyZXEsIHJlcywgbmV4dCk7XG4gICAgcmVzLmVycm9yKDQwNCwgJ1VTRVJfTk9UX0ZPVU5EJywgJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgXG4gICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwNCk7XG4gICAgZXhwZWN0KHJlcy5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdVU0VSX05PVF9GT1VORCcsXG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIG5vdCBmb3VuZCdcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgdmFsaWRhdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgY29uc3QgeyBlcnJvclJlc3BvbnNlIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvckhhbmRsZXInKTtcbiAgICBcbiAgICBlcnJvclJlc3BvbnNlKHJlcSwgcmVzLCBuZXh0KTtcbiAgICBcbiAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0ge1xuICAgICAgYXJyYXk6ICgpID0+IFtcbiAgICAgICAgeyBtc2c6ICdJbnZhbGlkIGVtYWlsJywgcGFyYW06ICdlbWFpbCcsIGxvY2F0aW9uOiAnYm9keScgfVxuICAgICAgXVxuICAgIH07XG4gICAgXG4gICAgcmVzLnZhbGlkYXRpb25FcnJvcih2YWxpZGF0aW9uRXJyb3JzKTtcbiAgICBcbiAgICBleHBlY3QocmVzLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDAwKTtcbiAgICBleHBlY3QocmVzLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBkYXRhJyxcbiAgICAgICAgZGV0YWlsczogW1xuICAgICAgICAgIHsgZmllbGQ6ICdlbWFpbCcsIG1lc3NhZ2U6ICdJbnZhbGlkIGVtYWlsJywgbG9jYXRpb246ICdib2R5JyB9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KTtcblxuLy8gVGVzdCBmb3Igc3BlY2lmaWMgcm91dGUgZXJyb3IgcGF0dGVybnNcbmRlc2NyaWJlKCdSb3V0ZSBFcnJvciBQYXR0ZXJucycsICgpID0+IHtcbiAgaXQoJ3Nob3VsZCBoYW5kbGUgYXV0aCByb3V0ZSBlcnJvcnMgY29uc2lzdGVudGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gZm9ybWF0RXJyb3IoJ0lOVkFMSURfQ1JFREVOVElBTFMnLCAnSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCcpO1xuICAgIGV4cGVjdChlcnJvcikudG9NYXRjaE9iamVjdCh7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdJTlZBTElEX0NSRURFTlRJQUxTJyxcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIHByb2R1Y3Qgcm91dGUgZXJyb3JzIGNvbnNpc3RlbnRseScsICgpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IGZvcm1hdEVycm9yKCdQUk9EVUNUX05PVF9GT1VORCcsICdQcm9kdWN0IG5vdCBmb3VuZCcpO1xuICAgIGV4cGVjdChlcnJvcikudG9NYXRjaE9iamVjdCh7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IG5vdCBmb3VuZCdcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgY2FydCByb3V0ZSBlcnJvcnMgY29uc2lzdGVudGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gZm9ybWF0RXJyb3IoJ01BWF9RVUFOVElUWV9FWENFRURFRCcsICdDYW5ub3QgZXhjZWVkIG1heGltdW0gcXVhbnRpdHkgb2YgOTknKTtcbiAgICBleHBlY3QoZXJyb3IpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnTUFYX1FVQU5USVRZX0VYQ0VFREVEJyxcbiAgICAgICAgbWVzc2FnZTogJ0Nhbm5vdCBleGNlZWQgbWF4aW11bSBxdWFudGl0eSBvZiA5OSdcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgcGF5bWVudCB3ZWJob29rIGVycm9ycyB3aXRoIHBsYWluIHRleHQnLCAoKSA9PiB7XG4gICAgLy8gV2ViaG9va3Mgb2Z0ZW4gbmVlZCBwbGFpbiB0ZXh0IHJlc3BvbnNlc1xuICAgIGNvbnN0IHsgd2ViaG9va0Vycm9yIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvckhhbmRsZXInKTtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICBzdGF0dXM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgc2VuZDogamVzdC5mbigpXG4gICAgfTtcbiAgICBcbiAgICB3ZWJob29rRXJyb3IocmVzLCA0MDAsICdQYXltZW50IElEIGlzIHJlcXVpcmVkJyk7XG4gICAgXG4gICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMCk7XG4gICAgZXhwZWN0KHJlcy5zZW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnUGF5bWVudCBJRCBpcyByZXF1aXJlZCcpO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQSxRQUFRO0VBQUVDLEVBQUU7RUFBRUMsTUFBTTtFQUFFQztBQUFXLENBQUMsR0FBR0MsT0FBTyxDQUFDLGVBQWUsQ0FBQztB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