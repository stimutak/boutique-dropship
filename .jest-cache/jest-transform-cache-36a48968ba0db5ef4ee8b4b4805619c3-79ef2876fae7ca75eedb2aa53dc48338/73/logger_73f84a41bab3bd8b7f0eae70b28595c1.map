{"version":3,"names":["cov_bi2719ewd","actualCoverage","winston","s","require","path","levels","error","warn","info","http","debug","colors","addColors","format","combine","timestamp","colorize","all","printf","f","level","message","transports","Console","simple","File","filename","json","logger","createLogger","b","process","env","LOG_LEVEL","paymentLogger","label","wholesalerLogger","securityLogger","module","exports"],"sources":["logger.js"],"sourcesContent":["const winston = require('winston');\nconst path = require('path');\n\n// Define log levels\nconst levels = {\n  error: 0,\n  warn: 1,\n  info: 2,\n  http: 3,\n  debug: 4,\n};\n\n// Define colors for each level\nconst colors = {\n  error: 'red',\n  warn: 'yellow',\n  info: 'green',\n  http: 'magenta',\n  debug: 'white',\n};\n\n// Tell winston that you want to link the colors\nwinston.addColors(colors);\n\n// Define format for logs\nconst format = winston.format.combine(\n  winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss:ms' }),\n  winston.format.colorize({ all: true }),\n  winston.format.printf(\n    (info) => `${info.timestamp} ${info.level}: ${info.message}`,\n  ),\n);\n\n// Define which transports the logger must use\nconst transports = [\n  // Console transport\n  new winston.transports.Console({\n    format: winston.format.combine(\n      winston.format.colorize(),\n      winston.format.simple()\n    )\n  }),\n  // File transport for errors\n  new winston.transports.File({\n    filename: 'logs/error.log',\n    level: 'error',\n    format: winston.format.combine(\n      winston.format.timestamp(),\n      winston.format.json()\n    )\n  }),\n  // File transport for all logs\n  new winston.transports.File({\n    filename: 'logs/combined.log',\n    format: winston.format.combine(\n      winston.format.timestamp(),\n      winston.format.json()\n    )\n  }),\n];\n\n// Create the logger\nconst logger = winston.createLogger({\n  level: process.env.LOG_LEVEL || 'info',\n  levels,\n  format,\n  transports,\n});\n\n// Create specialized loggers for different contexts\nconst paymentLogger = winston.createLogger({\n  level: process.env.LOG_LEVEL || 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.label({ label: 'PAYMENT' }),\n    winston.format.json()\n  ),\n  transports: [\n    new winston.transports.File({\n      filename: 'logs/payment.log',\n    }),\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.simple()\n      )\n    })\n  ],\n});\n\nconst wholesalerLogger = winston.createLogger({\n  level: process.env.LOG_LEVEL || 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.label({ label: 'WHOLESALER' }),\n    winston.format.json()\n  ),\n  transports: [\n    new winston.transports.File({\n      filename: 'logs/wholesaler.log',\n    }),\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.simple()\n      )\n    })\n  ],\n});\n\nconst securityLogger = winston.createLogger({\n  level: process.env.LOG_LEVEL || 'info',\n  format: winston.format.combine(\n    winston.format.timestamp(),\n    winston.format.label({ label: 'SECURITY' }),\n    winston.format.json()\n  ),\n  transports: [\n    new winston.transports.File({\n      filename: 'logs/security.log',\n    }),\n    new winston.transports.Console({\n      format: winston.format.combine(\n        winston.format.colorize(),\n        winston.format.simple()\n      )\n    })\n  ],\n});\n\nmodule.exports = {\n  logger,\n  paymentLogger,\n  wholesalerLogger,\n  securityLogger\n};"],"mappings":"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","ignoreList":[]}