3c1bcc267c29145aeaa016fa40df00e4
const express = require('express');
const router = express.Router();
const Product = require('../models/Product');
const {
  authenticateToken,
  requireAuth
} = require('../middleware/auth');

// Middleware to initialize cart in session
const initializeCart = (req, res, next) => {
  if (!req.session.cart) {
    req.session.cart = [];
  }
  next();
};

// Get cart contents
router.get('/', authenticateToken, initializeCart, async (req, res) => {
  try {
    let cart = [];
    if (req.user) {
      // For authenticated users, get cart from user session or database
      cart = req.session.cart || [];
    } else {
      // For guests, get cart from session
      cart = req.session.cart || [];
    }

    // Populate product details for cart items
    const populatedCart = await Promise.all(cart.map(async item => {
      try {
        const product = await Product.findById(item.productId).select('-wholesaler');
        if (!product || !product.isActive) {
          return null; // Remove inactive products
        }
        return {
          _id: item._id || item.productId,
          product: product.toPublicJSON(),
          quantity: item.quantity,
          price: product.price,
          subtotal: product.price * item.quantity
        };
      } catch (error) {
        console.error('Error populating cart item:', error);
        return null;
      }
    }));

    // Filter out null items (inactive products)
    const validCart = populatedCart.filter(item => item !== null);

    // Update session cart to remove invalid items
    req.session.cart = validCart.map(item => ({
      productId: item.product._id,
      quantity: item.quantity
    }));

    // Calculate totals
    const subtotal = validCart.reduce((sum, item) => sum + item.subtotal, 0);
    const itemCount = validCart.reduce((sum, item) => sum + item.quantity, 0);
    res.json({
      success: true,
      items: validCart,
      totalItems: itemCount,
      totalPrice: Math.round(subtotal * 100) / 100,
      isEmpty: validCart.length === 0
    });
  } catch (error) {
    console.error('Error getting cart:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'CART_ERROR',
        message: 'Failed to retrieve cart contents'
      }
    });
  }
});

// Add item to cart
router.post('/add', authenticateToken, initializeCart, async (req, res) => {
  try {
    const {
      productId,
      quantity = 1
    } = req.body;
    if (!productId) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'MISSING_PRODUCT_ID',
          message: 'Product ID is required'
        }
      });
    }
    if (quantity < 1 || quantity > 99) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'INVALID_QUANTITY',
          message: 'Quantity must be between 1 and 99'
        }
      });
    }

    // Verify product exists and is active
    const product = await Product.findById(productId);
    if (!product || !product.isActive) {
      return res.status(404).json({
        success: false,
        error: {
          code: 'PRODUCT_NOT_FOUND',
          message: 'Product not found or unavailable'
        }
      });
    }

    // Check if item already exists in cart
    const existingItemIndex = req.session.cart.findIndex(item => item.productId.toString() === productId);
    if (existingItemIndex > -1) {
      // Update quantity of existing item
      const newQuantity = req.session.cart[existingItemIndex].quantity + parseInt(quantity);
      if (newQuantity > 99) {
        return res.status(400).json({
          success: false,
          error: {
            code: 'MAX_QUANTITY_EXCEEDED',
            message: 'Maximum quantity per item is 99'
          }
        });
      }
      req.session.cart[existingItemIndex].quantity = newQuantity;
    } else {
      // Add new item to cart
      req.session.cart.push({
        productId: productId,
        quantity: parseInt(quantity)
      });
    }

    // Save session and get updated cart
    try {
      await new Promise((resolve, reject) => {
        req.session.save(err => {
          if (err) reject(err);else resolve();
        });
      });

      // Get updated cart with populated products
      const populatedCart = await Promise.all(req.session.cart.map(async item => {
        try {
          const product = await Product.findById(item.productId).select('-wholesaler');
          if (!product || !product.isActive) {
            return null;
          }
          return {
            _id: item.productId,
            product: product.toPublicJSON(),
            quantity: item.quantity,
            price: product.price,
            subtotal: product.price * item.quantity
          };
        } catch (error) {
          console.error('Error populating cart item:', error);
          return null;
        }
      }));
      const validCart = populatedCart.filter(item => item !== null);
      const totalPrice = validCart.reduce((sum, item) => sum + item.subtotal, 0);
      const totalItems = validCart.reduce((sum, item) => sum + item.quantity, 0);
      res.json({
        success: true,
        items: validCart,
        totalItems,
        totalPrice: Math.round(totalPrice * 100) / 100,
        message: 'Item added to cart'
      });
    } catch (sessionError) {
      console.error('Session save error:', sessionError);
      return res.status(500).json({
        success: false,
        error: {
          code: 'SESSION_ERROR',
          message: 'Failed to save cart'
        }
      });
    }
  } catch (error) {
    console.error('Error adding to cart:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'CART_ADD_ERROR',
        message: 'Failed to add item to cart'
      }
    });
  }
});

// Update cart item quantity
router.put('/update', initializeCart, async (req, res) => {
  try {
    const {
      productId,
      quantity
    } = req.body;
    if (!productId) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'MISSING_PRODUCT_ID',
          message: 'Product ID is required'
        }
      });
    }
    if (quantity < 0 || quantity > 99) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'INVALID_QUANTITY',
          message: 'Quantity must be between 0 and 99'
        }
      });
    }
    const itemIndex = req.session.cart.findIndex(item => item.productId.toString() === productId);
    if (itemIndex === -1) {
      return res.status(404).json({
        success: false,
        error: {
          code: 'ITEM_NOT_FOUND',
          message: 'Item not found in cart'
        }
      });
    }
    if (quantity === 0) {
      // Remove item if quantity is 0
      req.session.cart.splice(itemIndex, 1);
    } else {
      // Update quantity
      req.session.cart[itemIndex].quantity = parseInt(quantity);
    }
    req.session.save(err => {
      if (err) {
        console.error('Session save error:', err);
        return res.status(500).json({
          success: false,
          error: {
            code: 'SESSION_ERROR',
            message: 'Failed to update cart'
          }
        });
      }
      res.json({
        success: true,
        message: quantity === 0 ? 'Item removed from cart' : 'Cart updated',
        cartItemCount: req.session.cart.reduce((sum, item) => sum + item.quantity, 0)
      });
    });
  } catch (error) {
    console.error('Error updating cart:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'CART_UPDATE_ERROR',
        message: 'Failed to update cart'
      }
    });
  }
});

// Remove item from cart
router.delete('/remove', initializeCart, async (req, res) => {
  try {
    const {
      productId
    } = req.body;
    if (!productId) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'MISSING_PRODUCT_ID',
          message: 'Product ID is required'
        }
      });
    }
    const itemIndex = req.session.cart.findIndex(item => item.productId.toString() === productId);
    if (itemIndex === -1) {
      return res.status(404).json({
        success: false,
        error: {
          code: 'ITEM_NOT_FOUND',
          message: 'Item not found in cart'
        }
      });
    }
    req.session.cart.splice(itemIndex, 1);
    req.session.save(err => {
      if (err) {
        console.error('Session save error:', err);
        return res.status(500).json({
          success: false,
          error: {
            code: 'SESSION_ERROR',
            message: 'Failed to remove item from cart'
          }
        });
      }
      res.json({
        success: true,
        message: 'Item removed from cart',
        cartItemCount: req.session.cart.reduce((sum, item) => sum + item.quantity, 0)
      });
    });
  } catch (error) {
    console.error('Error removing from cart:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'CART_REMOVE_ERROR',
        message: 'Failed to remove item from cart'
      }
    });
  }
});

// Clear entire cart
router.delete('/clear', initializeCart, async (req, res) => {
  try {
    req.session.cart = [];
    req.session.save(err => {
      if (err) {
        console.error('Session save error:', err);
        return res.status(500).json({
          success: false,
          error: {
            code: 'SESSION_ERROR',
            message: 'Failed to clear cart'
          }
        });
      }
      res.json({
        success: true,
        message: 'Cart cleared',
        cartItemCount: 0
      });
    });
  } catch (error) {
    console.error('Error clearing cart:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'CART_CLEAR_ERROR',
        message: 'Failed to clear cart'
      }
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsIlByb2R1Y3QiLCJhdXRoZW50aWNhdGVUb2tlbiIsInJlcXVpcmVBdXRoIiwiaW5pdGlhbGl6ZUNhcnQiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2Vzc2lvbiIsImNhcnQiLCJnZXQiLCJ1c2VyIiwicG9wdWxhdGVkQ2FydCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJpdGVtIiwicHJvZHVjdCIsImZpbmRCeUlkIiwicHJvZHVjdElkIiwic2VsZWN0IiwiaXNBY3RpdmUiLCJfaWQiLCJ0b1B1YmxpY0pTT04iLCJxdWFudGl0eSIsInByaWNlIiwic3VidG90YWwiLCJlcnJvciIsImNvbnNvbGUiLCJ2YWxpZENhcnQiLCJmaWx0ZXIiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtQ291bnQiLCJqc29uIiwic3VjY2VzcyIsIml0ZW1zIiwidG90YWxJdGVtcyIsInRvdGFsUHJpY2UiLCJNYXRoIiwicm91bmQiLCJpc0VtcHR5IiwibGVuZ3RoIiwic3RhdHVzIiwiY29kZSIsIm1lc3NhZ2UiLCJwb3N0IiwiYm9keSIsImV4aXN0aW5nSXRlbUluZGV4IiwiZmluZEluZGV4IiwidG9TdHJpbmciLCJuZXdRdWFudGl0eSIsInBhcnNlSW50IiwicHVzaCIsInJlc29sdmUiLCJyZWplY3QiLCJzYXZlIiwiZXJyIiwic2Vzc2lvbkVycm9yIiwicHV0IiwiaXRlbUluZGV4Iiwic3BsaWNlIiwiY2FydEl0ZW1Db3VudCIsImRlbGV0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJjYXJ0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuY29uc3QgUHJvZHVjdCA9IHJlcXVpcmUoJy4uL21vZGVscy9Qcm9kdWN0Jyk7XG5jb25zdCB7IGF1dGhlbnRpY2F0ZVRva2VuLCByZXF1aXJlQXV0aCB9ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9hdXRoJyk7XG5cbi8vIE1pZGRsZXdhcmUgdG8gaW5pdGlhbGl6ZSBjYXJ0IGluIHNlc3Npb25cbmNvbnN0IGluaXRpYWxpemVDYXJ0ID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGlmICghcmVxLnNlc3Npb24uY2FydCkge1xuICAgIHJlcS5zZXNzaW9uLmNhcnQgPSBbXTtcbiAgfVxuICBuZXh0KCk7XG59O1xuXG4vLyBHZXQgY2FydCBjb250ZW50c1xucm91dGVyLmdldCgnLycsIGF1dGhlbnRpY2F0ZVRva2VuLCBpbml0aWFsaXplQ2FydCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgbGV0IGNhcnQgPSBbXTtcbiAgICBcbiAgICBpZiAocmVxLnVzZXIpIHtcbiAgICAgIC8vIEZvciBhdXRoZW50aWNhdGVkIHVzZXJzLCBnZXQgY2FydCBmcm9tIHVzZXIgc2Vzc2lvbiBvciBkYXRhYmFzZVxuICAgICAgY2FydCA9IHJlcS5zZXNzaW9uLmNhcnQgfHwgW107XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZvciBndWVzdHMsIGdldCBjYXJ0IGZyb20gc2Vzc2lvblxuICAgICAgY2FydCA9IHJlcS5zZXNzaW9uLmNhcnQgfHwgW107XG4gICAgfVxuICAgIFxuICAgIC8vIFBvcHVsYXRlIHByb2R1Y3QgZGV0YWlscyBmb3IgY2FydCBpdGVtc1xuICAgIGNvbnN0IHBvcHVsYXRlZENhcnQgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIGNhcnQubWFwKGFzeW5jIChpdGVtKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQoaXRlbS5wcm9kdWN0SWQpLnNlbGVjdCgnLXdob2xlc2FsZXInKTtcbiAgICAgICAgICBpZiAoIXByb2R1Y3QgfHwgIXByb2R1Y3QuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBSZW1vdmUgaW5hY3RpdmUgcHJvZHVjdHNcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9pZDogaXRlbS5faWQgfHwgaXRlbS5wcm9kdWN0SWQsXG4gICAgICAgICAgICBwcm9kdWN0OiBwcm9kdWN0LnRvUHVibGljSlNPTigpLFxuICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXG4gICAgICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcbiAgICAgICAgICAgIHN1YnRvdGFsOiBwcm9kdWN0LnByaWNlICogaXRlbS5xdWFudGl0eVxuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcG9wdWxhdGluZyBjYXJ0IGl0ZW06JywgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gICAgXG4gICAgLy8gRmlsdGVyIG91dCBudWxsIGl0ZW1zIChpbmFjdGl2ZSBwcm9kdWN0cylcbiAgICBjb25zdCB2YWxpZENhcnQgPSBwb3B1bGF0ZWRDYXJ0LmZpbHRlcihpdGVtID0+IGl0ZW0gIT09IG51bGwpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBzZXNzaW9uIGNhcnQgdG8gcmVtb3ZlIGludmFsaWQgaXRlbXNcbiAgICByZXEuc2Vzc2lvbi5jYXJ0ID0gdmFsaWRDYXJ0Lm1hcChpdGVtID0+ICh7XG4gICAgICBwcm9kdWN0SWQ6IGl0ZW0ucHJvZHVjdC5faWQsXG4gICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eVxuICAgIH0pKTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgdG90YWxzXG4gICAgY29uc3Qgc3VidG90YWwgPSB2YWxpZENhcnQucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0uc3VidG90YWwsIDApO1xuICAgIGNvbnN0IGl0ZW1Db3VudCA9IHZhbGlkQ2FydC5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS5xdWFudGl0eSwgMCk7XG4gICAgXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGl0ZW1zOiB2YWxpZENhcnQsXG4gICAgICB0b3RhbEl0ZW1zOiBpdGVtQ291bnQsXG4gICAgICB0b3RhbFByaWNlOiBNYXRoLnJvdW5kKHN1YnRvdGFsICogMTAwKSAvIDEwMCxcbiAgICAgIGlzRW1wdHk6IHZhbGlkQ2FydC5sZW5ndGggPT09IDBcbiAgICB9KTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGNhcnQ6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ0NBUlRfRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHJldHJpZXZlIGNhcnQgY29udGVudHMnXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBBZGQgaXRlbSB0byBjYXJ0XG5yb3V0ZXIucG9zdCgnL2FkZCcsIGF1dGhlbnRpY2F0ZVRva2VuLCBpbml0aWFsaXplQ2FydCwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBwcm9kdWN0SWQsIHF1YW50aXR5ID0gMSB9ID0gcmVxLmJvZHk7XG4gICAgXG4gICAgaWYgKCFwcm9kdWN0SWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdNSVNTSU5HX1BST0RVQ1RfSUQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IElEIGlzIHJlcXVpcmVkJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHF1YW50aXR5IDwgMSB8fCBxdWFudGl0eSA+IDk5KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9RVUFOVElUWScsXG4gICAgICAgICAgbWVzc2FnZTogJ1F1YW50aXR5IG11c3QgYmUgYmV0d2VlbiAxIGFuZCA5OSdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSBwcm9kdWN0IGV4aXN0cyBhbmQgaXMgYWN0aXZlXG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocHJvZHVjdElkKTtcbiAgICBpZiAoIXByb2R1Y3QgfHwgIXByb2R1Y3QuaXNBY3RpdmUpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdQUk9EVUNUX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1Byb2R1Y3Qgbm90IGZvdW5kIG9yIHVuYXZhaWxhYmxlJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgaXRlbSBhbHJlYWR5IGV4aXN0cyBpbiBjYXJ0XG4gICAgY29uc3QgZXhpc3RpbmdJdGVtSW5kZXggPSByZXEuc2Vzc2lvbi5jYXJ0LmZpbmRJbmRleChcbiAgICAgIGl0ZW0gPT4gaXRlbS5wcm9kdWN0SWQudG9TdHJpbmcoKSA9PT0gcHJvZHVjdElkXG4gICAgKTtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdJdGVtSW5kZXggPiAtMSkge1xuICAgICAgLy8gVXBkYXRlIHF1YW50aXR5IG9mIGV4aXN0aW5nIGl0ZW1cbiAgICAgIGNvbnN0IG5ld1F1YW50aXR5ID0gcmVxLnNlc3Npb24uY2FydFtleGlzdGluZ0l0ZW1JbmRleF0ucXVhbnRpdHkgKyBwYXJzZUludChxdWFudGl0eSk7XG4gICAgICBpZiAobmV3UXVhbnRpdHkgPiA5OSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBjb2RlOiAnTUFYX1FVQU5USVRZX0VYQ0VFREVEJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNYXhpbXVtIHF1YW50aXR5IHBlciBpdGVtIGlzIDk5J1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXEuc2Vzc2lvbi5jYXJ0W2V4aXN0aW5nSXRlbUluZGV4XS5xdWFudGl0eSA9IG5ld1F1YW50aXR5O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBZGQgbmV3IGl0ZW0gdG8gY2FydFxuICAgICAgcmVxLnNlc3Npb24uY2FydC5wdXNoKHtcbiAgICAgICAgcHJvZHVjdElkOiBwcm9kdWN0SWQsXG4gICAgICAgIHF1YW50aXR5OiBwYXJzZUludChxdWFudGl0eSlcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBTYXZlIHNlc3Npb24gYW5kIGdldCB1cGRhdGVkIGNhcnRcbiAgICB0cnkge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICByZXEuc2Vzc2lvbi5zYXZlKChlcnIpID0+IHtcbiAgICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgICBlbHNlIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gR2V0IHVwZGF0ZWQgY2FydCB3aXRoIHBvcHVsYXRlZCBwcm9kdWN0c1xuICAgICAgY29uc3QgcG9wdWxhdGVkQ2FydCA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICByZXEuc2Vzc2lvbi5jYXJ0Lm1hcChhc3luYyAoaXRlbSkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChpdGVtLnByb2R1Y3RJZCkuc2VsZWN0KCctd2hvbGVzYWxlcicpO1xuICAgICAgICAgICAgaWYgKCFwcm9kdWN0IHx8ICFwcm9kdWN0LmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBfaWQ6IGl0ZW0ucHJvZHVjdElkLFxuICAgICAgICAgICAgICBwcm9kdWN0OiBwcm9kdWN0LnRvUHVibGljSlNPTigpLFxuICAgICAgICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICAgICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsXG4gICAgICAgICAgICAgIHN1YnRvdGFsOiBwcm9kdWN0LnByaWNlICogaXRlbS5xdWFudGl0eVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcG9wdWxhdGluZyBjYXJ0IGl0ZW06JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgdmFsaWRDYXJ0ID0gcG9wdWxhdGVkQ2FydC5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSBudWxsKTtcbiAgICAgIGNvbnN0IHRvdGFsUHJpY2UgPSB2YWxpZENhcnQucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0uc3VidG90YWwsIDApO1xuICAgICAgY29uc3QgdG90YWxJdGVtcyA9IHZhbGlkQ2FydC5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS5xdWFudGl0eSwgMCk7XG4gICAgICBcbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgaXRlbXM6IHZhbGlkQ2FydCxcbiAgICAgICAgdG90YWxJdGVtcyxcbiAgICAgICAgdG90YWxQcmljZTogTWF0aC5yb3VuZCh0b3RhbFByaWNlICogMTAwKSAvIDEwMCxcbiAgICAgICAgbWVzc2FnZTogJ0l0ZW0gYWRkZWQgdG8gY2FydCdcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKHNlc3Npb25FcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU2Vzc2lvbiBzYXZlIGVycm9yOicsIHNlc3Npb25FcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnU0VTU0lPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzYXZlIGNhcnQnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgdG8gY2FydDonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnQ0FSVF9BRERfRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGFkZCBpdGVtIHRvIGNhcnQnXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBVcGRhdGUgY2FydCBpdGVtIHF1YW50aXR5XG5yb3V0ZXIucHV0KCcvdXBkYXRlJywgaW5pdGlhbGl6ZUNhcnQsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcHJvZHVjdElkLCBxdWFudGl0eSB9ID0gcmVxLmJvZHk7XG4gICAgXG4gICAgaWYgKCFwcm9kdWN0SWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdNSVNTSU5HX1BST0RVQ1RfSUQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IElEIGlzIHJlcXVpcmVkJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHF1YW50aXR5IDwgMCB8fCBxdWFudGl0eSA+IDk5KSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9RVUFOVElUWScsXG4gICAgICAgICAgbWVzc2FnZTogJ1F1YW50aXR5IG11c3QgYmUgYmV0d2VlbiAwIGFuZCA5OSdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHJlcS5zZXNzaW9uLmNhcnQuZmluZEluZGV4KFxuICAgICAgaXRlbSA9PiBpdGVtLnByb2R1Y3RJZC50b1N0cmluZygpID09PSBwcm9kdWN0SWRcbiAgICApO1xuICAgIFxuICAgIGlmIChpdGVtSW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSVRFTV9OT1RfRk9VTkQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJdGVtIG5vdCBmb3VuZCBpbiBjYXJ0J1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHF1YW50aXR5ID09PSAwKSB7XG4gICAgICAvLyBSZW1vdmUgaXRlbSBpZiBxdWFudGl0eSBpcyAwXG4gICAgICByZXEuc2Vzc2lvbi5jYXJ0LnNwbGljZShpdGVtSW5kZXgsIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVcGRhdGUgcXVhbnRpdHlcbiAgICAgIHJlcS5zZXNzaW9uLmNhcnRbaXRlbUluZGV4XS5xdWFudGl0eSA9IHBhcnNlSW50KHF1YW50aXR5KTtcbiAgICB9XG4gICAgXG4gICAgcmVxLnNlc3Npb24uc2F2ZSgoZXJyKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Nlc3Npb24gc2F2ZSBlcnJvcjonLCBlcnIpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBjb2RlOiAnU0VTU0lPTl9FUlJPUicsXG4gICAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSBjYXJ0J1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJlcy5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogcXVhbnRpdHkgPT09IDAgPyAnSXRlbSByZW1vdmVkIGZyb20gY2FydCcgOiAnQ2FydCB1cGRhdGVkJyxcbiAgICAgICAgY2FydEl0ZW1Db3VudDogcmVxLnNlc3Npb24uY2FydC5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS5xdWFudGl0eSwgMClcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGNhcnQ6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ0NBUlRfVVBEQVRFX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byB1cGRhdGUgY2FydCdcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIFJlbW92ZSBpdGVtIGZyb20gY2FydFxucm91dGVyLmRlbGV0ZSgnL3JlbW92ZScsIGluaXRpYWxpemVDYXJ0LCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHByb2R1Y3RJZCB9ID0gcmVxLmJvZHk7XG4gICAgXG4gICAgaWYgKCFwcm9kdWN0SWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdNSVNTSU5HX1BST0RVQ1RfSUQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9kdWN0IElEIGlzIHJlcXVpcmVkJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgaXRlbUluZGV4ID0gcmVxLnNlc3Npb24uY2FydC5maW5kSW5kZXgoXG4gICAgICBpdGVtID0+IGl0ZW0ucHJvZHVjdElkLnRvU3RyaW5nKCkgPT09IHByb2R1Y3RJZFxuICAgICk7XG4gICAgXG4gICAgaWYgKGl0ZW1JbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdJVEVNX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ0l0ZW0gbm90IGZvdW5kIGluIGNhcnQnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXEuc2Vzc2lvbi5jYXJ0LnNwbGljZShpdGVtSW5kZXgsIDEpO1xuICAgIFxuICAgIHJlcS5zZXNzaW9uLnNhdmUoKGVycikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTZXNzaW9uIHNhdmUgZXJyb3I6JywgZXJyKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ1NFU1NJT05fRVJST1InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byByZW1vdmUgaXRlbSBmcm9tIGNhcnQnXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmVzLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnSXRlbSByZW1vdmVkIGZyb20gY2FydCcsXG4gICAgICAgIGNhcnRJdGVtQ291bnQ6IHJlcS5zZXNzaW9uLmNhcnQucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0ucXVhbnRpdHksIDApXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW1vdmluZyBmcm9tIGNhcnQ6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ0NBUlRfUkVNT1ZFX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byByZW1vdmUgaXRlbSBmcm9tIGNhcnQnXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBDbGVhciBlbnRpcmUgY2FydFxucm91dGVyLmRlbGV0ZSgnL2NsZWFyJywgaW5pdGlhbGl6ZUNhcnQsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIHJlcS5zZXNzaW9uLmNhcnQgPSBbXTtcbiAgICBcbiAgICByZXEuc2Vzc2lvbi5zYXZlKChlcnIpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU2Vzc2lvbiBzYXZlIGVycm9yOicsIGVycik7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdTRVNTSU9OX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY2xlYXIgY2FydCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXMuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdDYXJ0IGNsZWFyZWQnLFxuICAgICAgICBjYXJ0SXRlbUNvdW50OiAwXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGVhcmluZyBjYXJ0OicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdDQVJUX0NMRUFSX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjbGVhciBjYXJ0J1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsTUFBTSxHQUFHRixPQUFPLENBQUNHLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE1BQU1DLE9BQU8sR0FBR0gsT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQzVDLE1BQU07RUFBRUksaUJBQWlCO0VBQUVDO0FBQVksQ0FBQyxHQUFHTCxPQUFPLENBQUMsb0JBQW9CLENBQUM7O0FBRXhFO0FBQ0EsTUFBTU0sY0FBYyxHQUFHQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3pDLElBQUksQ0FBQ0YsR0FBRyxDQUFDRyxPQUFPLENBQUNDLElBQUksRUFB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