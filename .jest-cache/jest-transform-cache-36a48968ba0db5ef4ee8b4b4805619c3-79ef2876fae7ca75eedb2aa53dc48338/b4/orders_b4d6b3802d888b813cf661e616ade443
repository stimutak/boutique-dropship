e5e45eb18a8eaa753c246a81375bd92f
const express = require('express');
const router = express.Router();
const {
  body,
  validationResult
} = require('express-validator');
const Order = require('../models/Order');
const Product = require('../models/Product');
const User = require('../models/User');
const {
  authenticateToken,
  requireAuth
} = require('../middleware/auth');
const {
  validateCSRFToken
} = require('../middleware/sessionCSRF');

// Validation middleware for guest checkout
const validateGuestCheckout = [body('guestInfo.email').isEmail().normalizeEmail().withMessage('Valid email is required'), body('guestInfo.firstName').trim().isLength({
  min: 1,
  max: 50
}).withMessage('First name is required and must be less than 50 characters'), body('guestInfo.lastName').trim().isLength({
  min: 1,
  max: 50
}).withMessage('Last name is required and must be less than 50 characters'), body('guestInfo.phone').optional().isString().isLength({
  min: 7,
  max: 30
}).withMessage('Phone number must be between 7 and 30 characters'), body('shippingAddress.firstName').trim().isLength({
  min: 1,
  max: 50
}).withMessage('Shipping first name is required'), body('shippingAddress.lastName').trim().isLength({
  min: 1,
  max: 50
}).withMessage('Shipping last name is required'), body('shippingAddress.street').trim().isLength({
  min: 1,
  max: 100
}).withMessage('Shipping street address is required'), body('shippingAddress.city').trim().isLength({
  min: 1,
  max: 50
}).withMessage('Shipping city is required'), body('shippingAddress.state').trim().isLength({
  min: 2,
  max: 50
}).withMessage('Shipping state is required'), body('shippingAddress.zipCode').trim().isLength({
  min: 5,
  max: 10
}).withMessage('Valid shipping zip code is required'), body('shippingAddress.country').trim().isLength({
  min: 2,
  max: 50
}).withMessage('Valid country code is required'), body('billingAddress.firstName').trim().isLength({
  min: 1,
  max: 50
}).withMessage('Billing first name is required'), body('billingAddress.lastName').trim().isLength({
  min: 1,
  max: 50
}).withMessage('Billing last name is required'), body('billingAddress.street').trim().isLength({
  min: 1,
  max: 100
}).withMessage('Billing street address is required'), body('billingAddress.city').trim().isLength({
  min: 1,
  max: 50
}).withMessage('Billing city is required'), body('billingAddress.state').trim().isLength({
  min: 2,
  max: 50
}).withMessage('Billing state is required'), body('billingAddress.zipCode').trim().isLength({
  min: 5,
  max: 10
}).withMessage('Valid billing zip code is required'), body('billingAddress.country').trim().isLength({
  min: 2,
  max: 50
}).withMessage('Valid country code is required'), body('items').isArray({
  min: 1
}).withMessage('At least one item is required'), body('items.*.productId').isMongoId().withMessage('Valid product ID is required'), body('items.*.quantity').isInt({
  min: 1,
  max: 99
}).withMessage('Quantity must be between 1 and 99'), body('referralSource').optional().trim().isLength({
  max: 100
}).withMessage('Referral source must be less than 100 characters')];

// Create order (guest checkout)
router.post('/', validateGuestCheckout, validateCSRFToken, async (req, res) => {
  try {
    // Check validation errors
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: errors.array()
        }
      });
    }
    const {
      guestInfo,
      shippingAddress,
      billingAddress,
      items: requestItems,
      notes,
      referralSource
    } = req.body;

    // Validate and process cart items - FIXED N+1 QUERY
    const orderItems = [];
    let subtotal = 0;

    // Batch fetch all products at once to avoid N+1 queries
    const productIds = requestItems.map(item => item.productId);
    const products = await Product.find({
      _id: {
        $in: productIds
      }
    });
    const productMap = new Map(products.map(p => [p._id.toString(), p]));
    for (const item of requestItems) {
      const product = productMap.get(item.productId);
      if (!product || !product.isActive) {
        return res.status(400).json({
          success: false,
          error: {
            code: 'INVALID_PRODUCT',
            message: `Product ${item.productId} not found or unavailable`
          }
        });
      }
      const itemTotal = product.price * item.quantity;
      subtotal += itemTotal;
      orderItems.push({
        product: product._id,
        quantity: item.quantity,
        price: product.price,
        wholesaler: {
          name: product.wholesaler.name,
          email: product.wholesaler.email,
          productCode: product.wholesaler.productCode,
          notified: false
        }
      });
    }

    // Calculate totals (simplified - you may want to add tax calculation)
    const tax = Math.round(subtotal * 0.08 * 100) / 100; // 8% tax rate
    const shipping = subtotal > 50 ? 0 : 5.99; // Free shipping over $50
    const total = Math.round((subtotal + tax + shipping) * 100) / 100;

    // Create order
    const orderData = {
      guestInfo,
      items: orderItems,
      shippingAddress,
      billingAddress,
      subtotal: Math.round(subtotal * 100) / 100,
      tax,
      shipping,
      total,
      payment: {
        method: 'other',
        // Will be updated when payment is processed
        status: 'pending'
      },
      status: 'pending',
      notes,
      referralSource
    };

    // Note: Orders are created as guest orders by default
    // They can be associated with users later via the /associate endpoint

    const order = await Order.create(orderData);

    // Populate product details for email
    await order.populate('items.product', 'name slug images');

    // Send order confirmation email for guest checkout
    try {
      const {
        sendOrderConfirmation
      } = require('../utils/emailService');
      const emailData = {
        orderNumber: order.orderNumber,
        customerName: `${guestInfo.firstName} ${guestInfo.lastName}`,
        items: order.items.map(item => ({
          productName: item.product.name,
          quantity: item.quantity,
          price: item.price
        })),
        total: order.total,
        shippingAddress: order.shippingAddress
      };
      const emailResult = await sendOrderConfirmation(guestInfo.email, emailData);
      if (!emailResult.success) {
        console.error('Failed to send order confirmation email:', emailResult.error);
      }
    } catch (emailError) {
      console.error('Error sending order confirmation email:', emailError);
    }

    // Note: Cart will be cleared after successful payment, not here
    // This allows users to retry payment if it fails

    res.status(201).json({
      success: true,
      message: 'Order created successfully',
      order: {
        _id: order._id,
        orderNumber: order.orderNumber,
        total: order.total,
        status: order.status,
        createdAt: order.createdAt
      }
    });
  } catch (error) {
    console.error('Error creating order:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'ORDER_CREATION_ERROR',
        message: 'Failed to create order'
      }
    });
  }
});

// Create order (guest checkout) - explicit guest route
router.post('/guest', validateGuestCheckout, validateCSRFToken, async (req, res) => {
  try {
    // Check validation errors
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: errors.array()
        }
      });
    }
    const {
      guestInfo,
      shippingAddress,
      billingAddress,
      items: requestItems,
      notes,
      referralSource
    } = req.body;

    // Validate and process cart items - FIXED N+1 QUERY
    const orderItems = [];
    let subtotal = 0;

    // Batch fetch all products at once to avoid N+1 queries
    const productIds = requestItems.map(item => item.productId);
    const products = await Product.find({
      _id: {
        $in: productIds
      }
    });
    const productMap = new Map(products.map(p => [p._id.toString(), p]));
    for (const item of requestItems) {
      const product = productMap.get(item.productId);
      if (!product || !product.isActive) {
        return res.status(400).json({
          success: false,
          error: {
            code: 'INVALID_PRODUCT',
            message: `Product ${item.productId} not found or unavailable`
          }
        });
      }
      const itemTotal = product.price * item.quantity;
      subtotal += itemTotal;
      orderItems.push({
        product: product._id,
        quantity: item.quantity,
        price: product.price,
        wholesaler: {
          name: product.wholesaler.name,
          email: product.wholesaler.email,
          productCode: product.wholesaler.productCode,
          notified: false,
          notificationAttempts: 0
        }
      });
    }

    // Calculate totals
    const tax = subtotal * 0.08; // 8% tax rate
    const shipping = subtotal > 50 ? 0 : 9.99; // Free shipping over $50
    const total = subtotal + tax + shipping;

    // Create order
    const orderData = {
      guestInfo,
      items: orderItems,
      shippingAddress,
      billingAddress: billingAddress || shippingAddress,
      subtotal,
      tax,
      shipping,
      total,
      payment: {
        method: 'card',
        status: 'pending'
      },
      status: 'pending',
      notes,
      referralSource
    };
    const order = await Order.create(orderData);
    res.status(201).json({
      success: true,
      message: 'Guest order created successfully',
      data: {
        order: {
          _id: order._id,
          orderNumber: order.orderNumber,
          guestInfo: order.guestInfo,
          items: order.items,
          shippingAddress: order.shippingAddress,
          billingAddress: order.billingAddress,
          subtotal: order.subtotal,
          tax: order.tax,
          shipping: order.shipping,
          total: order.total,
          status: order.status,
          createdAt: order.createdAt
        }
      }
    });
  } catch (error) {
    console.error('Error creating guest order:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'ORDER_CREATION_ERROR',
        message: 'Failed to create guest order'
      }
    });
  }
});

// Create order for registered user
router.post('/registered', authenticateToken, validateCSRFToken, async (req, res) => {
  try {
    // Ensure user is authenticated
    if (!req.user) {
      return res.status(401).json({
        success: false,
        error: {
          code: 'AUTHENTICATION_REQUIRED',
          message: 'You must be logged in to place an order'
        }
      });
    }
    const {
      shippingAddress,
      billingAddress,
      items: requestItems,
      notes,
      referralSource,
      useDefaultAddresses = false
    } = req.body;

    // Use default addresses if requested and available
    let finalShippingAddress = shippingAddress;
    let finalBillingAddress = billingAddress;
    if (useDefaultAddresses) {
      const defaultShipping = req.user.getDefaultShippingAddress();
      const defaultBilling = req.user.getDefaultBillingAddress();
      if (defaultShipping) {
        finalShippingAddress = defaultShipping.toObject();
        delete finalShippingAddress._id;
        delete finalShippingAddress.type;
        delete finalShippingAddress.isDefault;
      }
      if (defaultBilling) {
        finalBillingAddress = defaultBilling.toObject();
        delete finalBillingAddress._id;
        delete finalBillingAddress.type;
        delete finalBillingAddress.isDefault;
      }
    }

    // Validate required addresses
    if (!finalShippingAddress || !finalBillingAddress) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'MISSING_ADDRESSES',
          message: 'Shipping and billing addresses are required'
        }
      });
    }

    // Get items from user's cart if not provided
    let itemsToProcess = requestItems;
    if (!itemsToProcess || itemsToProcess.length === 0) {
      // Fetch from user's cart
      const user = await User.findById(req.user._id);
      if (!user.cart || !user.cart.items || user.cart.items.length === 0) {
        return res.status(400).json({
          success: false,
          error: {
            code: 'EMPTY_CART',
            message: 'Your cart is empty'
          }
        });
      }
      itemsToProcess = user.cart.items.map(item => ({
        productId: item.product,
        quantity: item.quantity
      }));
    }

    // Validate and process cart items (same logic as guest checkout)
    const orderItems = [];
    let subtotal = 0;
    for (const item of itemsToProcess) {
      const product = await Product.findById(item.productId);
      if (!product || !product.isActive) {
        return res.status(400).json({
          success: false,
          error: {
            code: 'INVALID_PRODUCT',
            message: `Product ${item.productId} not found or unavailable`
          }
        });
      }
      const itemTotal = product.price * item.quantity;
      subtotal += itemTotal;
      orderItems.push({
        product: product._id,
        quantity: item.quantity,
        price: product.price,
        wholesaler: {
          name: product.wholesaler.name,
          email: product.wholesaler.email,
          productCode: product.wholesaler.productCode,
          notified: false
        }
      });
    }

    // Calculate totals
    const tax = Math.round(subtotal * 0.08 * 100) / 100;
    const shipping = subtotal > 50 ? 0 : 5.99;
    const total = Math.round((subtotal + tax + shipping) * 100) / 100;

    // Create order for registered user
    const orderData = {
      customer: req.user._id,
      items: orderItems,
      shippingAddress: finalShippingAddress,
      billingAddress: finalBillingAddress,
      subtotal: Math.round(subtotal * 100) / 100,
      tax,
      shipping,
      total,
      payment: {
        method: 'other',
        status: 'pending'
      },
      status: 'pending',
      notes,
      referralSource
    };
    const order = await Order.create(orderData);

    // Populate product details for email
    await order.populate('items.product', 'name slug images');

    // Send order confirmation email for registered user
    try {
      if (req.user.wantsEmail('orderConfirmations')) {
        const {
          sendOrderConfirmation
        } = require('../utils/emailService');
        const emailData = {
          orderNumber: order.orderNumber,
          customerName: `${req.user.firstName} ${req.user.lastName}`,
          items: order.items.map(item => ({
            productName: item.product.name,
            quantity: item.quantity,
            price: item.price
          })),
          total: order.total,
          shippingAddress: order.shippingAddress
        };
        const emailResult = await sendOrderConfirmation(req.user.email, emailData);
        if (!emailResult.success) {
          console.error('Failed to send order confirmation email:', emailResult.error);
        }
      }
    } catch (emailError) {
      console.error('Error sending order confirmation email:', emailError);
    }

    // Clear user's cart
    const user = await User.findById(req.user._id);
    user.cart = {
      items: [],
      updatedAt: new Date()
    };
    await user.save();

    // Clear cart session
    if (req.session && req.session.cart) {
      req.session.cart = [];
    }
    res.status(201).json({
      success: true,
      message: 'Order created successfully',
      order: {
        _id: order._id,
        orderNumber: order.orderNumber,
        total: order.total,
        status: order.status,
        createdAt: order.createdAt
      }
    });
  } catch (error) {
    console.error('Error creating registered user order:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'ORDER_CREATION_ERROR',
        message: 'Failed to create order'
      }
    });
  }
});

// Get order by ID (supports both authenticated and guest orders)
router.get('/:id', authenticateToken, async (req, res) => {
  try {
    const order = await Order.findById(req.params.id).populate('items.product', '-wholesaler').populate('customer', 'firstName lastName email');
    if (!order) {
      return res.status(404).json({
        success: false,
        error: {
          code: 'ORDER_NOT_FOUND',
          message: 'Order not found'
        }
      });
    }

    // For guest orders, allow access without authentication
    // For authenticated users, check ownership (unless admin)
    if (req.user) {
      if (!req.user.isAdmin && order.customer && order.customer._id.toString() !== req.user._id.toString()) {
        return res.status(403).json({
          success: false,
          error: {
            code: 'ACCESS_DENIED',
            message: 'You can only access your own orders'
          }
        });
      }
    }
    // Guest orders (no customer field) are accessible without auth

    // Return public order data (excludes sensitive wholesaler info)
    res.json({
      success: true,
      data: {
        order: order.toPublicJSON()
      }
    });
  } catch (error) {
    console.error('Error fetching order:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'ORDER_FETCH_ERROR',
        message: 'Failed to fetch order'
      }
    });
  }
});

// Get order history for registered user
router.get('/', authenticateToken, async (req, res) => {
  try {
    console.log('Orders GET - req.user:', req.user ? req.user._id : 'null');

    // Ensure user is authenticated
    if (!req.user) {
      return res.status(401).json({
        success: false,
        error: {
          code: 'AUTHENTICATION_REQUIRED',
          message: 'You must be logged in to view orders'
        }
      });
    }
    const page = parseInt(req.query.page) || 1;
    const limit = parseInt(req.query.limit) || 10;
    const skip = (page - 1) * limit;
    const orders = await Order.find({
      customer: req.user._id
    }).populate('items.product', 'name slug images price').sort({
      createdAt: -1
    }).skip(skip).limit(limit);
    const totalOrders = await Order.countDocuments({
      customer: req.user._id
    });
    const totalPages = Math.ceil(totalOrders / limit);

    // Return public order data
    const publicOrders = orders.map(order => order.toPublicJSON());
    res.json({
      success: true,
      data: {
        orders: publicOrders,
        pagination: {
          currentPage: page,
          totalPages,
          totalOrders,
          hasNextPage: page < totalPages,
          hasPrevPage: page > 1
        }
      }
    });
  } catch (error) {
    console.error('Error fetching order history:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'ORDER_HISTORY_ERROR',
        message: 'Failed to fetch order history'
      }
    });
  }
});

// Associate order with authenticated user
router.post('/:id/associate', requireAuth, async (req, res) => {
  try {
    const {
      id
    } = req.params;

    // Find the order
    const order = await Order.findById(id);
    if (!order) {
      return res.status(404).json({
        success: false,
        error: {
          code: 'ORDER_NOT_FOUND',
          message: 'Order not found'
        }
      });
    }

    // Check if order is already associated with a user
    if (order.customer) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'ORDER_ALREADY_ASSOCIATED',
          message: 'Order is already associated with a user'
        }
      });
    }

    // Associate order with the authenticated user
    order.customer = req.user._id;
    await order.save();
    res.json({
      success: true,
      message: 'Order successfully associated with your account'
    });
  } catch (error) {
    console.error('Error associating order:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'ORDER_ASSOCIATION_ERROR',
        message: 'Failed to associate order with account'
      }
    });
  }
});

// Update order status (admin only - placeholder for now)
router.put('/:id/status', async (req, res) => {
  try {
    const {
      status,
      trackingNumber
    } = req.body;
    const validStatuses = ['pending', 'processing', 'shipped', 'delivered', 'cancelled'];
    if (!validStatuses.includes(status)) {
      return res.status(400).json({
        success: false,
        error: {
          code: 'INVALID_STATUS',
          message: 'Invalid order status'
        }
      });
    }
    const updateData = {
      status
    };
    if (trackingNumber) {
      updateData.trackingNumber = trackingNumber;
    }
    const order = await Order.findByIdAndUpdate(req.params.id, updateData, {
      new: true
    }).populate('customer', 'firstName lastName email preferences');
    if (!order) {
      return res.status(404).json({
        success: false,
        error: {
          code: 'ORDER_NOT_FOUND',
          message: 'Order not found'
        }
      });
    }

    // Send status update email
    try {
      const {
        sendOrderStatusUpdate
      } = require('../utils/emailService');
      let customerEmail,
        customerName,
        shouldSendEmail = true;
      if (order.customer) {
        // Registered user
        customerEmail = order.customer.email;
        customerName = `${order.customer.firstName} ${order.customer.lastName}`;
        shouldSendEmail = order.customer.preferences?.emailPreferences?.orderUpdates !== false;
      } else {
        // Guest user
        customerEmail = order.guestInfo.email;
        customerName = `${order.guestInfo.firstName} ${order.guestInfo.lastName}`;
      }
      if (shouldSendEmail && ['processing', 'shipped', 'delivered'].includes(status)) {
        const statusData = {
          orderNumber: order.orderNumber,
          customerName,
          status,
          trackingNumber
        };
        const emailResult = await sendOrderStatusUpdate(customerEmail, statusData);
        if (!emailResult.success) {
          console.error('Failed to send order status update email:', emailResult.error);
        }
      }
    } catch (emailError) {
      console.error('Error sending order status update email:', emailError);
    }
    res.json({
      success: true,
      message: 'Order status updated',
      order: {
        _id: order._id,
        orderNumber: order.orderNumber,
        status: order.status,
        trackingNumber: order.trackingNumber,
        updatedAt: order.updatedAt
      }
    });
  } catch (error) {
    console.error('Error updating order status:', error);
    res.status(500).json({
      success: false,
      error: {
        code: 'ORDER_UPDATE_ERROR',
        message: 'Failed to update order status'
      }
    });
  }
});
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImJvZHkiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiT3JkZXIiLCJQcm9kdWN0IiwiVXNlciIsImF1dGhlbnRpY2F0ZVRva2VuIiwicmVxdWlyZUF1dGgiLCJ2YWxpZGF0ZUNTUkZUb2tlbiIsInZhbGlkYXRlR3Vlc3RDaGVja291dCIsImlzRW1haWwiLCJub3JtYWxpemVFbWFpbCIsIndpdGhNZXNzYWdlIiwidHJpbSIsImlzTGVuZ3RoIiwibWluIiwibWF4Iiwib3B0aW9uYWwiLCJpc1N0cmluZyIsImlzQXJyYXkiLCJpc01vbmdvSWQiLCJpc0ludCIsInBvc3QiLCJyZXEiLCJyZXMiLCJlcnJvcnMiLCJpc0VtcHR5Iiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiZGV0YWlscyIsImFycmF5IiwiZ3Vlc3RJbmZvIiwic2hpcHBpbmdBZGRyZXNzIiwiYmlsbGluZ0FkZHJlc3MiLCJpdGVtcyIsInJlcXVlc3RJdGVtcyIsIm5vdGVzIiwicmVmZXJyYWxTb3VyY2UiLCJvcmRlckl0ZW1zIiwic3VidG90YWwiLCJwcm9kdWN0SWRzIiwibWFwIiwiaXRlbSIsInByb2R1Y3RJZCIsInByb2R1Y3RzIiwiZmluZCIsIl9pZCIsIiRpbiIsInByb2R1Y3RNYXAiLCJNYXAiLCJwIiwidG9TdHJpbmciLCJwcm9kdWN0IiwiZ2V0IiwiaXNBY3RpdmUiLCJpdGVtVG90YWwiLCJwcmljZSIsInF1YW50aXR5IiwicHVzaCIsIndob2xlc2FsZXIiLCJuYW1lIiwiZW1haWwiLCJwcm9kdWN0Q29kZSIsIm5vdGlmaWVkIiwidGF4IiwiTWF0aCIsInJvdW5kIiwic2hpcHBpbmciLCJ0b3RhbCIsIm9yZGVyRGF0YSIsInBheW1lbnQiLCJtZXRob2QiLCJvcmRlciIsImNyZWF0ZSIsInBvcHVsYXRlIiwic2VuZE9yZGVyQ29uZmlybWF0aW9uIiwiZW1haWxEYXRhIiwib3JkZXJOdW1iZXIiLCJjdXN0b21lck5hbWUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInByb2R1Y3ROYW1lIiwiZW1haWxSZXN1bHQiLCJjb25zb2xlIiwiZW1haWxFcnJvciIsImNyZWF0ZWRBdCIsIm5vdGlmaWNhdGlvbkF0dGVtcHRzIiwiZGF0YSIsInVzZXIiLCJ1c2VEZWZhdWx0QWRkcmVzc2VzIiwiZmluYWxTaGlwcGluZ0FkZHJlc3MiLCJmaW5hbEJpbGxpbmdBZGRyZXNzIiwiZGVmYXVsdFNoaXBwaW5nIiwiZ2V0RGVmYXVsdFNoaXBwaW5nQWRkcmVzcyIsImRlZmF1bHRCaWxsaW5nIiwiZ2V0RGVmYXVsdEJpbGxpbmdBZGRyZXNzIiwidG9PYmplY3QiLCJ0eXBlIiwiaXNEZWZhdWx0IiwiaXRlbXNUb1Byb2Nlc3MiLCJsZW5ndGgiLCJmaW5kQnlJZCIsImNhcnQiLCJjdXN0b21lciIsIndhbnRzRW1haWwiLCJ1cGRhdGVkQXQiLCJEYXRlIiwic2F2ZSIsInNlc3Npb24iLCJwYXJhbXMiLCJpZCIsImlzQWRtaW4iLCJ0b1B1YmxpY0pTT04iLCJsb2ciLCJwYWdlIiwicGFyc2VJbnQiLCJxdWVyeSIsImxpbWl0Iiwic2tpcCIsIm9yZGVycyIsInNvcnQiLCJ0b3RhbE9yZGVycyIsImNvdW50RG9jdW1lbnRzIiwidG90YWxQYWdlcyIsImNlaWwiLCJwdWJsaWNPcmRlcnMiLCJwYWdpbmF0aW9uIiwiY3VycmVudFBhZ2UiLCJoYXNOZXh0UGFnZSIsImhhc1ByZXZQYWdlIiwicHV0IiwidHJhY2tpbmdOdW1iZXIiLCJ2YWxpZFN0YXR1c2VzIiwiaW5jbHVkZXMiLCJ1cGRhdGVEYXRhIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJuZXciLCJzZW5kT3JkZXJTdGF0dXNVcGRhdGUiLCJjdXN0b21lckVtYWlsIiwic2hvdWxkU2VuZEVtYWlsIiwicHJlZmVyZW5jZXMiLCJlbWFpbFByZWZlcmVuY2VzIiwib3JkZXJVcGRhdGVzIiwic3RhdHVzRGF0YSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJvcmRlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCB7IGJvZHksIHZhbGlkYXRpb25SZXN1bHQgfSA9IHJlcXVpcmUoJ2V4cHJlc3MtdmFsaWRhdG9yJyk7XG5jb25zdCBPcmRlciA9IHJlcXVpcmUoJy4uL21vZGVscy9PcmRlcicpO1xuY29uc3QgUHJvZHVjdCA9IHJlcXVpcmUoJy4uL21vZGVscy9Qcm9kdWN0Jyk7XG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL1VzZXInKTtcbmNvbnN0IHsgYXV0aGVudGljYXRlVG9rZW4sIHJlcXVpcmVBdXRoIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGgnKTtcbmNvbnN0IHsgdmFsaWRhdGVDU1JGVG9rZW4gfSA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmUvc2Vzc2lvbkNTUkYnKTtcblxuLy8gVmFsaWRhdGlvbiBtaWRkbGV3YXJlIGZvciBndWVzdCBjaGVja291dFxuY29uc3QgdmFsaWRhdGVHdWVzdENoZWNrb3V0ID0gW1xuICBib2R5KCdndWVzdEluZm8uZW1haWwnKVxuICAgIC5pc0VtYWlsKClcbiAgICAubm9ybWFsaXplRW1haWwoKVxuICAgIC53aXRoTWVzc2FnZSgnVmFsaWQgZW1haWwgaXMgcmVxdWlyZWQnKSxcbiAgYm9keSgnZ3Vlc3RJbmZvLmZpcnN0TmFtZScpXG4gICAgLnRyaW0oKVxuICAgIC5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiA1MCB9KVxuICAgIC53aXRoTWVzc2FnZSgnRmlyc3QgbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBsZXNzIHRoYW4gNTAgY2hhcmFjdGVycycpLFxuICBib2R5KCdndWVzdEluZm8ubGFzdE5hbWUnKVxuICAgIC50cmltKClcbiAgICAuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogNTAgfSlcbiAgICAud2l0aE1lc3NhZ2UoJ0xhc3QgbmFtZSBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBsZXNzIHRoYW4gNTAgY2hhcmFjdGVycycpLFxuICBib2R5KCdndWVzdEluZm8ucGhvbmUnKVxuICAgIC5vcHRpb25hbCgpXG4gICAgLmlzU3RyaW5nKClcbiAgICAuaXNMZW5ndGgoeyBtaW46IDcsIG1heDogMzAgfSlcbiAgICAud2l0aE1lc3NhZ2UoJ1Bob25lIG51bWJlciBtdXN0IGJlIGJldHdlZW4gNyBhbmQgMzAgY2hhcmFjdGVycycpLFxuICBib2R5KCdzaGlwcGluZ0FkZHJlc3MuZmlyc3ROYW1lJylcbiAgICAudHJpbSgpXG4gICAgLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDUwIH0pXG4gICAgLndpdGhNZXNzYWdlKCdTaGlwcGluZyBmaXJzdCBuYW1lIGlzIHJlcXVpcmVkJyksXG4gIGJvZHkoJ3NoaXBwaW5nQWRkcmVzcy5sYXN0TmFtZScpXG4gICAgLnRyaW0oKVxuICAgIC5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiA1MCB9KVxuICAgIC53aXRoTWVzc2FnZSgnU2hpcHBpbmcgbGFzdCBuYW1lIGlzIHJlcXVpcmVkJyksXG4gIGJvZHkoJ3NoaXBwaW5nQWRkcmVzcy5zdHJlZXQnKVxuICAgIC50cmltKClcbiAgICAuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogMTAwIH0pXG4gICAgLndpdGhNZXNzYWdlKCdTaGlwcGluZyBzdHJlZXQgYWRkcmVzcyBpcyByZXF1aXJlZCcpLFxuICBib2R5KCdzaGlwcGluZ0FkZHJlc3MuY2l0eScpXG4gICAgLnRyaW0oKVxuICAgIC5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiA1MCB9KVxuICAgIC53aXRoTWVzc2FnZSgnU2hpcHBpbmcgY2l0eSBpcyByZXF1aXJlZCcpLFxuICBib2R5KCdzaGlwcGluZ0FkZHJlc3Muc3RhdGUnKVxuICAgIC50cmltKClcbiAgICAuaXNMZW5ndGgoeyBtaW46IDIsIG1heDogNTAgfSlcbiAgICAud2l0aE1lc3NhZ2UoJ1NoaXBwaW5nIHN0YXRlIGlzIHJlcXVpcmVkJyksXG4gIGJvZHkoJ3NoaXBwaW5nQWRkcmVzcy56aXBDb2RlJylcbiAgICAudHJpbSgpXG4gICAgLmlzTGVuZ3RoKHsgbWluOiA1LCBtYXg6IDEwIH0pXG4gICAgLndpdGhNZXNzYWdlKCdWYWxpZCBzaGlwcGluZyB6aXAgY29kZSBpcyByZXF1aXJlZCcpLFxuICBib2R5KCdzaGlwcGluZ0FkZHJlc3MuY291bnRyeScpXG4gICAgLnRyaW0oKVxuICAgIC5pc0xlbmd0aCh7IG1pbjogMiwgbWF4OiA1MCB9KVxuICAgIC53aXRoTWVzc2FnZSgnVmFsaWQgY291bnRyeSBjb2RlIGlzIHJlcXVpcmVkJyksXG4gIGJvZHkoJ2JpbGxpbmdBZGRyZXNzLmZpcnN0TmFtZScpXG4gICAgLnRyaW0oKVxuICAgIC5pc0xlbmd0aCh7IG1pbjogMSwgbWF4OiA1MCB9KVxuICAgIC53aXRoTWVzc2FnZSgnQmlsbGluZyBmaXJzdCBuYW1lIGlzIHJlcXVpcmVkJyksXG4gIGJvZHkoJ2JpbGxpbmdBZGRyZXNzLmxhc3ROYW1lJylcbiAgICAudHJpbSgpXG4gICAgLmlzTGVuZ3RoKHsgbWluOiAxLCBtYXg6IDUwIH0pXG4gICAgLndpdGhNZXNzYWdlKCdCaWxsaW5nIGxhc3QgbmFtZSBpcyByZXF1aXJlZCcpLFxuICBib2R5KCdiaWxsaW5nQWRkcmVzcy5zdHJlZXQnKVxuICAgIC50cmltKClcbiAgICAuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogMTAwIH0pXG4gICAgLndpdGhNZXNzYWdlKCdCaWxsaW5nIHN0cmVldCBhZGRyZXNzIGlzIHJlcXVpcmVkJyksXG4gIGJvZHkoJ2JpbGxpbmdBZGRyZXNzLmNpdHknKVxuICAgIC50cmltKClcbiAgICAuaXNMZW5ndGgoeyBtaW46IDEsIG1heDogNTAgfSlcbiAgICAud2l0aE1lc3NhZ2UoJ0JpbGxpbmcgY2l0eSBpcyByZXF1aXJlZCcpLFxuICBib2R5KCdiaWxsaW5nQWRkcmVzcy5zdGF0ZScpXG4gICAgLnRyaW0oKVxuICAgIC5pc0xlbmd0aCh7IG1pbjogMiwgbWF4OiA1MCB9KVxuICAgIC53aXRoTWVzc2FnZSgnQmlsbGluZyBzdGF0ZSBpcyByZXF1aXJlZCcpLFxuICBib2R5KCdiaWxsaW5nQWRkcmVzcy56aXBDb2RlJylcbiAgICAudHJpbSgpXG4gICAgLmlzTGVuZ3RoKHsgbWluOiA1LCBtYXg6IDEwIH0pXG4gICAgLndpdGhNZXNzYWdlKCdWYWxpZCBiaWxsaW5nIHppcCBjb2RlIGlzIHJlcXVpcmVkJyksXG4gIGJvZHkoJ2JpbGxpbmdBZGRyZXNzLmNvdW50cnknKVxuICAgIC50cmltKClcbiAgICAuaXNMZW5ndGgoeyBtaW46IDIsIG1heDogNTAgfSlcbiAgICAud2l0aE1lc3NhZ2UoJ1ZhbGlkIGNvdW50cnkgY29kZSBpcyByZXF1aXJlZCcpLFxuICBib2R5KCdpdGVtcycpXG4gICAgLmlzQXJyYXkoeyBtaW46IDEgfSlcbiAgICAud2l0aE1lc3NhZ2UoJ0F0IGxlYXN0IG9uZSBpdGVtIGlzIHJlcXVpcmVkJyksXG4gIGJvZHkoJ2l0ZW1zLioucHJvZHVjdElkJylcbiAgICAuaXNNb25nb0lkKClcbiAgICAud2l0aE1lc3NhZ2UoJ1ZhbGlkIHByb2R1Y3QgSUQgaXMgcmVxdWlyZWQnKSxcbiAgYm9keSgnaXRlbXMuKi5xdWFudGl0eScpXG4gICAgLmlzSW50KHsgbWluOiAxLCBtYXg6IDk5IH0pXG4gICAgLndpdGhNZXNzYWdlKCdRdWFudGl0eSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgOTknKSxcbiAgYm9keSgncmVmZXJyYWxTb3VyY2UnKVxuICAgIC5vcHRpb25hbCgpXG4gICAgLnRyaW0oKVxuICAgIC5pc0xlbmd0aCh7IG1heDogMTAwIH0pXG4gICAgLndpdGhNZXNzYWdlKCdSZWZlcnJhbCBzb3VyY2UgbXVzdCBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnMnKVxuXTtcblxuLy8gQ3JlYXRlIG9yZGVyIChndWVzdCBjaGVja291dClcbnJvdXRlci5wb3N0KCcvJywgdmFsaWRhdGVHdWVzdENoZWNrb3V0LCB2YWxpZGF0ZUNTUkZUb2tlbiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XG4gICAgaWYgKCFlcnJvcnMuaXNFbXB0eSgpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZGF0YScsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3JzLmFycmF5KClcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgZ3Vlc3RJbmZvLFxuICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgYmlsbGluZ0FkZHJlc3MsXG4gICAgICBpdGVtczogcmVxdWVzdEl0ZW1zLFxuICAgICAgbm90ZXMsXG4gICAgICByZWZlcnJhbFNvdXJjZVxuICAgIH0gPSByZXEuYm9keTtcblxuICAgIC8vIFZhbGlkYXRlIGFuZCBwcm9jZXNzIGNhcnQgaXRlbXMgLSBGSVhFRCBOKzEgUVVFUllcbiAgICBjb25zdCBvcmRlckl0ZW1zID0gW107XG4gICAgbGV0IHN1YnRvdGFsID0gMDtcblxuICAgIC8vIEJhdGNoIGZldGNoIGFsbCBwcm9kdWN0cyBhdCBvbmNlIHRvIGF2b2lkIE4rMSBxdWVyaWVzXG4gICAgY29uc3QgcHJvZHVjdElkcyA9IHJlcXVlc3RJdGVtcy5tYXAoaXRlbSA9PiBpdGVtLnByb2R1Y3RJZCk7XG4gICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBQcm9kdWN0LmZpbmQoeyBfaWQ6IHsgJGluOiBwcm9kdWN0SWRzIH0gfSk7XG4gICAgY29uc3QgcHJvZHVjdE1hcCA9IG5ldyBNYXAocHJvZHVjdHMubWFwKHAgPT4gW3AuX2lkLnRvU3RyaW5nKCksIHBdKSk7XG5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcmVxdWVzdEl0ZW1zKSB7XG4gICAgICBjb25zdCBwcm9kdWN0ID0gcHJvZHVjdE1hcC5nZXQoaXRlbS5wcm9kdWN0SWQpO1xuICAgICAgXG4gICAgICBpZiAoIXByb2R1Y3QgfHwgIXByb2R1Y3QuaXNBY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ0lOVkFMSURfUFJPRFVDVCcsXG4gICAgICAgICAgICBtZXNzYWdlOiBgUHJvZHVjdCAke2l0ZW0ucHJvZHVjdElkfSBub3QgZm91bmQgb3IgdW5hdmFpbGFibGVgXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaXRlbVRvdGFsID0gcHJvZHVjdC5wcmljZSAqIGl0ZW0ucXVhbnRpdHk7XG4gICAgICBzdWJ0b3RhbCArPSBpdGVtVG90YWw7XG5cbiAgICAgIG9yZGVySXRlbXMucHVzaCh7XG4gICAgICAgIHByb2R1Y3Q6IHByb2R1Y3QuX2lkLFxuICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsXG4gICAgICAgIHdob2xlc2FsZXI6IHtcbiAgICAgICAgICBuYW1lOiBwcm9kdWN0Lndob2xlc2FsZXIubmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZHVjdC53aG9sZXNhbGVyLmVtYWlsLFxuICAgICAgICAgIHByb2R1Y3RDb2RlOiBwcm9kdWN0Lndob2xlc2FsZXIucHJvZHVjdENvZGUsXG4gICAgICAgICAgbm90aWZpZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbHMgKHNpbXBsaWZpZWQgLSB5b3UgbWF5IHdhbnQgdG8gYWRkIHRheCBjYWxjdWxhdGlvbilcbiAgICBjb25zdCB0YXggPSBNYXRoLnJvdW5kKHN1YnRvdGFsICogMC4wOCAqIDEwMCkgLyAxMDA7IC8vIDglIHRheCByYXRlXG4gICAgY29uc3Qgc2hpcHBpbmcgPSBzdWJ0b3RhbCA+IDUwID8gMCA6IDUuOTk7IC8vIEZyZWUgc2hpcHBpbmcgb3ZlciAkNTBcbiAgICBjb25zdCB0b3RhbCA9IE1hdGgucm91bmQoKHN1YnRvdGFsICsgdGF4ICsgc2hpcHBpbmcpICogMTAwKSAvIDEwMDtcblxuICAgIC8vIENyZWF0ZSBvcmRlclxuICAgIGNvbnN0IG9yZGVyRGF0YSA9IHtcbiAgICAgIGd1ZXN0SW5mbyxcbiAgICAgIGl0ZW1zOiBvcmRlckl0ZW1zLFxuICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgYmlsbGluZ0FkZHJlc3MsXG4gICAgICBzdWJ0b3RhbDogTWF0aC5yb3VuZChzdWJ0b3RhbCAqIDEwMCkgLyAxMDAsXG4gICAgICB0YXgsXG4gICAgICBzaGlwcGluZyxcbiAgICAgIHRvdGFsLFxuICAgICAgcGF5bWVudDoge1xuICAgICAgICBtZXRob2Q6ICdvdGhlcicsIC8vIFdpbGwgYmUgdXBkYXRlZCB3aGVuIHBheW1lbnQgaXMgcHJvY2Vzc2VkXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnXG4gICAgICB9LFxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICBub3RlcyxcbiAgICAgIHJlZmVycmFsU291cmNlXG4gICAgfTtcblxuICAgIC8vIE5vdGU6IE9yZGVycyBhcmUgY3JlYXRlZCBhcyBndWVzdCBvcmRlcnMgYnkgZGVmYXVsdFxuICAgIC8vIFRoZXkgY2FuIGJlIGFzc29jaWF0ZWQgd2l0aCB1c2VycyBsYXRlciB2aWEgdGhlIC9hc3NvY2lhdGUgZW5kcG9pbnRcblxuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuY3JlYXRlKG9yZGVyRGF0YSk7XG4gICAgXG4gICAgLy8gUG9wdWxhdGUgcHJvZHVjdCBkZXRhaWxzIGZvciBlbWFpbFxuICAgIGF3YWl0IG9yZGVyLnBvcHVsYXRlKCdpdGVtcy5wcm9kdWN0JywgJ25hbWUgc2x1ZyBpbWFnZXMnKTtcblxuICAgIC8vIFNlbmQgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsIGZvciBndWVzdCBjaGVja291dFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNlbmRPcmRlckNvbmZpcm1hdGlvbiB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZW1haWxTZXJ2aWNlJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVtYWlsRGF0YSA9IHtcbiAgICAgICAgb3JkZXJOdW1iZXI6IG9yZGVyLm9yZGVyTnVtYmVyLFxuICAgICAgICBjdXN0b21lck5hbWU6IGAke2d1ZXN0SW5mby5maXJzdE5hbWV9ICR7Z3Vlc3RJbmZvLmxhc3ROYW1lfWAsXG4gICAgICAgIGl0ZW1zOiBvcmRlci5pdGVtcy5tYXAoaXRlbSA9PiAoe1xuICAgICAgICAgIHByb2R1Y3ROYW1lOiBpdGVtLnByb2R1Y3QubmFtZSxcbiAgICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICBwcmljZTogaXRlbS5wcmljZVxuICAgICAgICB9KSksXG4gICAgICAgIHRvdGFsOiBvcmRlci50b3RhbCxcbiAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBvcmRlci5zaGlwcGluZ0FkZHJlc3NcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGVtYWlsUmVzdWx0ID0gYXdhaXQgc2VuZE9yZGVyQ29uZmlybWF0aW9uKGd1ZXN0SW5mby5lbWFpbCwgZW1haWxEYXRhKTtcbiAgICAgIGlmICghZW1haWxSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCBvcmRlciBjb25maXJtYXRpb24gZW1haWw6JywgZW1haWxSZXN1bHQuZXJyb3IpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVtYWlsRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsOicsIGVtYWlsRXJyb3IpO1xuICAgIH1cblxuICAgIC8vIE5vdGU6IENhcnQgd2lsbCBiZSBjbGVhcmVkIGFmdGVyIHN1Y2Nlc3NmdWwgcGF5bWVudCwgbm90IGhlcmVcbiAgICAvLyBUaGlzIGFsbG93cyB1c2VycyB0byByZXRyeSBwYXltZW50IGlmIGl0IGZhaWxzXG5cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ09yZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIG9yZGVyOiB7XG4gICAgICAgIF9pZDogb3JkZXIuX2lkLFxuICAgICAgICBvcmRlck51bWJlcjogb3JkZXIub3JkZXJOdW1iZXIsXG4gICAgICAgIHRvdGFsOiBvcmRlci50b3RhbCxcbiAgICAgICAgc3RhdHVzOiBvcmRlci5zdGF0dXMsXG4gICAgICAgIGNyZWF0ZWRBdDogb3JkZXIuY3JlYXRlZEF0XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBvcmRlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnT1JERVJfQ1JFQVRJT05fRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBvcmRlcidcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIENyZWF0ZSBvcmRlciAoZ3Vlc3QgY2hlY2tvdXQpIC0gZXhwbGljaXQgZ3Vlc3Qgcm91dGVcbnJvdXRlci5wb3N0KCcvZ3Vlc3QnLCB2YWxpZGF0ZUd1ZXN0Q2hlY2tvdXQsIHZhbGlkYXRlQ1NSRlRva2VuLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayB2YWxpZGF0aW9uIGVycm9yc1xuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKTtcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBkYXRhJyxcbiAgICAgICAgICBkZXRhaWxzOiBlcnJvcnMuYXJyYXkoKVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7XG4gICAgICBndWVzdEluZm8sXG4gICAgICBzaGlwcGluZ0FkZHJlc3MsXG4gICAgICBiaWxsaW5nQWRkcmVzcyxcbiAgICAgIGl0ZW1zOiByZXF1ZXN0SXRlbXMsXG4gICAgICBub3RlcyxcbiAgICAgIHJlZmVycmFsU291cmNlXG4gICAgfSA9IHJlcS5ib2R5O1xuXG4gICAgLy8gVmFsaWRhdGUgYW5kIHByb2Nlc3MgY2FydCBpdGVtcyAtIEZJWEVEIE4rMSBRVUVSWVxuICAgIGNvbnN0IG9yZGVySXRlbXMgPSBbXTtcbiAgICBsZXQgc3VidG90YWwgPSAwO1xuXG4gICAgLy8gQmF0Y2ggZmV0Y2ggYWxsIHByb2R1Y3RzIGF0IG9uY2UgdG8gYXZvaWQgTisxIHF1ZXJpZXNcbiAgICBjb25zdCBwcm9kdWN0SWRzID0gcmVxdWVzdEl0ZW1zLm1hcChpdGVtID0+IGl0ZW0ucHJvZHVjdElkKTtcbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IFByb2R1Y3QuZmluZCh7IF9pZDogeyAkaW46IHByb2R1Y3RJZHMgfSB9KTtcbiAgICBjb25zdCBwcm9kdWN0TWFwID0gbmV3IE1hcChwcm9kdWN0cy5tYXAocCA9PiBbcC5faWQudG9TdHJpbmcoKSwgcF0pKTtcblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiByZXF1ZXN0SXRlbXMpIHtcbiAgICAgIGNvbnN0IHByb2R1Y3QgPSBwcm9kdWN0TWFwLmdldChpdGVtLnByb2R1Y3RJZCk7XG4gICAgICBcbiAgICAgIGlmICghcHJvZHVjdCB8fCAhcHJvZHVjdC5pc0FjdGl2ZSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9QUk9EVUNUJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBQcm9kdWN0ICR7aXRlbS5wcm9kdWN0SWR9IG5vdCBmb3VuZCBvciB1bmF2YWlsYWJsZWBcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpdGVtVG90YWwgPSBwcm9kdWN0LnByaWNlICogaXRlbS5xdWFudGl0eTtcbiAgICAgIHN1YnRvdGFsICs9IGl0ZW1Ub3RhbDtcblxuICAgICAgb3JkZXJJdGVtcy5wdXNoKHtcbiAgICAgICAgcHJvZHVjdDogcHJvZHVjdC5faWQsXG4gICAgICAgIHF1YW50aXR5OiBpdGVtLnF1YW50aXR5LFxuICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcbiAgICAgICAgd2hvbGVzYWxlcjoge1xuICAgICAgICAgIG5hbWU6IHByb2R1Y3Qud2hvbGVzYWxlci5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9kdWN0Lndob2xlc2FsZXIuZW1haWwsXG4gICAgICAgICAgcHJvZHVjdENvZGU6IHByb2R1Y3Qud2hvbGVzYWxlci5wcm9kdWN0Q29kZSxcbiAgICAgICAgICBub3RpZmllZDogZmFsc2UsXG4gICAgICAgICAgbm90aWZpY2F0aW9uQXR0ZW1wdHM6IDBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsc1xuICAgIGNvbnN0IHRheCA9IHN1YnRvdGFsICogMC4wODsgLy8gOCUgdGF4IHJhdGVcbiAgICBjb25zdCBzaGlwcGluZyA9IHN1YnRvdGFsID4gNTAgPyAwIDogOS45OTsgLy8gRnJlZSBzaGlwcGluZyBvdmVyICQ1MFxuICAgIGNvbnN0IHRvdGFsID0gc3VidG90YWwgKyB0YXggKyBzaGlwcGluZztcblxuICAgIC8vIENyZWF0ZSBvcmRlclxuICAgIGNvbnN0IG9yZGVyRGF0YSA9IHtcbiAgICAgIGd1ZXN0SW5mbyxcbiAgICAgIGl0ZW1zOiBvcmRlckl0ZW1zLFxuICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgYmlsbGluZ0FkZHJlc3M6IGJpbGxpbmdBZGRyZXNzIHx8IHNoaXBwaW5nQWRkcmVzcyxcbiAgICAgIHN1YnRvdGFsLFxuICAgICAgdGF4LFxuICAgICAgc2hpcHBpbmcsXG4gICAgICB0b3RhbCxcbiAgICAgIHBheW1lbnQ6IHtcbiAgICAgICAgbWV0aG9kOiAnY2FyZCcsXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnXG4gICAgICB9LFxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICBub3RlcyxcbiAgICAgIHJlZmVycmFsU291cmNlXG4gICAgfTtcblxuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuY3JlYXRlKG9yZGVyRGF0YSk7XG5cbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ0d1ZXN0IG9yZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgb3JkZXI6IHtcbiAgICAgICAgICBfaWQ6IG9yZGVyLl9pZCxcbiAgICAgICAgICBvcmRlck51bWJlcjogb3JkZXIub3JkZXJOdW1iZXIsXG4gICAgICAgICAgZ3Vlc3RJbmZvOiBvcmRlci5ndWVzdEluZm8sXG4gICAgICAgICAgaXRlbXM6IG9yZGVyLml0ZW1zLFxuICAgICAgICAgIHNoaXBwaW5nQWRkcmVzczogb3JkZXIuc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiBvcmRlci5iaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICBzdWJ0b3RhbDogb3JkZXIuc3VidG90YWwsXG4gICAgICAgICAgdGF4OiBvcmRlci50YXgsXG4gICAgICAgICAgc2hpcHBpbmc6IG9yZGVyLnNoaXBwaW5nLFxuICAgICAgICAgIHRvdGFsOiBvcmRlci50b3RhbCxcbiAgICAgICAgICBzdGF0dXM6IG9yZGVyLnN0YXR1cyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG9yZGVyLmNyZWF0ZWRBdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBndWVzdCBvcmRlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnT1JERVJfQ1JFQVRJT05fRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBndWVzdCBvcmRlcidcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIENyZWF0ZSBvcmRlciBmb3IgcmVnaXN0ZXJlZCB1c2VyXG5yb3V0ZXIucG9zdCgnL3JlZ2lzdGVyZWQnLCBhdXRoZW50aWNhdGVUb2tlbiwgdmFsaWRhdGVDU1JGVG9rZW4sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIC8vIEVuc3VyZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAgICBpZiAoIXJlcS51c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnQVVUSEVOVElDQVRJT05fUkVRVUlSRUQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgbXVzdCBiZSBsb2dnZWQgaW4gdG8gcGxhY2UgYW4gb3JkZXInXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIHNoaXBwaW5nQWRkcmVzcyxcbiAgICAgIGJpbGxpbmdBZGRyZXNzLFxuICAgICAgaXRlbXM6IHJlcXVlc3RJdGVtcyxcbiAgICAgIG5vdGVzLFxuICAgICAgcmVmZXJyYWxTb3VyY2UsXG4gICAgICB1c2VEZWZhdWx0QWRkcmVzc2VzID0gZmFsc2VcbiAgICB9ID0gcmVxLmJvZHk7XG5cbiAgICAvLyBVc2UgZGVmYXVsdCBhZGRyZXNzZXMgaWYgcmVxdWVzdGVkIGFuZCBhdmFpbGFibGVcbiAgICBsZXQgZmluYWxTaGlwcGluZ0FkZHJlc3MgPSBzaGlwcGluZ0FkZHJlc3M7XG4gICAgbGV0IGZpbmFsQmlsbGluZ0FkZHJlc3MgPSBiaWxsaW5nQWRkcmVzcztcblxuICAgIGlmICh1c2VEZWZhdWx0QWRkcmVzc2VzKSB7XG4gICAgICBjb25zdCBkZWZhdWx0U2hpcHBpbmcgPSByZXEudXNlci5nZXREZWZhdWx0U2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICBjb25zdCBkZWZhdWx0QmlsbGluZyA9IHJlcS51c2VyLmdldERlZmF1bHRCaWxsaW5nQWRkcmVzcygpO1xuICAgICAgXG4gICAgICBpZiAoZGVmYXVsdFNoaXBwaW5nKSB7XG4gICAgICAgIGZpbmFsU2hpcHBpbmdBZGRyZXNzID0gZGVmYXVsdFNoaXBwaW5nLnRvT2JqZWN0KCk7XG4gICAgICAgIGRlbGV0ZSBmaW5hbFNoaXBwaW5nQWRkcmVzcy5faWQ7XG4gICAgICAgIGRlbGV0ZSBmaW5hbFNoaXBwaW5nQWRkcmVzcy50eXBlO1xuICAgICAgICBkZWxldGUgZmluYWxTaGlwcGluZ0FkZHJlc3MuaXNEZWZhdWx0O1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZGVmYXVsdEJpbGxpbmcpIHtcbiAgICAgICAgZmluYWxCaWxsaW5nQWRkcmVzcyA9IGRlZmF1bHRCaWxsaW5nLnRvT2JqZWN0KCk7XG4gICAgICAgIGRlbGV0ZSBmaW5hbEJpbGxpbmdBZGRyZXNzLl9pZDtcbiAgICAgICAgZGVsZXRlIGZpbmFsQmlsbGluZ0FkZHJlc3MudHlwZTtcbiAgICAgICAgZGVsZXRlIGZpbmFsQmlsbGluZ0FkZHJlc3MuaXNEZWZhdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGFkZHJlc3Nlc1xuICAgIGlmICghZmluYWxTaGlwcGluZ0FkZHJlc3MgfHwgIWZpbmFsQmlsbGluZ0FkZHJlc3MpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdNSVNTSU5HX0FERFJFU1NFUycsXG4gICAgICAgICAgbWVzc2FnZTogJ1NoaXBwaW5nIGFuZCBiaWxsaW5nIGFkZHJlc3NlcyBhcmUgcmVxdWlyZWQnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCBpdGVtcyBmcm9tIHVzZXIncyBjYXJ0IGlmIG5vdCBwcm92aWRlZFxuICAgIGxldCBpdGVtc1RvUHJvY2VzcyA9IHJlcXVlc3RJdGVtcztcbiAgICBpZiAoIWl0ZW1zVG9Qcm9jZXNzIHx8IGl0ZW1zVG9Qcm9jZXNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gRmV0Y2ggZnJvbSB1c2VyJ3MgY2FydFxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuX2lkKTtcbiAgICAgIGlmICghdXNlci5jYXJ0IHx8ICF1c2VyLmNhcnQuaXRlbXMgfHwgdXNlci5jYXJ0Lml0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBjb2RlOiAnRU1QVFlfQ0FSVCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnWW91ciBjYXJ0IGlzIGVtcHR5J1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpdGVtc1RvUHJvY2VzcyA9IHVzZXIuY2FydC5pdGVtcy5tYXAoaXRlbSA9PiAoe1xuICAgICAgICBwcm9kdWN0SWQ6IGl0ZW0ucHJvZHVjdCxcbiAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHlcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBhbmQgcHJvY2VzcyBjYXJ0IGl0ZW1zIChzYW1lIGxvZ2ljIGFzIGd1ZXN0IGNoZWNrb3V0KVxuICAgIGNvbnN0IG9yZGVySXRlbXMgPSBbXTtcbiAgICBsZXQgc3VidG90YWwgPSAwO1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zVG9Qcm9jZXNzKSB7XG4gICAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChpdGVtLnByb2R1Y3RJZCk7XG4gICAgICBcbiAgICAgIGlmICghcHJvZHVjdCB8fCAhcHJvZHVjdC5pc0FjdGl2ZSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9QUk9EVUNUJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBQcm9kdWN0ICR7aXRlbS5wcm9kdWN0SWR9IG5vdCBmb3VuZCBvciB1bmF2YWlsYWJsZWBcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpdGVtVG90YWwgPSBwcm9kdWN0LnByaWNlICogaXRlbS5xdWFudGl0eTtcbiAgICAgIHN1YnRvdGFsICs9IGl0ZW1Ub3RhbDtcblxuICAgICAgb3JkZXJJdGVtcy5wdXNoKHtcbiAgICAgICAgcHJvZHVjdDogcHJvZHVjdC5faWQsXG4gICAgICAgIHF1YW50aXR5OiBpdGVtLnF1YW50aXR5LFxuICAgICAgICBwcmljZTogcHJvZHVjdC5wcmljZSxcbiAgICAgICAgd2hvbGVzYWxlcjoge1xuICAgICAgICAgIG5hbWU6IHByb2R1Y3Qud2hvbGVzYWxlci5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9kdWN0Lndob2xlc2FsZXIuZW1haWwsXG4gICAgICAgICAgcHJvZHVjdENvZGU6IHByb2R1Y3Qud2hvbGVzYWxlci5wcm9kdWN0Q29kZSxcbiAgICAgICAgICBub3RpZmllZDogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsc1xuICAgIGNvbnN0IHRheCA9IE1hdGgucm91bmQoc3VidG90YWwgKiAwLjA4ICogMTAwKSAvIDEwMDtcbiAgICBjb25zdCBzaGlwcGluZyA9IHN1YnRvdGFsID4gNTAgPyAwIDogNS45OTtcbiAgICBjb25zdCB0b3RhbCA9IE1hdGgucm91bmQoKHN1YnRvdGFsICsgdGF4ICsgc2hpcHBpbmcpICogMTAwKSAvIDEwMDtcblxuICAgIC8vIENyZWF0ZSBvcmRlciBmb3IgcmVnaXN0ZXJlZCB1c2VyXG4gICAgY29uc3Qgb3JkZXJEYXRhID0ge1xuICAgICAgY3VzdG9tZXI6IHJlcS51c2VyLl9pZCxcbiAgICAgIGl0ZW1zOiBvcmRlckl0ZW1zLFxuICAgICAgc2hpcHBpbmdBZGRyZXNzOiBmaW5hbFNoaXBwaW5nQWRkcmVzcyxcbiAgICAgIGJpbGxpbmdBZGRyZXNzOiBmaW5hbEJpbGxpbmdBZGRyZXNzLFxuICAgICAgc3VidG90YWw6IE1hdGgucm91bmQoc3VidG90YWwgKiAxMDApIC8gMTAwLFxuICAgICAgdGF4LFxuICAgICAgc2hpcHBpbmcsXG4gICAgICB0b3RhbCxcbiAgICAgIHBheW1lbnQ6IHtcbiAgICAgICAgbWV0aG9kOiAnb3RoZXInLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJ1xuICAgICAgfSxcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgbm90ZXMsXG4gICAgICByZWZlcnJhbFNvdXJjZVxuICAgIH07XG5cbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmNyZWF0ZShvcmRlckRhdGEpO1xuICAgIFxuICAgIC8vIFBvcHVsYXRlIHByb2R1Y3QgZGV0YWlscyBmb3IgZW1haWxcbiAgICBhd2FpdCBvcmRlci5wb3B1bGF0ZSgnaXRlbXMucHJvZHVjdCcsICduYW1lIHNsdWcgaW1hZ2VzJyk7XG5cbiAgICAvLyBTZW5kIG9yZGVyIGNvbmZpcm1hdGlvbiBlbWFpbCBmb3IgcmVnaXN0ZXJlZCB1c2VyXG4gICAgdHJ5IHtcbiAgICAgIGlmIChyZXEudXNlci53YW50c0VtYWlsKCdvcmRlckNvbmZpcm1hdGlvbnMnKSkge1xuICAgICAgICBjb25zdCB7IHNlbmRPcmRlckNvbmZpcm1hdGlvbiB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvZW1haWxTZXJ2aWNlJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBlbWFpbERhdGEgPSB7XG4gICAgICAgICAgb3JkZXJOdW1iZXI6IG9yZGVyLm9yZGVyTnVtYmVyLFxuICAgICAgICAgIGN1c3RvbWVyTmFtZTogYCR7cmVxLnVzZXIuZmlyc3ROYW1lfSAke3JlcS51c2VyLmxhc3ROYW1lfWAsXG4gICAgICAgICAgaXRlbXM6IG9yZGVyLml0ZW1zLm1hcChpdGVtID0+ICh7XG4gICAgICAgICAgICBwcm9kdWN0TmFtZTogaXRlbS5wcm9kdWN0Lm5hbWUsXG4gICAgICAgICAgICBxdWFudGl0eTogaXRlbS5xdWFudGl0eSxcbiAgICAgICAgICAgIHByaWNlOiBpdGVtLnByaWNlXG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIHRvdGFsOiBvcmRlci50b3RhbCxcbiAgICAgICAgICBzaGlwcGluZ0FkZHJlc3M6IG9yZGVyLnNoaXBwaW5nQWRkcmVzc1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGVtYWlsUmVzdWx0ID0gYXdhaXQgc2VuZE9yZGVyQ29uZmlybWF0aW9uKHJlcS51c2VyLmVtYWlsLCBlbWFpbERhdGEpO1xuICAgICAgICBpZiAoIWVtYWlsUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCBvcmRlciBjb25maXJtYXRpb24gZW1haWw6JywgZW1haWxSZXN1bHQuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZW1haWxFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBvcmRlciBjb25maXJtYXRpb24gZW1haWw6JywgZW1haWxFcnJvcik7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdXNlcidzIGNhcnRcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChyZXEudXNlci5faWQpO1xuICAgIHVzZXIuY2FydCA9IHsgaXRlbXM6IFtdLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgfTtcbiAgICBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICBcbiAgICAvLyBDbGVhciBjYXJ0IHNlc3Npb25cbiAgICBpZiAocmVxLnNlc3Npb24gJiYgcmVxLnNlc3Npb24uY2FydCkge1xuICAgICAgcmVxLnNlc3Npb24uY2FydCA9IFtdO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnT3JkZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgb3JkZXI6IHtcbiAgICAgICAgX2lkOiBvcmRlci5faWQsXG4gICAgICAgIG9yZGVyTnVtYmVyOiBvcmRlci5vcmRlck51bWJlcixcbiAgICAgICAgdG90YWw6IG9yZGVyLnRvdGFsLFxuICAgICAgICBzdGF0dXM6IG9yZGVyLnN0YXR1cyxcbiAgICAgICAgY3JlYXRlZEF0OiBvcmRlci5jcmVhdGVkQXRcbiAgICAgIH1cbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHJlZ2lzdGVyZWQgdXNlciBvcmRlcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnT1JERVJfQ1JFQVRJT05fRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSBvcmRlcidcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIEdldCBvcmRlciBieSBJRCAoc3VwcG9ydHMgYm90aCBhdXRoZW50aWNhdGVkIGFuZCBndWVzdCBvcmRlcnMpXG5yb3V0ZXIuZ2V0KCcvOmlkJywgYXV0aGVudGljYXRlVG9rZW4sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZClcbiAgICAgIC5wb3B1bGF0ZSgnaXRlbXMucHJvZHVjdCcsICctd2hvbGVzYWxlcicpXG4gICAgICAucG9wdWxhdGUoJ2N1c3RvbWVyJywgJ2ZpcnN0TmFtZSBsYXN0TmFtZSBlbWFpbCcpO1xuXG4gICAgaWYgKCFvcmRlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ09SREVSX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ09yZGVyIG5vdCBmb3VuZCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRm9yIGd1ZXN0IG9yZGVycywgYWxsb3cgYWNjZXNzIHdpdGhvdXQgYXV0aGVudGljYXRpb25cbiAgICAvLyBGb3IgYXV0aGVudGljYXRlZCB1c2VycywgY2hlY2sgb3duZXJzaGlwICh1bmxlc3MgYWRtaW4pXG4gICAgaWYgKHJlcS51c2VyKSB7XG4gICAgICBpZiAoIXJlcS51c2VyLmlzQWRtaW4gJiYgb3JkZXIuY3VzdG9tZXIgJiYgb3JkZXIuY3VzdG9tZXIuX2lkLnRvU3RyaW5nKCkgIT09IHJlcS51c2VyLl9pZC50b1N0cmluZygpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdBQ0NFU1NfREVOSUVEJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgY2FuIG9ubHkgYWNjZXNzIHlvdXIgb3duIG9yZGVycydcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBHdWVzdCBvcmRlcnMgKG5vIGN1c3RvbWVyIGZpZWxkKSBhcmUgYWNjZXNzaWJsZSB3aXRob3V0IGF1dGhcblxuICAgIC8vIFJldHVybiBwdWJsaWMgb3JkZXIgZGF0YSAoZXhjbHVkZXMgc2Vuc2l0aXZlIHdob2xlc2FsZXIgaW5mbylcbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICBvcmRlcjogb3JkZXIudG9QdWJsaWNKU09OKClcbiAgICAgIH1cbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG9yZGVyOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdPUkRFUl9GRVRDSF9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggb3JkZXInXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBHZXQgb3JkZXIgaGlzdG9yeSBmb3IgcmVnaXN0ZXJlZCB1c2VyXG5yb3V0ZXIuZ2V0KCcvJywgYXV0aGVudGljYXRlVG9rZW4sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdPcmRlcnMgR0VUIC0gcmVxLnVzZXI6JywgcmVxLnVzZXIgPyByZXEudXNlci5faWQgOiAnbnVsbCcpO1xuICAgIFxuICAgIC8vIEVuc3VyZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAgICBpZiAoIXJlcS51c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnQVVUSEVOVElDQVRJT05fUkVRVUlSRUQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgbXVzdCBiZSBsb2dnZWQgaW4gdG8gdmlldyBvcmRlcnMnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChyZXEucXVlcnkucGFnZSkgfHwgMTtcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCkgfHwgMTA7XG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgIFxuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IE9yZGVyLmZpbmQoeyBjdXN0b21lcjogcmVxLnVzZXIuX2lkIH0pXG4gICAgICAucG9wdWxhdGUoJ2l0ZW1zLnByb2R1Y3QnLCAnbmFtZSBzbHVnIGltYWdlcyBwcmljZScpXG4gICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAgIC5za2lwKHNraXApXG4gICAgICAubGltaXQobGltaXQpO1xuXG4gICAgY29uc3QgdG90YWxPcmRlcnMgPSBhd2FpdCBPcmRlci5jb3VudERvY3VtZW50cyh7IGN1c3RvbWVyOiByZXEudXNlci5faWQgfSk7XG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbE9yZGVycyAvIGxpbWl0KTtcbiAgICBcbiAgICBcblxuICAgIC8vIFJldHVybiBwdWJsaWMgb3JkZXIgZGF0YVxuICAgIGNvbnN0IHB1YmxpY09yZGVycyA9IG9yZGVycy5tYXAob3JkZXIgPT4gb3JkZXIudG9QdWJsaWNKU09OKCkpO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgb3JkZXJzOiBwdWJsaWNPcmRlcnMsXG4gICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICBjdXJyZW50UGFnZTogcGFnZSxcbiAgICAgICAgICB0b3RhbFBhZ2VzLFxuICAgICAgICAgIHRvdGFsT3JkZXJzLFxuICAgICAgICAgIGhhc05leHRQYWdlOiBwYWdlIDwgdG90YWxQYWdlcyxcbiAgICAgICAgICBoYXNQcmV2UGFnZTogcGFnZSA+IDFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgb3JkZXIgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAnT1JERVJfSElTVE9SWV9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggb3JkZXIgaGlzdG9yeSdcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIEFzc29jaWF0ZSBvcmRlciB3aXRoIGF1dGhlbnRpY2F0ZWQgdXNlclxucm91dGVyLnBvc3QoJy86aWQvYXNzb2NpYXRlJywgcmVxdWlyZUF1dGgsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5wYXJhbXM7XG4gICAgXG4gICAgLy8gRmluZCB0aGUgb3JkZXJcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKGlkKTtcbiAgICBpZiAoIW9yZGVyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnT1JERVJfTk9UX0ZPVU5EJyxcbiAgICAgICAgICBtZXNzYWdlOiAnT3JkZXIgbm90IGZvdW5kJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBvcmRlciBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhIHVzZXJcbiAgICBpZiAob3JkZXIuY3VzdG9tZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdPUkRFUl9BTFJFQURZX0FTU09DSUFURUQnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdPcmRlciBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhIHVzZXInXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFzc29jaWF0ZSBvcmRlciB3aXRoIHRoZSBhdXRoZW50aWNhdGVkIHVzZXJcbiAgICBvcmRlci5jdXN0b21lciA9IHJlcS51c2VyLl9pZDtcbiAgICBhd2FpdCBvcmRlci5zYXZlKCk7XG5cbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ09yZGVyIHN1Y2Nlc3NmdWxseSBhc3NvY2lhdGVkIHdpdGggeW91ciBhY2NvdW50J1xuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYXNzb2NpYXRpbmcgb3JkZXI6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ09SREVSX0FTU09DSUFUSU9OX0VSUk9SJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBhc3NvY2lhdGUgb3JkZXIgd2l0aCBhY2NvdW50J1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KTtcblxuLy8gVXBkYXRlIG9yZGVyIHN0YXR1cyAoYWRtaW4gb25seSAtIHBsYWNlaG9sZGVyIGZvciBub3cpXG5yb3V0ZXIucHV0KCcvOmlkL3N0YXR1cycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc3RhdHVzLCB0cmFja2luZ051bWJlciB9ID0gcmVxLmJvZHk7XG4gICAgXG4gICAgY29uc3QgdmFsaWRTdGF0dXNlcyA9IFsncGVuZGluZycsICdwcm9jZXNzaW5nJywgJ3NoaXBwZWQnLCAnZGVsaXZlcmVkJywgJ2NhbmNlbGxlZCddO1xuICAgIGlmICghdmFsaWRTdGF0dXNlcy5pbmNsdWRlcyhzdGF0dXMpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9TVEFUVVMnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIG9yZGVyIHN0YXR1cydcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHsgc3RhdHVzIH07XG4gICAgaWYgKHRyYWNraW5nTnVtYmVyKSB7XG4gICAgICB1cGRhdGVEYXRhLnRyYWNraW5nTnVtYmVyID0gdHJhY2tpbmdOdW1iZXI7XG4gICAgfVxuXG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBPcmRlci5maW5kQnlJZEFuZFVwZGF0ZShcbiAgICAgIHJlcS5wYXJhbXMuaWQsXG4gICAgICB1cGRhdGVEYXRhLFxuICAgICAgeyBuZXc6IHRydWUgfVxuICAgICkucG9wdWxhdGUoJ2N1c3RvbWVyJywgJ2ZpcnN0TmFtZSBsYXN0TmFtZSBlbWFpbCBwcmVmZXJlbmNlcycpO1xuXG4gICAgaWYgKCFvcmRlcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ09SREVSX05PVF9GT1VORCcsXG4gICAgICAgICAgbWVzc2FnZTogJ09yZGVyIG5vdCBmb3VuZCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2VuZCBzdGF0dXMgdXBkYXRlIGVtYWlsXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2VuZE9yZGVyU3RhdHVzVXBkYXRlIH0gPSByZXF1aXJlKCcuLi91dGlscy9lbWFpbFNlcnZpY2UnKTtcbiAgICAgIFxuICAgICAgbGV0IGN1c3RvbWVyRW1haWwsIGN1c3RvbWVyTmFtZSwgc2hvdWxkU2VuZEVtYWlsID0gdHJ1ZTtcbiAgICAgIFxuICAgICAgaWYgKG9yZGVyLmN1c3RvbWVyKSB7XG4gICAgICAgIC8vIFJlZ2lzdGVyZWQgdXNlclxuICAgICAgICBjdXN0b21lckVtYWlsID0gb3JkZXIuY3VzdG9tZXIuZW1haWw7XG4gICAgICAgIGN1c3RvbWVyTmFtZSA9IGAke29yZGVyLmN1c3RvbWVyLmZpcnN0TmFtZX0gJHtvcmRlci5jdXN0b21lci5sYXN0TmFtZX1gO1xuICAgICAgICBzaG91bGRTZW5kRW1haWwgPSBvcmRlci5jdXN0b21lci5wcmVmZXJlbmNlcz8uZW1haWxQcmVmZXJlbmNlcz8ub3JkZXJVcGRhdGVzICE9PSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEd1ZXN0IHVzZXJcbiAgICAgICAgY3VzdG9tZXJFbWFpbCA9IG9yZGVyLmd1ZXN0SW5mby5lbWFpbDtcbiAgICAgICAgY3VzdG9tZXJOYW1lID0gYCR7b3JkZXIuZ3Vlc3RJbmZvLmZpcnN0TmFtZX0gJHtvcmRlci5ndWVzdEluZm8ubGFzdE5hbWV9YDtcbiAgICAgIH1cblxuICAgICAgaWYgKHNob3VsZFNlbmRFbWFpbCAmJiBbJ3Byb2Nlc3NpbmcnLCAnc2hpcHBlZCcsICdkZWxpdmVyZWQnXS5pbmNsdWRlcyhzdGF0dXMpKSB7XG4gICAgICAgIGNvbnN0IHN0YXR1c0RhdGEgPSB7XG4gICAgICAgICAgb3JkZXJOdW1iZXI6IG9yZGVyLm9yZGVyTnVtYmVyLFxuICAgICAgICAgIGN1c3RvbWVyTmFtZSxcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgdHJhY2tpbmdOdW1iZXJcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBlbWFpbFJlc3VsdCA9IGF3YWl0IHNlbmRPcmRlclN0YXR1c1VwZGF0ZShjdXN0b21lckVtYWlsLCBzdGF0dXNEYXRhKTtcbiAgICAgICAgaWYgKCFlbWFpbFJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNlbmQgb3JkZXIgc3RhdHVzIHVwZGF0ZSBlbWFpbDonLCBlbWFpbFJlc3VsdC5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlbWFpbEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIG9yZGVyIHN0YXR1cyB1cGRhdGUgZW1haWw6JywgZW1haWxFcnJvcik7XG4gICAgfVxuXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdPcmRlciBzdGF0dXMgdXBkYXRlZCcsXG4gICAgICBvcmRlcjoge1xuICAgICAgICBfaWQ6IG9yZGVyLl9pZCxcbiAgICAgICAgb3JkZXJOdW1iZXI6IG9yZGVyLm9yZGVyTnVtYmVyLFxuICAgICAgICBzdGF0dXM6IG9yZGVyLnN0YXR1cyxcbiAgICAgICAgdHJhY2tpbmdOdW1iZXI6IG9yZGVyLnRyYWNraW5nTnVtYmVyLFxuICAgICAgICB1cGRhdGVkQXQ6IG9yZGVyLnVwZGF0ZWRBdFxuICAgICAgfVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgb3JkZXIgc3RhdHVzOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6ICdPUkRFUl9VUERBVEVfRVJST1InLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSBvcmRlciBzdGF0dXMnXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBTSxDQUFDLENBQUM7QUFDL0IsTUFBTTtFQUFFQyxJQUFJO0VBQUVDO0FBQWlCLENBQUMsR0FBR0osT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQy9ELE1BQU1LLEtBQUssR0FBR0wsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3hDLE1BQU1NLE9BQU8sR0FBR04sT0FBTyxDQUFDLG1CQUFtQixDQUFDO0FBQzVDLE1BQU1PLElBQUksR0FBR1AsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3RDLE1BQU07RUFBRVEsaUJBQWlCO0VBQUVDO0FBQVksQ0FBQyxHQUFHVCxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDeEUsTUFBTTtFQUFFVTtBQUFrQixDQUFDLEdBQUdWLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQzs7QUFFbEU7QUFDQSxNQUFNVyxxQkFBcUIsR0FBRyxDQUM1QlIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQ3BCUyxPQUFPLENBQUMsQ0FBQyxDQUNUQyxjQUFjLENBQUMsQ0FBQyxDQUNoQkMsV0FBVyxDQUFDLHlCQUF5QixDQUFDLEVBQ3pDWCxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FDeEJZLElBQUksQ0FBQyxDQUFDLENBQ05DLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBRyxDQUFDLENBQUMsQ0FDN0JKLFdBQVcsQ0FBQyw0REFBNEQsQ0FBQyxFQUM1RVgsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQ3ZCWSxJQUFJLENBQUMsQ0FBQyxDQUNOQyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUcsQ0FBQyxDQUFDLENBQzdCSixXQUFXLENBQUMsMkRBQTJELENBQUMsRUFDM0VYLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUNwQmdCLFFBQVEsQ0FBQyxDQUFDLENBQ1ZDLFFBQVEsQ0FBQyxDQUFDLENBQ1ZKLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBRyxDQUFDLENBQUMsQ0FDN0JKLFdBQVcsQ0FBQyxrREFBa0QsQ0FBQyxFQUNsRVgsSUFBSSxDQUFDLDJCQUEyQixDQUFDLENBQzlCWSxJQUFJLENBQUMsQ0FBQyxDQUNOQyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUcsQ0FBQyxDQUFDLENBQzdCSixXQUFXLENBQUMsaUNBQWlDLENBQUMsRUFDakRYLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUM3QlksSUFBSSxDQUFDLENBQUMsQ0FDTkMsUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFHLENBQUMsQ0FBQyxDQUM3QkosV0FBVyxDQUFDLGdDQUFnQyxDQUFDLEVBQ2hEWCxJQUFJLENBQUMsd0JBQXdCLENBQUMsQ0FDM0JZLElBQUksQ0FBQyxDQUFDLENBQ05DLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBSSxDQUFDLENBQUMsQ0FDOUJKLFdBQVcsQ0FBQyxxQ0FBcUMsQ0FBQyxFQUNyRFgsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQ3pCWSxJQUFJLENBQUMsQ0FBQyxDQUNOQyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUcsQ0FBQyxDQUFDLENBQzdCSixXQUFXLENBQUMsMkJBQTJCLENBQUMsRUFDM0NYLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUMxQlksSUFBSSxDQUFDLENBQUMsQ0FDTkMsUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFHLENBQUMsQ0FBQyxDQUM3QkosV0FBVyxDQUFDLDRCQUE0QixDQUFDLEVBQzVDWCxJQUFJLENBQUMseUJBQXlCLENBQUMsQ0FDNUJZLElBQUksQ0FBQyxDQUFDLENBQ05DLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBRyxDQUFDLENBQUMsQ0FDN0JKLFdBQVcsQ0FBQyxxQ0FBcUMsQ0FBQyxFQUNyRFgsSUFBSSxDQUFDLHlCQUF5QixDQUFDLENBQzVCWSxJQUFJLENBQUMsQ0FBQyxDQUNOQyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUcsQ0FBQyxDQUFDLENBQzdCSixXQUFXLENBQUMsZ0NBQWdDLENBQUMsRUFDaERYLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUM3QlksSUFBSSxDQUFDLENBQUMsQ0FDTkMsUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFHLENBQUMsQ0FBQyxDQUM3QkosV0FBVyxDQUFDLGdDQUFnQyxDQUFDLEVBQ2hEWCxJQUFJLENBQUMseUJBQXlCLENBQUMsQ0FDNUJZLElBQUksQ0FBQyxDQUFDLENBQ05DLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBRyxDQUFDLENBQUMsQ0FDN0JKLFdBQVcsQ0FBQywrQkFBK0IsQ0FBQyxFQUMvQ1gsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQzFCWSxJQUFJLENBQUMsQ0FBQyxDQUNOQyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUksQ0FBQyxDQUFDLENBQzlCSixXQUFXLENBQUMsb0NBQW9DLENBQUMsRUFDcERYLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUN4QlksSUFBSSxDQUFDLENBQUMsQ0FDTkMsUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFHLENBQUMsQ0FBQyxDQUM3QkosV0FBVyxDQUFDLDBCQUEwQixDQUFDLEVBQzFDWCxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FDekJZLElBQUksQ0FBQyxDQUFDLENBQ05DLFFBQVEsQ0FBQztFQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFQyxHQUFHLEVBQUU7QUFBRyxDQUFDLENBQUMsQ0FDN0JKLFdBQVcsQ0FBQywyQkFBMkIsQ0FBQyxFQUMzQ1gsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQzNCWSxJQUFJLENBQUMsQ0FBQyxDQUNOQyxRQUFRLENBQUM7RUFBRUMsR0FBRyxFQUFFLENBQUM7RUFBRUMsR0FBRyxFQUFFO0FBQUcsQ0FBQyxDQUFDLENBQzdCSixXQUFXLENBQUMsb0NBQW9DLENBQUMsRUFDcERYLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUMzQlksSUFBSSxDQUFDLENBQUMsQ0FDTkMsUUFBUSxDQUFDO0VBQUVDLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFHLENBQUMsQ0FBQyxDQUM3QkosV0FBVyxDQUFDLGdDQUFnQyxDQUFDLEVBQ2hEWCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQ1ZrQixPQUFPLENBQUM7RUFBRUosR0FBRyxFQUFFO0FBQUUsQ0FBQyxDQUFDLENBQ25CSCxXQUFXLENBQUMsK0JBQStCLENBQUMsRUFDL0NYLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUN0Qm1CLFNBQVMsQ0FBQyxDQUFDLENBQ1hSLFdBQVcsQ0FBQyw4QkFBOEIsQ0FBQyxFQUM5Q1gsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQ3JCb0IsS0FBSyxDQUFDO0VBQUVOLEdBQUcsRUFBRSxDQUFDO0VBQUVDLEdBQUcsRUFBRTtBQUFHLENBQUMsQ0FBQyxDQUMxQkosV0FBVyxDQUFDLG1DQUFtQyxDQUFDLEVBQ25EWCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FDbkJnQixRQUFRLENBQUMsQ0FBQyxDQUNWSixJQUFJLENBQUMsQ0FBQyxDQUNOQyxRQUFRLENBQUM7RUFBRUUsR0FBRyxFQUFFO0FBQUksQ0FBQyxDQUFDLENBQ3RCSixXQUFXLENBQUMsa0RBQWtELENBQUMsQ0FDbkU7O0FBRUQ7QUFDQWIsTUFBTSxDQUFDdUIsSUFBSSxDQUFDLEdBQUcsRUFBRWIscUJBQXFCLEVBQUVELGlCQUFpQixFQUFFLE9BQU9lLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzdFLElBQUk7SUFDRjtJQUNBLE1BQU1DLE1BQU0sR0FBR3ZCLGdCQUFnQixDQUFDcUIsR0FBRyxDQUFDO0lBQ3BDLElBQUksQ0FBQ0UsTUFBTSxDQUFDQyxPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ3JCLE9BQU9GLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUsa0JBQWtCO1VBQ3hCQyxPQUFPLEVBQUUsb0JBQW9CO1VBQzdCQyxPQUFPLEVBQUVSLE1BQU0sQ0FBQ1MsS0FBSyxDQUFDO1FBQ3hCO01BQ0YsQ0FBQyxDQUFDO0lBQ0o7SUFFQSxNQUFNO01BQ0pDLFNBQVM7TUFDVEMsZUFBZTtNQUNmQyxjQUFjO01BQ2RDLEtBQUssRUFBRUMsWUFBWTtNQUNuQkMsS0FBSztNQUNMQztJQUNGLENBQUMsR0FBR2xCLEdBQUcsQ0FBQ3RCLElBQUk7O0lBRVo7SUFDQSxNQUFNeUMsVUFBVSxHQUFHLEVBQUU7SUFDckIsSUFBSUMsUUFBUSxHQUFHLENBQUM7O0lBRWhCO0lBQ0EsTUFBTUMsVUFBVSxHQUFHTCxZQUFZLENBQUNNLEdBQUcsQ0FBQ0MsSUFBSSxJQUFJQSxJQUFJLENBQUNDLFNBQVMsQ0FBQztJQUMzRCxNQUFNQyxRQUFRLEdBQUcsTUFBTTVDLE9BQU8sQ0FBQzZDLElBQUksQ0FBQztNQUFFQyxHQUFHLEVBQUU7UUFBRUMsR0FBRyxFQUFFUDtNQUFXO0lBQUUsQ0FBQyxDQUFDO0lBQ2pFLE1BQU1RLFVBQVUsR0FBRyxJQUFJQyxHQUFHLENBQUNMLFFBQVEsQ0FBQ0gsR0FBRyxDQUFDUyxDQUFDLElBQUksQ0FBQ0EsQ0FBQyxDQUFDSixHQUFHLENBQUNLLFFBQVEsQ0FBQyxDQUFDLEVBQUVELENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFcEUsS0FBSyxNQUFNUixJQUFJLElBQUlQLFlBQVksRUFBRTtNQUMvQixNQUFNaUIsT0FBTyxHQUFHSixVQUFVLENBQUNLLEdBQUcsQ0FBQ1gsSUFBSSxDQUFDQyxTQUFTLENBQUM7TUFFOUMsSUFBSSxDQUFDUyxPQUFPLElBQUksQ0FBQ0EsT0FBTyxDQUFDRSxRQUFRLEVBQUU7UUFDakMsT0FBT2xDLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFDMUJDLE9BQU8sRUFBRSxLQUFLO1VBQ2RDLEtBQUssRUFBRTtZQUNMQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3ZCQyxPQUFPLEVBQUUsV0FBV2MsSUFBSSxDQUFDQyxTQUFTO1VBQ3BDO1FBQ0YsQ0FBQyxDQUFDO01BQ0o7TUFFQSxNQUFNWSxTQUFTLEdBQUdILE9BQU8sQ0FBQ0ksS0FBSyxHQUFHZCxJQUFJLENBQUNlLFFBQVE7TUFDL0NsQixRQUFRLElBQUlnQixTQUFTO01BRXJCakIsVUFBVSxDQUFDb0IsSUFBSSxDQUFDO1FBQ2ROLE9BQU8sRUFBRUEsT0FBTyxDQUFDTixHQUFHO1FBQ3BCVyxRQUFRLEVBQUVmLElBQUksQ0FBQ2UsUUFBUTtRQUN2QkQsS0FBSyxFQUFFSixPQUFPLENBQUNJLEtBQUs7UUFDcEJHLFVBQVUsRUFBRTtVQUNWQyxJQUFJLEVBQUVSLE9BQU8sQ0FBQ08sVUFBVSxDQUFDQyxJQUFJO1VBQzdCQyxLQUFLLEVBQUVULE9BQU8sQ0FBQ08sVUFBVSxDQUFDRSxLQUFLO1VBQy9CQyxXQUFXLEVBQUVWLE9BQU8sQ0FBQ08sVUFBVSxDQUFDRyxXQUFXO1VBQzNDQyxRQUFRLEVBQUU7UUFDWjtNQUNGLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTUMsR0FBRyxHQUFHQyxJQUFJLENBQUNDLEtBQUssQ0FBQzNCLFFBQVEsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDckQsTUFBTTRCLFFBQVEsR0FBRzVCLFFBQVEsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQzNDLE1BQU02QixLQUFLLEdBQUdILElBQUksQ0FBQ0MsS0FBSyxDQUFDLENBQUMzQixRQUFRLEdBQUd5QixHQUFHLEdBQUdHLFFBQVEsSUFBSSxHQUFHLENBQUMsR0FBRyxHQUFHOztJQUVqRTtJQUNBLE1BQU1FLFNBQVMsR0FBRztNQUNoQnRDLFNBQVM7TUFDVEcsS0FBSyxFQUFFSSxVQUFVO01BQ2pCTixlQUFlO01BQ2ZDLGNBQWM7TUFDZE0sUUFBUSxFQUFFMEIsSUFBSSxDQUFDQyxLQUFLLENBQUMzQixRQUFRLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRztNQUMxQ3lCLEdBQUc7TUFDSEcsUUFBUTtNQUNSQyxLQUFLO01BQ0xFLE9BQU8sRUFBRTtRQUNQQyxNQUFNLEVBQUUsT0FBTztRQUFFO1FBQ2pCaEQsTUFBTSxFQUFFO01BQ1YsQ0FBQztNQUNEQSxNQUFNLEVBQUUsU0FBUztNQUNqQmEsS0FBSztNQUNMQztJQUNGLENBQUM7O0lBRUQ7SUFDQTs7SUFFQSxNQUFNbUMsS0FBSyxHQUFHLE1BQU16RSxLQUFLLENBQUMwRSxNQUFNLENBQUNKLFNBQVMsQ0FBQzs7SUFFM0M7SUFDQSxNQUFNRyxLQUFLLENBQUNFLFFBQVEsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLENBQUM7O0lBRXpEO0lBQ0EsSUFBSTtNQUNGLE1BQU07UUFBRUM7TUFBc0IsQ0FBQyxHQUFHakYsT0FBTyxDQUFDLHVCQUF1QixDQUFDO01BRWxFLE1BQU1rRixTQUFTLEdBQUc7UUFDaEJDLFdBQVcsRUFBRUwsS0FBSyxDQUFDSyxXQUFXO1FBQzlCQyxZQUFZLEVBQUUsR0FBRy9DLFNBQVMsQ0FBQ2dELFNBQVMsSUFBSWhELFNBQVMsQ0FBQ2lELFFBQVEsRUFBRTtRQUM1RDlDLEtBQUssRUFBRXNDLEtBQUssQ0FBQ3RDLEtBQUssQ0FBQ08sR0FBRyxDQUFDQyxJQUFJLEtBQUs7VUFDOUJ1QyxXQUFXLEVBQUV2QyxJQUFJLENBQUNVLE9BQU8sQ0FBQ1EsSUFBSTtVQUM5QkgsUUFBUSxFQUFFZixJQUFJLENBQUNlLFFBQVE7VUFDdkJELEtBQUssRUFBRWQsSUFBSSxDQUFDYztRQUNkLENBQUMsQ0FBQyxDQUFDO1FBQ0hZLEtBQUssRUFBRUksS0FBSyxDQUFDSixLQUFLO1FBQ2xCcEMsZUFBZSxFQUFFd0MsS0FBSyxDQUFDeEM7TUFDekIsQ0FBQztNQUVELE1BQU1rRCxXQUFXLEdBQUcsTUFBTVAscUJBQXFCLENBQUM1QyxTQUFTLENBQUM4QixLQUFLLEVBQUVlLFNBQVMsQ0FBQztNQUMzRSxJQUFJLENBQUNNLFdBQVcsQ0FBQ3pELE9BQU8sRUFBRTtRQUN4QjBELE9BQU8sQ0FBQ3pELEtBQUssQ0FBQywwQ0FBMEMsRUFBRXdELFdBQVcsQ0FBQ3hELEtBQUssQ0FBQztNQUM5RTtJQUNGLENBQUMsQ0FBQyxPQUFPMEQsVUFBVSxFQUFFO01BQ25CRCxPQUFPLENBQUN6RCxLQUFLLENBQUMseUNBQXlDLEVBQUUwRCxVQUFVLENBQUM7SUFDdEU7O0lBRUE7SUFDQTs7SUFFQWhFLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDbkJDLE9BQU8sRUFBRSxJQUFJO01BQ2JHLE9BQU8sRUFBRSw0QkFBNEI7TUFDckM0QyxLQUFLLEVBQUU7UUFDTDFCLEdBQUcsRUFBRTBCLEtBQUssQ0FBQzFCLEdBQUc7UUFDZCtCLFdBQVcsRUFBRUwsS0FBSyxDQUFDSyxXQUFXO1FBQzlCVCxLQUFLLEVBQUVJLEtBQUssQ0FBQ0osS0FBSztRQUNsQjdDLE1BQU0sRUFBRWlELEtBQUssQ0FBQ2pELE1BQU07UUFDcEI4RCxTQUFTLEVBQUViLEtBQUssQ0FBQ2E7TUFDbkI7SUFDRixDQUFDLENBQUM7RUFFSixDQUFDLENBQUMsT0FBTzNELEtBQUssRUFBRTtJQUNkeUQsT0FBTyxDQUFDekQsS0FBSyxDQUFDLHVCQUF1QixFQUFFQSxLQUFLLENBQUM7SUFDN0NOLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDbkJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLEtBQUssRUFBRTtRQUNMQyxJQUFJLEVBQUUsc0JBQXNCO1FBQzVCQyxPQUFPLEVBQUU7TUFDWDtJQUNGLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FqQyxNQUFNLENBQUN1QixJQUFJLENBQUMsUUFBUSxFQUFFYixxQkFBcUIsRUFBRUQsaUJBQWlCLEVBQUUsT0FBT2UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDbEYsSUFBSTtJQUNGO0lBQ0EsTUFBTUMsTUFBTSxHQUFHdkIsZ0JBQWdCLENBQUNxQixHQUFHLENBQUM7SUFDcEMsSUFBSSxDQUFDRSxNQUFNLENBQUNDLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDckIsT0FBT0YsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsT0FBTyxFQUFFLEtBQUs7UUFDZEMsS0FBSyxFQUFFO1VBQ0xDLElBQUksRUFBRSxrQkFBa0I7VUFDeEJDLE9BQU8sRUFBRSxvQkFBb0I7VUFDN0JDLE9BQU8sRUFBRVIsTUFBTSxDQUFDUyxLQUFLLENBQUM7UUFDeEI7TUFDRixDQUFDLENBQUM7SUFDSjtJQUVBLE1BQU07TUFDSkMsU0FBUztNQUNUQyxlQUFlO01BQ2ZDLGNBQWM7TUFDZEMsS0FBSyxFQUFFQyxZQUFZO01BQ25CQyxLQUFLO01BQ0xDO0lBQ0YsQ0FBQyxHQUFHbEIsR0FBRyxDQUFDdEIsSUFBSTs7SUFFWjtJQUNBLE1BQU15QyxVQUFVLEdBQUcsRUFBRTtJQUNyQixJQUFJQyxRQUFRLEdBQUcsQ0FBQzs7SUFFaEI7SUFDQSxNQUFNQyxVQUFVLEdBQUdMLFlBQVksQ0FBQ00sR0FBRyxDQUFDQyxJQUFJLElBQUlBLElBQUksQ0FBQ0MsU0FBUyxDQUFDO0lBQzNELE1BQU1DLFFBQVEsR0FBRyxNQUFNNUMsT0FBTyxDQUFDNkMsSUFBSSxDQUFDO01BQUVDLEdBQUcsRUFBRTtRQUFFQyxHQUFHLEVBQUVQO01BQVc7SUFBRSxDQUFDLENBQUM7SUFDakUsTUFBTVEsVUFBVSxHQUFHLElBQUlDLEdBQUcsQ0FBQ0wsUUFBUSxDQUFDSCxHQUFHLENBQUNTLENBQUMsSUFBSSxDQUFDQSxDQUFDLENBQUNKLEdBQUcsQ0FBQ0ssUUFBUSxDQUFDLENBQUMsRUFBRUQsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVwRSxLQUFLLE1BQU1SLElBQUksSUFBSVAsWUFBWSxFQUFFO01BQy9CLE1BQU1pQixPQUFPLEdBQUdKLFVBQVUsQ0FBQ0ssR0FBRyxDQUFDWCxJQUFJLENBQUNDLFNBQVMsQ0FBQztNQUU5QyxJQUFJLENBQUNTLE9BQU8sSUFBSSxDQUFDQSxPQUFPLENBQUNFLFFBQVEsRUFBRTtRQUNqQyxPQUFPbEMsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUMxQkMsT0FBTyxFQUFFLEtBQUs7VUFDZEMsS0FBSyxFQUFFO1lBQ0xDLElBQUksRUFBRSxpQkFBaUI7WUFDdkJDLE9BQU8sRUFBRSxXQUFXYyxJQUFJLENBQUNDLFNBQVM7VUFDcEM7UUFDRixDQUFDLENBQUM7TUFDSjtNQUVBLE1BQU1ZLFNBQVMsR0FBR0gsT0FBTyxDQUFDSSxLQUFLLEdBQUdkLElBQUksQ0FBQ2UsUUFBUTtNQUMvQ2xCLFFBQVEsSUFBSWdCLFNBQVM7TUFFckJqQixVQUFVLENBQUNvQixJQUFJLENBQUM7UUFDZE4sT0FBTyxFQUFFQSxPQUFPLENBQUNOLEdBQUc7UUFDcEJXLFFBQVEsRUFBRWYsSUFBSSxDQUFDZSxRQUFRO1FBQ3ZCRCxLQUFLLEVBQUVKLE9BQU8sQ0FBQ0ksS0FBSztRQUNwQkcsVUFBVSxFQUFFO1VBQ1ZDLElBQUksRUFBRVIsT0FBTyxDQUFDTyxVQUFVLENBQUNDLElBQUk7VUFDN0JDLEtBQUssRUFBRVQsT0FBTyxDQUFDTyxVQUFVLENBQUNFLEtBQUs7VUFDL0JDLFdBQVcsRUFBRVYsT0FBTyxDQUFDTyxVQUFVLENBQUNHLFdBQVc7VUFDM0NDLFFBQVEsRUFBRSxLQUFLO1VBQ2Z1QixvQkFBb0IsRUFBRTtRQUN4QjtNQUNGLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsTUFBTXRCLEdBQUcsR0FBR3pCLFFBQVEsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUM3QixNQUFNNEIsUUFBUSxHQUFHNUIsUUFBUSxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDM0MsTUFBTTZCLEtBQUssR0FBRzdCLFFBQVEsR0FBR3lCLEdBQUcsR0FBR0csUUFBUTs7SUFFdkM7SUFDQSxNQUFNRSxTQUFTLEdBQUc7TUFDaEJ0QyxTQUFTO01BQ1RHLEtBQUssRUFBRUksVUFBVTtNQUNqQk4sZUFBZTtNQUNmQyxjQUFjLEVBQUVBLGNBQWMsSUFBSUQsZUFBZTtNQUNqRE8sUUFBUTtNQUNSeUIsR0FBRztNQUNIRyxRQUFRO01BQ1JDLEtBQUs7TUFDTEUsT0FBTyxFQUFFO1FBQ1BDLE1BQU0sRUFBRSxNQUFNO1FBQ2RoRCxNQUFNLEVBQUU7TUFDVixDQUFDO01BQ0RBLE1BQU0sRUFBRSxTQUFTO01BQ2pCYSxLQUFLO01BQ0xDO0lBQ0YsQ0FBQztJQUVELE1BQU1tQyxLQUFLLEdBQUcsTUFBTXpFLEtBQUssQ0FBQzBFLE1BQU0sQ0FBQ0osU0FBUyxDQUFDO0lBRTNDakQsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNuQkMsT0FBTyxFQUFFLElBQUk7TUFDYkcsT0FBTyxFQUFFLGtDQUFrQztNQUMzQzJELElBQUksRUFBRTtRQUNKZixLQUFLLEVBQUU7VUFDTDFCLEdBQUcsRUFBRTBCLEtBQUssQ0FBQzFCLEdBQUc7VUFDZCtCLFdBQVcsRUFBRUwsS0FBSyxDQUFDSyxXQUFXO1VBQzlCOUMsU0FBUyxFQUFFeUMsS0FBSyxDQUFDekMsU0FBUztVQUMxQkcsS0FBSyxFQUFFc0MsS0FBSyxDQUFDdEMsS0FBSztVQUNsQkYsZUFBZSxFQUFFd0MsS0FBSyxDQUFDeEMsZUFBZTtVQUN0Q0MsY0FBYyxFQUFFdUMsS0FBSyxDQUFDdkMsY0FBYztVQUNwQ00sUUFBUSxFQUFFaUMsS0FBSyxDQUFDakMsUUFBUTtVQUN4QnlCLEdBQUcsRUFBRVEsS0FBSyxDQUFDUixHQUFHO1VBQ2RHLFFBQVEsRUFBRUssS0FBSyxDQUFDTCxRQUFRO1VBQ3hCQyxLQUFLLEVBQUVJLEtBQUssQ0FBQ0osS0FBSztVQUNsQjdDLE1BQU0sRUFBRWlELEtBQUssQ0FBQ2pELE1BQU07VUFDcEI4RCxTQUFTLEVBQUViLEtBQUssQ0FBQ2E7UUFDbkI7TUFDRjtJQUNGLENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPM0QsS0FBSyxFQUFFO0lBQ2R5RCxPQUFPLENBQUN6RCxLQUFLLENBQUMsNkJBQTZCLEVBQUVBLEtBQUssQ0FBQztJQUNuRE4sR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNuQkMsT0FBTyxFQUFFLEtBQUs7TUFDZEMsS0FBSyxFQUFFO1FBQ0xDLElBQUksRUFBRSxzQkFBc0I7UUFDNUJDLE9BQU8sRUFBRTtNQUNYO0lBQ0YsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQWpDLE1BQU0sQ0FBQ3VCLElBQUksQ0FBQyxhQUFhLEVBQUVoQixpQkFBaUIsRUFBRUUsaUJBQWlCLEVBQUUsT0FBT2UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDbkYsSUFBSTtJQUNGO0lBQ0EsSUFBSSxDQUFDRCxHQUFHLENBQUNxRSxJQUFJLEVBQUU7TUFDYixPQUFPcEUsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsT0FBTyxFQUFFLEtBQUs7UUFDZEMsS0FBSyxFQUFFO1VBQ0xDLElBQUksRUFBRSx5QkFBeUI7VUFDL0JDLE9BQU8sRUFBRTtRQUNYO01BQ0YsQ0FBQyxDQUFDO0lBQ0o7SUFFQSxNQUFNO01BQ0pJLGVBQWU7TUFDZkMsY0FBYztNQUNkQyxLQUFLLEVBQUVDLFlBQVk7TUFDbkJDLEtBQUs7TUFDTEMsY0FBYztNQUNkb0QsbUJBQW1CLEdBQUc7SUFDeEIsQ0FBQyxHQUFHdEUsR0FBRyxDQUFDdEIsSUFBSTs7SUFFWjtJQUNBLElBQUk2RixvQkFBb0IsR0FBRzFELGVBQWU7SUFDMUMsSUFBSTJELG1CQUFtQixHQUFHMUQsY0FBYztJQUV4QyxJQUFJd0QsbUJBQW1CLEVBQUU7TUFDdkIsTUFBTUcsZUFBZSxHQUFHekUsR0FBRyxDQUFDcUUsSUFBSSxDQUFDSyx5QkFBeUIsQ0FBQyxDQUFDO01BQzVELE1BQU1DLGNBQWMsR0FBRzNFLEdBQUcsQ0FBQ3FFLElBQUksQ0FBQ08sd0JBQXdCLENBQUMsQ0FBQztNQUUxRCxJQUFJSCxlQUFlLEVBQUU7UUFDbkJGLG9CQUFvQixHQUFHRSxlQUFlLENBQUNJLFFBQVEsQ0FBQyxDQUFDO1FBQ2pELE9BQU9OLG9CQUFvQixDQUFDNUMsR0FBRztRQUMvQixPQUFPNEMsb0JBQW9CLENBQUNPLElBQUk7UUFDaEMsT0FBT1Asb0JBQW9CLENBQUNRLFNBQVM7TUFDdkM7TUFFQSxJQUFJSixjQUFjLEVBQUU7UUFDbEJILG1CQUFtQixHQUFHRyxjQUFjLENBQUNFLFFBQVEsQ0FBQyxDQUFDO1FBQy9DLE9BQU9MLG1CQUFtQixDQUFDN0MsR0FBRztRQUM5QixPQUFPNkMsbUJBQW1CLENBQUNNLElBQUk7UUFDL0IsT0FBT04sbUJBQW1CLENBQUNPLFNBQVM7TUFDdEM7SUFDRjs7SUFFQTtJQUNBLElBQUksQ0FBQ1Isb0JBQW9CLElBQUksQ0FBQ0MsbUJBQW1CLEVBQUU7TUFDakQsT0FBT3ZFLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUsbUJBQW1CO1VBQ3pCQyxPQUFPLEVBQUU7UUFDWDtNQUNGLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0EsSUFBSXVFLGNBQWMsR0FBR2hFLFlBQVk7SUFDakMsSUFBSSxDQUFDZ0UsY0FBYyxJQUFJQSxjQUFjLENBQUNDLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDbEQ7TUFDQSxNQUFNWixJQUFJLEdBQUcsTUFBTXZGLElBQUksQ0FBQ29HLFFBQVEsQ0FBQ2xGLEdBQUcsQ0FBQ3FFLElBQUksQ0FBQzFDLEdBQUcsQ0FBQztNQUM5QyxJQUFJLENBQUMwQyxJQUFJLENBQUNjLElBQUksSUFBSSxDQUFDZCxJQUFJLENBQUNjLElBQUksQ0FBQ3BFLEtBQUssSUFBSXNELElBQUksQ0FBQ2MsSUFBSSxDQUFDcEUsS0FBSyxDQUFDa0UsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUNsRSxPQUFPaEYsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUMxQkMsT0FBTyxFQUFFLEtBQUs7VUFDZEMsS0FBSyxFQUFFO1lBQ0xDLElBQUksRUFBRSxZQUFZO1lBQ2xCQyxPQUFPLEVBQUU7VUFDWDtRQUNGLENBQUMsQ0FBQztNQUNKO01BQ0F1RSxjQUFjLEdBQUdYLElBQUksQ0FBQ2MsSUFBSSxDQUFDcEUsS0FBSyxDQUFDTyxHQUFHLENBQUNDLElBQUksS0FBSztRQUM1Q0MsU0FBUyxFQUFFRCxJQUFJLENBQUNVLE9BQU87UUFDdkJLLFFBQVEsRUFBRWYsSUFBSSxDQUFDZTtNQUNqQixDQUFDLENBQUMsQ0FBQztJQUNMOztJQUVBO0lBQ0EsTUFBTW5CLFVBQVUsR0FBRyxFQUFFO0lBQ3JCLElBQUlDLFFBQVEsR0FBRyxDQUFDO0lBRWhCLEtBQUssTUFBTUcsSUFBSSxJQUFJeUQsY0FBYyxFQUFFO01BQ2pDLE1BQU0vQyxPQUFPLEdBQUcsTUFBTXBELE9BQU8sQ0FBQ3FHLFFBQVEsQ0FBQzNELElBQUksQ0FBQ0MsU0FBUyxDQUFDO01BRXRELElBQUksQ0FBQ1MsT0FBTyxJQUFJLENBQUNBLE9BQU8sQ0FBQ0UsUUFBUSxFQUFFO1FBQ2pDLE9BQU9sQyxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQzFCQyxPQUFPLEVBQUUsS0FBSztVQUNkQyxLQUFLLEVBQUU7WUFDTEMsSUFBSSxFQUFFLGlCQUFpQjtZQUN2QkMsT0FBTyxFQUFFLFdBQVdjLElBQUksQ0FBQ0MsU0FBUztVQUNwQztRQUNGLENBQUMsQ0FBQztNQUNKO01BRUEsTUFBTVksU0FBUyxHQUFHSCxPQUFPLENBQUNJLEtBQUssR0FBR2QsSUFBSSxDQUFDZSxRQUFRO01BQy9DbEIsUUFBUSxJQUFJZ0IsU0FBUztNQUVyQmpCLFVBQVUsQ0FBQ29CLElBQUksQ0FBQztRQUNkTixPQUFPLEVBQUVBLE9BQU8sQ0FBQ04sR0FBRztRQUNwQlcsUUFBUSxFQUFFZixJQUFJLENBQUNlLFFBQVE7UUFDdkJELEtBQUssRUFBRUosT0FBTyxDQUFDSSxLQUFLO1FBQ3BCRyxVQUFVLEVBQUU7VUFDVkMsSUFBSSxFQUFFUixPQUFPLENBQUNPLFVBQVUsQ0FBQ0MsSUFBSTtVQUM3QkMsS0FBSyxFQUFFVCxPQUFPLENBQUNPLFVBQVUsQ0FBQ0UsS0FBSztVQUMvQkMsV0FBVyxFQUFFVixPQUFPLENBQUNPLFVBQVUsQ0FBQ0csV0FBVztVQUMzQ0MsUUFBUSxFQUFFO1FBQ1o7TUFDRixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLE1BQU1DLEdBQUcsR0FBR0MsSUFBSSxDQUFDQyxLQUFLLENBQUMzQixRQUFRLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUc7SUFDbkQsTUFBTTRCLFFBQVEsR0FBRzVCLFFBQVEsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLElBQUk7SUFDekMsTUFBTTZCLEtBQUssR0FBR0gsSUFBSSxDQUFDQyxLQUFLLENBQUMsQ0FBQzNCLFFBQVEsR0FBR3lCLEdBQUcsR0FBR0csUUFBUSxJQUFJLEdBQUcsQ0FBQyxHQUFHLEdBQUc7O0lBRWpFO0lBQ0EsTUFBTUUsU0FBUyxHQUFHO01BQ2hCa0MsUUFBUSxFQUFFcEYsR0FBRyxDQUFDcUUsSUFBSSxDQUFDMUMsR0FBRztNQUN0QlosS0FBSyxFQUFFSSxVQUFVO01BQ2pCTixlQUFlLEVBQUUwRCxvQkFBb0I7TUFDckN6RCxjQUFjLEVBQUUwRCxtQkFBbUI7TUFDbkNwRCxRQUFRLEVBQUUwQixJQUFJLENBQUNDLEtBQUssQ0FBQzNCLFFBQVEsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHO01BQzFDeUIsR0FBRztNQUNIRyxRQUFRO01BQ1JDLEtBQUs7TUFDTEUsT0FBTyxFQUFFO1FBQ1BDLE1BQU0sRUFBRSxPQUFPO1FBQ2ZoRCxNQUFNLEVBQUU7TUFDVixDQUFDO01BQ0RBLE1BQU0sRUFBRSxTQUFTO01BQ2pCYSxLQUFLO01BQ0xDO0lBQ0YsQ0FBQztJQUVELE1BQU1tQyxLQUFLLEdBQUcsTUFBTXpFLEtBQUssQ0FBQzBFLE1BQU0sQ0FBQ0osU0FBUyxDQUFDOztJQUUzQztJQUNBLE1BQU1HLEtBQUssQ0FBQ0UsUUFBUSxDQUFDLGVBQWUsRUFBRSxrQkFBa0IsQ0FBQzs7SUFFekQ7SUFDQSxJQUFJO01BQ0YsSUFBSXZELEdBQUcsQ0FBQ3FFLElBQUksQ0FBQ2dCLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFO1FBQzdDLE1BQU07VUFBRTdCO1FBQXNCLENBQUMsR0FBR2pGLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztRQUVsRSxNQUFNa0YsU0FBUyxHQUFHO1VBQ2hCQyxXQUFXLEVBQUVMLEtBQUssQ0FBQ0ssV0FBVztVQUM5QkMsWUFBWSxFQUFFLEdBQUczRCxHQUFHLENBQUNxRSxJQUFJLENBQUNULFNBQVMsSUFBSTVELEdBQUcsQ0FBQ3FFLElBQUksQ0FBQ1IsUUFBUSxFQUFFO1VBQzFEOUMsS0FBSyxFQUFFc0MsS0FBSyxDQUFDdEMsS0FBSyxDQUFDTyxHQUFHLENBQUNDLElBQUksS0FBSztZQUM5QnVDLFdBQVcsRUFBRXZDLElBQUksQ0FBQ1UsT0FBTyxDQUFDUSxJQUFJO1lBQzlCSCxRQUFRLEVBQUVmLElBQUksQ0FBQ2UsUUFBUTtZQUN2QkQsS0FBSyxFQUFFZCxJQUFJLENBQUNjO1VBQ2QsQ0FBQyxDQUFDLENBQUM7VUFDSFksS0FBSyxFQUFFSSxLQUFLLENBQUNKLEtBQUs7VUFDbEJwQyxlQUFlLEVBQUV3QyxLQUFLLENBQUN4QztRQUN6QixDQUFDO1FBRUQsTUFBTWtELFdBQVcsR0FBRyxNQUFNUCxxQkFBcUIsQ0FBQ3hELEdBQUcsQ0FBQ3FFLElBQUksQ0FBQzNCLEtBQUssRUFBRWUsU0FBUyxDQUFDO1FBQzFFLElBQUksQ0FBQ00sV0FBVyxDQUFDekQsT0FBTyxFQUFFO1VBQ3hCMEQsT0FBTyxDQUFDekQsS0FBSyxDQUFDLDBDQUEwQyxFQUFFd0QsV0FBVyxDQUFDeEQsS0FBSyxDQUFDO1FBQzlFO01BQ0Y7SUFDRixDQUFDLENBQUMsT0FBTzBELFVBQVUsRUFBRTtNQUNuQkQsT0FBTyxDQUFDekQsS0FBSyxDQUFDLHlDQUF5QyxFQUFFMEQsVUFBVSxDQUFDO0lBQ3RFOztJQUVBO0lBQ0EsTUFBTUksSUFBSSxHQUFHLE1BQU12RixJQUFJLENBQUNvRyxRQUFRLENBQUNsRixHQUFHLENBQUNxRSxJQUFJLENBQUMxQyxHQUFHLENBQUM7SUFDOUMwQyxJQUFJLENBQUNjLElBQUksR0FBRztNQUFFcEUsS0FBSyxFQUFFLEVBQUU7TUFBRXVFLFNBQVMsRUFBRSxJQUFJQyxJQUFJLENBQUM7SUFBRSxDQUFDO0lBQ2hELE1BQU1sQixJQUFJLENBQUNtQixJQUFJLENBQUMsQ0FBQzs7SUFFakI7SUFDQSxJQUFJeEYsR0FBRyxDQUFDeUYsT0FBTyxJQUFJekYsR0FBRyxDQUFDeUYsT0FBTyxDQUFDTixJQUFJLEVBQUU7TUFDbkNuRixHQUFHLENBQUN5RixPQUFPLENBQUNOLElBQUksR0FBRyxFQUFFO0lBQ3ZCO0lBRUFsRixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxPQUFPLEVBQUUsSUFBSTtNQUNiRyxPQUFPLEVBQUUsNEJBQTRCO01BQ3JDNEMsS0FBSyxFQUFFO1FBQ0wxQixHQUFHLEVBQUUwQixLQUFLLENBQUMxQixHQUFHO1FBQ2QrQixXQUFXLEVBQUVMLEtBQUssQ0FBQ0ssV0FBVztRQUM5QlQsS0FBSyxFQUFFSSxLQUFLLENBQUNKLEtBQUs7UUFDbEI3QyxNQUFNLEVBQUVpRCxLQUFLLENBQUNqRCxNQUFNO1FBQ3BCOEQsU0FBUyxFQUFFYixLQUFLLENBQUNhO01BQ25CO0lBQ0YsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU8zRCxLQUFLLEVBQUU7SUFDZHlELE9BQU8sQ0FBQ3pELEtBQUssQ0FBQyx1Q0FBdUMsRUFBRUEsS0FBSyxDQUFDO0lBQzdETixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxPQUFPLEVBQUUsS0FBSztNQUNkQyxLQUFLLEVBQUU7UUFDTEMsSUFBSSxFQUFFLHNCQUFzQjtRQUM1QkMsT0FBTyxFQUFFO01BQ1g7SUFDRixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBakMsTUFBTSxDQUFDMEQsR0FBRyxDQUFDLE1BQU0sRUFBRW5ELGlCQUFpQixFQUFFLE9BQU9pQixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN4RCxJQUFJO0lBQ0YsTUFBTW9ELEtBQUssR0FBRyxNQUFNekUsS0FBSyxDQUFDc0csUUFBUSxDQUFDbEYsR0FBRyxDQUFDMEYsTUFBTSxDQUFDQyxFQUFFLENBQUMsQ0FDOUNwQyxRQUFRLENBQUMsZUFBZSxFQUFFLGFBQWEsQ0FBQyxDQUN4Q0EsUUFBUSxDQUFDLFVBQVUsRUFBRSwwQkFBMEIsQ0FBQztJQUVuRCxJQUFJLENBQUNGLEtBQUssRUFBRTtNQUNWLE9BQU9wRCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxPQUFPLEVBQUUsS0FBSztRQUNkQyxLQUFLLEVBQUU7VUFDTEMsSUFBSSxFQUFFLGlCQUFpQjtVQUN2QkMsT0FBTyxFQUFFO1FBQ1g7TUFDRixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBO0lBQ0EsSUFBSVQsR0FBRyxDQUFDcUUsSUFBSSxFQUFFO01BQ1osSUFBSSxDQUFDckUsR0FBRyxDQUFDcUUsSUFBSSxDQUFDdUIsT0FBTyxJQUFJdkMsS0FBSyxDQUFDK0IsUUFBUSxJQUFJL0IsS0FBSyxDQUFDK0IsUUFBUSxDQUFDekQsR0FBRyxDQUFDSyxRQUFRLENBQUMsQ0FBQyxLQUFLaEMsR0FBRyxDQUFDcUUsSUFBSSxDQUFDMUMsR0FBRyxDQUFDSyxRQUFRLENBQUMsQ0FBQyxFQUFFO1FBQ3BHLE9BQU8vQixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQzFCQyxPQUFPLEVBQUUsS0FBSztVQUNkQyxLQUFLLEVBQUU7WUFDTEMsSUFBSSxFQUFFLGVBQWU7WUFDckJDLE9BQU8sRUFBRTtVQUNYO1FBQ0YsQ0FBQyxDQUFDO01BQ0o7SUFDRjtJQUNBOztJQUVBO0lBQ0FSLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDO01BQ1BDLE9BQU8sRUFBRSxJQUFJO01BQ2I4RCxJQUFJLEVBQUU7UUFDSmYsS0FBSyxFQUFFQSxLQUFLLENBQUN3QyxZQUFZLENBQUM7TUFDNUI7SUFDRixDQUFDLENBQUM7RUFFSixDQUFDLENBQUMsT0FBT3RGLEtBQUssRUFBRTtJQUNkeUQsT0FBTyxDQUFDekQsS0FBSyxDQUFDLHVCQUF1QixFQUFFQSxLQUFLLENBQUM7SUFDN0NOLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFDbkJDLE9BQU8sRUFBRSxLQUFLO01BQ2RDLEtBQUssRUFBRTtRQUNMQyxJQUFJLEVBQUUsbUJBQW1CO1FBQ3pCQyxPQUFPLEVBQUU7TUFDWDtJQUNGLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0FqQyxNQUFNLENBQUMwRCxHQUFHLENBQUMsR0FBRyxFQUFFbkQsaUJBQWlCLEVBQUUsT0FBT2lCLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3JELElBQUk7SUFDRitELE9BQU8sQ0FBQzhCLEdBQUcsQ0FBQyx3QkFBd0IsRUFBRTlGLEdBQUcsQ0FBQ3FFLElBQUksR0FBR3JFLEdBQUcsQ0FBQ3FFLElBQUksQ0FBQzFDLEdBQUcsR0FBRyxNQUFNLENBQUM7O0lBRXZFO0lBQ0EsSUFBSSxDQUFDM0IsR0FBRyxDQUFDcUUsSUFBSSxFQUFFO01BQ2IsT0FBT3BFLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUseUJBQXlCO1VBQy9CQyxPQUFPLEVBQUU7UUFDWDtNQUNGLENBQUMsQ0FBQztJQUNKO0lBRUEsTUFBTXNGLElBQUksR0FBR0MsUUFBUSxDQUFDaEcsR0FBRyxDQUFDaUcsS0FBSyxDQUFDRixJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzFDLE1BQU1HLEtBQUssR0FBR0YsUUFBUSxDQUFDaEcsR0FBRyxDQUFDaUcsS0FBSyxDQUFDQyxLQUFLLENBQUMsSUFBSSxFQUFFO0lBQzdDLE1BQU1DLElBQUksR0FBRyxDQUFDSixJQUFJLEdBQUcsQ0FBQyxJQUFJRyxLQUFLO0lBRy9CLE1BQU1FLE1BQU0sR0FBRyxNQUFNeEgsS0FBSyxDQUFDOEMsSUFBSSxDQUFDO01BQUUwRCxRQUFRLEVBQUVwRixHQUFHLENBQUNxRSxJQUFJLENBQUMxQztJQUFJLENBQUMsQ0FBQyxDQUN4RDRCLFFBQVEsQ0FBQyxlQUFlLEVBQUUsd0JBQXdCLENBQUMsQ0FDbkQ4QyxJQUFJLENBQUM7TUFBRW5DLFNBQVMsRUFBRSxDQUFDO0lBQUUsQ0FBQyxDQUFDLENBQ3ZCaUMsSUFBSSxDQUFDQSxJQUFJLENBQUMsQ0FDVkQsS0FBSyxDQUFDQSxLQUFLLENBQUM7SUFFZixNQUFNSSxXQUFXLEdBQUcsTUFBTTFILEtBQUssQ0FBQzJILGNBQWMsQ0FBQztNQUFFbkIsUUFBUSxFQUFFcEYsR0FBRyxDQUFDcUUsSUFBSSxDQUFDMUM7SUFBSSxDQUFDLENBQUM7SUFDMUUsTUFBTTZFLFVBQVUsR0FBRzFELElBQUksQ0FBQzJELElBQUksQ0FBQ0gsV0FBVyxHQUFHSixLQUFLLENBQUM7O0lBSWpEO0lBQ0EsTUFBTVEsWUFBWSxHQUFHTixNQUFNLENBQUM5RSxHQUFHLENBQUMrQixLQUFLLElBQUlBLEtBQUssQ0FBQ3dDLFlBQVksQ0FBQyxDQUFDLENBQUM7SUFFOUQ1RixHQUFHLENBQUNJLElBQUksQ0FBQztNQUNQQyxPQUFPLEVBQUUsSUFBSTtNQUNiOEQsSUFBSSxFQUFFO1FBQ0pnQyxNQUFNLEVBQUVNLFlBQVk7UUFDcEJDLFVBQVUsRUFBRTtVQUNWQyxXQUFXLEVBQUViLElBQUk7VUFDakJTLFVBQVU7VUFDVkYsV0FBVztVQUNYTyxXQUFXLEVBQUVkLElBQUksR0FBR1MsVUFBVTtVQUM5Qk0sV0FBVyxFQUFFZixJQUFJLEdBQUc7UUFDdEI7TUFDRjtJQUNGLENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPeEYsS0FBSyxFQUFFO0lBQ2R5RCxPQUFPLENBQUN6RCxLQUFLLENBQUMsK0JBQStCLEVBQUVBLEtBQUssQ0FBQztJQUNyRE4sR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUNuQkMsT0FBTyxFQUFFLEtBQUs7TUFDZEMsS0FBSyxFQUFFO1FBQ0xDLElBQUksRUFBRSxxQkFBcUI7UUFDM0JDLE9BQU8sRUFBRTtNQUNYO0lBQ0YsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQWpDLE1BQU0sQ0FBQ3VCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRWYsV0FBVyxFQUFFLE9BQU9nQixHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUM3RCxJQUFJO0lBQ0YsTUFBTTtNQUFFMEY7SUFBRyxDQUFDLEdBQUczRixHQUFHLENBQUMwRixNQUFNOztJQUV6QjtJQUNBLE1BQU1yQyxLQUFLLEdBQUcsTUFBTXpFLEtBQUssQ0FBQ3NHLFFBQVEsQ0FBQ1MsRUFBRSxDQUFDO0lBQ3RDLElBQUksQ0FBQ3RDLEtBQUssRUFBRTtNQUNWLE9BQU9wRCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxPQUFPLEVBQUUsS0FBSztRQUNkQyxLQUFLLEVBQUU7VUFDTEMsSUFBSSxFQUFFLGlCQUFpQjtVQUN2QkMsT0FBTyxFQUFFO1FBQ1g7TUFDRixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLElBQUk0QyxLQUFLLENBQUMrQixRQUFRLEVBQUU7TUFDbEIsT0FBT25GLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUsMEJBQTBCO1VBQ2hDQyxPQUFPLEVBQUU7UUFDWDtNQUNGLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0E0QyxLQUFLLENBQUMrQixRQUFRLEdBQUdwRixHQUFHLENBQUNxRSxJQUFJLENBQUMxQyxHQUFHO0lBQzdCLE1BQU0wQixLQUFLLENBQUNtQyxJQUFJLENBQUMsQ0FBQztJQUVsQnZGLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDO01BQ1BDLE9BQU8sRUFBRSxJQUFJO01BQ2JHLE9BQU8sRUFBRTtJQUNYLENBQUMsQ0FBQztFQUVKLENBQUMsQ0FBQyxPQUFPRixLQUFLLEVBQUU7SUFDZHlELE9BQU8sQ0FBQ3pELEtBQUssQ0FBQywwQkFBMEIsRUFBRUEsS0FBSyxDQUFDO0lBQ2hETixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxPQUFPLEVBQUUsS0FBSztNQUNkQyxLQUFLLEVBQUU7UUFDTEMsSUFBSSxFQUFFLHlCQUF5QjtRQUMvQkMsT0FBTyxFQUFFO01BQ1g7SUFDRixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQzs7QUFFRjtBQUNBakMsTUFBTSxDQUFDdUksR0FBRyxDQUFDLGFBQWEsRUFBRSxPQUFPL0csR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDNUMsSUFBSTtJQUNGLE1BQU07TUFBRUcsTUFBTTtNQUFFNEc7SUFBZSxDQUFDLEdBQUdoSCxHQUFHLENBQUN0QixJQUFJO0lBRTNDLE1BQU11SSxhQUFhLEdBQUcsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsV0FBVyxDQUFDO0lBQ3BGLElBQUksQ0FBQ0EsYUFBYSxDQUFDQyxRQUFRLENBQUM5RyxNQUFNLENBQUMsRUFBRTtNQUNuQyxPQUFPSCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxPQUFPLEVBQUUsS0FBSztRQUNkQyxLQUFLLEVBQUU7VUFDTEMsSUFBSSxFQUFFLGdCQUFnQjtVQUN0QkMsT0FBTyxFQUFFO1FBQ1g7TUFDRixDQUFDLENBQUM7SUFDSjtJQUVBLE1BQU0wRyxVQUFVLEdBQUc7TUFBRS9HO0lBQU8sQ0FBQztJQUM3QixJQUFJNEcsY0FBYyxFQUFFO01BQ2xCRyxVQUFVLENBQUNILGNBQWMsR0FBR0EsY0FBYztJQUM1QztJQUVBLE1BQU0zRCxLQUFLLEdBQUcsTUFBTXpFLEtBQUssQ0FBQ3dJLGlCQUFpQixDQUN6Q3BILEdBQUcsQ0FBQzBGLE1BQU0sQ0FBQ0MsRUFBRSxFQUNid0IsVUFBVSxFQUNWO01BQUVFLEdBQUcsRUFBRTtJQUFLLENBQ2QsQ0FBQyxDQUFDOUQsUUFBUSxDQUFDLFVBQVUsRUFBRSxzQ0FBc0MsQ0FBQztJQUU5RCxJQUFJLENBQUNGLEtBQUssRUFBRTtNQUNWLE9BQU9wRCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQzFCQyxPQUFPLEVBQUUsS0FBSztRQUNkQyxLQUFLLEVBQUU7VUFDTEMsSUFBSSxFQUFFLGlCQUFpQjtVQUN2QkMsT0FBTyxFQUFFO1FBQ1g7TUFDRixDQUFDLENBQUM7SUFDSjs7SUFFQTtJQUNBLElBQUk7TUFDRixNQUFNO1FBQUU2RztNQUFzQixDQUFDLEdBQUcvSSxPQUFPLENBQUMsdUJBQXVCLENBQUM7TUFFbEUsSUFBSWdKLGFBQWE7UUFBRTVELFlBQVk7UUFBRTZELGVBQWUsR0FBRyxJQUFJO01BRXZELElBQUluRSxLQUFLLENBQUMrQixRQUFRLEVBQUU7UUFDbEI7UUFDQW1DLGFBQWEsR0FBR2xFLEtBQUssQ0FBQytCLFFBQVEsQ0FBQzFDLEtBQUs7UUFDcENpQixZQUFZLEdBQUcsR0FBR04sS0FBSyxDQUFDK0IsUUFBUSxDQUFDeEIsU0FBUyxJQUFJUCxLQUFLLENBQUMrQixRQUFRLENBQUN2QixRQUFRLEVBQUU7UUFDdkUyRCxlQUFlLEdBQUduRSxLQUFLLENBQUMrQixRQUFRLENBQUNxQyxXQUFXLEVBQUVDLGdCQUFnQixFQUFFQyxZQUFZLEtBQUssS0FBSztNQUN4RixDQUFDLE1BQU07UUFDTDtRQUNBSixhQUFhLEdBQUdsRSxLQUFLLENBQUN6QyxTQUFTLENBQUM4QixLQUFLO1FBQ3JDaUIsWUFBWSxHQUFHLEdBQUdOLEtBQUssQ0FBQ3pDLFNBQVMsQ0FBQ2dELFNBQVMsSUFBSVAsS0FBSyxDQUFDekMsU0FBUyxDQUFDaUQsUUFBUSxFQUFFO01BQzNFO01BRUEsSUFBSTJELGVBQWUsSUFBSSxDQUFDLFlBQVksRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUNOLFFBQVEsQ0FBQzlHLE1BQU0sQ0FBQyxFQUFFO1FBQzlFLE1BQU13SCxVQUFVLEdBQUc7VUFDakJsRSxXQUFXLEVBQUVMLEtBQUssQ0FBQ0ssV0FBVztVQUM5QkMsWUFBWTtVQUNadkQsTUFBTTtVQUNONEc7UUFDRixDQUFDO1FBRUQsTUFBTWpELFdBQVcsR0FBRyxNQUFNdUQscUJBQXFCLENBQUNDLGFBQWEsRUFBRUssVUFBVSxDQUFDO1FBQzFFLElBQUksQ0FBQzdELFdBQVcsQ0FBQ3pELE9BQU8sRUFBRTtVQUN4QjBELE9BQU8sQ0FBQ3pELEtBQUssQ0FBQywyQ0FBMkMsRUFBRXdELFdBQVcsQ0FBQ3hELEtBQUssQ0FBQztRQUMvRTtNQUNGO0lBQ0YsQ0FBQyxDQUFDLE9BQU8wRCxVQUFVLEVBQUU7TUFDbkJELE9BQU8sQ0FBQ3pELEtBQUssQ0FBQywwQ0FBMEMsRUFBRTBELFVBQVUsQ0FBQztJQUN2RTtJQUVBaEUsR0FBRyxDQUFDSSxJQUFJLENBQUM7TUFDUEMsT0FBTyxFQUFFLElBQUk7TUFDYkcsT0FBTyxFQUFFLHNCQUFzQjtNQUMvQjRDLEtBQUssRUFBRTtRQUNMMUIsR0FBRyxFQUFFMEIsS0FBSyxDQUFDMUIsR0FBRztRQUNkK0IsV0FBVyxFQUFFTCxLQUFLLENBQUNLLFdBQVc7UUFDOUJ0RCxNQUFNLEVBQUVpRCxLQUFLLENBQUNqRCxNQUFNO1FBQ3BCNEcsY0FBYyxFQUFFM0QsS0FBSyxDQUFDMkQsY0FBYztRQUNwQzFCLFNBQVMsRUFBRWpDLEtBQUssQ0FBQ2lDO01BQ25CO0lBQ0YsQ0FBQyxDQUFDO0VBRUosQ0FBQyxDQUFDLE9BQU8vRSxLQUFLLEVBQUU7SUFDZHlELE9BQU8sQ0FBQ3pELEtBQUssQ0FBQyw4QkFBOEIsRUFBRUEsS0FBSyxDQUFDO0lBQ3BETixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ25CQyxPQUFPLEVBQUUsS0FBSztNQUNkQyxLQUFLLEVBQUU7UUFDTEMsSUFBSSxFQUFFLG9CQUFvQjtRQUMxQkMsT0FBTyxFQUFFO01BQ1g7SUFDRixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQztBQUVGb0gsTUFBTSxDQUFDQyxPQUFPLEdBQUd0SixNQUFNIiwiaWdub3JlTGlzdCI6W119