4fb2ef99f3ab4918b6bef10f1261bd18
const express = require('express');
const mongoose = require('mongoose');
const cors = require('cors');
const helmet = require('helmet');
const rateLimit = require('express-rate-limit');
const session = require('express-session');
const MongoStore = require('connect-mongo');
const path = require('path');
require('dotenv').config();

// Import logging and error handling
const {
  logger
} = require('./utils/logger');
const {
  globalErrorHandler
} = require('./middleware/errorHandler');
const {
  generateCSRFToken,
  csrfProtection,
  rateLimits,
  speedLimiter,
  sanitizeInput,
  securityHeaders
} = require('./middleware/security');
const app = express();

// Security middleware
app.use(helmet());
app.use(securityHeaders);
app.use(cors({
  origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:3003', 'http://localhost:5173'],
  credentials: true
}));

// Input sanitization
app.use(sanitizeInput);

// General rate limiting
app.use(rateLimits.general);

// Speed limiting for brute force protection
app.use(speedLimiter);

// Session middleware
app.use(session({
  secret: process.env.SESSION_SECRET || 'holistic-store-session-secret',
  resave: false,
  saveUninitialized: false,
  store: MongoStore.create({
    mongoUrl: process.env.MONGODB_URI || 'mongodb://localhost:27017/holistic-store',
    touchAfter: 24 * 3600 // lazy session update
  }),
  cookie: {
    secure: process.env.NODE_ENV === 'production',
    httpOnly: true,
    maxAge: 1000 * 60 * 60 * 24 * 7 // 7 days
  }
}));

// Generate CSRF tokens for sessions
app.use(generateCSRFToken);

// Body parsing middleware
app.use(express.json({
  limit: '10mb'
}));
app.use(express.urlencoded({
  extended: true
}));

// Static files
app.use('/uploads', express.static('uploads'));
app.use(express.static('public'));

// Database connection
mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/holistic-store', {
  useNewUrlParser: true,
  useUnifiedTopology: true
}).then(() => {
  console.log('Connected to MongoDB');
}).catch(error => {
  console.warn('MongoDB connection failed:', error.message);
  console.warn('Running in development mode without database');
});

// Handle MongoDB connection events
mongoose.connection.on('error', error => {
  console.warn('MongoDB connection error:', error.message);
});
mongoose.connection.on('disconnected', () => {
  console.warn('MongoDB disconnected');
});

// Routes with specific rate limiting
app.use('/api/auth', rateLimits.auth, require('./routes/auth'));
app.use('/api/products', require('./routes/products'));
app.use('/api/cart', csrfProtection, require('./routes/cart'));
app.use('/api/orders', csrfProtection, require('./routes/orders'));
app.use('/api/payments', rateLimits.payment, csrfProtection, require('./routes/payments'));
app.use('/api/wholesalers', require('./routes/wholesalers'));
app.use('/api/integration', rateLimits.integration, require('./routes/integration'));
app.use('/api/admin', rateLimits.admin, csrfProtection, require('./routes/admin'));
app.use('/api/monitoring', require('./routes/monitoring'));

// Health check
app.get('/health', (req, res) => {
  res.json({
    status: 'OK',
    timestamp: new Date().toISOString()
  });
});

// CSRF token endpoint
app.get('/api/csrf-token', (req, res) => {
  res.json({
    success: true,
    csrfToken: req.session.csrfToken
  });
});

// Root route for API info
app.get('/', (req, res) => {
  res.json({
    message: 'Holistic Dropship Store API',
    version: '1.0.0',
    endpoints: {
      health: '/health',
      auth: '/api/auth',
      products: '/api/products',
      cart: '/api/cart',
      orders: '/api/orders',
      payments: '/api/payments'
    },
    frontend: process.env.FRONTEND_URL || 'http://localhost:3000'
  });
});

// Global error handling middleware (must be last)
app.use(globalErrorHandler);

// Serve React app in production
if (process.env.NODE_ENV === 'production') {
  app.get('*', (req, res) => {
    res.sendFile(path.join(__dirname, 'build', 'index.html'));
  });
}
const PORT = process.env.PORT || 5000;

// Only start server if not in test mode
if (process.env.NODE_ENV !== 'test') {
  app.listen(PORT, () => {
    logger.info(`Server running on port ${PORT}`);
  });
}

// Export app for testing
module.exports = app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiY29ycyIsImhlbG1ldCIsInJhdGVMaW1pdCIsInNlc3Npb24iLCJNb25nb1N0b3JlIiwicGF0aCIsImNvbmZpZyIsImxvZ2dlciIsImdsb2JhbEVycm9ySGFuZGxlciIsImdlbmVyYXRlQ1NSRlRva2VuIiwiY3NyZlByb3RlY3Rpb24iLCJyYXRlTGltaXRzIiwic3BlZWRMaW1pdGVyIiwic2FuaXRpemVJbnB1dCIsInNlY3VyaXR5SGVhZGVycyIsImFwcCIsInVzZSIsIm9yaWdpbiIsInByb2Nlc3MiLCJlbnYiLCJBTExPV0VEX09SSUdJTlMiLCJzcGxpdCIsImNyZWRlbnRpYWxzIiwiZ2VuZXJhbCIsInNlY3JldCIsIlNFU1NJT05fU0VDUkVUIiwicmVzYXZlIiwic2F2ZVVuaW5pdGlhbGl6ZWQiLCJzdG9yZSIsImNyZWF0ZSIsIm1vbmdvVXJsIiwiTU9OR09EQl9VUkkiLCJ0b3VjaEFmdGVyIiwiY29va2llIiwic2VjdXJlIiwiTk9ERV9FTlYiLCJodHRwT25seSIsIm1heEFnZSIsImpzb24iLCJsaW1pdCIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyb3IiLCJ3YXJuIiwibWVzc2FnZSIsImNvbm5lY3Rpb24iLCJvbiIsImF1dGgiLCJwYXltZW50IiwiaW50ZWdyYXRpb24iLCJhZG1pbiIsImdldCIsInJlcSIsInJlcyIsInN0YXR1cyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInN1Y2Nlc3MiLCJjc3JmVG9rZW4iLCJ2ZXJzaW9uIiwiZW5kcG9pbnRzIiwiaGVhbHRoIiwicHJvZHVjdHMiLCJjYXJ0Iiwib3JkZXJzIiwicGF5bWVudHMiLCJmcm9udGVuZCIsIkZST05URU5EX1VSTCIsInNlbmRGaWxlIiwiam9pbiIsIl9fZGlybmFtZSIsIlBPUlQiLCJsaXN0ZW4iLCJpbmZvIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcbmNvbnN0IGhlbG1ldCA9IHJlcXVpcmUoJ2hlbG1ldCcpO1xuY29uc3QgcmF0ZUxpbWl0ID0gcmVxdWlyZSgnZXhwcmVzcy1yYXRlLWxpbWl0Jyk7XG5jb25zdCBzZXNzaW9uID0gcmVxdWlyZSgnZXhwcmVzcy1zZXNzaW9uJyk7XG5jb25zdCBNb25nb1N0b3JlID0gcmVxdWlyZSgnY29ubmVjdC1tb25nbycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbnJlcXVpcmUoJ2RvdGVudicpLmNvbmZpZygpO1xuXG4vLyBJbXBvcnQgbG9nZ2luZyBhbmQgZXJyb3IgaGFuZGxpbmdcbmNvbnN0IHsgbG9nZ2VyIH0gPSByZXF1aXJlKCcuL3V0aWxzL2xvZ2dlcicpO1xuY29uc3QgeyBnbG9iYWxFcnJvckhhbmRsZXIgfSA9IHJlcXVpcmUoJy4vbWlkZGxld2FyZS9lcnJvckhhbmRsZXInKTtcbmNvbnN0IHsgXG4gIGdlbmVyYXRlQ1NSRlRva2VuLCBcbiAgY3NyZlByb3RlY3Rpb24sIFxuICByYXRlTGltaXRzLCBcbiAgc3BlZWRMaW1pdGVyLCBcbiAgc2FuaXRpemVJbnB1dCwgXG4gIHNlY3VyaXR5SGVhZGVycyBcbn0gPSByZXF1aXJlKCcuL21pZGRsZXdhcmUvc2VjdXJpdHknKTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG4vLyBTZWN1cml0eSBtaWRkbGV3YXJlXG5hcHAudXNlKGhlbG1ldCgpKTtcbmFwcC51c2Uoc2VjdXJpdHlIZWFkZXJzKTtcbmFwcC51c2UoY29ycyh7XG4gIG9yaWdpbjogcHJvY2Vzcy5lbnYuQUxMT1dFRF9PUklHSU5TPy5zcGxpdCgnLCcpIHx8IFsnaHR0cDovL2xvY2FsaG9zdDozMDAwJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMScsICdodHRwOi8vbG9jYWxob3N0OjMwMDMnLCAnaHR0cDovL2xvY2FsaG9zdDo1MTczJ10sXG4gIGNyZWRlbnRpYWxzOiB0cnVlXG59KSk7XG5cbi8vIElucHV0IHNhbml0aXphdGlvblxuYXBwLnVzZShzYW5pdGl6ZUlucHV0KTtcblxuLy8gR2VuZXJhbCByYXRlIGxpbWl0aW5nXG5hcHAudXNlKHJhdGVMaW1pdHMuZ2VuZXJhbCk7XG5cbi8vIFNwZWVkIGxpbWl0aW5nIGZvciBicnV0ZSBmb3JjZSBwcm90ZWN0aW9uXG5hcHAudXNlKHNwZWVkTGltaXRlcik7XG5cbi8vIFNlc3Npb24gbWlkZGxld2FyZVxuYXBwLnVzZShzZXNzaW9uKHtcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5TRVNTSU9OX1NFQ1JFVCB8fCAnaG9saXN0aWMtc3RvcmUtc2Vzc2lvbi1zZWNyZXQnLFxuICByZXNhdmU6IGZhbHNlLFxuICBzYXZlVW5pbml0aWFsaXplZDogZmFsc2UsXG4gIHN0b3JlOiBNb25nb1N0b3JlLmNyZWF0ZSh7XG4gICAgbW9uZ29Vcmw6IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2hvbGlzdGljLXN0b3JlJyxcbiAgICB0b3VjaEFmdGVyOiAyNCAqIDM2MDAgLy8gbGF6eSBzZXNzaW9uIHVwZGF0ZVxuICB9KSxcbiAgY29va2llOiB7XG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgIG1heEFnZTogMTAwMCAqIDYwICogNjAgKiAyNCAqIDcgLy8gNyBkYXlzXG4gIH1cbn0pKTtcblxuLy8gR2VuZXJhdGUgQ1NSRiB0b2tlbnMgZm9yIHNlc3Npb25zXG5hcHAudXNlKGdlbmVyYXRlQ1NSRlRva2VuKTtcblxuLy8gQm9keSBwYXJzaW5nIG1pZGRsZXdhcmVcbmFwcC51c2UoZXhwcmVzcy5qc29uKHsgbGltaXQ6ICcxMG1iJyB9KSk7XG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcblxuLy8gU3RhdGljIGZpbGVzXG5hcHAudXNlKCcvdXBsb2FkcycsIGV4cHJlc3Muc3RhdGljKCd1cGxvYWRzJykpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYygncHVibGljJykpO1xuXG4vLyBEYXRhYmFzZSBjb25uZWN0aW9uXG5tb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2hvbGlzdGljLXN0b3JlJywge1xuICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXG4gIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcbn0pLnRoZW4oKCkgPT4ge1xuICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIE1vbmdvREInKTtcbn0pLmNhdGNoKChlcnJvcikgPT4ge1xuICBjb25zb2xlLndhcm4oJ01vbmdvREIgY29ubmVjdGlvbiBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSk7XG4gIGNvbnNvbGUud2FybignUnVubmluZyBpbiBkZXZlbG9wbWVudCBtb2RlIHdpdGhvdXQgZGF0YWJhc2UnKTtcbn0pO1xuXG4vLyBIYW5kbGUgTW9uZ29EQiBjb25uZWN0aW9uIGV2ZW50c1xubW9uZ29vc2UuY29ubmVjdGlvbi5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgY29uc29sZS53YXJuKCdNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IubWVzc2FnZSk7XG59KTtcblxubW9uZ29vc2UuY29ubmVjdGlvbi5vbignZGlzY29ubmVjdGVkJywgKCkgPT4ge1xuICBjb25zb2xlLndhcm4oJ01vbmdvREIgZGlzY29ubmVjdGVkJyk7XG59KTtcblxuLy8gUm91dGVzIHdpdGggc3BlY2lmaWMgcmF0ZSBsaW1pdGluZ1xuYXBwLnVzZSgnL2FwaS9hdXRoJywgcmF0ZUxpbWl0cy5hdXRoLCByZXF1aXJlKCcuL3JvdXRlcy9hdXRoJykpO1xuYXBwLnVzZSgnL2FwaS9wcm9kdWN0cycsIHJlcXVpcmUoJy4vcm91dGVzL3Byb2R1Y3RzJykpO1xuYXBwLnVzZSgnL2FwaS9jYXJ0JywgY3NyZlByb3RlY3Rpb24sIHJlcXVpcmUoJy4vcm91dGVzL2NhcnQnKSk7XG5hcHAudXNlKCcvYXBpL29yZGVycycsIGNzcmZQcm90ZWN0aW9uLCByZXF1aXJlKCcuL3JvdXRlcy9vcmRlcnMnKSk7XG5hcHAudXNlKCcvYXBpL3BheW1lbnRzJywgcmF0ZUxpbWl0cy5wYXltZW50LCBjc3JmUHJvdGVjdGlvbiwgcmVxdWlyZSgnLi9yb3V0ZXMvcGF5bWVudHMnKSk7XG5hcHAudXNlKCcvYXBpL3dob2xlc2FsZXJzJywgcmVxdWlyZSgnLi9yb3V0ZXMvd2hvbGVzYWxlcnMnKSk7XG5hcHAudXNlKCcvYXBpL2ludGVncmF0aW9uJywgcmF0ZUxpbWl0cy5pbnRlZ3JhdGlvbiwgcmVxdWlyZSgnLi9yb3V0ZXMvaW50ZWdyYXRpb24nKSk7XG5hcHAudXNlKCcvYXBpL2FkbWluJywgcmF0ZUxpbWl0cy5hZG1pbiwgY3NyZlByb3RlY3Rpb24sIHJlcXVpcmUoJy4vcm91dGVzL2FkbWluJykpO1xuYXBwLnVzZSgnL2FwaS9tb25pdG9yaW5nJywgcmVxdWlyZSgnLi9yb3V0ZXMvbW9uaXRvcmluZycpKTtcblxuLy8gSGVhbHRoIGNoZWNrXG5hcHAuZ2V0KCcvaGVhbHRoJywgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHsgc3RhdHVzOiAnT0snLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KTtcbn0pO1xuXG4vLyBDU1JGIHRva2VuIGVuZHBvaW50XG5hcHAuZ2V0KCcvYXBpL2NzcmYtdG9rZW4nLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24oeyBcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIGNzcmZUb2tlbjogcmVxLnNlc3Npb24uY3NyZlRva2VuIFxuICB9KTtcbn0pO1xuXG4vLyBSb290IHJvdXRlIGZvciBBUEkgaW5mb1xuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xuICByZXMuanNvbih7XG4gICAgbWVzc2FnZTogJ0hvbGlzdGljIERyb3BzaGlwIFN0b3JlIEFQSScsXG4gICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICBlbmRwb2ludHM6IHtcbiAgICAgIGhlYWx0aDogJy9oZWFsdGgnLFxuICAgICAgYXV0aDogJy9hcGkvYXV0aCcsXG4gICAgICBwcm9kdWN0czogJy9hcGkvcHJvZHVjdHMnLFxuICAgICAgY2FydDogJy9hcGkvY2FydCcsXG4gICAgICBvcmRlcnM6ICcvYXBpL29yZGVycycsXG4gICAgICBwYXltZW50czogJy9hcGkvcGF5bWVudHMnXG4gICAgfSxcbiAgICBmcm9udGVuZDogcHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXG4gIH0pO1xufSk7XG5cbi8vIEdsb2JhbCBlcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlIChtdXN0IGJlIGxhc3QpXG5hcHAudXNlKGdsb2JhbEVycm9ySGFuZGxlcik7XG5cbi8vIFNlcnZlIFJlYWN0IGFwcCBpbiBwcm9kdWN0aW9uXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICBhcHAuZ2V0KCcqJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUsICdidWlsZCcsICdpbmRleC5odG1sJykpO1xuICB9KTtcbn1cblxuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgNTAwMDtcblxuLy8gT25seSBzdGFydCBzZXJ2ZXIgaWYgbm90IGluIHRlc3QgbW9kZVxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcpIHtcbiAgYXBwLmxpc3RlbihQT1JULCAoKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xuICB9KTtcbn1cblxuLy8gRXhwb3J0IGFwcCBmb3IgdGVzdGluZ1xubW9kdWxlLmV4cG9ydHMgPSBhcHA7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QixNQUFNRyxNQUFNLEdBQUdILE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsTUFBTUksU0FBUyxHQUFHSixPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDL0MsTUFBTUssT0FBTyxHQUFHTCxPQUFPLENBQUMsaUJBQWlCLENBQUM7QUFDMUMsTUFBTU0sVUFBVSxHQUFHTixPQUFPLENBQUMsZUFBZSxDQUFDO0FBQzNDLE1BQU1PLElBQUksR0FBR1AsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1QkEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDUSxNQUFNLENBQUMsQ0FBQzs7QUFFMUI7QUFDQSxNQUFNO0VBQUVDO0FBQU8sQ0FBQyxHQUFHVCxPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDNUMsTUFBTTtFQUFFVTtBQUFtQixDQUFDLEdBQUdWLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUNuRSxNQUFNO0VBQ0pXLGlCQUFpQjtFQUNqQkMsY0FBYztFQUNkQyxVQUFVO0VBQ1ZDLFlBQVk7RUFDWkMsYUFBYTtFQUNiQztBQUNGLENBQUMsR0FBR2hCLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUVwQyxNQUFNaUIsR0FBRyxHQUFHbEIsT0FBTyxDQUFDLENBQUM7O0FBRXJCO0FBQ0FrQixHQUFHLENBQUNDLEdBQUcsQ0FBQ2YsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNqQmMsR0FBRyxDQUFDQyxHQUFHLENBQUNGLGVBQWUsQ0FBQztBQUN4QkMsR0FBRyxDQUFDQyxHQUFHLENBQUNoQixJQUFJLENBQUM7RUFD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