980e0cd9d4db1d39ea398ddea80baeb9
/* istanbul ignore next */
function cov_b4yrcnl2g() {
  var path = "/Users/oliver/Projects/boutique/models/Order.js";
  var hash = "525e64cad808c4e93a149b9be59e36d7d97614c5";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/oliver/Projects/boutique/models/Order.js",
    statementMap: {
      "0": {
        start: {
          line: 1,
          column: 17
        },
        end: {
          line: 1,
          column: 36
        }
      },
      "1": {
        start: {
          line: 3,
          column: 20
        },
        end: {
          line: 120,
          column: 2
        }
      },
      "2": {
        start: {
          line: 16,
          column: 29
        },
        end: {
          line: 16,
          column: 51
        }
      },
      "3": {
        start: {
          line: 22,
          column: 29
        },
        end: {
          line: 22,
          column: 51
        }
      },
      "4": {
        start: {
          line: 27,
          column: 29
        },
        end: {
          line: 27,
          column: 51
        }
      },
      "5": {
        start: {
          line: 123,
          column: 0
        },
        end: {
          line: 123,
          column: 38
        }
      },
      "6": {
        start: {
          line: 124,
          column: 0
        },
        end: {
          line: 124,
          column: 50
        }
      },
      "7": {
        start: {
          line: 125,
          column: 0
        },
        end: {
          line: 125,
          column: 44
        }
      },
      "8": {
        start: {
          line: 126,
          column: 0
        },
        end: {
          line: 126,
          column: 33
        }
      },
      "9": {
        start: {
          line: 127,
          column: 0
        },
        end: {
          line: 127,
          column: 43
        }
      },
      "10": {
        start: {
          line: 128,
          column: 0
        },
        end: {
          line: 128,
          column: 41
        }
      },
      "11": {
        start: {
          line: 129,
          column: 0
        },
        end: {
          line: 129,
          column: 37
        }
      },
      "12": {
        start: {
          line: 130,
          column: 0
        },
        end: {
          line: 130,
          column: 54
        }
      },
      "13": {
        start: {
          line: 133,
          column: 0
        },
        end: {
          line: 138,
          column: 3
        }
      },
      "14": {
        start: {
          line: 134,
          column: 2
        },
        end: {
          line: 136,
          column: 3
        }
      },
      "15": {
        start: {
          line: 135,
          column: 4
        },
        end: {
          line: 135,
          column: 105
        }
      },
      "16": {
        start: {
          line: 137,
          column: 2
        },
        end: {
          line: 137,
          column: 9
        }
      },
      "17": {
        start: {
          line: 141,
          column: 0
        },
        end: {
          line: 146,
          column: 2
        }
      },
      "18": {
        start: {
          line: 142,
          column: 2
        },
        end: {
          line: 144,
          column: 3
        }
      },
      "19": {
        start: {
          line: 143,
          column: 4
        },
        end: {
          line: 143,
          column: 31
        }
      },
      "20": {
        start: {
          line: 145,
          column: 2
        },
        end: {
          line: 145,
          column: 30
        }
      },
      "21": {
        start: {
          line: 149,
          column: 0
        },
        end: {
          line: 154,
          column: 2
        }
      },
      "22": {
        start: {
          line: 150,
          column: 2
        },
        end: {
          line: 152,
          column: 3
        }
      },
      "23": {
        start: {
          line: 151,
          column: 4
        },
        end: {
          line: 151,
          column: 66
        }
      },
      "24": {
        start: {
          line: 153,
          column: 2
        },
        end: {
          line: 153,
          column: 66
        }
      },
      "25": {
        start: {
          line: 157,
          column: 0
        },
        end: {
          line: 159,
          column: 2
        }
      },
      "26": {
        start: {
          line: 158,
          column: 2
        },
        end: {
          line: 158,
          column: 60
        }
      },
      "27": {
        start: {
          line: 158,
          column: 34
        },
        end: {
          line: 158,
          column: 58
        }
      },
      "28": {
        start: {
          line: 162,
          column: 0
        },
        end: {
          line: 164,
          column: 2
        }
      },
      "29": {
        start: {
          line: 163,
          column: 2
        },
        end: {
          line: 163,
          column: 62
        }
      },
      "30": {
        start: {
          line: 163,
          column: 35
        },
        end: {
          line: 163,
          column: 60
        }
      },
      "31": {
        start: {
          line: 167,
          column: 0
        },
        end: {
          line: 180,
          column: 2
        }
      },
      "32": {
        start: {
          line: 168,
          column: 15
        },
        end: {
          line: 168,
          column: 36
        }
      },
      "33": {
        start: {
          line: 169,
          column: 2
        },
        end: {
          line: 178,
          column: 3
        }
      },
      "34": {
        start: {
          line: 170,
          column: 4
        },
        end: {
          line: 170,
          column: 46
        }
      },
      "35": {
        start: {
          line: 171,
          column: 4
        },
        end: {
          line: 177,
          column: 5
        }
      },
      "36": {
        start: {
          line: 172,
          column: 6
        },
        end: {
          line: 172,
          column: 38
        }
      },
      "37": {
        start: {
          line: 173,
          column: 6
        },
        end: {
          line: 173,
          column: 46
        }
      },
      "38": {
        start: {
          line: 174,
          column: 6
        },
        end: {
          line: 174,
          column: 51
        }
      },
      "39": {
        start: {
          line: 176,
          column: 6
        },
        end: {
          line: 176,
          column: 52
        }
      },
      "40": {
        start: {
          line: 179,
          column: 2
        },
        end: {
          line: 179,
          column: 21
        }
      },
      "41": {
        start: {
          line: 183,
          column: 0
        },
        end: {
          line: 188,
          column: 2
        }
      },
      "42": {
        start: {
          line: 184,
          column: 2
        },
        end: {
          line: 187,
          column: 5
        }
      },
      "43": {
        start: {
          line: 191,
          column: 0
        },
        end: {
          line: 210,
          column: 2
        }
      },
      "44": {
        start: {
          line: 192,
          column: 16
        },
        end: {
          line: 192,
          column: 31
        }
      },
      "45": {
        start: {
          line: 195,
          column: 2
        },
        end: {
          line: 207,
          column: 3
        }
      },
      "46": {
        start: {
          line: 196,
          column: 4
        },
        end: {
          line: 206,
          column: 7
        }
      },
      "47": {
        start: {
          line: 197,
          column: 25
        },
        end: {
          line: 197,
          column: 36
        }
      },
      "48": {
        start: {
          line: 198,
          column: 6
        },
        end: {
          line: 204,
          column: 7
        }
      },
      "49": {
        start: {
          line: 200,
          column: 8
        },
        end: {
          line: 203,
          column: 10
        }
      },
      "50": {
        start: {
          line: 205,
          column: 6
        },
        end: {
          line: 205,
          column: 24
        }
      },
      "51": {
        start: {
          line: 209,
          column: 2
        },
        end: {
          line: 209,
          column: 15
        }
      },
      "52": {
        start: {
          line: 215,
          column: 0
        },
        end: {
          line: 215,
          column: 54
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 16,
            column: 16
          },
          end: {
            line: 16,
            column: 17
          }
        },
        loc: {
          start: {
            line: 16,
            column: 27
          },
          end: {
            line: 16,
            column: 53
          }
        },
        line: 16
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 22,
            column: 16
          },
          end: {
            line: 22,
            column: 17
          }
        },
        loc: {
          start: {
            line: 22,
            column: 27
          },
          end: {
            line: 22,
            column: 53
          }
        },
        line: 22
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 27,
            column: 16
          },
          end: {
            line: 27,
            column: 17
          }
        },
        loc: {
          start: {
            line: 27,
            column: 27
          },
          end: {
            line: 27,
            column: 53
          }
        },
        line: 27
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 133,
            column: 24
          },
          end: {
            line: 133,
            column: 25
          }
        },
        loc: {
          start: {
            line: 133,
            column: 39
          },
          end: {
            line: 138,
            column: 1
          }
        },
        line: 133
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 141,
            column: 39
          },
          end: {
            line: 141,
            column: 40
          }
        },
        loc: {
          start: {
            line: 141,
            column: 50
          },
          end: {
            line: 146,
            column: 1
          }
        },
        line: 141
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 149,
            column: 38
          },
          end: {
            line: 149,
            column: 39
          }
        },
        loc: {
          start: {
            line: 149,
            column: 49
          },
          end: {
            line: 154,
            column: 1
          }
        },
        line: 149
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 157,
            column: 45
          },
          end: {
            line: 157,
            column: 46
          }
        },
        loc: {
          start: {
            line: 157,
            column: 56
          },
          end: {
            line: 159,
            column: 1
          }
        },
        line: 157
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 158,
            column: 26
          },
          end: {
            line: 158,
            column: 27
          }
        },
        loc: {
          start: {
            line: 158,
            column: 34
          },
          end: {
            line: 158,
            column: 58
          }
        },
        line: 158
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 162,
            column: 46
          },
          end: {
            line: 162,
            column: 47
          }
        },
        loc: {
          start: {
            line: 162,
            column: 57
          },
          end: {
            line: 164,
            column: 1
          }
        },
        line: 162
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 163,
            column: 27
          },
          end: {
            line: 163,
            column: 28
          }
        },
        loc: {
          start: {
            line: 163,
            column: 35
          },
          end: {
            line: 163,
            column: 60
          }
        },
        line: 163
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 167,
            column: 51
          },
          end: {
            line: 167,
            column: 52
          }
        },
        loc: {
          start: {
            line: 167,
            column: 91
          },
          end: {
            line: 180,
            column: 1
          }
        },
        line: 167
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 183,
            column: 47
          },
          end: {
            line: 183,
            column: 48
          }
        },
        loc: {
          start: {
            line: 183,
            column: 58
          },
          end: {
            line: 188,
            column: 1
          }
        },
        line: 183
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 191,
            column: 35
          },
          end: {
            line: 191,
            column: 36
          }
        },
        loc: {
          start: {
            line: 191,
            column: 46
          },
          end: {
            line: 210,
            column: 1
          }
        },
        line: 191
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 196,
            column: 34
          },
          end: {
            line: 196,
            column: 35
          }
        },
        loc: {
          start: {
            line: 196,
            column: 42
          },
          end: {
            line: 206,
            column: 5
          }
        },
        line: 196
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 134,
            column: 2
          },
          end: {
            line: 136,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 134,
            column: 2
          },
          end: {
            line: 136,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 134
      },
      "1": {
        loc: {
          start: {
            line: 142,
            column: 2
          },
          end: {
            line: 144,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 142,
            column: 2
          },
          end: {
            line: 144,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 142
      },
      "2": {
        loc: {
          start: {
            line: 142,
            column: 6
          },
          end: {
            line: 142,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 142,
            column: 6
          },
          end: {
            line: 142,
            column: 19
          }
        }, {
          start: {
            line: 142,
            column: 23
          },
          end: {
            line: 142,
            column: 49
          }
        }],
        line: 142
      },
      "3": {
        loc: {
          start: {
            line: 150,
            column: 2
          },
          end: {
            line: 152,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 150,
            column: 2
          },
          end: {
            line: 152,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 150
      },
      "4": {
        loc: {
          start: {
            line: 150,
            column: 6
          },
          end: {
            line: 150,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 150,
            column: 6
          },
          end: {
            line: 150,
            column: 19
          }
        }, {
          start: {
            line: 150,
            column: 23
          },
          end: {
            line: 150,
            column: 49
          }
        }],
        line: 150
      },
      "5": {
        loc: {
          start: {
            line: 167,
            column: 77
          },
          end: {
            line: 167,
            column: 89
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 167,
            column: 85
          },
          end: {
            line: 167,
            column: 89
          }
        }],
        line: 167
      },
      "6": {
        loc: {
          start: {
            line: 169,
            column: 2
          },
          end: {
            line: 178,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 169,
            column: 2
          },
          end: {
            line: 178,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 169
      },
      "7": {
        loc: {
          start: {
            line: 171,
            column: 4
          },
          end: {
            line: 177,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 171,
            column: 4
          },
          end: {
            line: 177,
            column: 5
          }
        }, {
          start: {
            line: 175,
            column: 11
          },
          end: {
            line: 177,
            column: 5
          }
        }],
        line: 171
      },
      "8": {
        loc: {
          start: {
            line: 195,
            column: 2
          },
          end: {
            line: 207,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 195,
            column: 2
          },
          end: {
            line: 207,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 195
      },
      "9": {
        loc: {
          start: {
            line: 198,
            column: 6
          },
          end: {
            line: 204,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 198,
            column: 6
          },
          end: {
            line: 204,
            column: 7
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 198
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "525e64cad808c4e93a149b9be59e36d7d97614c5"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_b4yrcnl2g = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_b4yrcnl2g();
const mongoose =
/* istanbul ignore next */
(cov_b4yrcnl2g().s[0]++, require('mongoose'));
const orderSchema =
/* istanbul ignore next */
(cov_b4yrcnl2g().s[1]++, new mongoose.Schema({
  orderNumber: {
    type: String,
    unique: true
  },
  customer: {
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: false // Allow guest checkout
  },
  guestInfo: {
    email: {
      type: String,
      required: function () {
        /* istanbul ignore next */
        cov_b4yrcnl2g().f[0]++;
        cov_b4yrcnl2g().s[2]++;
        return !this.customer;
      },
      lowercase: true,
      trim: true
    },
    firstName: {
      type: String,
      required: function () {
        /* istanbul ignore next */
        cov_b4yrcnl2g().f[1]++;
        cov_b4yrcnl2g().s[3]++;
        return !this.customer;
      },
      trim: true
    },
    lastName: {
      type: String,
      required: function () {
        /* istanbul ignore next */
        cov_b4yrcnl2g().f[2]++;
        cov_b4yrcnl2g().s[4]++;
        return !this.customer;
      },
      trim: true
    },
    phone: {
      type: String,
      trim: true
    }
  },
  items: [{
    product: {
      type: mongoose.Schema.Types.ObjectId,
      ref: 'Product',
      required: true
    },
    quantity: {
      type: Number,
      required: true,
      min: 1
    },
    price: {
      type: Number,
      required: true
    },
    wholesaler: {
      name: String,
      email: String,
      productCode: String,
      notified: {
        type: Boolean,
        default: false
      },
      notifiedAt: Date,
      notificationAttempts: {
        type: Number,
        default: 0
      },
      lastNotificationError: String
    }
  }],
  shippingAddress: {
    firstName: {
      type: String,
      required: true
    },
    lastName: {
      type: String,
      required: true
    },
    street: {
      type: String,
      required: true
    },
    city: {
      type: String,
      required: true
    },
    state: {
      type: String,
      required: true
    },
    zipCode: {
      type: String,
      required: true
    },
    country: {
      type: String,
      required: true,
      default: 'US'
    },
    phone: String
  },
  billingAddress: {
    firstName: {
      type: String,
      required: true
    },
    lastName: {
      type: String,
      required: true
    },
    street: {
      type: String,
      required: true
    },
    city: {
      type: String,
      required: true
    },
    state: {
      type: String,
      required: true
    },
    zipCode: {
      type: String,
      required: true
    },
    country: {
      type: String,
      required: true,
      default: 'US'
    }
  },
  subtotal: {
    type: Number,
    required: true
  },
  tax: {
    type: Number,
    default: 0
  },
  shipping: {
    type: Number,
    default: 0
  },
  total: {
    type: Number,
    required: true
  },
  payment: {
    method: {
      type: String,
      enum: ['card', 'crypto', 'other'],
      required: true
    },
    status: {
      type: String,
      enum: ['pending', 'paid', 'failed', 'refunded'],
      default: 'pending'
    },
    molliePaymentId: String,
    transactionId: String,
    paidAt: Date
  },
  status: {
    type: String,
    enum: ['pending', 'processing', 'shipped', 'delivered', 'cancelled'],
    default: 'pending'
  },
  trackingNumber: String,
  notes: String,
  referralSource: String // Track which sister site referred this order
}, {
  timestamps: true
}));

// Indexes for performance
/* istanbul ignore next */
cov_b4yrcnl2g().s[5]++;
orderSchema.index({
  orderNumber: 1
});
/* istanbul ignore next */
cov_b4yrcnl2g().s[6]++;
orderSchema.index({
  customer: 1,
  createdAt: -1
});
/* istanbul ignore next */
cov_b4yrcnl2g().s[7]++;
orderSchema.index({
  'guestInfo.email': 1
});
/* istanbul ignore next */
cov_b4yrcnl2g().s[8]++;
orderSchema.index({
  status: 1
});
/* istanbul ignore next */
cov_b4yrcnl2g().s[9]++;
orderSchema.index({
  'payment.status': 1
});
/* istanbul ignore next */
cov_b4yrcnl2g().s[10]++;
orderSchema.index({
  referralSource: 1
});
/* istanbul ignore next */
cov_b4yrcnl2g().s[11]++;
orderSchema.index({
  createdAt: -1
});
/* istanbul ignore next */
cov_b4yrcnl2g().s[12]++;
orderSchema.index({
  'items.wholesaler.notified': 1
});

// Pre-save middleware
/* istanbul ignore next */
cov_b4yrcnl2g().s[13]++;
orderSchema.pre('save', function (next) {
  /* istanbul ignore next */
  cov_b4yrcnl2g().f[3]++;
  cov_b4yrcnl2g().s[14]++;
  if (!this.orderNumber) {
    /* istanbul ignore next */
    cov_b4yrcnl2g().b[0][0]++;
    cov_b4yrcnl2g().s[15]++;
    this.orderNumber = 'ORD-' + Date.now() + '-' + Math.random().toString(36).substr(2, 5).toUpperCase();
  } else
  /* istanbul ignore next */
  {
    cov_b4yrcnl2g().b[0][1]++;
  }
  cov_b4yrcnl2g().s[16]++;
  next();
});

// Method to get customer email (works for both guest and registered users)
/* istanbul ignore next */
cov_b4yrcnl2g().s[17]++;
orderSchema.methods.getCustomerEmail = function () {
  /* istanbul ignore next */
  cov_b4yrcnl2g().f[4]++;
  cov_b4yrcnl2g().s[18]++;
  if (
  /* istanbul ignore next */
  (cov_b4yrcnl2g().b[2][0]++, this.customer) &&
  /* istanbul ignore next */
  (cov_b4yrcnl2g().b[2][1]++, this.populated('customer'))) {
    /* istanbul ignore next */
    cov_b4yrcnl2g().b[1][0]++;
    cov_b4yrcnl2g().s[19]++;
    return this.customer.email;
  } else
  /* istanbul ignore next */
  {
    cov_b4yrcnl2g().b[1][1]++;
  }
  cov_b4yrcnl2g().s[20]++;
  return this.guestInfo.email;
};

// Method to get customer name
/* istanbul ignore next */
cov_b4yrcnl2g().s[21]++;
orderSchema.methods.getCustomerName = function () {
  /* istanbul ignore next */
  cov_b4yrcnl2g().f[5]++;
  cov_b4yrcnl2g().s[22]++;
  if (
  /* istanbul ignore next */
  (cov_b4yrcnl2g().b[4][0]++, this.customer) &&
  /* istanbul ignore next */
  (cov_b4yrcnl2g().b[4][1]++, this.populated('customer'))) {
    /* istanbul ignore next */
    cov_b4yrcnl2g().b[3][0]++;
    cov_b4yrcnl2g().s[23]++;
    return `${this.customer.firstName} ${this.customer.lastName}`;
  } else
  /* istanbul ignore next */
  {
    cov_b4yrcnl2g().b[3][1]++;
  }
  cov_b4yrcnl2g().s[24]++;
  return `${this.guestInfo.firstName} ${this.guestInfo.lastName}`;
};

// Method to check if all wholesalers have been notified
/* istanbul ignore next */
cov_b4yrcnl2g().s[25]++;
orderSchema.methods.allWholesalersNotified = function () {
  /* istanbul ignore next */
  cov_b4yrcnl2g().f[6]++;
  cov_b4yrcnl2g().s[26]++;
  return this.items.every(item => {
    /* istanbul ignore next */
    cov_b4yrcnl2g().f[7]++;
    cov_b4yrcnl2g().s[27]++;
    return item.wholesaler.notified;
  });
};

// Method to get pending wholesaler notifications
/* istanbul ignore next */
cov_b4yrcnl2g().s[28]++;
orderSchema.methods.getPendingNotifications = function () {
  /* istanbul ignore next */
  cov_b4yrcnl2g().f[8]++;
  cov_b4yrcnl2g().s[29]++;
  return this.items.filter(item => {
    /* istanbul ignore next */
    cov_b4yrcnl2g().f[9]++;
    cov_b4yrcnl2g().s[30]++;
    return !item.wholesaler.notified;
  });
};

// Method to update wholesaler notification status
/* istanbul ignore next */
cov_b4yrcnl2g().s[31]++;
orderSchema.methods.updateWholesalerNotification = function (itemId, success, error =
/* istanbul ignore next */
(cov_b4yrcnl2g().b[5][0]++, null)) {
  /* istanbul ignore next */
  cov_b4yrcnl2g().f[10]++;
  const item =
  /* istanbul ignore next */
  (cov_b4yrcnl2g().s[32]++, this.items.id(itemId));
  /* istanbul ignore next */
  cov_b4yrcnl2g().s[33]++;
  if (item) {
    /* istanbul ignore next */
    cov_b4yrcnl2g().b[6][0]++;
    cov_b4yrcnl2g().s[34]++;
    item.wholesaler.notificationAttempts += 1;
    /* istanbul ignore next */
    cov_b4yrcnl2g().s[35]++;
    if (success) {
      /* istanbul ignore next */
      cov_b4yrcnl2g().b[7][0]++;
      cov_b4yrcnl2g().s[36]++;
      item.wholesaler.notified = true;
      /* istanbul ignore next */
      cov_b4yrcnl2g().s[37]++;
      item.wholesaler.notifiedAt = new Date();
      /* istanbul ignore next */
      cov_b4yrcnl2g().s[38]++;
      item.wholesaler.lastNotificationError = null;
    } else {
      /* istanbul ignore next */
      cov_b4yrcnl2g().b[7][1]++;
      cov_b4yrcnl2g().s[39]++;
      item.wholesaler.lastNotificationError = error;
    }
  } else
  /* istanbul ignore next */
  {
    cov_b4yrcnl2g().b[6][1]++;
  }
  cov_b4yrcnl2g().s[40]++;
  return this.save();
};

// Static method to find orders needing wholesaler notification
/* istanbul ignore next */
cov_b4yrcnl2g().s[41]++;
orderSchema.statics.findPendingNotifications = function () {
  /* istanbul ignore next */
  cov_b4yrcnl2g().f[11]++;
  cov_b4yrcnl2g().s[42]++;
  return this.find({
    'payment.status': 'paid',
    'items.wholesaler.notified': false
  });
};

// Method to get public order data (excludes sensitive wholesaler info)
/* istanbul ignore next */
cov_b4yrcnl2g().s[43]++;
orderSchema.methods.toPublicJSON = function () {
  /* istanbul ignore next */
  cov_b4yrcnl2g().f[12]++;
  const order =
  /* istanbul ignore next */
  (cov_b4yrcnl2g().s[44]++, this.toObject());

  // Remove sensitive wholesaler information from items
  /* istanbul ignore next */
  cov_b4yrcnl2g().s[45]++;
  if (order.items) {
    /* istanbul ignore next */
    cov_b4yrcnl2g().b[8][0]++;
    cov_b4yrcnl2g().s[46]++;
    order.items = order.items.map(item => {
      /* istanbul ignore next */
      cov_b4yrcnl2g().f[13]++;
      const publicItem =
      /* istanbul ignore next */
      (cov_b4yrcnl2g().s[47]++, {
        ...item
      });
      /* istanbul ignore next */
      cov_b4yrcnl2g().s[48]++;
      if (publicItem.wholesaler) {
        /* istanbul ignore next */
        cov_b4yrcnl2g().b[9][0]++;
        cov_b4yrcnl2g().s[49]++;
        // Keep only notification status, remove sensitive details
        publicItem.wholesaler = {
          notified: item.wholesaler.notified,
          notifiedAt: item.wholesaler.notifiedAt
        };
      } else
      /* istanbul ignore next */
      {
        cov_b4yrcnl2g().b[9][1]++;
      }
      cov_b4yrcnl2g().s[50]++;
      return publicItem;
    });
  } else
  /* istanbul ignore next */
  {
    cov_b4yrcnl2g().b[8][1]++;
  }
  cov_b4yrcnl2g().s[51]++;
  return order;
};

// Hook trigger comment - wholesaler notification check
// Referral tracking hook test
/* istanbul ignore next */
cov_b4yrcnl2g().s[52]++;
module.exports = mongoose.model('Order', orderSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfYjR5cmNubDJnIiwiYWN0dWFsQ292ZXJhZ2UiLCJtb25nb29zZSIsInMiLCJyZXF1aXJlIiwib3JkZXJTY2hlbWEiLCJTY2hlbWEiLCJvcmRlck51bWJlciIsInR5cGUiLCJTdHJpbmciLCJ1bmlxdWUiLCJjdXN0b21lciIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsImd1ZXN0SW5mbyIsImVtYWlsIiwiZiIsImxvd2VyY2FzZSIsInRyaW0iLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBob25lIiwiaXRlbXMiLCJwcm9kdWN0IiwicXVhbnRpdHkiLCJOdW1iZXIiLCJtaW4iLCJwcmljZSIsIndob2xlc2FsZXIiLCJuYW1lIiwicHJvZHVjdENvZGUiLCJub3RpZmllZCIsIkJvb2xlYW4iLCJkZWZhdWx0Iiwibm90aWZpZWRBdCIsIkRhdGUiLCJub3RpZmljYXRpb25BdHRlbXB0cyIsImxhc3ROb3RpZmljYXRpb25FcnJvciIsInNoaXBwaW5nQWRkcmVzcyIsInN0cmVldCIsImNpdHkiLCJzdGF0ZSIsInppcENvZGUiLCJjb3VudHJ5IiwiYmlsbGluZ0FkZHJlc3MiLCJzdWJ0b3RhbCIsInRheCIsInNoaXBwaW5nIiwidG90YWwiLCJwYXltZW50IiwibWV0aG9kIiwiZW51bSIsInN0YXR1cyIsIm1vbGxpZVBheW1lbnRJZCIsInRyYW5zYWN0aW9uSWQiLCJwYWlkQXQiLCJ0cmFja2luZ051bWJlciIsIm5vdGVzIiwicmVmZXJyYWxTb3VyY2UiLCJ0aW1lc3RhbXBzIiwiaW5kZXgiLCJjcmVhdGVkQXQiLCJwcmUiLCJuZXh0IiwiYiIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInRvVXBwZXJDYXNlIiwibWV0aG9kcyIsImdldEN1c3RvbWVyRW1haWwiLCJwb3B1bGF0ZWQiLCJnZXRDdXN0b21lck5hbWUiLCJhbGxXaG9sZXNhbGVyc05vdGlmaWVkIiwiZXZlcnkiLCJpdGVtIiwiZ2V0UGVuZGluZ05vdGlmaWNhdGlvbnMiLCJmaWx0ZXIiLCJ1cGRhdGVXaG9sZXNhbGVyTm90aWZpY2F0aW9uIiwiaXRlbUlkIiwic3VjY2VzcyIsImVycm9yIiwiaWQiLCJzYXZlIiwic3RhdGljcyIsImZpbmRQZW5kaW5nTm90aWZpY2F0aW9ucyIsImZpbmQiLCJ0b1B1YmxpY0pTT04iLCJvcmRlciIsInRvT2JqZWN0IiwibWFwIiwicHVibGljSXRlbSIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VzIjpbIk9yZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcblxuY29uc3Qgb3JkZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgb3JkZXJOdW1iZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdW5pcXVlOiB0cnVlXG4gIH0sXG4gIGN1c3RvbWVyOiB7XG4gICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgIHJlZjogJ1VzZXInLFxuICAgIHJlcXVpcmVkOiBmYWxzZSAvLyBBbGxvdyBndWVzdCBjaGVja291dFxuICB9LFxuICBndWVzdEluZm86IHtcbiAgICBlbWFpbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gIXRoaXMuY3VzdG9tZXI7IH0sXG4gICAgICBsb3dlcmNhc2U6IHRydWUsXG4gICAgICB0cmltOiB0cnVlXG4gICAgfSxcbiAgICBmaXJzdE5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBmdW5jdGlvbigpIHsgcmV0dXJuICF0aGlzLmN1c3RvbWVyOyB9LFxuICAgICAgdHJpbTogdHJ1ZVxuICAgIH0sXG4gICAgbGFzdE5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBmdW5jdGlvbigpIHsgcmV0dXJuICF0aGlzLmN1c3RvbWVyOyB9LFxuICAgICAgdHJpbTogdHJ1ZVxuICAgIH0sXG4gICAgcGhvbmU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHRyaW06IHRydWVcbiAgICB9XG4gIH0sXG4gIGl0ZW1zOiBbe1xuICAgIHByb2R1Y3Q6IHtcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgIHJlZjogJ1Byb2R1Y3QnLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIHF1YW50aXR5OiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIG1pbjogMVxuICAgIH0sXG4gICAgcHJpY2U6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICB3aG9sZXNhbGVyOiB7XG4gICAgICBuYW1lOiBTdHJpbmcsXG4gICAgICBlbWFpbDogU3RyaW5nLFxuICAgICAgcHJvZHVjdENvZGU6IFN0cmluZyxcbiAgICAgIG5vdGlmaWVkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgICBub3RpZmllZEF0OiBEYXRlLFxuICAgICAgbm90aWZpY2F0aW9uQXR0ZW1wdHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gICAgICBsYXN0Tm90aWZpY2F0aW9uRXJyb3I6IFN0cmluZ1xuICAgIH1cbiAgfV0sXG4gIHNoaXBwaW5nQWRkcmVzczoge1xuICAgIGZpcnN0TmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgbGFzdE5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHN0cmVldDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgY2l0eTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgc3RhdGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHppcENvZGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGNvdW50cnk6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogJ1VTJyB9LFxuICAgIHBob25lOiBTdHJpbmdcbiAgfSxcbiAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICBmaXJzdE5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGxhc3ROYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBzdHJlZXQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGNpdHk6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHN0YXRlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICB6aXBDb2RlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjb3VudHJ5OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6ICdVUycgfVxuICB9LFxuICBzdWJ0b3RhbDoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICB0YXg6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMFxuICB9LFxuICBzaGlwcGluZzoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAwXG4gIH0sXG4gIHRvdGFsOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIHBheW1lbnQ6IHtcbiAgICBtZXRob2Q6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGVudW06IFsnY2FyZCcsICdjcnlwdG8nLCAnb3RoZXInXSxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBzdGF0dXM6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGVudW06IFsncGVuZGluZycsICdwYWlkJywgJ2ZhaWxlZCcsICdyZWZ1bmRlZCddLFxuICAgICAgZGVmYXVsdDogJ3BlbmRpbmcnXG4gICAgfSxcbiAgICBtb2xsaWVQYXltZW50SWQ6IFN0cmluZyxcbiAgICB0cmFuc2FjdGlvbklkOiBTdHJpbmcsXG4gICAgcGFpZEF0OiBEYXRlXG4gIH0sXG4gIHN0YXR1czoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBlbnVtOiBbJ3BlbmRpbmcnLCAncHJvY2Vzc2luZycsICdzaGlwcGVkJywgJ2RlbGl2ZXJlZCcsICdjYW5jZWxsZWQnXSxcbiAgICBkZWZhdWx0OiAncGVuZGluZydcbiAgfSxcbiAgdHJhY2tpbmdOdW1iZXI6IFN0cmluZyxcbiAgbm90ZXM6IFN0cmluZyxcbiAgcmVmZXJyYWxTb3VyY2U6IFN0cmluZyAvLyBUcmFjayB3aGljaCBzaXN0ZXIgc2l0ZSByZWZlcnJlZCB0aGlzIG9yZGVyXG59LCB7XG4gIHRpbWVzdGFtcHM6IHRydWVcbn0pO1xuXG4vLyBJbmRleGVzIGZvciBwZXJmb3JtYW5jZVxub3JkZXJTY2hlbWEuaW5kZXgoeyBvcmRlck51bWJlcjogMSB9KTtcbm9yZGVyU2NoZW1hLmluZGV4KHsgY3VzdG9tZXI6IDEsIGNyZWF0ZWRBdDogLTEgfSk7XG5vcmRlclNjaGVtYS5pbmRleCh7ICdndWVzdEluZm8uZW1haWwnOiAxIH0pO1xub3JkZXJTY2hlbWEuaW5kZXgoeyBzdGF0dXM6IDEgfSk7XG5vcmRlclNjaGVtYS5pbmRleCh7ICdwYXltZW50LnN0YXR1cyc6IDEgfSk7XG5vcmRlclNjaGVtYS5pbmRleCh7IHJlZmVycmFsU291cmNlOiAxIH0pO1xub3JkZXJTY2hlbWEuaW5kZXgoeyBjcmVhdGVkQXQ6IC0xIH0pO1xub3JkZXJTY2hlbWEuaW5kZXgoeyAnaXRlbXMud2hvbGVzYWxlci5ub3RpZmllZCc6IDEgfSk7XG5cbi8vIFByZS1zYXZlIG1pZGRsZXdhcmVcbm9yZGVyU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHtcbiAgaWYgKCF0aGlzLm9yZGVyTnVtYmVyKSB7XG4gICAgdGhpcy5vcmRlck51bWJlciA9ICdPUkQtJyArIERhdGUubm93KCkgKyAnLScgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNSkudG9VcHBlckNhc2UoKTtcbiAgfVxuICBuZXh0KCk7XG59KTtcblxuLy8gTWV0aG9kIHRvIGdldCBjdXN0b21lciBlbWFpbCAod29ya3MgZm9yIGJvdGggZ3Vlc3QgYW5kIHJlZ2lzdGVyZWQgdXNlcnMpXG5vcmRlclNjaGVtYS5tZXRob2RzLmdldEN1c3RvbWVyRW1haWwgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuY3VzdG9tZXIgJiYgdGhpcy5wb3B1bGF0ZWQoJ2N1c3RvbWVyJykpIHtcbiAgICByZXR1cm4gdGhpcy5jdXN0b21lci5lbWFpbDtcbiAgfVxuICByZXR1cm4gdGhpcy5ndWVzdEluZm8uZW1haWw7XG59O1xuXG4vLyBNZXRob2QgdG8gZ2V0IGN1c3RvbWVyIG5hbWVcbm9yZGVyU2NoZW1hLm1ldGhvZHMuZ2V0Q3VzdG9tZXJOYW1lID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmN1c3RvbWVyICYmIHRoaXMucG9wdWxhdGVkKCdjdXN0b21lcicpKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuY3VzdG9tZXIuZmlyc3ROYW1lfSAke3RoaXMuY3VzdG9tZXIubGFzdE5hbWV9YDtcbiAgfVxuICByZXR1cm4gYCR7dGhpcy5ndWVzdEluZm8uZmlyc3ROYW1lfSAke3RoaXMuZ3Vlc3RJbmZvLmxhc3ROYW1lfWA7XG59O1xuXG4vLyBNZXRob2QgdG8gY2hlY2sgaWYgYWxsIHdob2xlc2FsZXJzIGhhdmUgYmVlbiBub3RpZmllZFxub3JkZXJTY2hlbWEubWV0aG9kcy5hbGxXaG9sZXNhbGVyc05vdGlmaWVkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLml0ZW1zLmV2ZXJ5KGl0ZW0gPT4gaXRlbS53aG9sZXNhbGVyLm5vdGlmaWVkKTtcbn07XG5cbi8vIE1ldGhvZCB0byBnZXQgcGVuZGluZyB3aG9sZXNhbGVyIG5vdGlmaWNhdGlvbnNcbm9yZGVyU2NoZW1hLm1ldGhvZHMuZ2V0UGVuZGluZ05vdGlmaWNhdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gIWl0ZW0ud2hvbGVzYWxlci5ub3RpZmllZCk7XG59O1xuXG4vLyBNZXRob2QgdG8gdXBkYXRlIHdob2xlc2FsZXIgbm90aWZpY2F0aW9uIHN0YXR1c1xub3JkZXJTY2hlbWEubWV0aG9kcy51cGRhdGVXaG9sZXNhbGVyTm90aWZpY2F0aW9uID0gZnVuY3Rpb24oaXRlbUlkLCBzdWNjZXNzLCBlcnJvciA9IG51bGwpIHtcbiAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuaWQoaXRlbUlkKTtcbiAgaWYgKGl0ZW0pIHtcbiAgICBpdGVtLndob2xlc2FsZXIubm90aWZpY2F0aW9uQXR0ZW1wdHMgKz0gMTtcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgaXRlbS53aG9sZXNhbGVyLm5vdGlmaWVkID0gdHJ1ZTtcbiAgICAgIGl0ZW0ud2hvbGVzYWxlci5ub3RpZmllZEF0ID0gbmV3IERhdGUoKTtcbiAgICAgIGl0ZW0ud2hvbGVzYWxlci5sYXN0Tm90aWZpY2F0aW9uRXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtLndob2xlc2FsZXIubGFzdE5vdGlmaWNhdGlvbkVycm9yID0gZXJyb3I7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzLnNhdmUoKTtcbn07XG5cbi8vIFN0YXRpYyBtZXRob2QgdG8gZmluZCBvcmRlcnMgbmVlZGluZyB3aG9sZXNhbGVyIG5vdGlmaWNhdGlvblxub3JkZXJTY2hlbWEuc3RhdGljcy5maW5kUGVuZGluZ05vdGlmaWNhdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZmluZCh7XG4gICAgJ3BheW1lbnQuc3RhdHVzJzogJ3BhaWQnLFxuICAgICdpdGVtcy53aG9sZXNhbGVyLm5vdGlmaWVkJzogZmFsc2VcbiAgfSk7XG59O1xuXG4vLyBNZXRob2QgdG8gZ2V0IHB1YmxpYyBvcmRlciBkYXRhIChleGNsdWRlcyBzZW5zaXRpdmUgd2hvbGVzYWxlciBpbmZvKVxub3JkZXJTY2hlbWEubWV0aG9kcy50b1B1YmxpY0pTT04gPSBmdW5jdGlvbigpIHtcbiAgY29uc3Qgb3JkZXIgPSB0aGlzLnRvT2JqZWN0KCk7XG4gIFxuICAvLyBSZW1vdmUgc2Vuc2l0aXZlIHdob2xlc2FsZXIgaW5mb3JtYXRpb24gZnJvbSBpdGVtc1xuICBpZiAob3JkZXIuaXRlbXMpIHtcbiAgICBvcmRlci5pdGVtcyA9IG9yZGVyLml0ZW1zLm1hcChpdGVtID0+IHtcbiAgICAgIGNvbnN0IHB1YmxpY0l0ZW0gPSB7IC4uLml0ZW0gfTtcbiAgICAgIGlmIChwdWJsaWNJdGVtLndob2xlc2FsZXIpIHtcbiAgICAgICAgLy8gS2VlcCBvbmx5IG5vdGlmaWNhdGlvbiBzdGF0dXMsIHJlbW92ZSBzZW5zaXRpdmUgZGV0YWlsc1xuICAgICAgICBwdWJsaWNJdGVtLndob2xlc2FsZXIgPSB7XG4gICAgICAgICAgbm90aWZpZWQ6IGl0ZW0ud2hvbGVzYWxlci5ub3RpZmllZCxcbiAgICAgICAgICBub3RpZmllZEF0OiBpdGVtLndob2xlc2FsZXIubm90aWZpZWRBdFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHB1YmxpY0l0ZW07XG4gICAgfSk7XG4gIH1cbiAgXG4gIHJldHVybiBvcmRlcjtcbn07XG5cbi8vIEhvb2sgdHJpZ2dlciBjb21tZW50IC0gd2hvbGVzYWxlciBub3RpZmljYXRpb24gY2hlY2tcbi8vIFJlZmVycmFsIHRyYWNraW5nIGhvb2sgdGVzdFxuXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdPcmRlcicsIG9yZGVyU2NoZW1hKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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