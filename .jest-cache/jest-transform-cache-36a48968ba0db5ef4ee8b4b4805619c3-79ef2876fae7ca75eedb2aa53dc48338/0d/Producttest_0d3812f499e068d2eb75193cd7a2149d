5d45687a47d9e25abb690e2b54f273c0
const mongoose = require('mongoose');
const Product = require('../../models/Product');
describe('Product Model', () => {
  describe('Basic Product Creation', () => {
    test('should create a product with all required fields', async () => {
      const productData = {
        name: 'Amethyst Crystal',
        slug: 'amethyst-crystal',
        description: 'Beautiful purple amethyst for spiritual healing',
        shortDescription: 'Purple amethyst crystal',
        price: 29.99,
        category: 'crystals',
        wholesaler: {
          name: 'Crystal Wholesale Co',
          email: 'orders@crystalwholesale.com',
          productCode: 'AME-001',
          cost: 15.00
        }
      };
      const product = new Product(productData);
      const savedProduct = await product.save();
      expect(savedProduct.name).toBe(productData.name);
      expect(savedProduct.slug).toBe(productData.slug);
      expect(savedProduct.wholesaler.name).toBe(productData.wholesaler.name);
      expect(savedProduct.crossSiteIntegration.enabled).toBe(true);
      expect(savedProduct.crossSiteIntegration.referenceKey).toBe(productData.slug);
    });
    test('should auto-generate referenceKey from slug when cross-site integration is enabled', async () => {
      const product = new Product({
        name: 'Rose Quartz',
        slug: 'rose-quartz',
        description: 'Pink crystal for love and healing',
        shortDescription: 'Pink rose quartz',
        price: 19.99,
        category: 'crystals',
        wholesaler: {
          name: 'Crystal Wholesale Co',
          email: 'orders@crystalwholesale.com',
          productCode: 'RQ-001',
          cost: 10.00
        }
      });
      const savedProduct = await product.save();
      expect(savedProduct.crossSiteIntegration.referenceKey).toBe('rose-quartz');
    });
  });
  describe('Data Privacy Methods', () => {
    let testProduct;
    beforeEach(async () => {
      testProduct = await Product.create({
        name: 'Test Crystal',
        slug: 'test-crystal',
        description: 'Test description',
        shortDescription: 'Test short description',
        price: 25.00,
        category: 'crystals',
        wholesaler: {
          name: 'Secret Wholesaler',
          email: 'secret@wholesaler.com',
          productCode: 'SECRET-001',
          cost: 12.50
        },
        properties: {
          chakra: ['crown'],
          element: ['spirit']
        }
      });
    });
    test('toPublicJSON should exclude wholesaler information', () => {
      const publicData = testProduct.toPublicJSON();
      expect(publicData.name).toBe('Test Crystal');
      expect(publicData.price).toBe(25.00);
      expect(publicData.properties).toBeDefined();
      expect(publicData.wholesaler).toBeUndefined();
    });
    test('findPublic should return products without wholesaler info', async () => {
      const publicProducts = await Product.findPublic();
      expect(publicProducts).toHaveLength(1);
      expect(publicProducts[0].name).toBe('Test Crystal');
      expect(publicProducts[0].toObject()).not.toHaveProperty('wholesaler');
    });
    test('getCrossSiteData should return only cross-site relevant fields', () => {
      const crossSiteData = testProduct.getCrossSiteData();
      expect(crossSiteData.name).toBe('Test Crystal');
      expect(crossSiteData.slug).toBe('test-crystal');
      expect(crossSiteData.price).toBe(25.00);
      expect(crossSiteData.properties).toBeDefined();
      expect(crossSiteData.crossSiteIntegration).toBeDefined();
      expect(crossSiteData.wholesaler).toBeUndefined();
    });
  });
  describe('Validation', () => {
    test('should require all mandatory fields', async () => {
      const product = new Product({});
      await expect(product.save()).rejects.toThrow();
    });
    test('should enforce unique slug', async () => {
      await Product.create({
        name: 'First Product',
        slug: 'unique-slug',
        description: 'First description',
        shortDescription: 'First short',
        price: 10.00,
        category: 'crystals',
        wholesaler: {
          name: 'Wholesaler',
          email: 'test@wholesaler.com',
          productCode: 'TEST-001',
          cost: 5.00
        }
      });
      const duplicateProduct = new Product({
        name: 'Second Product',
        slug: 'unique-slug',
        description: 'Second description',
        shortDescription: 'Second short',
        price: 15.00,
        category: 'crystals',
        wholesaler: {
          name: 'Wholesaler',
          email: 'test@wholesaler.com',
          productCode: 'TEST-002',
          cost: 7.50
        }
      });
      await expect(duplicateProduct.save()).rejects.toThrow();
    });
    test('should validate category enum', async () => {
      const product = new Product({
        name: 'Invalid Category Product',
        slug: 'invalid-category',
        description: 'Test description',
        shortDescription: 'Test short',
        price: 10.00,
        category: 'invalid-category',
        wholesaler: {
          name: 'Wholesaler',
          email: 'test@wholesaler.com',
          productCode: 'TEST-001',
          cost: 5.00
        }
      });
      await expect(product.save()).rejects.toThrow();
    });
  });
  describe('Indexes', () => {
    test('should have proper indexes for performance', async () => {
      const indexes = await Product.collection.getIndexes();
      expect(indexes).toHaveProperty('slug_1');
      expect(indexes).toHaveProperty('category_1_isActive_1');
      expect(Object.keys(indexes)).toContain('crossSiteIntegration.referenceKey_1');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJQcm9kdWN0IiwiZGVzY3JpYmUiLCJ0ZXN0IiwicHJvZHVjdERhdGEiLCJuYW1lIiwic2x1ZyIsImRlc2NyaXB0aW9uIiwic2hvcnREZXNjcmlwdGlvbiIsInByaWNlIiwiY2F0ZWdvcnkiLCJ3aG9sZXNhbGVyIiwiZW1haWwiLCJwcm9kdWN0Q29kZSIsImNvc3QiLCJwcm9kdWN0Iiwic2F2ZWRQcm9kdWN0Iiwic2F2ZSIsImV4cGVjdCIsInRvQmUiLCJjcm9zc1NpdGVJbnRlZ3JhdGlvbiIsImVuYWJsZWQiLCJyZWZlcmVuY2VLZXkiLCJ0ZXN0UHJvZHVjdCIsImJlZm9yZUVhY2giLCJjcmVhdGUiLCJwcm9wZXJ0aWVzIiwiY2hha3JhIiwiZWxlbWVudCIsInB1YmxpY0RhdGEiLCJ0b1B1YmxpY0pTT04iLCJ0b0JlRGVmaW5lZCIsInRvQmVVbmRlZmluZWQiLCJwdWJsaWNQcm9kdWN0cyIsImZpbmRQdWJsaWMiLCJ0b0hhdmVMZW5ndGgiLCJ0b09iamVjdCIsIm5vdCIsInRvSGF2ZVByb3BlcnR5IiwiY3Jvc3NTaXRlRGF0YSIsImdldENyb3NzU2l0ZURhdGEiLCJyZWplY3RzIiwidG9UaHJvdyIsImR1cGxpY2F0ZVByb2R1Y3QiLCJpbmRleGVzIiwiY29sbGVjdGlvbiIsImdldEluZGV4ZXMiLCJPYmplY3QiLCJrZXlzIiwidG9Db250YWluIl0sInNvdXJjZXMiOlsiUHJvZHVjdC50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IFByb2R1Y3QgPSByZXF1aXJlKCcuLi8uLi9tb2RlbHMvUHJvZHVjdCcpO1xuXG5kZXNjcmliZSgnUHJvZHVjdCBNb2RlbCcsICgpID0+IHtcblxuICBkZXNjcmliZSgnQmFzaWMgUHJvZHVjdCBDcmVhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGEgcHJvZHVjdCB3aXRoIGFsbCByZXF1aXJlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9kdWN0RGF0YSA9IHtcbiAgICAgICAgbmFtZTogJ0FtZXRoeXN0IENyeXN0YWwnLFxuICAgICAgICBzbHVnOiAnYW1ldGh5c3QtY3J5c3RhbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQmVhdXRpZnVsIHB1cnBsZSBhbWV0aHlzdCBmb3Igc3Bpcml0dWFsIGhlYWxpbmcnLFxuICAgICAgICBzaG9ydERlc2NyaXB0aW9uOiAnUHVycGxlIGFtZXRoeXN0IGNyeXN0YWwnLFxuICAgICAgICBwcmljZTogMjkuOTksXG4gICAgICAgIGNhdGVnb3J5OiAnY3J5c3RhbHMnLFxuICAgICAgICB3aG9sZXNhbGVyOiB7XG4gICAgICAgICAgbmFtZTogJ0NyeXN0YWwgV2hvbGVzYWxlIENvJyxcbiAgICAgICAgICBlbWFpbDogJ29yZGVyc0BjcnlzdGFsd2hvbGVzYWxlLmNvbScsXG4gICAgICAgICAgcHJvZHVjdENvZGU6ICdBTUUtMDAxJyxcbiAgICAgICAgICBjb3N0OiAxNS4wMFxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcm9kdWN0ID0gbmV3IFByb2R1Y3QocHJvZHVjdERhdGEpO1xuICAgICAgY29uc3Qgc2F2ZWRQcm9kdWN0ID0gYXdhaXQgcHJvZHVjdC5zYXZlKCk7XG5cbiAgICAgIGV4cGVjdChzYXZlZFByb2R1Y3QubmFtZSkudG9CZShwcm9kdWN0RGF0YS5uYW1lKTtcbiAgICAgIGV4cGVjdChzYXZlZFByb2R1Y3Quc2x1ZykudG9CZShwcm9kdWN0RGF0YS5zbHVnKTtcbiAgICAgIGV4cGVjdChzYXZlZFByb2R1Y3Qud2hvbGVzYWxlci5uYW1lKS50b0JlKHByb2R1Y3REYXRhLndob2xlc2FsZXIubmFtZSk7XG4gICAgICBleHBlY3Qoc2F2ZWRQcm9kdWN0LmNyb3NzU2l0ZUludGVncmF0aW9uLmVuYWJsZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc2F2ZWRQcm9kdWN0LmNyb3NzU2l0ZUludGVncmF0aW9uLnJlZmVyZW5jZUtleSkudG9CZShwcm9kdWN0RGF0YS5zbHVnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBhdXRvLWdlbmVyYXRlIHJlZmVyZW5jZUtleSBmcm9tIHNsdWcgd2hlbiBjcm9zcy1zaXRlIGludGVncmF0aW9uIGlzIGVuYWJsZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9kdWN0ID0gbmV3IFByb2R1Y3Qoe1xuICAgICAgICBuYW1lOiAnUm9zZSBRdWFydHonLFxuICAgICAgICBzbHVnOiAncm9zZS1xdWFydHonLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1BpbmsgY3J5c3RhbCBmb3IgbG92ZSBhbmQgaGVhbGluZycsXG4gICAgICAgIHNob3J0RGVzY3JpcHRpb246ICdQaW5rIHJvc2UgcXVhcnR6JyxcbiAgICAgICAgcHJpY2U6IDE5Ljk5LFxuICAgICAgICBjYXRlZ29yeTogJ2NyeXN0YWxzJyxcbiAgICAgICAgd2hvbGVzYWxlcjoge1xuICAgICAgICAgIG5hbWU6ICdDcnlzdGFsIFdob2xlc2FsZSBDbycsXG4gICAgICAgICAgZW1haWw6ICdvcmRlcnNAY3J5c3RhbHdob2xlc2FsZS5jb20nLFxuICAgICAgICAgIHByb2R1Y3RDb2RlOiAnUlEtMDAxJyxcbiAgICAgICAgICBjb3N0OiAxMC4wMFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2F2ZWRQcm9kdWN0ID0gYXdhaXQgcHJvZHVjdC5zYXZlKCk7XG4gICAgICBleHBlY3Qoc2F2ZWRQcm9kdWN0LmNyb3NzU2l0ZUludGVncmF0aW9uLnJlZmVyZW5jZUtleSkudG9CZSgncm9zZS1xdWFydHonKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0RhdGEgUHJpdmFjeSBNZXRob2RzJywgKCkgPT4ge1xuICAgIGxldCB0ZXN0UHJvZHVjdDtcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgdGVzdFByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmNyZWF0ZSh7XG4gICAgICAgIG5hbWU6ICdUZXN0IENyeXN0YWwnLFxuICAgICAgICBzbHVnOiAndGVzdC1jcnlzdGFsJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0IGRlc2NyaXB0aW9uJyxcbiAgICAgICAgc2hvcnREZXNjcmlwdGlvbjogJ1Rlc3Qgc2hvcnQgZGVzY3JpcHRpb24nLFxuICAgICAgICBwcmljZTogMjUuMDAsXG4gICAgICAgIGNhdGVnb3J5OiAnY3J5c3RhbHMnLFxuICAgICAgICB3aG9sZXNhbGVyOiB7XG4gICAgICAgICAgbmFtZTogJ1NlY3JldCBXaG9sZXNhbGVyJyxcbiAgICAgICAgICBlbWFpbDogJ3NlY3JldEB3aG9sZXNhbGVyLmNvbScsXG4gICAgICAgICAgcHJvZHVjdENvZGU6ICdTRUNSRVQtMDAxJyxcbiAgICAgICAgICBjb3N0OiAxMi41MFxuICAgICAgICB9LFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgY2hha3JhOiBbJ2Nyb3duJ10sXG4gICAgICAgICAgZWxlbWVudDogWydzcGlyaXQnXVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3RvUHVibGljSlNPTiBzaG91bGQgZXhjbHVkZSB3aG9sZXNhbGVyIGluZm9ybWF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHVibGljRGF0YSA9IHRlc3RQcm9kdWN0LnRvUHVibGljSlNPTigpO1xuICAgICAgXG4gICAgICBleHBlY3QocHVibGljRGF0YS5uYW1lKS50b0JlKCdUZXN0IENyeXN0YWwnKTtcbiAgICAgIGV4cGVjdChwdWJsaWNEYXRhLnByaWNlKS50b0JlKDI1LjAwKTtcbiAgICAgIGV4cGVjdChwdWJsaWNEYXRhLnByb3BlcnRpZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocHVibGljRGF0YS53aG9sZXNhbGVyKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdmaW5kUHVibGljIHNob3VsZCByZXR1cm4gcHJvZHVjdHMgd2l0aG91dCB3aG9sZXNhbGVyIGluZm8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwdWJsaWNQcm9kdWN0cyA9IGF3YWl0IFByb2R1Y3QuZmluZFB1YmxpYygpO1xuICAgICAgXG4gICAgICBleHBlY3QocHVibGljUHJvZHVjdHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChwdWJsaWNQcm9kdWN0c1swXS5uYW1lKS50b0JlKCdUZXN0IENyeXN0YWwnKTtcbiAgICAgIGV4cGVjdChwdWJsaWNQcm9kdWN0c1swXS50b09iamVjdCgpKS5ub3QudG9IYXZlUHJvcGVydHkoJ3dob2xlc2FsZXInKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2dldENyb3NzU2l0ZURhdGEgc2hvdWxkIHJldHVybiBvbmx5IGNyb3NzLXNpdGUgcmVsZXZhbnQgZmllbGRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3Jvc3NTaXRlRGF0YSA9IHRlc3RQcm9kdWN0LmdldENyb3NzU2l0ZURhdGEoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNyb3NzU2l0ZURhdGEubmFtZSkudG9CZSgnVGVzdCBDcnlzdGFsJyk7XG4gICAgICBleHBlY3QoY3Jvc3NTaXRlRGF0YS5zbHVnKS50b0JlKCd0ZXN0LWNyeXN0YWwnKTtcbiAgICAgIGV4cGVjdChjcm9zc1NpdGVEYXRhLnByaWNlKS50b0JlKDI1LjAwKTtcbiAgICAgIGV4cGVjdChjcm9zc1NpdGVEYXRhLnByb3BlcnRpZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoY3Jvc3NTaXRlRGF0YS5jcm9zc1NpdGVJbnRlZ3JhdGlvbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjcm9zc1NpdGVEYXRhLndob2xlc2FsZXIpLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1ZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJlcXVpcmUgYWxsIG1hbmRhdG9yeSBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9kdWN0ID0gbmV3IFByb2R1Y3Qoe30pO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QocHJvZHVjdC5zYXZlKCkpLnJlamVjdHMudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGVuZm9yY2UgdW5pcXVlIHNsdWcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBQcm9kdWN0LmNyZWF0ZSh7XG4gICAgICAgIG5hbWU6ICdGaXJzdCBQcm9kdWN0JyxcbiAgICAgICAgc2x1ZzogJ3VuaXF1ZS1zbHVnJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGaXJzdCBkZXNjcmlwdGlvbicsXG4gICAgICAgIHNob3J0RGVzY3JpcHRpb246ICdGaXJzdCBzaG9ydCcsXG4gICAgICAgIHByaWNlOiAxMC4wMCxcbiAgICAgICAgY2F0ZWdvcnk6ICdjcnlzdGFscycsXG4gICAgICAgIHdob2xlc2FsZXI6IHtcbiAgICAgICAgICBuYW1lOiAnV2hvbGVzYWxlcicsXG4gICAgICAgICAgZW1haWw6ICd0ZXN0QHdob2xlc2FsZXIuY29tJyxcbiAgICAgICAgICBwcm9kdWN0Q29kZTogJ1RFU1QtMDAxJyxcbiAgICAgICAgICBjb3N0OiA1LjAwXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkdXBsaWNhdGVQcm9kdWN0ID0gbmV3IFByb2R1Y3Qoe1xuICAgICAgICBuYW1lOiAnU2Vjb25kIFByb2R1Y3QnLFxuICAgICAgICBzbHVnOiAndW5pcXVlLXNsdWcnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1NlY29uZCBkZXNjcmlwdGlvbicsXG4gICAgICAgIHNob3J0RGVzY3JpcHRpb246ICdTZWNvbmQgc2hvcnQnLFxuICAgICAgICBwcmljZTogMTUuMDAsXG4gICAgICAgIGNhdGVnb3J5OiAnY3J5c3RhbHMnLFxuICAgICAgICB3aG9sZXNhbGVyOiB7XG4gICAgICAgICAgbmFtZTogJ1dob2xlc2FsZXInLFxuICAgICAgICAgIGVtYWlsOiAndGVzdEB3aG9sZXNhbGVyLmNvbScsXG4gICAgICAgICAgcHJvZHVjdENvZGU6ICdURVNULTAwMicsXG4gICAgICAgICAgY29zdDogNy41MFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGR1cGxpY2F0ZVByb2R1Y3Quc2F2ZSgpKS5yZWplY3RzLnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBjYXRlZ29yeSBlbnVtJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHtcbiAgICAgICAgbmFtZTogJ0ludmFsaWQgQ2F0ZWdvcnkgUHJvZHVjdCcsXG4gICAgICAgIHNsdWc6ICdpbnZhbGlkLWNhdGVnb3J5JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0IGRlc2NyaXB0aW9uJyxcbiAgICAgICAgc2hvcnREZXNjcmlwdGlvbjogJ1Rlc3Qgc2hvcnQnLFxuICAgICAgICBwcmljZTogMTAuMDAsXG4gICAgICAgIGNhdGVnb3J5OiAnaW52YWxpZC1jYXRlZ29yeScsXG4gICAgICAgIHdob2xlc2FsZXI6IHtcbiAgICAgICAgICBuYW1lOiAnV2hvbGVzYWxlcicsXG4gICAgICAgICAgZW1haWw6ICd0ZXN0QHdob2xlc2FsZXIuY29tJyxcbiAgICAgICAgICBwcm9kdWN0Q29kZTogJ1RFU1QtMDAxJyxcbiAgICAgICAgICBjb3N0OiA1LjAwXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBleHBlY3QocHJvZHVjdC5zYXZlKCkpLnJlamVjdHMudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW5kZXhlcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBwcm9wZXIgaW5kZXhlcyBmb3IgcGVyZm9ybWFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbmRleGVzID0gYXdhaXQgUHJvZHVjdC5jb2xsZWN0aW9uLmdldEluZGV4ZXMoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGluZGV4ZXMpLnRvSGF2ZVByb3BlcnR5KCdzbHVnXzEnKTtcbiAgICAgIGV4cGVjdChpbmRleGVzKS50b0hhdmVQcm9wZXJ0eSgnY2F0ZWdvcnlfMV9pc0FjdGl2ZV8xJyk7XG4gICAgICBleHBlY3QoT2JqZWN0LmtleXMoaW5kZXhlcykpLnRvQ29udGFpbignY3Jvc3NTaXRlSW50ZWdyYXRpb24ucmVmZXJlbmNlS2V5XzEnKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNwQyxNQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUUvQ0UsUUFBUSxDQUFDLGVBQWUsRUFBRSxNQUFNO0VBRTlCQSxRQUFRLENBQUMsd0JBQXdCLEVBQUUsTUFBTTtJQUN2Q0MsSUFBSSxDQUFDLGtEQUFrRCxFQUFFLFlBQVk7TUFDbkUsTUFBTUMsV0FBVyxHQUFHO1FBQ2xCQyxJQUFJLEVBQUUsa0JBQWtCO1FBQ3hCQyxJQUFJLEVBQUUsa0JBQWtCO1FBQ3hCQyxXQUFXLEVBQUUsaURBQWlEO1FBQzlEQyxnQkFBZ0IsRUFBRSx5QkFBeUI7UUFDM0NDLEtBQUssRUFBRSxLQUFLO1FBQ1pDLFFBQVEsRUFBRSxVQUFVO1FBQ3BCQyxVQUFVLEVBQUU7VUFDVk4sSUFBSSxFQUFFLHNCQUFzQjtVQUM1Qk8sS0FBSyxFQUFFLDZCQUE2QjtVQUNwQ0MsV0FBVyxFQUFFLFNBQVM7VUFDdEJDLElBQUksRUFBRTtRQUNSO01BQ0YsQ0FBQztNQUVELE1BQU1DLE9BQU8sR0FBRyxJQUFJZCxPQUFPLENBQUNHLFdBQVcsQ0FBQztNQUN4QyxNQUFNWSxZQUFZLEdBQUcsTUFBTUQsT0FBTyxDQUFDRSxJQUFJLENBQUMsQ0FBQztNQUV6Q0MsTUFBTSxDQUFDRixZQUFZLENBQUNYLElBQUksQ0FBQyxDQUFDYyxJQUFJLENBQUNm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