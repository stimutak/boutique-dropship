6c7c21f7be1a8b1f795e750e2e6eefef
const {
  CircuitBreaker,
  retryWithBackoff,
  PaymentErrorRecovery,
  WholesalerErrorRecovery
} = require('../../utils/errorRecovery');
describe('Error Recovery Utilities', () => {
  describe('CircuitBreaker', () => {
    let circuitBreaker;
    beforeEach(() => {
      circuitBreaker = new CircuitBreaker('TestService', {
        failureThreshold: 2,
        resetTimeout: 1000
      });
    });
    test('should start in CLOSED state', () => {
      expect(circuitBreaker.state).toBe('CLOSED');
      expect(circuitBreaker.failureCount).toBe(0);
    });
    test('should execute operation successfully when CLOSED', async () => {
      const operation = jest.fn().mockResolvedValue('success');
      const result = await circuitBreaker.execute(operation);
      expect(result).toBe('success');
      expect(operation).toHaveBeenCalledTimes(1);
      expect(circuitBreaker.state).toBe('CLOSED');
    });
    test('should open circuit after failure threshold', async () => {
      const operation = jest.fn().mockRejectedValue(new Error('Service error'));

      // First failure
      await expect(circuitBreaker.execute(operation)).rejects.toThrow('Service error');
      expect(circuitBreaker.state).toBe('CLOSED');
      expect(circuitBreaker.failureCount).toBe(1);

      // Second failure - should open circuit
      await expect(circuitBreaker.execute(operation)).rejects.toThrow('Service error');
      expect(circuitBreaker.state).toBe('OPEN');
      expect(circuitBreaker.failureCount).toBe(2);
    });
    test('should reject immediately when OPEN', async () => {
      const operation = jest.fn().mockRejectedValue(new Error('Service error'));

      // Trigger circuit to open
      await expect(circuitBreaker.execute(operation)).rejects.toThrow();
      await expect(circuitBreaker.execute(operation)).rejects.toThrow();

      // Should now reject immediately
      await expect(circuitBreaker.execute(operation)).rejects.toThrow('Circuit breaker is OPEN');
      expect(operation).toHaveBeenCalledTimes(2); // Not called the third time
    });
    test('should transition to HALF_OPEN after timeout', async () => {
      const operation = jest.fn().mockRejectedValueOnce(new Error('Service error')).mockRejectedValueOnce(new Error('Service error')).mockResolvedValueOnce('success');

      // Open the circuit
      await expect(circuitBreaker.execute(operation)).rejects.toThrow();
      await expect(circuitBreaker.execute(operation)).rejects.toThrow();
      expect(circuitBreaker.state).toBe('OPEN');

      // Wait for timeout and try again
      await new Promise(resolve => setTimeout(resolve, 1100));
      const result = await circuitBreaker.execute(operation);
      expect(result).toBe('success');
      expect(circuitBreaker.state).toBe('CLOSED');
    });
    test('should provide status information', () => {
      const status = circuitBreaker.getStatus();
      expect(status).toHaveProperty('name', 'TestService');
      expect(status).toHaveProperty('state', 'CLOSED');
      expect(status).toHaveProperty('failureCount', 0);
      expect(status).toHaveProperty('lastFailureTime');
      expect(status).toHaveProperty('nextAttempt');
    });
  });
  describe('retryWithBackoff', () => {
    test('should succeed on first attempt', async () => {
      const operation = jest.fn().mockResolvedValue('success');
      const result = await retryWithBackoff(operation, 'Test operation');
      expect(result).toBe('success');
      expect(operation).toHaveBeenCalledTimes(1);
    });
    test('should retry on failure and eventually succeed', async () => {
      const operation = jest.fn().mockRejectedValueOnce(new Error('Temporary error')).mockResolvedValueOnce('success');
      const result = await retryWithBackoff(operation, 'Test operation', {
        maxRetries: 3,
        baseDelay: 10
      });
      expect(result).toBe('success');
      expect(operation).toHaveBeenCalledTimes(2);
    });
    test('should fail after max retries', async () => {
      const operation = jest.fn().mockRejectedValue(new Error('Persistent error'));
      await expect(retryWithBackoff(operation, 'Test operation', {
        maxRetries: 2,
        baseDelay: 10
      })).rejects.toThrow('Persistent error');
      expect(operation).toHaveBeenCalledTimes(2);
    });
    test('should use exponential backoff', async () => {
      const operation = jest.fn().mockRejectedValueOnce(new Error('Error 1')).mockRejectedValueOnce(new Error('Error 2')).mockResolvedValueOnce('success');
      const startTime = Date.now();
      const result = await retryWithBackoff(operation, 'Test operation', {
        maxRetries: 3,
        baseDelay: 50,
        backoffFactor: 2
      });
      const endTime = Date.now();
      const duration = endTime - startTime;
      expect(result).toBe('success');
      expect(operation).toHaveBeenCalledTimes(3);
      // Should have waited at least 50ms + 100ms = 150ms
      expect(duration).toBeGreaterThan(140);
    });
  });
  describe('PaymentErrorRecovery', () => {
    let paymentRecovery;
    beforeEach(() => {
      paymentRecovery = new PaymentErrorRecovery();
    });
    test('should process payment successfully', async () => {
      const paymentOperation = jest.fn().mockResolvedValue({
        status: 'paid'
      });
      const paymentData = {
        orderId: '123',
        amount: 100
      };
      const result = await paymentRecovery.processPayment(paymentOperation, paymentData);
      expect(result).toEqual({
        status: 'paid'
      });
      expect(paymentOperation).toHaveBeenCalledWith(paymentData);
    });
    test('should handle network errors by queueing for retry', async () => {
      const error = new Error('network timeout');
      const paymentData = {
        orderId: '123',
        amount: 100
      };
      const result = await paymentRecovery.handlePaymentFailure(error, paymentData);
      expect(result.status).toBe('queued_for_retry');
      expect(result.retryAt).toBeInstanceOf(Date);
    });
    test('should handle insufficient funds by notifying customer', async () => {
      const error = new Error('insufficient_funds');
      const paymentData = {
        orderId: '123',
        amount: 100
      };
      const result = await paymentRecovery.handlePaymentFailure(error, paymentData);
      expect(result.status).toBe('customer_notified');
      expect(result.issueType).toBe('insufficient_funds');
    });
    test('should escalate unknown errors', async () => {
      const error = new Error('unknown error');
      const paymentData = {
        orderId: '123',
        amount: 100
      };
      const result = await paymentRecovery.handlePaymentFailure(error, paymentData);
      expect(result.status).toBe('escalated');
      expect(result.error).toBe('unknown error');
    });
  });
  describe('WholesalerErrorRecovery', () => {
    let wholesalerRecovery;
    beforeEach(() => {
      wholesalerRecovery = new WholesalerErrorRecovery();
    });
    test('should send notification successfully', async () => {
      const notificationOperation = jest.fn().mockResolvedValue({
        sent: true
      });
      const notificationData = {
        orderId: '123',
        wholesalerId: 'w1'
      };
      const result = await wholesalerRecovery.sendNotification(notificationOperation, notificationData);
      expect(result).toEqual({
        sent: true
      });
      expect(notificationOperation).toHaveBeenCalledWith(notificationData);
    });
    test('should handle network errors by queueing for retry', async () => {
      const error = new Error('network error');
      const notificationData = {
        orderId: '123',
        wholesalerId: 'w1'
      };
      const result = await wholesalerRecovery.handleNotificationFailure(error, notificationData);
      expect(result.status).toBe('queued_for_retry');
      expect(result.retryAt).toBeInstanceOf(Date);
    });
    test('should handle email errors by trying alternative method', async () => {
      const error = new Error('invalid_email');
      const notificationData = {
        orderId: '123',
        wholesalerId: 'w1'
      };
      const result = await wholesalerRecovery.handleNotificationFailure(error, notificationData);
      expect(result.status).toBe('alternative_method_attempted');
      expect(result.method).toBe('webhook');
    });
    test('should escalate unknown errors', async () => {
      const error = new Error('unknown error');
      const notificationData = {
        orderId: '123',
        wholesalerId: 'w1'
      };
      const result = await wholesalerRecovery.handleNotificationFailure(error, notificationData);
      expect(result.status).toBe('escalated');
      expect(result.error).toBe('unknown error');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDaXJjdWl0QnJlYWtlciIsInJldHJ5V2l0aEJhY2tvZmYiLCJQYXltZW50RXJyb3JSZWNvdmVyeSIsIldob2xlc2FsZXJFcnJvclJlY292ZXJ5IiwicmVxdWlyZSIsImRlc2NyaWJlIiwiY2lyY3VpdEJyZWFrZXIiLCJiZWZvcmVFYWNoIiwiZmFpbHVyZVRocmVzaG9sZCIsInJlc2V0VGltZW91dCIsInRlc3QiLCJleHBlY3QiLCJzdGF0ZSIsInRvQmUiLCJmYWlsdXJlQ291bnQiLCJvcGVyYXRpb24iLCJqZXN0IiwiZm4iLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInJlc3VsdCIsImV4ZWN1dGUiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwicmVqZWN0cyIsInRvVGhyb3ciLCJtb2NrUmVqZWN0ZWRWYWx1ZU9uY2UiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJzdGF0dXMiLCJnZXRTdGF0dXMiLCJ0b0hhdmVQcm9wZXJ0eSIsIm1heFJldHJpZXMiLCJiYXNlRGVsYXkiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiYmFja29mZkZhY3RvciIsImVuZFRpbWUiLCJkdXJhdGlvbiIsInRvQmVHcmVhdGVyVGhhbiIsInBheW1lbnRSZWNvdmVyeSIsInBheW1lbnRPcGVyYXRpb24iLCJwYXltZW50RGF0YSIsIm9yZGVySWQiLCJhbW91bnQiLCJwcm9jZXNzUGF5bWVudCIsInRvRXF1YWwiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImVycm9yIiwiaGFuZGxlUGF5bWVudEZhaWx1cmUiLCJyZXRyeUF0IiwidG9CZUluc3RhbmNlT2YiLCJpc3N1ZVR5cGUiLCJ3aG9sZXNhbGVyUmVjb3ZlcnkiLCJub3RpZmljYXRpb25PcGVyYXRpb24iLCJzZW50Iiwibm90aWZpY2F0aW9uRGF0YSIsIndob2xlc2FsZXJJZCIsInNlbmROb3RpZmljYXRpb24iLCJoYW5kbGVOb3RpZmljYXRpb25GYWlsdXJlIiwibWV0aG9kIl0sInNvdXJjZXMiOlsiZXJyb3JSZWNvdmVyeS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHtcbiAgQ2lyY3VpdEJyZWFrZXIsXG4gIHJldHJ5V2l0aEJhY2tvZmYsXG4gIFBheW1lbnRFcnJvclJlY292ZXJ5LFxuICBXaG9sZXNhbGVyRXJyb3JSZWNvdmVyeVxufSA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL2Vycm9yUmVjb3ZlcnknKTtcblxuZGVzY3JpYmUoJ0Vycm9yIFJlY292ZXJ5IFV0aWxpdGllcycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ0NpcmN1aXRCcmVha2VyJywgKCkgPT4ge1xuICAgIGxldCBjaXJjdWl0QnJlYWtlcjtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgY2lyY3VpdEJyZWFrZXIgPSBuZXcgQ2lyY3VpdEJyZWFrZXIoJ1Rlc3RTZXJ2aWNlJywge1xuICAgICAgICBmYWlsdXJlVGhyZXNob2xkOiAyLFxuICAgICAgICByZXNldFRpbWVvdXQ6IDEwMDBcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHN0YXJ0IGluIENMT1NFRCBzdGF0ZScsICgpID0+IHtcbiAgICAgIGV4cGVjdChjaXJjdWl0QnJlYWtlci5zdGF0ZSkudG9CZSgnQ0xPU0VEJyk7XG4gICAgICBleHBlY3QoY2lyY3VpdEJyZWFrZXIuZmFpbHVyZUNvdW50KS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGV4ZWN1dGUgb3BlcmF0aW9uIHN1Y2Nlc3NmdWxseSB3aGVuIENMT1NFRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnc3VjY2VzcycpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjaXJjdWl0QnJlYWtlci5leGVjdXRlKG9wZXJhdGlvbik7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ3N1Y2Nlc3MnKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIGV4cGVjdChjaXJjdWl0QnJlYWtlci5zdGF0ZSkudG9CZSgnQ0xPU0VEJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgb3BlbiBjaXJjdWl0IGFmdGVyIGZhaWx1cmUgdGhyZXNob2xkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignU2VydmljZSBlcnJvcicpKTtcbiAgICAgIFxuICAgICAgLy8gRmlyc3QgZmFpbHVyZVxuICAgICAgYXdhaXQgZXhwZWN0KGNpcmN1aXRCcmVha2VyLmV4ZWN1dGUob3BlcmF0aW9uKSkucmVqZWN0cy50b1Rocm93KCdTZXJ2aWNlIGVycm9yJyk7XG4gICAgICBleHBlY3QoY2lyY3VpdEJyZWFrZXIuc3RhdGUpLnRvQmUoJ0NMT1NFRCcpO1xuICAgICAgZXhwZWN0KGNpcmN1aXRCcmVha2VyLmZhaWx1cmVDb3VudCkudG9CZSgxKTtcbiAgICAgIFxuICAgICAgLy8gU2Vjb25kIGZhaWx1cmUgLSBzaG91bGQgb3BlbiBjaXJjdWl0XG4gICAgICBhd2FpdCBleHBlY3QoY2lyY3VpdEJyZWFrZXIuZXhlY3V0ZShvcGVyYXRpb24pKS5yZWplY3RzLnRvVGhyb3coJ1NlcnZpY2UgZXJyb3InKTtcbiAgICAgIGV4cGVjdChjaXJjdWl0QnJlYWtlci5zdGF0ZSkudG9CZSgnT1BFTicpO1xuICAgICAgZXhwZWN0KGNpcmN1aXRCcmVha2VyLmZhaWx1cmVDb3VudCkudG9CZSgyKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgaW1tZWRpYXRlbHkgd2hlbiBPUEVOJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignU2VydmljZSBlcnJvcicpKTtcbiAgICAgIFxuICAgICAgLy8gVHJpZ2dlciBjaXJjdWl0IHRvIG9wZW5cbiAgICAgIGF3YWl0IGV4cGVjdChjaXJjdWl0QnJlYWtlci5leGVjdXRlKG9wZXJhdGlvbikpLnJlamVjdHMudG9UaHJvdygpO1xuICAgICAgYXdhaXQgZXhwZWN0KGNpcmN1aXRCcmVha2VyLmV4ZWN1dGUob3BlcmF0aW9uKSkucmVqZWN0cy50b1Rocm93KCk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBub3cgcmVqZWN0IGltbWVkaWF0ZWx5XG4gICAgICBhd2FpdCBleHBlY3QoY2lyY3VpdEJyZWFrZXIuZXhlY3V0ZShvcGVyYXRpb24pKS5yZWplY3RzLnRvVGhyb3coJ0NpcmN1aXQgYnJlYWtlciBpcyBPUEVOJyk7XG4gICAgICBleHBlY3Qob3BlcmF0aW9uKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7IC8vIE5vdCBjYWxsZWQgdGhlIHRoaXJkIHRpbWVcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB0cmFuc2l0aW9uIHRvIEhBTEZfT1BFTiBhZnRlciB0aW1lb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gamVzdC5mbigpXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdTZXJ2aWNlIGVycm9yJykpXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdTZXJ2aWNlIGVycm9yJykpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoJ3N1Y2Nlc3MnKTtcbiAgICAgIFxuICAgICAgLy8gT3BlbiB0aGUgY2lyY3VpdFxuICAgICAgYXdhaXQgZXhwZWN0KGNpcmN1aXRCcmVha2VyLmV4ZWN1dGUob3BlcmF0aW9uKSkucmVqZWN0cy50b1Rocm93KCk7XG4gICAgICBhd2FpdCBleHBlY3QoY2lyY3VpdEJyZWFrZXIuZXhlY3V0ZShvcGVyYXRpb24pKS5yZWplY3RzLnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdChjaXJjdWl0QnJlYWtlci5zdGF0ZSkudG9CZSgnT1BFTicpO1xuICAgICAgXG4gICAgICAvLyBXYWl0IGZvciB0aW1lb3V0IGFuZCB0cnkgYWdhaW5cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMTAwKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNpcmN1aXRCcmVha2VyLmV4ZWN1dGUob3BlcmF0aW9uKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ3N1Y2Nlc3MnKTtcbiAgICAgIGV4cGVjdChjaXJjdWl0QnJlYWtlci5zdGF0ZSkudG9CZSgnQ0xPU0VEJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcHJvdmlkZSBzdGF0dXMgaW5mb3JtYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0dXMgPSBjaXJjdWl0QnJlYWtlci5nZXRTdGF0dXMoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXR1cykudG9IYXZlUHJvcGVydHkoJ25hbWUnLCAnVGVzdFNlcnZpY2UnKTtcbiAgICAgIGV4cGVjdChzdGF0dXMpLnRvSGF2ZVByb3BlcnR5KCdzdGF0ZScsICdDTE9TRUQnKTtcbiAgICAgIGV4cGVjdChzdGF0dXMpLnRvSGF2ZVByb3BlcnR5KCdmYWlsdXJlQ291bnQnLCAwKTtcbiAgICAgIGV4cGVjdChzdGF0dXMpLnRvSGF2ZVByb3BlcnR5KCdsYXN0RmFpbHVyZVRpbWUnKTtcbiAgICAgIGV4cGVjdChzdGF0dXMpLnRvSGF2ZVByb3BlcnR5KCduZXh0QXR0ZW1wdCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmV0cnlXaXRoQmFja29mZicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc3VjY2VlZCBvbiBmaXJzdCBhdHRlbXB0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCdzdWNjZXNzJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJldHJ5V2l0aEJhY2tvZmYob3BlcmF0aW9uLCAnVGVzdCBvcGVyYXRpb24nKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnc3VjY2VzcycpO1xuICAgICAgZXhwZWN0KG9wZXJhdGlvbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHJ5IG9uIGZhaWx1cmUgYW5kIGV2ZW50dWFsbHkgc3VjY2VlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IGplc3QuZm4oKVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignVGVtcG9yYXJ5IGVycm9yJykpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoJ3N1Y2Nlc3MnKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmV0cnlXaXRoQmFja29mZihvcGVyYXRpb24sICdUZXN0IG9wZXJhdGlvbicsIHtcbiAgICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgICAgYmFzZURlbGF5OiAxMFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ3N1Y2Nlc3MnKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb24pLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBmYWlsIGFmdGVyIG1heCByZXRyaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignUGVyc2lzdGVudCBlcnJvcicpKTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KHJldHJ5V2l0aEJhY2tvZmYob3BlcmF0aW9uLCAnVGVzdCBvcGVyYXRpb24nLCB7XG4gICAgICAgIG1heFJldHJpZXM6IDIsXG4gICAgICAgIGJhc2VEZWxheTogMTBcbiAgICAgIH0pKS5yZWplY3RzLnRvVGhyb3coJ1BlcnNpc3RlbnQgZXJyb3InKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG9wZXJhdGlvbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHVzZSBleHBvbmVudGlhbCBiYWNrb2ZmJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3BlcmF0aW9uID0gamVzdC5mbigpXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdFcnJvciAxJykpXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdFcnJvciAyJykpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoJ3N1Y2Nlc3MnKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmV0cnlXaXRoQmFja29mZihvcGVyYXRpb24sICdUZXN0IG9wZXJhdGlvbicsIHtcbiAgICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgICAgYmFzZURlbGF5OiA1MCxcbiAgICAgICAgYmFja29mZkZhY3RvcjogMlxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdzdWNjZXNzJyk7XG4gICAgICBleHBlY3Qob3BlcmF0aW9uKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMyk7XG4gICAgICAvLyBTaG91bGQgaGF2ZSB3YWl0ZWQgYXQgbGVhc3QgNTBtcyArIDEwMG1zID0gMTUwbXNcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUdyZWF0ZXJUaGFuKDE0MCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQYXltZW50RXJyb3JSZWNvdmVyeScsICgpID0+IHtcbiAgICBsZXQgcGF5bWVudFJlY292ZXJ5O1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBwYXltZW50UmVjb3ZlcnkgPSBuZXcgUGF5bWVudEVycm9yUmVjb3ZlcnkoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcm9jZXNzIHBheW1lbnQgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGF5bWVudE9wZXJhdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHN0YXR1czogJ3BhaWQnIH0pO1xuICAgICAgY29uc3QgcGF5bWVudERhdGEgPSB7IG9yZGVySWQ6ICcxMjMnLCBhbW91bnQ6IDEwMCB9O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwYXltZW50UmVjb3ZlcnkucHJvY2Vzc1BheW1lbnQocGF5bWVudE9wZXJhdGlvbiwgcGF5bWVudERhdGEpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHsgc3RhdHVzOiAncGFpZCcgfSk7XG4gICAgICBleHBlY3QocGF5bWVudE9wZXJhdGlvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgocGF5bWVudERhdGEpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBuZXR3b3JrIGVycm9ycyBieSBxdWV1ZWluZyBmb3IgcmV0cnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignbmV0d29yayB0aW1lb3V0Jyk7XG4gICAgICBjb25zdCBwYXltZW50RGF0YSA9IHsgb3JkZXJJZDogJzEyMycsIGFtb3VudDogMTAwIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBheW1lbnRSZWNvdmVyeS5oYW5kbGVQYXltZW50RmFpbHVyZShlcnJvciwgcGF5bWVudERhdGEpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgncXVldWVkX2Zvcl9yZXRyeScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZXRyeUF0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgaW5zdWZmaWNpZW50IGZ1bmRzIGJ5IG5vdGlmeWluZyBjdXN0b21lcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdpbnN1ZmZpY2llbnRfZnVuZHMnKTtcbiAgICAgIGNvbnN0IHBheW1lbnREYXRhID0geyBvcmRlcklkOiAnMTIzJywgYW1vdW50OiAxMDAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGF5bWVudFJlY292ZXJ5LmhhbmRsZVBheW1lbnRGYWlsdXJlKGVycm9yLCBwYXltZW50RGF0YSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzKS50b0JlKCdjdXN0b21lcl9ub3RpZmllZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pc3N1ZVR5cGUpLnRvQmUoJ2luc3VmZmljaWVudF9mdW5kcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGVzY2FsYXRlIHVua25vd24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ3Vua25vd24gZXJyb3InKTtcbiAgICAgIGNvbnN0IHBheW1lbnREYXRhID0geyBvcmRlcklkOiAnMTIzJywgYW1vdW50OiAxMDAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGF5bWVudFJlY292ZXJ5LmhhbmRsZVBheW1lbnRGYWlsdXJlKGVycm9yLCBwYXltZW50RGF0YSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzKS50b0JlKCdlc2NhbGF0ZWQnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ3Vua25vd24gZXJyb3InKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1dob2xlc2FsZXJFcnJvclJlY292ZXJ5JywgKCkgPT4ge1xuICAgIGxldCB3aG9sZXNhbGVyUmVjb3Zlcnk7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHdob2xlc2FsZXJSZWNvdmVyeSA9IG5ldyBXaG9sZXNhbGVyRXJyb3JSZWNvdmVyeSgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHNlbmQgbm90aWZpY2F0aW9uIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbk9wZXJhdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHNlbnQ6IHRydWUgfSk7XG4gICAgICBjb25zdCBub3RpZmljYXRpb25EYXRhID0geyBvcmRlcklkOiAnMTIzJywgd2hvbGVzYWxlcklkOiAndzEnIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdob2xlc2FsZXJSZWNvdmVyeS5zZW5kTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbk9wZXJhdGlvbiwgbm90aWZpY2F0aW9uRGF0YSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoeyBzZW50OiB0cnVlIH0pO1xuICAgICAgZXhwZWN0KG5vdGlmaWNhdGlvbk9wZXJhdGlvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgobm90aWZpY2F0aW9uRGF0YSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG5ldHdvcmsgZXJyb3JzIGJ5IHF1ZXVlaW5nIGZvciByZXRyeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCduZXR3b3JrIGVycm9yJyk7XG4gICAgICBjb25zdCBub3RpZmljYXRpb25EYXRhID0geyBvcmRlcklkOiAnMTIzJywgd2hvbGVzYWxlcklkOiAndzEnIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdob2xlc2FsZXJSZWNvdmVyeS5oYW5kbGVOb3RpZmljYXRpb25GYWlsdXJlKGVycm9yLCBub3RpZmljYXRpb25EYXRhKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoJ3F1ZXVlZF9mb3JfcmV0cnknKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmV0cnlBdCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtYWlsIGVycm9ycyBieSB0cnlpbmcgYWx0ZXJuYXRpdmUgbWV0aG9kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ2ludmFsaWRfZW1haWwnKTtcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbkRhdGEgPSB7IG9yZGVySWQ6ICcxMjMnLCB3aG9sZXNhbGVySWQ6ICd3MScgfTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd2hvbGVzYWxlclJlY292ZXJ5LmhhbmRsZU5vdGlmaWNhdGlvbkZhaWx1cmUoZXJyb3IsIG5vdGlmaWNhdGlvbkRhdGEpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LnN0YXR1cykudG9CZSgnYWx0ZXJuYXRpdmVfbWV0aG9kX2F0dGVtcHRlZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tZXRob2QpLnRvQmUoJ3dlYmhvb2snKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBlc2NhbGF0ZSB1bmtub3duIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCd1bmtub3duIGVycm9yJyk7XG4gICAgICBjb25zdCBub3RpZmljYXRpb25EYXRhID0geyBvcmRlcklkOiAnMTIzJywgd2hvbGVzYWxlcklkOiAndzEnIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdob2xlc2FsZXJSZWNvdmVyeS5oYW5kbGVOb3RpZmljYXRpb25GYWlsdXJlKGVycm9yLCBub3RpZmljYXRpb25EYXRhKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0dXMpLnRvQmUoJ2VzY2FsYXRlZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgndW5rbm93biBlcnJvcicpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUNKQSxjQUFjO0VBQ2RDLGdCQUFnQjtFQUNoQkMsb0JBQW9CO0VBQ3BCQztBQUNGLENBQUMsR0FBR0MsT0FBTyxDQUFDLDJCQUEyQixDQUFDO0FBRXhDQyxRQUFRLENBQUMsMEJBQTBCLEVBQUUsTUFBTTtFQUN6Q0EsUUFBUSxDQUFDLGdCQUFnQixFQUFFLE1BQU07SUFDL0IsSUFBSUMsY0FBYztJQUVsQkMsVUFBVSxDQUFDLE1BQU07TUFDZkQsY0FBYyxHQUFHLElBQUlOLGNBQWMsQ0FBQyxhQUFhLEVBQUU7UUFDakRRLGdCQUFnQixFQUFFLENBQUM7UUFDbkJDLFlBQVksRUFBRTtNQUNoQixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7SUFFRkMsSUFBSSxDQUFDLDhCQUE4QixFQUFFLE1BQU07TUFDekNDLE1BQU0sQ0FBQ0wsY0FBYyxDQUFDTSxLQUFLLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLFFBQVEsQ0FBQztNQUMzQ0YsTUFBTSxDQUFDTCxjQUFjLENBQUNRLFlBQVksQ0FBQyxDQUFDRCxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzdDLENBQUMsQ0FBQztJQUVGSCxJQUFJLENBQUMsbURBQW1ELEVBQUUsWUFBWTtNQUNwRSxNQUFNSyxTQUFTLEdBQUdDLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsU0FBUyxDQUFDO01BRXhELE1BQU1DLE1BQU0sR0FBRyxNQUFNYixjQUFjLENBQUNjLE9BQU8sQ0FBQ0wsU0FBUyxDQUFDO01BRXRESixNQUFNLENBQUNRLE1BQU0sQ0FBQyxDQUFDTixJ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