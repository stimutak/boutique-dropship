2e905c49f60256619392d179629a78ff
// Mock nodemailer BEFORE importing emailService
_getJestObj().mock('nodemailer');
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const nodemailer = require('nodemailer');

// Now require the email service after the mock is set up
const {
  sendOrderConfirmation,
  sendPaymentReceipt,
  sendOrderStatusUpdate,
  sendWelcomeEmail,
  sendPasswordResetEmail,
  sendWholesalerNotification,
  sendEmail,
  emailTemplates
} = require('../../utils/emailService');
describe('Email Service', () => {
  let mockTransporter;
  beforeEach(() => {
    mockTransporter = {
      sendMail: jest.fn()
    };
    nodemailer.createTransport = jest.fn().mockReturnValue(mockTransporter);

    // Set up environment variables for tests
    process.env.EMAIL_HOST = 'smtp.test.com';
    process.env.EMAIL_PORT = '587';
    process.env.EMAIL_USER = 'test@example.com';
    process.env.EMAIL_PASS = 'testpass';
  });
  afterEach(() => {
    jest.clearAllMocks();
  });
  describe('sendOrderConfirmation', () => {
    const mockOrderData = {
      orderNumber: 'ORD-123456',
      customerName: 'John Doe',
      items: [{
        productName: 'Crystal Healing Set',
        quantity: 2,
        price: 29.99
      }, {
        productName: 'Essential Oil Bundle',
        quantity: 1,
        price: 45.00
      }],
      total: 104.98,
      shippingAddress: {
        firstName: 'John',
        lastName: 'Doe',
        street: '123 Main St',
        city: 'Anytown',
        state: 'CA',
        zipCode: '12345',
        country: 'US'
      }
    };
    it('should send order confirmation email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendOrderConfirmation('customer@example.com', mockOrderData);
      expect(result.success).toBe(true);
      expect(result.messageId).toBe('test-message-id');
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'customer@example.com',
        subject: 'Order Confirmation - ORD-123456',
        text: expect.stringContaining('Thank you for your order!'),
        html: expect.stringContaining('Order Confirmation')
      });
    });
    it('should handle email sending failure', async () => {
      const error = new Error('SMTP connection failed');
      mockTransporter.sendMail.mockRejectedValue(error);
      const result = await sendOrderConfirmation('customer@example.com', mockOrderData);
      expect(result.success).toBe(false);
      expect(result.error).toBe('SMTP connection failed');
    });
  });
  describe('sendPaymentReceipt', () => {
    const mockPaymentData = {
      orderNumber: 'ORD-123456',
      customerName: 'John Doe',
      total: 104.98,
      paymentMethod: 'Credit Card',
      transactionId: 'txn_123456789',
      paidAt: new Date('2023-12-01T10:00:00Z')
    };
    it('should send payment receipt email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendPaymentReceipt('customer@example.com', mockPaymentData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'customer@example.com',
        subject: 'Payment Receipt - ORD-123456',
        text: expect.stringContaining('Your payment has been successfully processed!'),
        html: expect.stringContaining('Payment Receipt')
      });
    });
  });
  describe('sendOrderStatusUpdate', () => {
    const mockStatusData = {
      orderNumber: 'ORD-123456',
      customerName: 'John Doe',
      status: 'shipped',
      trackingNumber: 'TRK123456789'
    };
    it('should send order status update email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendOrderStatusUpdate('customer@example.com', mockStatusData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'customer@example.com',
        subject: 'Order Update - ORD-123456',
        text: expect.stringContaining('Great news! Your order has been shipped.'),
        html: expect.stringContaining('Order Update')
      });
    });
    it('should handle different order statuses', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const processingData = {
        ...mockStatusData,
        status: 'processing'
      };
      await sendOrderStatusUpdate('customer@example.com', processingData);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith(expect.objectContaining({
        text: expect.stringContaining('Your order is being processed')
      }));
    });
  });
  describe('sendWelcomeEmail', () => {
    const mockUserData = {
      firstName: 'John',
      email: 'john@example.com'
    };
    it('should send welcome email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendWelcomeEmail('john@example.com', mockUserData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'john@example.com',
        subject: 'Welcome to Our Holistic Store!',
        text: expect.stringContaining('Welcome to our holistic wellness community!'),
        html: expect.stringContaining('Welcome to Our Holistic Store!')
      });
    });
  });
  describe('sendPasswordResetEmail', () => {
    const mockResetData = {
      firstName: 'John',
      resetToken: 'reset-token-123',
      resetUrl: 'https://example.com/reset-password?token=reset-token-123'
    };
    it('should send password reset email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendPasswordResetEmail('john@example.com', mockResetData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'john@example.com',
        subject: 'Password Reset Request',
        text: expect.stringContaining('We received a request to reset your password'),
        html: expect.stringContaining('Password Reset Request')
      });
    });
  });
  describe('sendWholesalerNotification', () => {
    const mockOrderData = {
      orderNumber: 'ORD-123456',
      orderDate: '12/1/2023',
      shippingAddress: {
        firstName: 'John',
        lastName: 'Doe',
        street: '123 Main St',
        city: 'Anytown',
        state: 'CA',
        zipCode: '12345',
        country: 'US',
        phone: '555-1234'
      },
      items: [{
        wholesaler: {
          productCode: 'WS-CRYSTAL-001'
        },
        quantity: 2,
        productName: 'Crystal Healing Set'
      }],
      notes: 'Handle with care'
    };
    it('should send wholesaler notification email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendWholesalerNotification('wholesaler@example.com', mockOrderData);
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'wholesaler@example.com',
        subject: 'New Order - ORD-123456',
        text: expect.stringContaining('We have received a new order that requires fulfillment')
      });
    });
  });
  describe('sendEmail (generic)', () => {
    it('should send generic email successfully', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendEmail('recipient@example.com', 'Test Subject', 'Test message content', '<p>Test HTML content</p>');
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'recipient@example.com',
        subject: 'Test Subject',
        text: 'Test message content',
        html: '<p>Test HTML content</p>'
      });
    });
    it('should send text-only email when HTML is not provided', async () => {
      mockTransporter.sendMail.mockResolvedValue({
        messageId: 'test-message-id'
      });
      const result = await sendEmail('recipient@example.com', 'Test Subject', 'Test message content');
      expect(result.success).toBe(true);
      expect(mockTransporter.sendMail).toHaveBeenCalledWith({
        from: 'test@example.com',
        to: 'recipient@example.com',
        subject: 'Test Subject',
        text: 'Test message content'
      });
    });
  });
  describe('Email Templates', () => {
    it('should generate order confirmation template correctly', () => {
      const orderData = {
        orderNumber: 'ORD-123456',
        customerName: 'John Doe',
        items: [{
          productName: 'Test Product',
          quantity: 1,
          price: 29.99
        }],
        total: 29.99,
        shippingAddress: {
          firstName: 'John',
          lastName: 'Doe',
          street: '123 Main St',
          city: 'Anytown',
          state: 'CA',
          zipCode: '12345',
          country: 'US'
        }
      };
      const template = emailTemplates.orderConfirmation(orderData);
      expect(template.subject).toBe('Order Confirmation - ORD-123456');
      expect(template.text).toContain('Dear John Doe');
      expect(template.text).toContain('Order Number: ORD-123456');
      expect(template.html).toContain('Order Confirmation');
    });
    it('should generate payment receipt template correctly', () => {
      const paymentData = {
        orderNumber: 'ORD-123456',
        customerName: 'John Doe',
        total: 29.99,
        paymentMethod: 'Credit Card',
        transactionId: 'txn_123',
        paidAt: new Date('2023-12-01')
      };
      const template = emailTemplates.paymentReceipt(paymentData);
      expect(template.subject).toBe('Payment Receipt - ORD-123456');
      expect(template.text).toContain('Your payment has been successfully processed!');
      expect(template.html).toContain('Payment Receipt');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJqZXN0IiwicmVxdWlyZSIsIm5vZGVtYWlsZXIiLCJzZW5kT3JkZXJDb25maXJtYXRpb24iLCJzZW5kUGF5bWVudFJlY2VpcHQiLCJzZW5kT3JkZXJTdGF0dXNVcGRhdGUiLCJzZW5kV2VsY29tZUVtYWlsIiwic2VuZFBhc3N3b3JkUmVzZXRFbWFpbCIsInNlbmRXaG9sZXNhbGVyTm90aWZpY2F0aW9uIiwic2VuZEVtYWlsIiwiZW1haWxUZW1wbGF0ZXMiLCJkZXNjcmliZSIsIm1vY2tUcmFuc3BvcnRlciIsImJlZm9yZUVhY2giLCJzZW5kTWFpbCIsImZuIiwiY3JlYXRlVHJhbnNwb3J0IiwibW9ja1JldHVyblZhbHVlIiwicHJvY2VzcyIsImVudiIsIkVNQUlMX0hPU1QiLCJFTUFJTF9QT1JUIiwiRU1BSUxfVVNFUiIsIkVNQUlMX1BBU1MiLCJhZnRlckVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja09yZGVyRGF0YSIsIm9yZGVyTnVtYmVyIiwiY3VzdG9tZXJOYW1lIiwiaXRlbXMiLCJwcm9kdWN0TmFtZSIsInF1YW50aXR5IiwicHJpY2UiLCJ0b3RhbCIsInNoaXBwaW5nQWRkcmVzcyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwic3RyZWV0IiwiY2l0eSIsInN0YXRlIiwiemlwQ29kZSIsImNvdW50cnkiLCJpdCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwibWVzc2FnZUlkIiwicmVzdWx0IiwiZXhwZWN0Iiwic3VjY2VzcyIsInRvQmUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImZyb20iLCJ0byIsInN1YmplY3QiLCJ0ZXh0Iiwic3RyaW5nQ29udGFpbmluZyIsImh0bWwiLCJlcnJvciIsIkVycm9yIiwibW9ja1JlamVjdGVkVmFsdWUiLCJtb2NrUGF5bWVudERhdGEiLCJwYXltZW50TWV0aG9kIiwidHJhbnNhY3Rpb25JZCIsInBhaWRBdCIsIkRhdGUiLCJtb2NrU3RhdHVzRGF0YSIsInN0YXR1cyIsInRyYWNraW5nTnVtYmVyIiwicHJvY2Vzc2luZ0RhdGEiLCJvYmplY3RDb250YWluaW5nIiwibW9ja1VzZXJEYXRhIiwiZW1haWwiLCJtb2NrUmVzZXREYXRhIiwicmVzZXRUb2tlbiIsInJlc2V0VXJsIiwib3JkZXJEYXRlIiwicGhvbmUiLCJ3aG9sZXNhbGVyIiwicHJvZHVjdENvZGUiLCJub3RlcyIsIm9yZGVyRGF0YSIsInRlbXBsYXRlIiwib3JkZXJDb25maXJtYXRpb24iLCJ0b0NvbnRhaW4iLCJwYXltZW50RGF0YSIsInBheW1lbnRSZWNlaXB0Il0sInNvdXJjZXMiOlsiZW1haWxTZXJ2aWNlLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTW9jayBub2RlbWFpbGVyIEJFRk9SRSBpbXBvcnRpbmcgZW1haWxTZXJ2aWNlXG5qZXN0Lm1vY2soJ25vZGVtYWlsZXInKTtcblxuY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcblxuLy8gTm93IHJlcXVpcmUgdGhlIGVtYWlsIHNlcnZpY2UgYWZ0ZXIgdGhlIG1vY2sgaXMgc2V0IHVwXG5jb25zdCB7XG4gIHNlbmRPcmRlckNvbmZpcm1hdGlvbixcbiAgc2VuZFBheW1lbnRSZWNlaXB0LFxuICBzZW5kT3JkZXJTdGF0dXNVcGRhdGUsXG4gIHNlbmRXZWxjb21lRW1haWwsXG4gIHNlbmRQYXNzd29yZFJlc2V0RW1haWwsXG4gIHNlbmRXaG9sZXNhbGVyTm90aWZpY2F0aW9uLFxuICBzZW5kRW1haWwsXG4gIGVtYWlsVGVtcGxhdGVzXG59ID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvZW1haWxTZXJ2aWNlJyk7XG5cbmRlc2NyaWJlKCdFbWFpbCBTZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgbW9ja1RyYW5zcG9ydGVyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tUcmFuc3BvcnRlciA9IHtcbiAgICAgIHNlbmRNYWlsOiBqZXN0LmZuKClcbiAgICB9O1xuICAgIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShtb2NrVHJhbnNwb3J0ZXIpO1xuICAgIFxuICAgIC8vIFNldCB1cCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZm9yIHRlc3RzXG4gICAgcHJvY2Vzcy5lbnYuRU1BSUxfSE9TVCA9ICdzbXRwLnRlc3QuY29tJztcbiAgICBwcm9jZXNzLmVudi5FTUFJTF9QT1JUID0gJzU4Nyc7XG4gICAgcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUiA9ICd0ZXN0QGV4YW1wbGUuY29tJztcbiAgICBwcm9jZXNzLmVudi5FTUFJTF9QQVNTID0gJ3Rlc3RwYXNzJztcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlbmRPcmRlckNvbmZpcm1hdGlvbicsICgpID0+IHtcbiAgICBjb25zdCBtb2NrT3JkZXJEYXRhID0ge1xuICAgICAgb3JkZXJOdW1iZXI6ICdPUkQtMTIzNDU2JyxcbiAgICAgIGN1c3RvbWVyTmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgIGl0ZW1zOiBbXG4gICAgICAgIHsgcHJvZHVjdE5hbWU6ICdDcnlzdGFsIEhlYWxpbmcgU2V0JywgcXVhbnRpdHk6IDIsIHByaWNlOiAyOS45OSB9LFxuICAgICAgICB7IHByb2R1Y3ROYW1lOiAnRXNzZW50aWFsIE9pbCBCdW5kbGUnLCBxdWFudGl0eTogMSwgcHJpY2U6IDQ1LjAwIH1cbiAgICAgIF0sXG4gICAgICB0b3RhbDogMTA0Ljk4LFxuICAgICAgc2hpcHBpbmdBZGRyZXNzOiB7XG4gICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgICAgIHN0cmVldDogJzEyMyBNYWluIFN0JyxcbiAgICAgICAgY2l0eTogJ0FueXRvd24nLFxuICAgICAgICBzdGF0ZTogJ0NBJyxcbiAgICAgICAgemlwQ29kZTogJzEyMzQ1JyxcbiAgICAgICAgY291bnRyeTogJ1VTJ1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IG1lc3NhZ2VJZDogJ3Rlc3QtbWVzc2FnZS1pZCcgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlbmRPcmRlckNvbmZpcm1hdGlvbignY3VzdG9tZXJAZXhhbXBsZS5jb20nLCBtb2NrT3JkZXJEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlSWQpLnRvQmUoJ3Rlc3QtbWVzc2FnZS1pZCcpO1xuICAgICAgZXhwZWN0KG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmcm9tOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHRvOiAnY3VzdG9tZXJAZXhhbXBsZS5jb20nLFxuICAgICAgICBzdWJqZWN0OiAnT3JkZXIgQ29uZmlybWF0aW9uIC0gT1JELTEyMzQ1NicsXG4gICAgICAgIHRleHQ6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdUaGFuayB5b3UgZm9yIHlvdXIgb3JkZXIhJyksXG4gICAgICAgIGh0bWw6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdPcmRlciBDb25maXJtYXRpb24nKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbWFpbCBzZW5kaW5nIGZhaWx1cmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignU01UUCBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgbW9ja1RyYW5zcG9ydGVyLnNlbmRNYWlsLm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZE9yZGVyQ29uZmlybWF0aW9uKCdjdXN0b21lckBleGFtcGxlLmNvbScsIG1vY2tPcmRlckRhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnU01UUCBjb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2VuZFBheW1lbnRSZWNlaXB0JywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tQYXltZW50RGF0YSA9IHtcbiAgICAgIG9yZGVyTnVtYmVyOiAnT1JELTEyMzQ1NicsXG4gICAgICBjdXN0b21lck5hbWU6ICdKb2huIERvZScsXG4gICAgICB0b3RhbDogMTA0Ljk4LFxuICAgICAgcGF5bWVudE1ldGhvZDogJ0NyZWRpdCBDYXJkJyxcbiAgICAgIHRyYW5zYWN0aW9uSWQ6ICd0eG5fMTIzNDU2Nzg5JyxcbiAgICAgIHBhaWRBdDogbmV3IERhdGUoJzIwMjMtMTItMDFUMTA6MDA6MDBaJylcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCBzZW5kIHBheW1lbnQgcmVjZWlwdCBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kUGF5bWVudFJlY2VpcHQoJ2N1c3RvbWVyQGV4YW1wbGUuY29tJywgbW9ja1BheW1lbnREYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmcm9tOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHRvOiAnY3VzdG9tZXJAZXhhbXBsZS5jb20nLFxuICAgICAgICBzdWJqZWN0OiAnUGF5bWVudCBSZWNlaXB0IC0gT1JELTEyMzQ1NicsXG4gICAgICAgIHRleHQ6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdZb3VyIHBheW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHByb2Nlc3NlZCEnKSxcbiAgICAgICAgaHRtbDogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1BheW1lbnQgUmVjZWlwdCcpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlbmRPcmRlclN0YXR1c1VwZGF0ZScsICgpID0+IHtcbiAgICBjb25zdCBtb2NrU3RhdHVzRGF0YSA9IHtcbiAgICAgIG9yZGVyTnVtYmVyOiAnT1JELTEyMzQ1NicsXG4gICAgICBjdXN0b21lck5hbWU6ICdKb2huIERvZScsXG4gICAgICBzdGF0dXM6ICdzaGlwcGVkJyxcbiAgICAgIHRyYWNraW5nTnVtYmVyOiAnVFJLMTIzNDU2Nzg5J1xuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgb3JkZXIgc3RhdHVzIHVwZGF0ZSBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kT3JkZXJTdGF0dXNVcGRhdGUoJ2N1c3RvbWVyQGV4YW1wbGUuY29tJywgbW9ja1N0YXR1c0RhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja1RyYW5zcG9ydGVyLnNlbmRNYWlsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGZyb206ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgdG86ICdjdXN0b21lckBleGFtcGxlLmNvbScsXG4gICAgICAgIHN1YmplY3Q6ICdPcmRlciBVcGRhdGUgLSBPUkQtMTIzNDU2JyxcbiAgICAgICAgdGV4dDogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ0dyZWF0IG5ld3MhIFlvdXIgb3JkZXIgaGFzIGJlZW4gc2hpcHBlZC4nKSxcbiAgICAgICAgaHRtbDogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ09yZGVyIFVwZGF0ZScpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBvcmRlciBzdGF0dXNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IG1lc3NhZ2VJZDogJ3Rlc3QtbWVzc2FnZS1pZCcgfSk7XG5cbiAgICAgIGNvbnN0IHByb2Nlc3NpbmdEYXRhID0geyAuLi5tb2NrU3RhdHVzRGF0YSwgc3RhdHVzOiAncHJvY2Vzc2luZycgfTtcbiAgICAgIGF3YWl0IHNlbmRPcmRlclN0YXR1c1VwZGF0ZSgnY3VzdG9tZXJAZXhhbXBsZS5jb20nLCBwcm9jZXNzaW5nRGF0YSk7XG5cbiAgICAgIGV4cGVjdChtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGV4dDogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1lvdXIgb3JkZXIgaXMgYmVpbmcgcHJvY2Vzc2VkJylcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZW5kV2VsY29tZUVtYWlsJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tVc2VyRGF0YSA9IHtcbiAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJ1xuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgd2VsY29tZSBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kV2VsY29tZUVtYWlsKCdqb2huQGV4YW1wbGUuY29tJywgbW9ja1VzZXJEYXRhKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmcm9tOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHRvOiAnam9obkBleGFtcGxlLmNvbScsXG4gICAgICAgIHN1YmplY3Q6ICdXZWxjb21lIHRvIE91ciBIb2xpc3RpYyBTdG9yZSEnLFxuICAgICAgICB0ZXh0OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnV2VsY29tZSB0byBvdXIgaG9saXN0aWMgd2VsbG5lc3MgY29tbXVuaXR5IScpLFxuICAgICAgICBodG1sOiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnV2VsY29tZSB0byBPdXIgSG9saXN0aWMgU3RvcmUhJylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCcsICgpID0+IHtcbiAgICBjb25zdCBtb2NrUmVzZXREYXRhID0ge1xuICAgICAgZmlyc3ROYW1lOiAnSm9obicsXG4gICAgICByZXNldFRva2VuOiAncmVzZXQtdG9rZW4tMTIzJyxcbiAgICAgIHJlc2V0VXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9yZXNldC1wYXNzd29yZD90b2tlbj1yZXNldC10b2tlbi0xMjMnXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgc2VuZCBwYXNzd29yZCByZXNldCBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKCdqb2huQGV4YW1wbGUuY29tJywgbW9ja1Jlc2V0RGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZnJvbTogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICB0bzogJ2pvaG5AZXhhbXBsZS5jb20nLFxuICAgICAgICBzdWJqZWN0OiAnUGFzc3dvcmQgUmVzZXQgUmVxdWVzdCcsXG4gICAgICAgIHRleHQ6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdXZSByZWNlaXZlZCBhIHJlcXVlc3QgdG8gcmVzZXQgeW91ciBwYXNzd29yZCcpLFxuICAgICAgICBodG1sOiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnUGFzc3dvcmQgUmVzZXQgUmVxdWVzdCcpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlbmRXaG9sZXNhbGVyTm90aWZpY2F0aW9uJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tPcmRlckRhdGEgPSB7XG4gICAgICBvcmRlck51bWJlcjogJ09SRC0xMjM0NTYnLFxuICAgICAgb3JkZXJEYXRlOiAnMTIvMS8yMDIzJyxcbiAgICAgIHNoaXBwaW5nQWRkcmVzczoge1xuICAgICAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICBzdHJlZXQ6ICcxMjMgTWFpbiBTdCcsXG4gICAgICAgIGNpdHk6ICdBbnl0b3duJyxcbiAgICAgICAgc3RhdGU6ICdDQScsXG4gICAgICAgIHppcENvZGU6ICcxMjM0NScsXG4gICAgICAgIGNvdW50cnk6ICdVUycsXG4gICAgICAgIHBob25lOiAnNTU1LTEyMzQnXG4gICAgICB9LFxuICAgICAgaXRlbXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHdob2xlc2FsZXI6IHsgcHJvZHVjdENvZGU6ICdXUy1DUllTVEFMLTAwMScgfSxcbiAgICAgICAgICBxdWFudGl0eTogMixcbiAgICAgICAgICBwcm9kdWN0TmFtZTogJ0NyeXN0YWwgSGVhbGluZyBTZXQnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBub3RlczogJ0hhbmRsZSB3aXRoIGNhcmUnXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgc2VuZCB3aG9sZXNhbGVyIG5vdGlmaWNhdGlvbiBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kV2hvbGVzYWxlck5vdGlmaWNhdGlvbignd2hvbGVzYWxlckBleGFtcGxlLmNvbScsIG1vY2tPcmRlckRhdGEpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja1RyYW5zcG9ydGVyLnNlbmRNYWlsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIGZyb206ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgdG86ICd3aG9sZXNhbGVyQGV4YW1wbGUuY29tJyxcbiAgICAgICAgc3ViamVjdDogJ05ldyBPcmRlciAtIE9SRC0xMjM0NTYnLFxuICAgICAgICB0ZXh0OiBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnV2UgaGF2ZSByZWNlaXZlZCBhIG5ldyBvcmRlciB0aGF0IHJlcXVpcmVzIGZ1bGZpbGxtZW50JylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2VuZEVtYWlsIChnZW5lcmljKScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNlbmQgZ2VuZXJpYyBlbWFpbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kRW1haWwoXG4gICAgICAgICdyZWNpcGllbnRAZXhhbXBsZS5jb20nLFxuICAgICAgICAnVGVzdCBTdWJqZWN0JyxcbiAgICAgICAgJ1Rlc3QgbWVzc2FnZSBjb250ZW50JyxcbiAgICAgICAgJzxwPlRlc3QgSFRNTCBjb250ZW50PC9wPidcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgZnJvbTogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICB0bzogJ3JlY2lwaWVudEBleGFtcGxlLmNvbScsXG4gICAgICAgIHN1YmplY3Q6ICdUZXN0IFN1YmplY3QnLFxuICAgICAgICB0ZXh0OiAnVGVzdCBtZXNzYWdlIGNvbnRlbnQnLFxuICAgICAgICBodG1sOiAnPHA+VGVzdCBIVE1MIGNvbnRlbnQ8L3A+J1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNlbmQgdGV4dC1vbmx5IGVtYWlsIHdoZW4gSFRNTCBpcyBub3QgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVHJhbnNwb3J0ZXIuc2VuZE1haWwubW9ja1Jlc29sdmVkVmFsdWUoeyBtZXNzYWdlSWQ6ICd0ZXN0LW1lc3NhZ2UtaWQnIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kRW1haWwoXG4gICAgICAgICdyZWNpcGllbnRAZXhhbXBsZS5jb20nLFxuICAgICAgICAnVGVzdCBTdWJqZWN0JyxcbiAgICAgICAgJ1Rlc3QgbWVzc2FnZSBjb250ZW50J1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tUcmFuc3BvcnRlci5zZW5kTWFpbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBmcm9tOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIHRvOiAncmVjaXBpZW50QGV4YW1wbGUuY29tJyxcbiAgICAgICAgc3ViamVjdDogJ1Rlc3QgU3ViamVjdCcsXG4gICAgICAgIHRleHQ6ICdUZXN0IG1lc3NhZ2UgY29udGVudCdcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRW1haWwgVGVtcGxhdGVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgb3JkZXIgY29uZmlybWF0aW9uIHRlbXBsYXRlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9yZGVyRGF0YSA9IHtcbiAgICAgICAgb3JkZXJOdW1iZXI6ICdPUkQtMTIzNDU2JyxcbiAgICAgICAgY3VzdG9tZXJOYW1lOiAnSm9obiBEb2UnLFxuICAgICAgICBpdGVtczogW3sgcHJvZHVjdE5hbWU6ICdUZXN0IFByb2R1Y3QnLCBxdWFudGl0eTogMSwgcHJpY2U6IDI5Ljk5IH1dLFxuICAgICAgICB0b3RhbDogMjkuOTksXG4gICAgICAgIHNoaXBwaW5nQWRkcmVzczoge1xuICAgICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICAgIGxhc3ROYW1lOiAnRG9lJyxcbiAgICAgICAgICBzdHJlZXQ6ICcxMjMgTWFpbiBTdCcsXG4gICAgICAgICAgY2l0eTogJ0FueXRvd24nLFxuICAgICAgICAgIHN0YXRlOiAnQ0EnLFxuICAgICAgICAgIHppcENvZGU6ICcxMjM0NScsXG4gICAgICAgICAgY291bnRyeTogJ1VTJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGVtYWlsVGVtcGxhdGVzLm9yZGVyQ29uZmlybWF0aW9uKG9yZGVyRGF0YSk7XG5cbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5zdWJqZWN0KS50b0JlKCdPcmRlciBDb25maXJtYXRpb24gLSBPUkQtMTIzNDU2Jyk7XG4gICAgICBleHBlY3QodGVtcGxhdGUudGV4dCkudG9Db250YWluKCdEZWFyIEpvaG4gRG9lJyk7XG4gICAgICBleHBlY3QodGVtcGxhdGUudGV4dCkudG9Db250YWluKCdPcmRlciBOdW1iZXI6IE9SRC0xMjM0NTYnKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5odG1sKS50b0NvbnRhaW4oJ09yZGVyIENvbmZpcm1hdGlvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBwYXltZW50IHJlY2VpcHQgdGVtcGxhdGUgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgcGF5bWVudERhdGEgPSB7XG4gICAgICAgIG9yZGVyTnVtYmVyOiAnT1JELTEyMzQ1NicsXG4gICAgICAgIGN1c3RvbWVyTmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgdG90YWw6IDI5Ljk5LFxuICAgICAgICBwYXltZW50TWV0aG9kOiAnQ3JlZGl0IENhcmQnLFxuICAgICAgICB0cmFuc2FjdGlvbklkOiAndHhuXzEyMycsXG4gICAgICAgIHBhaWRBdDogbmV3IERhdGUoJzIwMjMtMTItMDEnKVxuICAgICAgfTtcblxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBlbWFpbFRlbXBsYXRlcy5wYXltZW50UmVjZWlwdChwYXltZW50RGF0YSk7XG5cbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5zdWJqZWN0KS50b0JlKCdQYXltZW50IFJlY2VpcHQgLSBPUkQtMTIzNDU2Jyk7XG4gICAgICBleHBlY3QodGVtcGxhdGUudGV4dCkudG9Db250YWluKCdZb3VyIHBheW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHByb2Nlc3NlZCEnKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5odG1sKS50b0NvbnRhaW4oJ1BheW1lbnQgUmVjZWlwdCcpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsWUFBWSxDQUFDO0FBQUMsU0FBQUQsWUFBQTtFQUFBO0lBQUFFO0VBQUEsSUFBQUMsT0FBQTtFQUFBSCxXQUFBLEdBQUFBLENBQUEsS0FBQUUsSUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQUV4QixNQUFNRSxVQUFVLEdBQUdELE9BQU8sQ0FBQyxZQUFZLENBQUM7O0FBRXhDO0FBQ0EsTUFBTTtFQUNKRSxxQkFBcUI7RUFDckJDLGtCQUFrQjtFQUNsQkMscUJBQXFCO0VBQ3JCQyxnQkFBZ0I7RUFDaEJDLHNCQUFzQjtFQUN0QkMsMEJBQTBCO0VBQzFCQyxTQUFTO0VBQ1RDO0FBQ0YsQ0FBQyxHQUFHVCxPQUFPLENBQUMsMEJBQTBCLENBQUM7QUFFdkNVLFFBQVEsQ0FBQyxlQUFlLEVBQUUsTUFBTTtFQUM5QixJQUFJQyxlQUFlO0VBRW5CQyxVQUFVLENBQUMsTUFBTTtJQUNmRCxlQUFlLEdBQUc7TUFDaEJFLFFBQVEsRUFBRWQsSUFBSSxDQUFDZSxFQUFFLENBQUM7SUFDcEIsQ0FBQztJQUNEYixVQUFVLENBQUNjLGVBQWUsR0FBR2hCLElBQUksQ0FBQ2UsRUFBRSxDQUFDLENBQUMsQ0FBQ0UsZUFBZSxDQUFDTCxlQUFlLENBQUM7O0lBRXZFO0lBQ0FNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVLEdBQUcsZUFBZTtJQUN4Q0YsT0FBTyxDQUFDQyxHQUFHLENBQUNFLFVBQVUsR0FBRyxLQUFLO0lBQzlCSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csVUFBVSxHQUFHLGtCQUFrQjtJQUMzQ0osT0FBTyxDQUFDQyxHQUFHLENBQUNJLFVBQVUsR0FBRyxVQUFVO0VBQ3JDLENBQUMsQ0FBQztFQUVGQyxTQUFTLENBQUMsTUFBTTtJQUNkeEIs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