1cd8fd09f1b61cf1bd4149c211cacc3f
const request = require('supertest');
const crypto = require('crypto');
const app = require('../../server');
const User = require('../../models/User');
const {
  connectDB,
  clearDB,
  closeDB
} = require('../setup/testDb');
describe('Password Recovery Flow', () => {
  let agent;
  let testUser;
  beforeAll(async () => {
    await connectDB();
  });
  afterAll(async () => {
    await closeDB();
  });
  beforeEach(async () => {
    await clearDB();
    agent = request.agent(app);

    // Create test user
    testUser = await User.create({
      email: 'test@example.com',
      password: 'oldPassword123',
      firstName: 'Test',
      lastName: 'User',
      isActive: true
    });
  });
  describe('Forgot Password', () => {
    test('should send reset email for valid user', async () => {
      const res = await agent.post('/api/auth/forgot-password').send({
        email: 'test@example.com'
      });
      expect(res.status).toBe(200);
      expect(res.body.success).toBe(true);
      expect(res.body.message).toContain('If an account exists');

      // Check that reset token was saved
      const updatedUser = await User.findById(testUser._id);
      expect(updatedUser.passwordResetToken).toBeDefined();
      expect(updatedUser.passwordResetExpiry).toBeDefined();
      expect(updatedUser.passwordResetExpiry.getTime()).toBeGreaterThan(Date.now());
    });
    test('should return success even for non-existent email (prevent enumeration)', async () => {
      const res = await agent.post('/api/auth/forgot-password').send({
        email: 'nonexistent@example.com'
      });
      expect(res.status).toBe(200);
      expect(res.body.success).toBe(true);
      expect(res.body.message).toContain('If an account exists');
    });
    test('should validate email format', async () => {
      const res = await agent.post('/api/auth/forgot-password').send({
        email: 'invalid-email'
      });
      expect(res.status).toBe(400);
      expect(res.body.success).toBe(false);
      expect(res.body.error.code).toBe('VALIDATION_ERROR');
    });
  });
  describe('Reset Password', () => {
    let resetToken;
    beforeEach(async () => {
      // Generate reset token for user
      resetToken = crypto.randomBytes(32).toString('hex');
      const resetTokenHash = crypto.createHash('sha256').update(resetToken).digest('hex');
      testUser.passwordResetToken = resetTokenHash;
      testUser.passwordResetExpiry = Date.now() + 3600000; // 1 hour
      await testUser.save();
    });
    test('should reset password with valid token', async () => {
      const newPassword = 'newPassword123';
      const res = await agent.post('/api/auth/reset-password').send({
        token: resetToken,
        password: newPassword
      });
      expect(res.status).toBe(200);
      expect(res.body.success).toBe(true);
      expect(res.body.message).toBe('Password has been reset successfully');
      expect(res.body.token).toBeDefined(); // Auth token
      expect(res.body.user).toBeDefined();

      // Verify password was changed
      const updatedUser = await User.findById(testUser._id);
      const isMatch = await updatedUser.comparePassword(newPassword);
      expect(isMatch).toBe(true);

      // Verify reset token was cleared
      expect(updatedUser.passwordResetToken).toBeUndefined();
      expect(updatedUser.passwordResetExpiry).toBeUndefined();
    });
    test('should reject invalid reset token', async () => {
      const res = await agent.post('/api/auth/reset-password').send({
        token: 'invalid-token',
        password: 'newPassword123'
      });
      expect(res.status).toBe(400);
      expect(res.body.success).toBe(false);
      expect(res.body.error.code).toBe('INVALID_TOKEN');
    });
    test('should reject expired reset token', async () => {
      // Set token to expired
      testUser.passwordResetExpiry = Date.now() - 3600000; // 1 hour ago
      await testUser.save();
      const res = await agent.post('/api/auth/reset-password').send({
        token: resetToken,
        password: 'newPassword123'
      });
      expect(res.status).toBe(400);
      expect(res.body.success).toBe(false);
      expect(res.body.error.code).toBe('INVALID_TOKEN');
      expect(res.body.error.message).toContain('invalid or has expired');
    });
    test('should validate new password', async () => {
      const res = await agent.post('/api/auth/reset-password').send({
        token: resetToken,
        password: '123' // Too short
      });
      expect(res.status).toBe(400);
      expect(res.body.success).toBe(false);
      expect(res.body.error.code).toBe('VALIDATION_ERROR');
      expect(res.body.error.details[0].msg).toContain('at least 6 characters');
    });
    test('should allow login with new password after reset', async () => {
      // Reset password
      await agent.post('/api/auth/reset-password').send({
        token: resetToken,
        password: 'newPassword123'
      });

      // Try to login with new password
      const loginRes = await agent.post('/api/auth/login').send({
        email: 'test@example.com',
        password: 'newPassword123'
      });
      expect(loginRes.status).toBe(200);
      expect(loginRes.body.success).toBe(true);
      expect(loginRes.body.token).toBeDefined();
    });
  });
  describe('Complete Flow', () => {
    test('should handle full password recovery flow', async () => {
      // 1. Request password reset
      const forgotRes = await agent.post('/api/auth/forgot-password').send({
        email: 'test@example.com'
      });
      expect(forgotRes.status).toBe(200);

      // 2. Get reset token from database (in real app, this would come from email)
      const userWithToken = await User.findById(testUser._id);
      expect(userWithToken.passwordResetToken).toBeDefined();

      // Simulate getting the unhashed token from email
      // In real implementation, we'd extract this from the email sent
      const resetToken = 'simulated-token';
      const resetTokenHash = crypto.createHash('sha256').update(resetToken).digest('hex');
      userWithToken.passwordResetToken = resetTokenHash;
      await userWithToken.save();

      // 3. Reset password with token
      const resetRes = await agent.post('/api/auth/reset-password').send({
        token: resetToken,
        password: 'brandNewPassword123'
      });
      expect(resetRes.status).toBe(200);
      expect(resetRes.body.success).toBe(true);

      // 4. Verify can login with new password
      const loginRes = await agent.post('/api/auth/login').send({
        email: 'test@example.com',
        password: 'brandNewPassword123'
      });
      expect(loginRes.status).toBe(200);
      expect(loginRes.body.success).toBe(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsImNyeXB0byIsImFwcCIsIlVzZXIiLCJjb25uZWN0REIiLCJjbGVhckRCIiwiY2xvc2VEQiIsImRlc2NyaWJlIiwiYWdlbnQiLCJ0ZXN0VXNlciIsImJlZm9yZUFsbCIsImFmdGVyQWxsIiwiYmVmb3JlRWFjaCIsImNyZWF0ZSIsImVtYWlsIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImlzQWN0aXZlIiwidGVzdCIsInJlcyIsInBvc3QiLCJzZW5kIiwiZXhwZWN0Iiwic3RhdHVzIiwidG9CZSIsImJvZHkiLCJzdWNjZXNzIiwibWVzc2FnZSIsInRvQ29udGFpbiIsInVwZGF0ZWRVc2VyIiwiZmluZEJ5SWQiLCJfaWQiLCJwYXNzd29yZFJlc2V0VG9rZW4iLCJ0b0JlRGVmaW5lZCIsInBhc3N3b3JkUmVzZXRFeHBpcnkiLCJnZXRUaW1lIiwidG9CZUdyZWF0ZXJUaGFuIiwiRGF0ZSIsIm5vdyIsImVycm9yIiwiY29kZSIsInJlc2V0VG9rZW4iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwicmVzZXRUb2tlbkhhc2giLCJjcmVhdGVIYXNoIiwidXBkYXRlIiwiZGlnZXN0Iiwic2F2ZSIsIm5ld1Bhc3N3b3JkIiwidG9rZW4iLCJ1c2VyIiwiaXNNYXRjaCIsImNvbXBhcmVQYXNzd29yZCIsInRvQmVVbmRlZmluZWQiLCJkZXRhaWxzIiwibXNnIiwibG9naW5SZXMiLCJmb3Jnb3RSZXMiLCJ1c2VyV2l0aFRva2VuIiwicmVzZXRSZXMiXSwic291cmNlcyI6WyJwYXNzd29yZFJlY292ZXJ5LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5jb25zdCBhcHAgPSByZXF1aXJlKCcuLi8uLi9zZXJ2ZXInKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi8uLi9tb2RlbHMvVXNlcicpO1xuY29uc3QgeyBjb25uZWN0REIsIGNsZWFyREIsIGNsb3NlREIgfSA9IHJlcXVpcmUoJy4uL3NldHVwL3Rlc3REYicpO1xuXG5kZXNjcmliZSgnUGFzc3dvcmQgUmVjb3ZlcnkgRmxvdycsICgpID0+IHtcbiAgbGV0IGFnZW50O1xuICBsZXQgdGVzdFVzZXI7XG5cbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGNsb3NlREIoKTtcbiAgfSk7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgY2xlYXJEQigpO1xuICAgIGFnZW50ID0gcmVxdWVzdC5hZ2VudChhcHApO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0ZXN0IHVzZXJcbiAgICB0ZXN0VXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHtcbiAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICBwYXNzd29yZDogJ29sZFBhc3N3b3JkMTIzJyxcbiAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgbGFzdE5hbWU6ICdVc2VyJyxcbiAgICAgIGlzQWN0aXZlOiB0cnVlXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGb3Jnb3QgUGFzc3dvcmQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHNlbmQgcmVzZXQgZW1haWwgZm9yIHZhbGlkIHVzZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2ZvcmdvdC1wYXNzd29yZCcpXG4gICAgICAgIC5zZW5kKHsgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLnRvQ29udGFpbignSWYgYW4gYWNjb3VudCBleGlzdHMnKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgdGhhdCByZXNldCB0b2tlbiB3YXMgc2F2ZWRcbiAgICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh0ZXN0VXNlci5faWQpO1xuICAgICAgZXhwZWN0KHVwZGF0ZWRVc2VyLnBhc3N3b3JkUmVzZXRUb2tlbikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh1cGRhdGVkVXNlci5wYXNzd29yZFJlc2V0RXhwaXJ5KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHVwZGF0ZWRVc2VyLnBhc3N3b3JkUmVzZXRFeHBpcnkuZ2V0VGltZSgpKS50b0JlR3JlYXRlclRoYW4oRGF0ZS5ub3coKSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIHN1Y2Nlc3MgZXZlbiBmb3Igbm9uLWV4aXN0ZW50IGVtYWlsIChwcmV2ZW50IGVudW1lcmF0aW9uKScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvZm9yZ290LXBhc3N3b3JkJylcbiAgICAgICAgLnNlbmQoeyBlbWFpbDogJ25vbmV4aXN0ZW50QGV4YW1wbGUuY29tJyB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLnRvQ29udGFpbignSWYgYW4gYWNjb3VudCBleGlzdHMnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBlbWFpbCBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2ZvcmdvdC1wYXNzd29yZCcpXG4gICAgICAgIC5zZW5kKHsgZW1haWw6ICdpbnZhbGlkLWVtYWlsJyB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5lcnJvci5jb2RlKS50b0JlKCdWQUxJREFUSU9OX0VSUk9SJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXNldCBQYXNzd29yZCcsICgpID0+IHtcbiAgICBsZXQgcmVzZXRUb2tlbjtcblxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gR2VuZXJhdGUgcmVzZXQgdG9rZW4gZm9yIHVzZXJcbiAgICAgIHJlc2V0VG9rZW4gPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMzIpLnRvU3RyaW5nKCdoZXgnKTtcbiAgICAgIGNvbnN0IHJlc2V0VG9rZW5IYXNoID0gY3J5cHRvXG4gICAgICAgIC5jcmVhdGVIYXNoKCdzaGEyNTYnKVxuICAgICAgICAudXBkYXRlKHJlc2V0VG9rZW4pXG4gICAgICAgIC5kaWdlc3QoJ2hleCcpO1xuICAgICAgXG4gICAgICB0ZXN0VXNlci5wYXNzd29yZFJlc2V0VG9rZW4gPSByZXNldFRva2VuSGFzaDtcbiAgICAgIHRlc3RVc2VyLnBhc3N3b3JkUmVzZXRFeHBpcnkgPSBEYXRlLm5vdygpICsgMzYwMDAwMDsgLy8gMSBob3VyXG4gICAgICBhd2FpdCB0ZXN0VXNlci5zYXZlKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVzZXQgcGFzc3dvcmQgd2l0aCB2YWxpZCB0b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld1Bhc3N3b3JkID0gJ25ld1Bhc3N3b3JkMTIzJztcbiAgICAgIFxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLnBvc3QoJy9hcGkvYXV0aC9yZXNldC1wYXNzd29yZCcpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICB0b2tlbjogcmVzZXRUb2tlbixcbiAgICAgICAgICBwYXNzd29yZDogbmV3UGFzc3dvcmRcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5tZXNzYWdlKS50b0JlKCdQYXNzd29yZCBoYXMgYmVlbiByZXNldCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS50b2tlbikudG9CZURlZmluZWQoKTsgLy8gQXV0aCB0b2tlblxuICAgICAgZXhwZWN0KHJlcy5ib2R5LnVzZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBwYXNzd29yZCB3YXMgY2hhbmdlZFxuICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHRlc3RVc2VyLl9pZCk7XG4gICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgdXBkYXRlZFVzZXIuY29tcGFyZVBhc3N3b3JkKG5ld1Bhc3N3b3JkKTtcbiAgICAgIGV4cGVjdChpc01hdGNoKS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgcmVzZXQgdG9rZW4gd2FzIGNsZWFyZWRcbiAgICAgIGV4cGVjdCh1cGRhdGVkVXNlci5wYXNzd29yZFJlc2V0VG9rZW4pLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh1cGRhdGVkVXNlci5wYXNzd29yZFJlc2V0RXhwaXJ5KS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgcmVzZXQgdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL3Jlc2V0LXBhc3N3b3JkJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHRva2VuOiAnaW52YWxpZC10b2tlbicsXG4gICAgICAgICAgcGFzc3dvcmQ6ICduZXdQYXNzd29yZDEyMydcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuZXJyb3IuY29kZSkudG9CZSgnSU5WQUxJRF9UT0tFTicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlamVjdCBleHBpcmVkIHJlc2V0IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2V0IHRva2VuIHRvIGV4cGlyZWRcbiAgICAgIHRlc3RVc2VyLnBhc3N3b3JkUmVzZXRFeHBpcnkgPSBEYXRlLm5vdygpIC0gMzYwMDAwMDsgLy8gMSBob3VyIGFnb1xuICAgICAgYXdhaXQgdGVzdFVzZXIuc2F2ZSgpO1xuICAgICAgXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL3Jlc2V0LXBhc3N3b3JkJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHRva2VuOiByZXNldFRva2VuLFxuICAgICAgICAgIHBhc3N3b3JkOiAnbmV3UGFzc3dvcmQxMjMnXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmVycm9yLmNvZGUpLnRvQmUoJ0lOVkFMSURfVE9LRU4nKTtcbiAgICAgIGV4cGVjdChyZXMuYm9keS5lcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ2ludmFsaWQgb3IgaGFzIGV4cGlyZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBuZXcgcGFzc3dvcmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL3Jlc2V0LXBhc3N3b3JkJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHRva2VuOiByZXNldFRva2VuLFxuICAgICAgICAgIHBhc3N3b3JkOiAnMTIzJyAvLyBUb28gc2hvcnRcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzLmJvZHkuZXJyb3IuY29kZSkudG9CZSgnVkFMSURBVElPTl9FUlJPUicpO1xuICAgICAgZXhwZWN0KHJlcy5ib2R5LmVycm9yLmRldGFpbHNbMF0ubXNnKS50b0NvbnRhaW4oJ2F0IGxlYXN0IDYgY2hhcmFjdGVycycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGFsbG93IGxvZ2luIHdpdGggbmV3IHBhc3N3b3JkIGFmdGVyIHJlc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gUmVzZXQgcGFzc3dvcmRcbiAgICAgIGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvcmVzZXQtcGFzc3dvcmQnKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgdG9rZW46IHJlc2V0VG9rZW4sXG4gICAgICAgICAgcGFzc3dvcmQ6ICduZXdQYXNzd29yZDEyMydcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBsb2dpbiB3aXRoIG5ldyBwYXNzd29yZFxuICAgICAgY29uc3QgbG9naW5SZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2xvZ2luJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgICAgcGFzc3dvcmQ6ICduZXdQYXNzd29yZDEyMydcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChsb2dpblJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChsb2dpblJlcy5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobG9naW5SZXMuYm9keS50b2tlbikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbXBsZXRlIEZsb3cnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBmdWxsIHBhc3N3b3JkIHJlY292ZXJ5IGZsb3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyAxLiBSZXF1ZXN0IHBhc3N3b3JkIHJlc2V0XG4gICAgICBjb25zdCBmb3Jnb3RSZXMgPSBhd2FpdCBhZ2VudFxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2ZvcmdvdC1wYXNzd29yZCcpXG4gICAgICAgIC5zZW5kKHsgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyB9KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGZvcmdvdFJlcy5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIFxuICAgICAgLy8gMi4gR2V0IHJlc2V0IHRva2VuIGZyb20gZGF0YWJhc2UgKGluIHJlYWwgYXBwLCB0aGlzIHdvdWxkIGNvbWUgZnJvbSBlbWFpbClcbiAgICAgIGNvbnN0IHVzZXJXaXRoVG9rZW4gPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHRlc3RVc2VyLl9pZCk7XG4gICAgICBleHBlY3QodXNlcldpdGhUb2tlbi5wYXNzd29yZFJlc2V0VG9rZW4pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIGdldHRpbmcgdGhlIHVuaGFzaGVkIHRva2VuIGZyb20gZW1haWxcbiAgICAgIC8vIEluIHJlYWwgaW1wbGVtZW50YXRpb24sIHdlJ2QgZXh0cmFjdCB0aGlzIGZyb20gdGhlIGVtYWlsIHNlbnRcbiAgICAgIGNvbnN0IHJlc2V0VG9rZW4gPSAnc2ltdWxhdGVkLXRva2VuJztcbiAgICAgIGNvbnN0IHJlc2V0VG9rZW5IYXNoID0gY3J5cHRvXG4gICAgICAgIC5jcmVhdGVIYXNoKCdzaGEyNTYnKVxuICAgICAgICAudXBkYXRlKHJlc2V0VG9rZW4pXG4gICAgICAgIC5kaWdlc3QoJ2hleCcpO1xuICAgICAgXG4gICAgICB1c2VyV2l0aFRva2VuLnBhc3N3b3JkUmVzZXRUb2tlbiA9IHJlc2V0VG9rZW5IYXNoO1xuICAgICAgYXdhaXQgdXNlcldpdGhUb2tlbi5zYXZlKCk7XG4gICAgICBcbiAgICAgIC8vIDMuIFJlc2V0IHBhc3N3b3JkIHdpdGggdG9rZW5cbiAgICAgIGNvbnN0IHJlc2V0UmVzID0gYXdhaXQgYWdlbnRcbiAgICAgICAgLnBvc3QoJy9hcGkvYXV0aC9yZXNldC1wYXNzd29yZCcpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICB0b2tlbjogcmVzZXRUb2tlbixcbiAgICAgICAgICBwYXNzd29yZDogJ2JyYW5kTmV3UGFzc3dvcmQxMjMnXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzZXRSZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzZXRSZXMuYm9keS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyA0LiBWZXJpZnkgY2FuIGxvZ2luIHdpdGggbmV3IHBhc3N3b3JkXG4gICAgICBjb25zdCBsb2dpblJlcyA9IGF3YWl0IGFnZW50XG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvbG9naW4nKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ2JyYW5kTmV3UGFzc3dvcmQxMjMnXG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QobG9naW5SZXMuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QobG9naW5SZXMuYm9keS5z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