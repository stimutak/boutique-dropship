2126cb0d1411f64d11f2d3afa36ca091
// Mock the validateCSRFToken middleware
_getJestObj().mock('../middleware/sessionCSRF', () => ({
  validateCSRFToken: (req, res, next) => next()
}));
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const request = require('supertest');
const express = require('express');
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');
const User = require('../models/User');
const authRoutes = require('../routes/auth');
const {
  i18nMiddleware
} = require('../utils/i18n');
const {
  errorResponse
} = require('../utils/errorHandler');
const {
  globalErrorHandler
} = require('../middleware/errorHandler');
describe('Auth Routes Error Standardization', () => {
  let app;
  beforeAll(async () => {
    // Connect to test database
    await mongoose.connect(process.env.MONGODB_TEST_URI || 'mongodb://localhost:27017/test-boutique', {
      useNewUrlParser: true,
      useUnifiedTopology: true
    });
  });
  afterAll(async () => {
    await mongoose.connection.close();
  });
  beforeEach(async () => {
    app = express();
    app.use(express.json());
    app.use(i18nMiddleware);
    app.use(errorResponse);

    // Mock session for CSRF
    app.use((req, res, next) => {
      req.session = {
        csrfToken: 'test-token'
      };
      next();
    });
    app.use('/api/auth', authRoutes);
    app.use(globalErrorHandler);

    // Clear users collection
    await User.deleteMany({});
  });
  describe('Registration errors', () => {
    test('should return validation error with proper format', async () => {
      const response = await request(app).post('/api/auth/register').send({
        email: 'invalid-email',
        password: '123',
        // Too short
        firstName: '',
        lastName: ''
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: expect.any(Array)
        }
      });

      // Debug: log the response to see actual structure
      if (!response.body.error.details) {
        console.log('Response body:', JSON.stringify(response.body, null, 2));
      }

      // Check specific validation errors
      const emailError = response.body.error.details && response.body.error.details.find(d => d.field === 'email');
      expect(emailError).toBeDefined();
      expect(emailError.message).toContain('email');
      const passwordError = response.body.error.details.find(d => d.field === 'password');
      expect(passwordError).toBeDefined();
      expect(passwordError.message).toContain('at least');
    });
    test('should return USER_EXISTS error in Spanish', async () => {
      // Create existing user
      await User.create({
        email: 'existing@example.com',
        password: await bcrypt.hash('password123', 10),
        firstName: 'Test',
        lastName: 'User'
      });
      const response = await request(app).post('/api/auth/register').set('x-locale', 'es').send({
        email: 'existing@example.com',
        password: 'password123',
        firstName: 'New',
        lastName: 'User'
      }).expect(409);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'USER_EXISTS',
          message: 'Ya existe un usuario con este correo electrónico'
        }
      });
    });
    test('should return USER_EXISTS error in Arabic', async () => {
      // Create existing user
      await User.create({
        email: 'existing@example.com',
        password: await bcrypt.hash('password123', 10),
        firstName: 'Test',
        lastName: 'User'
      });
      const response = await request(app).post('/api/auth/register').set('x-locale', 'ar').send({
        email: 'existing@example.com',
        password: 'password123',
        firstName: 'New',
        lastName: 'User'
      }).expect(409);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'USER_EXISTS',
          message: 'يوجد مستخدم بهذا البريد الإلكتروني بالفعل'
        }
      });
    });
  });
  describe('Login errors', () => {
    test('should return INVALID_CREDENTIALS error', async () => {
      const response = await request(app).post('/api/auth/login').send({
        email: 'nonexistent@example.com',
        password: 'wrongpassword'
      }).expect(401);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'INVALID_CREDENTIALS',
          message: 'Invalid email or password'
        }
      });
    });
    test('should return INVALID_CREDENTIALS error in French', async () => {
      const response = await request(app).post('/api/auth/login').set('x-locale', 'fr').send({
        email: 'nonexistent@example.com',
        password: 'wrongpassword'
      }).expect(401);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'INVALID_CREDENTIALS',
          message: 'Email ou mot de passe invalide'
        }
      });
    });
    test('should return error for disabled account', async () => {
      // Create disabled user
      await User.create({
        email: 'disabled@example.com',
        password: await bcrypt.hash('password123', 10),
        firstName: 'Test',
        lastName: 'User',
        isActive: false
      });
      const response = await request(app).post('/api/auth/login').send({
        email: 'disabled@example.com',
        password: 'password123'
      }).expect(403);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'ACCOUNT_DISABLED',
          message: expect.any(String)
        }
      });
    });
  });
  describe('Password reset errors', () => {
    test('should return validation error for invalid email', async () => {
      const response = await request(app).post('/api/auth/forgot-password').send({
        email: 'not-an-email'
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: expect.arrayContaining([expect.objectContaining({
            field: 'email',
            message: expect.stringContaining('email')
          })])
        }
      });
    });
    test('should return error for invalid reset token', async () => {
      const response = await request(app).post('/api/auth/reset-password').send({
        token: 'invalid-token',
        password: 'newpassword123'
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'INVALID_RESET_TOKEN',
          message: expect.any(String)
        }
      });
    });
  });
  describe('Profile update errors', () => {
    let authToken;
    let testUser;
    beforeEach(async () => {
      // Create test user
      testUser = await User.create({
        email: 'test@example.com',
        password: await bcrypt.hash('password123', 10),
        firstName: 'Test',
        lastName: 'User'
      });

      // Mock authentication
      app.use((req, res, next) => {
        req.user = testUser;
        next();
      });
    });
    test('should return validation error for invalid profile data', async () => {
      const response = await request(app).put('/api/auth/profile').send({
        firstName: '',
        // Empty name
        email: 'invalid-email' // Invalid email
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: expect.any(Array)
        }
      });
    });
    test('should return USER_EXISTS error when email is taken', async () => {
      // Create another user with target email
      await User.create({
        email: 'taken@example.com',
        password: await bcrypt.hash('password123', 10),
        firstName: 'Another',
        lastName: 'User'
      });
      const response = await request(app).put('/api/auth/profile').send({
        email: 'taken@example.com'
      }).expect(409);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'EMAIL_IN_USE',
          message: expect.any(String)
        }
      });
    });
  });
  describe('RTL language support in errors', () => {
    test('should return Hebrew error messages', async () => {
      const response = await request(app).post('/api/auth/login').set('x-locale', 'he').send({
        email: 'wrong@example.com',
        password: 'wrongpass'
      }).expect(401);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'INVALID_CREDENTIALS',
          message: 'אימייל או סיסמה לא תקינים'
        }
      });
    });
    test('should handle Arabic validation errors', async () => {
      const response = await request(app).post('/api/auth/register').set('x-locale', 'ar').send({
        email: 'test@example.com',
        password: '123',
        // Too short
        firstName: 'Test',
        lastName: 'User'
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'بيانات الإدخال غير صالحة'
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJ2YWxpZGF0ZUNTUkZUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJqZXN0IiwicmVxdWlyZSIsInJlcXVlc3QiLCJleHByZXNzIiwibW9uZ29vc2UiLCJiY3J5cHQiLCJVc2VyIiwiYXV0aFJvdXRlcyIsImkxOG5NaWRkbGV3YXJlIiwiZXJyb3JSZXNwb25zZSIsImdsb2JhbEVycm9ySGFuZGxlciIsImRlc2NyaWJlIiwiYXBwIiwiYmVmb3JlQWxsIiwiY29ubmVjdCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1RFU1RfVVJJIiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiYWZ0ZXJBbGwiLCJjb25uZWN0aW9uIiwiY2xvc2UiLCJiZWZvcmVFYWNoIiwidXNlIiwianNvbiIsInNlc3Npb24iLCJjc3JmVG9rZW4iLCJkZWxldGVNYW55IiwidGVzdCIsInJlc3BvbnNlIiwicG9zdCIsInNlbmQiLCJlbWFpbCIsInBhc3N3b3JkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJleHBlY3QiLCJib2R5IiwidG9NYXRjaE9iamVjdCIsInN1Y2Nlc3MiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiZGV0YWlscyIsImFueSIsIkFycmF5IiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJlbWFpbEVycm9yIiwiZmluZCIsImQiLCJmaWVsZCIsInRvQmVEZWZpbmVkIiwidG9Db250YWluIiwicGFzc3dvcmRFcnJvciIsImNyZWF0ZSIsImhhc2giLCJzZXQiLCJ0b0VxdWFsIiwiaXNBY3RpdmUiLCJTdHJpbmciLCJhcnJheUNvbnRhaW5pbmciLCJvYmplY3RDb250YWluaW5nIiwic3RyaW5nQ29udGFpbmluZyIsInRva2VuIiwiYXV0aFRva2VuIiwidGVzdFVzZXIiLCJ1c2VyIiwicHV0Il0sInNvdXJjZXMiOlsiYXV0aEVycm9yU3RhbmRhcmRpemF0aW9uLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVxdWVzdCA9IHJlcXVpcmUoJ3N1cGVydGVzdCcpO1xuY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL1VzZXInKTtcbmNvbnN0IGF1dGhSb3V0ZXMgPSByZXF1aXJlKCcuLi9yb3V0ZXMvYXV0aCcpO1xuY29uc3QgeyBpMThuTWlkZGxld2FyZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvaTE4bicpO1xuY29uc3QgeyBlcnJvclJlc3BvbnNlIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvckhhbmRsZXInKTtcbmNvbnN0IHsgZ2xvYmFsRXJyb3JIYW5kbGVyIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2Vycm9ySGFuZGxlcicpO1xuXG4vLyBNb2NrIHRoZSB2YWxpZGF0ZUNTUkZUb2tlbiBtaWRkbGV3YXJlXG5qZXN0Lm1vY2soJy4uL21pZGRsZXdhcmUvc2Vzc2lvbkNTUkYnLCAoKSA9PiAoe1xuICB2YWxpZGF0ZUNTUkZUb2tlbjogKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KClcbn0pKTtcblxuZGVzY3JpYmUoJ0F1dGggUm91dGVzIEVycm9yIFN0YW5kYXJkaXphdGlvbicsICgpID0+IHtcbiAgbGV0IGFwcDtcblxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIC8vIENvbm5lY3QgdG8gdGVzdCBkYXRhYmFzZVxuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QocHJvY2Vzcy5lbnYuTU9OR09EQl9URVNUX1VSSSB8fCAnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy90ZXN0LWJvdXRpcXVlJywge1xuICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlXG4gICAgfSk7XG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIGFwcCA9IGV4cHJlc3MoKTtcbiAgICBhcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbiAgICBhcHAudXNlKGkxOG5NaWRkbGV3YXJlKTtcbiAgICBhcHAudXNlKGVycm9yUmVzcG9uc2UpO1xuICAgIFxuICAgIC8vIE1vY2sgc2Vzc2lvbiBmb3IgQ1NSRlxuICAgIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICByZXEuc2Vzc2lvbiA9IHsgY3NyZlRva2VuOiAndGVzdC10b2tlbicgfTtcbiAgICAgIG5leHQoKTtcbiAgICB9KTtcbiAgICBcbiAgICBhcHAudXNlKCcvYXBpL2F1dGgnLCBhdXRoUm91dGVzKTtcbiAgICBhcHAudXNlKGdsb2JhbEVycm9ySGFuZGxlcik7XG5cbiAgICAvLyBDbGVhciB1c2VycyBjb2xsZWN0aW9uXG4gICAgYXdhaXQgVXNlci5kZWxldGVNYW55KHt9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlZ2lzdHJhdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiB2YWxpZGF0aW9uIGVycm9yIHdpdGggcHJvcGVyIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICdpbnZhbGlkLWVtYWlsJyxcbiAgICAgICAgICBwYXNzd29yZDogJzEyMycsIC8vIFRvbyBzaG9ydFxuICAgICAgICAgIGZpcnN0TmFtZTogJycsXG4gICAgICAgICAgbGFzdE5hbWU6ICcnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZGF0YScsXG4gICAgICAgICAgZGV0YWlsczogZXhwZWN0LmFueShBcnJheSlcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIERlYnVnOiBsb2cgdGhlIHJlc3BvbnNlIHRvIHNlZSBhY3R1YWwgc3RydWN0dXJlXG4gICAgICBpZiAoIXJlc3BvbnNlLmJvZHkuZXJyb3IuZGV0YWlscykge1xuICAgICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2UgYm9keTonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5ib2R5LCBudWxsLCAyKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIHNwZWNpZmljIHZhbGlkYXRpb24gZXJyb3JzXG4gICAgICBjb25zdCBlbWFpbEVycm9yID0gcmVzcG9uc2UuYm9keS5lcnJvci5kZXRhaWxzICYmIHJlc3BvbnNlLmJvZHkuZXJyb3IuZGV0YWlscy5maW5kKGQgPT4gZC5maWVsZCA9PT0gJ2VtYWlsJyk7XG4gICAgICBleHBlY3QoZW1haWxFcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChlbWFpbEVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignZW1haWwnKTtcblxuICAgICAgY29uc3QgcGFzc3dvcmRFcnJvciA9IHJlc3BvbnNlLmJvZHkuZXJyb3IuZGV0YWlscy5maW5kKGQgPT4gZC5maWVsZCA9PT0gJ3Bhc3N3b3JkJyk7XG4gICAgICBleHBlY3QocGFzc3dvcmRFcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChwYXNzd29yZEVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignYXQgbGVhc3QnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gVVNFUl9FWElTVFMgZXJyb3IgaW4gU3BhbmlzaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBleGlzdGluZyB1c2VyXG4gICAgICBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICAgIGVtYWlsOiAnZXhpc3RpbmdAZXhhbXBsZS5jb20nLFxuICAgICAgICBwYXNzd29yZDogYXdhaXQgYmNyeXB0Lmhhc2goJ3Bhc3N3b3JkMTIzJywgMTApLFxuICAgICAgICBmaXJzdE5hbWU6ICdUZXN0JyxcbiAgICAgICAgbGFzdE5hbWU6ICdVc2VyJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdlcycpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBlbWFpbDogJ2V4aXN0aW5nQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3Bhc3N3b3JkMTIzJyxcbiAgICAgICAgICBmaXJzdE5hbWU6ICdOZXcnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnVXNlcidcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCg0MDkpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdVU0VSX0VYSVNUUycsXG4gICAgICAgICAgbWVzc2FnZTogJ1lhIGV4aXN0ZSB1biB1c3VhcmlvIGNvbiBlc3RlIGNvcnJlbyBlbGVjdHLDs25pY28nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBVU0VSX0VYSVNUUyBlcnJvciBpbiBBcmFiaWMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgZXhpc3RpbmcgdXNlclxuICAgICAgYXdhaXQgVXNlci5jcmVhdGUoe1xuICAgICAgICBlbWFpbDogJ2V4aXN0aW5nQGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6IGF3YWl0IGJjcnlwdC5oYXNoKCdwYXNzd29yZDEyMycsIDEwKSxcbiAgICAgICAgZmlyc3ROYW1lOiAnVGVzdCcsXG4gICAgICAgIGxhc3ROYW1lOiAnVXNlcidcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL3JlZ2lzdGVyJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnYXInKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICdleGlzdGluZ0BleGFtcGxlLmNvbScsXG4gICAgICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMycsXG4gICAgICAgICAgZmlyc3ROYW1lOiAnTmV3JyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1VzZXInXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDA5KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVVNFUl9FWElTVFMnLFxuICAgICAgICAgIG1lc3NhZ2U6ICfZitmI2KzYryDZhdiz2KrYrtiv2YUg2KjZh9iw2Kcg2KfZhNio2LHZitivINin2YTYpdmE2YPYqtix2YjZhtmKINio2KfZhNmB2LnZhCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMb2dpbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBJTlZBTElEX0NSRURFTlRJQUxTIGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXV0aC9sb2dpbicpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBlbWFpbDogJ25vbmV4aXN0ZW50QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3dyb25ncGFzc3dvcmQnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9DUkVERU5USUFMUycsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBJTlZBTElEX0NSRURFTlRJQUxTIGVycm9yIGluIEZyZW5jaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvbG9naW4nKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdmcicpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBlbWFpbDogJ25vbmV4aXN0ZW50QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3dyb25ncGFzc3dvcmQnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9DUkVERU5USUFMUycsXG4gICAgICAgICAgbWVzc2FnZTogJ0VtYWlsIG91IG1vdCBkZSBwYXNzZSBpbnZhbGlkZSdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGVycm9yIGZvciBkaXNhYmxlZCBhY2NvdW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGRpc2FibGVkIHVzZXJcbiAgICAgIGF3YWl0IFVzZXIuY3JlYXRlKHtcbiAgICAgICAgZW1haWw6ICdkaXNhYmxlZEBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiBhd2FpdCBiY3J5cHQuaGFzaCgncGFzc3dvcmQxMjMnLCAxMCksXG4gICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICBpc0FjdGl2ZTogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2xvZ2luJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAnZGlzYWJsZWRAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAzKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnQUNDT1VOVF9ESVNBQkxFRCcsXG4gICAgICAgICAgbWVzc2FnZTogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGFzc3dvcmQgcmVzZXQgZXJyb3JzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gdmFsaWRhdGlvbiBlcnJvciBmb3IgaW52YWxpZCBlbWFpbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvZm9yZ290LXBhc3N3b3JkJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAnbm90LWFuLWVtYWlsJ1xuICAgICAgICB9KVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGlucHV0IGRhdGEnLFxuICAgICAgICAgIGRldGFpbHM6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgICBmaWVsZDogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgbWVzc2FnZTogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2VtYWlsJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgXSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGVycm9yIGZvciBpbnZhbGlkIHJlc2V0IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXV0aC9yZXNldC1wYXNzd29yZCcpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICB0b2tlbjogJ2ludmFsaWQtdG9rZW4nLFxuICAgICAgICAgIHBhc3N3b3JkOiAnbmV3cGFzc3dvcmQxMjMnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9SRVNFVF9UT0tFTicsXG4gICAgICAgICAgbWVzc2FnZTogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvZmlsZSB1cGRhdGUgZXJyb3JzJywgKCkgPT4ge1xuICAgIGxldCBhdXRoVG9rZW47XG4gICAgbGV0IHRlc3RVc2VyO1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgdGVzdCB1c2VyXG4gICAgICB0ZXN0VXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHtcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6IGF3YWl0IGJjcnlwdC5oYXNoKCdwYXNzd29yZDEyMycsIDEwKSxcbiAgICAgICAgZmlyc3ROYW1lOiAnVGVzdCcsXG4gICAgICAgIGxhc3ROYW1lOiAnVXNlcidcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIGF1dGhlbnRpY2F0aW9uXG4gICAgICBhcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgICAgICByZXEudXNlciA9IHRlc3RVc2VyO1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gdmFsaWRhdGlvbiBlcnJvciBmb3IgaW52YWxpZCBwcm9maWxlIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucHV0KCcvYXBpL2F1dGgvcHJvZmlsZScpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICcnLCAvLyBFbXB0eSBuYW1lXG4gICAgICAgICAgZW1haWw6ICdpbnZhbGlkLWVtYWlsJyAvLyBJbnZhbGlkIGVtYWlsXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZGF0YScsXG4gICAgICAgICAgZGV0YWlsczogZXhwZWN0LmFueShBcnJheSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIFVTRVJfRVhJU1RTIGVycm9yIHdoZW4gZW1haWwgaXMgdGFrZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgYW5vdGhlciB1c2VyIHdpdGggdGFyZ2V0IGVtYWlsXG4gICAgICBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICAgIGVtYWlsOiAndGFrZW5AZXhhbXBsZS5jb20nLFxuICAgICAgICBwYXNzd29yZDogYXdhaXQgYmNyeXB0Lmhhc2goJ3Bhc3N3b3JkMTIzJywgMTApLFxuICAgICAgICBmaXJzdE5hbWU6ICdBbm90aGVyJyxcbiAgICAgICAgbGFzdE5hbWU6ICdVc2VyJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wdXQoJy9hcGkvYXV0aC9wcm9maWxlJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAndGFrZW5AZXhhbXBsZS5jb20nXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDA5KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnRU1BSUxfSU5fVVNFJyxcbiAgICAgICAgICBtZXNzYWdlOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSVEwgbGFuZ3VhZ2Ugc3VwcG9ydCBpbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBIZWJyZXcgZXJyb3IgbWVzc2FnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2xvZ2luJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnaGUnKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICd3cm9uZ0BleGFtcGxlLmNvbScsXG4gICAgICAgICAgcGFzc3dvcmQ6ICd3cm9uZ3Bhc3MnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9DUkVERU5USUFMUycsXG4gICAgICAgICAgbWVzc2FnZTogJ9eQ15nXnteZ15nXnCDXkNeVINeh15nXodee15Qg15zXkCDXqten15nXoNeZ150nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBBcmFiaWMgdmFsaWRhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL3JlZ2lzdGVyJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnYXInKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJzEyMycsIC8vIFRvbyBzaG9ydFxuICAgICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnVXNlcidcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAn2KjZitin2YbYp9iqINin2YTYpdiv2K7Yp9mEINi62YrYsSDYtdin2YTYrdipJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQVVBO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLDJCQUEyQixFQUFFLE9BQU87RUFDNUNDLGlCQUFpQixFQUFFQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLQSxJQUFJLENBQUM7QUFDOUMsQ0FBQyxDQUFDLENBQUM7QUFBQyxTQUFBTCxZQUFBO0VBQUE7SUFBQU07RUFBQSxJQUFBQyxPQUFBO0VBQUFQLFdBQUEsR0FBQUEsQ0FBQSxLQUFBTSxJQUFBO0VBQUEsT0FBQUEsSUFBQTtBQUFBO0FBYkosTUFBTUUsT0FBTyxHQUFHRCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1FLE9BQU8sR0FBR0YsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNRyxRQUFRLEdBQUdILE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEMsTUFBTUksTUFBTSxHQUFHSixPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ2xDLE1BQU1LLElBQUksR0FBR0wsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3RDLE1BQU1NLFVBQVUsR0FBR04sT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQzVDLE1BQU07RUFBRU87QUFBZSxDQUFDLEdBQUdQLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDbkQsTUFBTTtFQUFFUTtBQUFjLENBQUMsR0FBR1IsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQzFELE1BQU07RUFBRVM7QUFBbUIsQ0FBQyxHQUFHVCxPQUFPLENBQUMsNEJBQTRCLENBQUM7QUFPcEVVLFFBQVEsQ0FBQyxtQ0FBbUMsRUFBRSxNQUFNO0VBQ2xELElBQUlDLEdBQUc7RUFFUEMsU0FBUyxDQUFDLFlBQVk7SUFDcEI7SUFDQSxNQUFNVCxRQUFRLENBQUNVLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGdCQUFnQixJQUFJLHlDQUF5QyxFQUFFO01BQ2hHQyxlQUFlLEVBQUUsSUFBSTtNQUNyQkMsa0JBQWtCLEVBQUU7SUFDdEIsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZDLFFBQVEsQ0FBQyxZQUFZO0lBQ25CLE1BQU1oQixRQUFRLENBQUNpQixVQUFVLENBQUNDLEtBQUssQ0FBQyxDQUFDO0VBQ25DLENBQUMsQ0FBQztFQUVGQyxVQUFVLENBQUMsWUFBWTtJQUNyQlgsR0FBRyxHQUFHVCxPQUFPLENBQUMsQ0FBQztJQUNmUyxHQUFHLENBQUNZLEdBQUcsQ0FBQ3JCLE9BQU8sQ0FBQ3NCLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDdkJiLEdBQUcsQ0FBQ1ksR0FBRyxDQUFDaEIsY0FBYyxDQUFDO0lBQ3ZCSSxHQUFHLENBQUNZLEdBQUcsQ0FBQ2YsYUFBYSxDQUFDOztJQUV0QjtJQUNBRyxHQUFHLENBQUNZLEdBQUcsQ0FBQyxDQUFDM0IsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztNQUMxQkYsR0FBRyxDQUFDNkIsT0FBTyxHQUFHO1FBQUVDLFNBQVMsRUFBRTtNQUFhLENBQUM7TUFDekM1QixJQUFJLENBQUMsQ0FBQztJQUNSLENBQUMsQ0FBQztJQUVGYSxHQUFHLENBQUNZLEdBQUcsQ0FBQyxXQUFXLEVBQUVqQixVQUFVLENBQUM7SUFDaENLLEdBQUcsQ0FBQ1ksR0FBRyxDQUFDZCxrQkFBa0IsQ0FBQzs7SUFFM0I7SUFDQSxNQUFNSixJQUFJLENBQUNzQixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDM0IsQ0FBQyxDQUFDO0VBRUZqQixRQUFRLENBQUMscUJBQXFCLEVBQUUsTUFBTTtJQUNwQ2tCLElBQUksQ0FBQyxtREFBbUQsRUFBRSxZQUFZO01BQ3BFLE1BQU1DLFFBQVEsR0FBRyxNQUFNNUIsT0FBTyxDQUFDVSxHQUFHLENBQUMsQ0FDaENtQixJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FDMUJDLElBQUksQ0FBQztRQUNKQyxLQUFLLEVBQUUsZUFBZTtRQUN0QkMsUUFBUSxFQUFFLEtBQUs7UUFBRTtRQUNqQkMsU0FBUyxFQUFFLEVBQUU7UUFDYkMsUUFBUSxFQUFFO01BQ1osQ0FBQyxDQUFDLENBQ0RDLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDUCxRQUFRLENBQUNRLElBQUksQ0FBQyxDQUFDQyxhQUFhLENBQUM7UUFDbENDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUsa0JBQWtCO1VBQ3hCQyxPQUFPLEVBQUUsb0JBQW9CO1VBQzdCQyxPQUFPLEVBQUVQLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDQyxLQUFLO1FBQzNCO01BQ0YsQ0FBQyxDQUFDOztNQUVGO01BQ0EsSUFBSSxDQUFDaEIsUUFBUSxDQUFDUSxJQUFJLENBQUNHLEtBQUssQ0FBQ0csT0FBTyxFQUFFO1FBQ2hDRyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRUMsSUFBSSxDQUFDQyxTQUFTLENBQUNwQixRQUFRLENBQUNRLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7TUFDdkU7O01BRUE7TUFDQSxNQUFNYSxVQUFVLEdBQUdyQixRQUFRLENBQUNRLElBQUksQ0FBQ0csS0FBSyxDQUFDRyxPQUFPLElBQUlkLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDRyxLQUFLLENBQUNHLE9BQU8sQ0FBQ1EsSUFBSSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ0MsS0FBSyxLQUFLLE9BQU8sQ0FBQztNQUM1R2pCLE1BQU0sQ0FBQ2MsVUFBVSxDQUFDLENBQUNJLFdBQVcsQ0FBQyxDQUFDO01BQ2hDbEIsTUFBTSxDQUFDYyxVQUFVLENBQUNSLE9BQU8sQ0FBQyxDQUFDYSxTQUFTLENBQUMsT0FBTyxDQUFDO01BRTdDLE1BQU1DLGFBQWEsR0FBRzNCLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDRyxLQUFLLENBQUNHLE9BQU8sQ0FBQ1EsSUFBSSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ0MsS0FBSyxLQUFLLFVBQVUsQ0FBQztNQUNuRmpCLE1BQU0sQ0FBQ29CLGFBQWEsQ0FBQyxDQUFDRixXQUFXLENBQUMsQ0FBQztNQUNuQ2xCLE1BQU0sQ0FBQ29CLGFBQWEsQ0FBQ2QsT0FBTyxDQUFDLENBQUNhLFNBQVMsQ0FBQyxVQUFVLENBQUM7SUFDckQsQ0FBQyxDQUFDO0lBRUYzQixJQUFJLENBQUMsNENBQTRDLEVBQUUsWUFBWTtNQUM3RDtNQUNBLE1BQU12QixJQUFJLENBQUNvRCxNQUFNLENBQUM7UUFDaEJ6QixLQUFLLEVBQUUsc0JBQXNCO1FBQzdCQyxRQUFRLEVBQUUsTUFBTTdCLE1BQU0sQ0FBQ3NELElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUFDO1FBQzlDeEIsU0FBUyxFQUFFLE1BQU07UUFDakJDLFFBQVEsRUFBRTtNQUNaLENBQUMsQ0FBQztNQUVGLE1BQU1OLFFBQVEsR0FBRyxNQUFNNUIsT0FBTyxDQUFDVSxHQUFHLENBQUMsQ0FDaENtQixJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FDMUI2QixHQUFHLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUNyQjVCLElBQUksQ0FBQztRQUNKQyxLQUFLLEVBQUUsc0JBQXNCO1FBQzdCQyxRQUFRLEVBQUUsYUFBYTtRQUN2QkMsU0FBUyxFQUFFLEtBQUs7UUFDaEJDLFFBQVEsRUFBRTtNQUNaLENBQUMsQ0FBQyxDQUNEQyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ1AsUUFBUSxDQUFDUSxJQUFJLENBQUMsQ0FBQ3VCLE9BQU8sQ0FBQztRQUM1QnJCLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUsYUFBYTtVQUNuQkMsT0FBTyxFQUFFO1FBQ1g7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7SUFFRmQsSUFBSSxDQUFDLDJDQUEyQyxFQUFFLFlBQVk7TUFDNUQ7TUFDQSxNQUFNdkIsSUFBSSxDQUFDb0QsTUFBTSxDQUFDO1FBQ2hCekIsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QkMsUUFBUSxFQUFFLE1BQU03QixNQUFNLENBQUNzRCxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUUsQ0FBQztRQUM5Q3hCLFNBQVMsRUFBRSxNQUFNO1FBQ2pCQyxRQUFRLEVBQUU7TUFDWixDQUFDLENBQUM7TUFFRixNQUFNTixRQUFRLEdBQUcsTUFBTTVCLE9BQU8sQ0FBQ1UsR0FBRyxDQUFDLENBQ2hDbUIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQzFCNkIsR0FBRyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FDckI1QixJQUFJLENBQUM7UUFDSkMsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QkMsUUFBUSxFQUFFLGFBQWE7UUFDdkJDLFNBQVMsRUFBRSxLQUFLO1FBQ2hCQyxRQUFRLEVBQUU7TUFDWixDQUFDLENBQUMsQ0FDREMsTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUVkQSxNQUFNLENBQUNQLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDLENBQUN1QixPQUFPLENBQUM7UUFDNUJyQixPQUFPLEVBQUUsS0FBSztRQUNkQyxLQUFLLEVBQUU7VUFDTEMsSUFBSSxFQUFFLGFBQWE7VUFDbkJDLE9BQU8sRUFBRTtRQUNYO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZoQyxRQUFRLENBQUMsY0FBYyxFQUFFLE1BQU07SUFDN0JrQixJQUFJLENBQUMseUNBQXlDLEVBQUUsWUFBWTtNQUMxRCxNQUFNQyxRQUFRLEdBQUcsTUFBTTVCLE9BQU8sQ0FBQ1UsR0FBRyxDQUFDLENBQ2hDbUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQ3ZCQyxJQUFJLENBQUM7UUFDSkMsS0FBSyxFQUFFLHlCQUF5QjtRQUNoQ0MsUUFBUSxFQUFFO01BQ1osQ0FBQyxDQUFDLENBQ0RHLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDUCxRQUFRLENBQUNRLElBQUksQ0FBQyxDQUFDdUIsT0FBTyxDQUFDO1FBQzVCckIsT0FBTyxFQUFFLEtBQUs7UUFDZEMsS0FBSyxFQUFFO1VBQ0xDLElBQUksRUFBRSxxQkFBcUI7VUFDM0JDLE9BQU8sRUFBRTtRQUNYO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUZkLElBQUksQ0FBQyxtREFBbUQsRUFBRSxZQUFZO01BQ3BFLE1BQU1DLFFBQVEsR0FBRyxNQUFNNUIsT0FBTyxDQUFDVSxHQUFHLENBQUMsQ0FDaENtQixJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FDdkI2QixHQUFHLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUNyQjVCLElBQUksQ0FBQztRQUNKQyxLQUFLLEVBQUUseUJBQXlCO1FBQ2hDQyxRQUFRLEVBQUU7TUFDWixDQUFDLENBQUMsQ0FDREcsTUFBTSxDQUFDLEdBQUcsQ0FBQztNQUVkQSxNQUFNLENBQUNQLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDLENBQUN1QixPQUFPLENBQUM7UUFDNUJyQixPQUFPLEVBQUUsS0FBSztRQUNkQyxLQUFLLEVBQUU7VUFDTEMsSUFBSSxFQUFFLHFCQUFxQjtVQUMzQkMsT0FBTyxFQUFFO1FBQ1g7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7SUFFRmQsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLFlBQVk7TUFDM0Q7TUFDQSxNQUFNdkIsSUFBSSxDQUFDb0QsTUFBTSxDQUFDO1FBQ2hCekIsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QkMsUUFBUSxFQUFFLE1BQU03QixNQUFNLENBQUNzRCxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUUsQ0FBQztRQUM5Q3hCLFNBQVMsRUFBRSxNQUFNO1FBQ2pCQyxRQUFRLEVBQUUsTUFBTTtRQUNoQjBCLFFBQVEsRUFBRTtNQUNaLENBQUMsQ0FBQztNQUVGLE1BQU1oQyxRQUFRLEdBQUcsTUFBTTVCLE9BQU8sQ0FBQ1UsR0FBRyxDQUFDLENBQ2hDbUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQ3ZCQyxJQUFJLENBQUM7UUFDSkMsS0FBSyxFQUFFLHNCQUFzQjtRQUM3QkMsUUFBUSxFQUFFO01BQ1osQ0FBQyxDQUFDLENBQ0RHLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDUCxRQUFRLENBQUNRLElBQUksQ0FBQyxDQUFDQyxhQUFhLENBQUM7UUFDbENDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUsa0JBQWtCO1VBQ3hCQyxPQUFPLEVBQUVOLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDa0IsTUFBTTtRQUM1QjtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGcEQsUUFBUSxDQUFDLHVCQUF1QixFQUFFLE1BQU07SUFDdENrQixJQUFJLENBQUMsa0RBQWtELEVBQUUsWUFBWTtNQUNuRSxNQUFNQyxRQUFRLEdBQUcsTUFBTTVCLE9BQU8sQ0FBQ1UsR0FBRyxDQUFDLENBQ2hDbUIsSUFBSSxDQUFDLDJCQUEyQixDQUFDLENBQ2pDQyxJQUFJLENBQUM7UUFDSkMsS0FBSyxFQUFFO01BQ1QsQ0FBQyxDQUFDLENBQ0RJLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDUCxRQUFRLENBQUNRLElBQUksQ0FBQyxDQUFDQyxhQUFhLENBQUM7UUFDbENDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUsa0JBQWtCO1VBQ3hCQyxPQUFPLEVBQUUsb0JBQW9CO1VBQzdCQyxPQUFPLEVBQUVQLE1BQU0sQ0FBQzJCLGVBQWUsQ0FBQyxDQUM5QjNCLE1BQU0sQ0FBQzRCLGdCQUFnQixDQUFDO1lBQ3RCWCxLQUFLLEVBQUUsT0FBTztZQUNkWCxPQUFPLEVBQUVOLE1BQU0sQ0FBQzZCLGdCQUFnQixDQUFDLE9BQU87VUFDMUMsQ0FBQyxDQUFDLENBQ0g7UUFDSDtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztJQUVGckMsSUFBSSxDQUFDLDZDQUE2QyxFQUFFLFlBQVk7TUFDOUQsTUFBTUMsUUFBUSxHQUFHLE1BQU01QixPQUFPLENBQUNVLEdBQUcsQ0FBQyxDQUNoQ21CLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxDQUNoQ0MsSUFBSSxDQUFDO1FBQ0ptQyxLQUFLLEVBQUUsZUFBZTtRQUN0QmpDLFFBQVEsRUFBRTtNQUNaLENBQUMsQ0FBQyxDQUNERyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ1AsUUFBUSxDQUFDUSxJQUFJLENBQUMsQ0FBQ0MsYUFBYSxDQUFDO1FBQ2xDQyxPQUFPLEVBQUUsS0FBSztRQUNkQyxLQUFLLEVBQUU7VUFDTEMsSUFBSSxFQUFFLHFCQUFxQjtVQUMzQkMsT0FBTyxFQUFFTixNQUFNLENBQUNRLEdBQUcsQ0FBQ2tCLE1BQU07UUFDNUI7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnBELFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxNQUFNO0lBQ3RDLElBQUl5RCxTQUFTO0lBQ2IsSUFBSUMsUUFBUTtJQUVaOUMsVUFBVSxDQUFDLFlBQVk7TUFDckI7TUFDQThDLFFBQVEsR0FBRyxNQUFNL0QsSUFBSSxDQUFDb0QsTUFBTSxDQUFDO1FBQzNCekIsS0FBSyxFQUFFLGtCQUFrQjtRQUN6QkMsUUFBUSxFQUFFLE1BQU03QixNQUFNLENBQUNzRCxJQUFJLENBQUMsYUFBYSxFQUFFLEVBQUUsQ0FBQztRQUM5Q3hCLFNBQVMsRUFBRSxNQUFNO1FBQ2pCQyxRQUFRLEVBQUU7TUFDWixDQUFDLENBQUM7O01BRUY7TUFDQXhCLEdBQUcsQ0FBQ1ksR0FBRyxDQUFDLENBQUMzQixHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO1FBQzFCRixHQUFHLENBQUN5RSxJQUFJLEdBQUdELFFBQVE7UUFDbkJ0RSxJQUFJLENBQUMsQ0FBQztNQUNSLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztJQUVGOEIsSUFBSSxDQUFDLHlEQUF5RCxFQUFFLFlBQVk7TUFDMUUsTUFBTUMsUUFBUSxHQUFHLE1BQU01QixPQUFPLENBQUNVLEdBQUcsQ0FBQyxDQUNoQzJELEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUN4QnZDLElBQUksQ0FBQztRQUNKRyxTQUFTLEVBQUUsRUFBRTtRQUFFO1FBQ2ZGLEtBQUssRUFBRSxlQUFlLENBQUM7TUFDekIsQ0FBQyxDQUFDLENBQ0RJLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDUCxRQUFRLENBQUNRLElBQUksQ0FBQyxDQUFDQyxhQUFhLENBQUM7UUFDbENDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUsa0JBQWtCO1VBQ3hCQyxPQUFPLEVBQUUsb0JBQW9CO1VBQzdCQyxPQUFPLEVBQUVQLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDQyxLQUFLO1FBQzNCO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUZqQixJQUFJLENBQUMscURBQXFELEVBQUUsWUFBWTtNQUN0RTtNQUNBLE1BQU12QixJQUFJLENBQUNvRCxNQUFNLENBQUM7UUFDaEJ6QixLQUFLLEVBQUUsbUJBQW1CO1FBQzFCQyxRQUFRLEVBQUUsTUFBTTdCLE1BQU0sQ0FBQ3NELElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUFDO1FBQzlDeEIsU0FBUyxFQUFFLFNBQVM7UUFDcEJDLFFBQVEsRUFBRTtNQUNaLENBQUMsQ0FBQztNQUVGLE1BQU1OLFFBQVEsR0FBRyxNQUFNNUIsT0FBTyxDQUFDVSxHQUFHLENBQUMsQ0FDaEMyRCxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FDeEJ2QyxJQUFJLENBQUM7UUFDSkMsS0FBSyxFQUFFO01BQ1QsQ0FBQyxDQUFDLENBQ0RJLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFFZEEsTUFBTSxDQUFDUCxRQUFRLENBQUNRLElBQUksQ0FBQyxDQUFDQyxhQUFhLENBQUM7UUFDbENDLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUsY0FBYztVQUNwQkMsT0FBTyxFQUFFTixNQUFNLENBQUNRLEdBQUcsQ0FBQ2tCLE1BQU07UUFDNUI7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnBELFFBQVEsQ0FBQyxnQ0FBZ0MsRUFBRSxNQUFNO0lBQy9Da0IsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLFlBQVk7TUFDdEQsTUFBTUMsUUFBUSxHQUFHLE1BQU01QixPQUFPLENBQUNVLEdBQUcsQ0FBQyxDQUNoQ21CLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUN2QjZCLEdBQUcsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQ3JCNUIsSUFBSSxDQUFDO1FBQ0pDLEtBQUssRUFBRSxtQkFBbUI7UUFDMUJDLFFBQVEsRUFBRTtNQUNaLENBQUMsQ0FBQyxDQUNERyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ1AsUUFBUSxDQUFDUSxJQUFJLENBQUMsQ0FBQ3VCLE9BQU8sQ0FBQztRQUM1QnJCLE9BQU8sRUFBRSxLQUFLO1FBQ2RDLEtBQUssRUFBRTtVQUNMQyxJQUFJLEVBQUUscUJBQXFCO1VBQzNCQyxPQUFPLEVBQUU7UUFDWDtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztJQUVGZCxJQUFJLENBQUMsd0NBQXdDLEVBQUUsWUFBWTtNQUN6RCxNQUFNQyxRQUFRLEdBQUcsTUFBTTVCLE9BQU8sQ0FBQ1UsR0FBRyxDQUFDLENBQ2hDbUIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQzFCNkIsR0FBRyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FDckI1QixJQUFJLENBQUM7UUFDSkMsS0FBSyxFQUFFLGtCQUFrQjtRQUN6QkMsUUFBUSxFQUFFLEtBQUs7UUFBRTtRQUNqQkMsU0FBUyxFQUFFLE1BQU07UUFDakJDLFFBQVEsRUFBRTtNQUNaLENBQUMsQ0FBQyxDQUNEQyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWRBLE1BQU0sQ0FBQ1AsUUFBUSxDQUFDUSxJQUFJLENBQUMsQ0FBQ0MsYUFBYSxDQUFDO1FBQ2xDQyxPQUFPLEVBQUUsS0FBSztRQUNkQyxLQUFLLEVBQUU7VUFDTEMsSUFBSSxFQUFFLGtCQUFrQjtVQUN4QkMsT0FBTyxFQUFFO1FBQ1g7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=