73e87fe38b7c843ef7494a9274858b6e
// Mock the validateCSRFToken middleware
_getJestObj().mock('../middleware/sessionCSRF', () => ({
  validateCSRFToken: (req, res, next) => next()
}));
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const request = require('supertest');
const express = require('express');
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const User = require('../models/User');
const authRoutes = require('../routes/auth');
const {
  i18nMiddleware
} = require('../utils/i18n');
const {
  errorResponse
} = require('../utils/errorHandler');
const {
  globalErrorHandler
} = require('../middleware/errorHandler');
describe('Auth Routes Error Standardization', () => {
  let app;
  beforeAll(async () => {
    // Connect to test database
    await mongoose.connect(process.env.MONGODB_TEST_URI || 'mongodb://localhost:27017/test-boutique', {
      useNewUrlParser: true,
      useUnifiedTopology: true
    });
  });
  afterAll(async () => {
    await mongoose.connection.close();
  });
  beforeEach(async () => {
    app = express();
    app.use(express.json());
    app.use(i18nMiddleware);
    app.use(errorResponse);

    // Mock session for CSRF
    app.use((req, res, next) => {
      req.session = {
        csrfToken: 'test-token'
      };
      next();
    });
    app.use('/api/auth', authRoutes);
    app.use(globalErrorHandler);

    // Clear users collection
    await User.deleteMany({});
  });
  describe('Registration errors', () => {
    test('should return validation error with proper format', async () => {
      const response = await request(app).post('/api/auth/register').send({
        email: 'invalid-email',
        password: '123',
        // Too short
        firstName: '',
        lastName: ''
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: expect.any(Array)
        }
      });

      // Check specific validation errors
      const emailError = response.body.error.details.find(d => d.field === 'email');
      expect(emailError).toBeDefined();
      expect(emailError.message).toContain('email');
      const passwordError = response.body.error.details.find(d => d.field === 'password');
      expect(passwordError).toBeDefined();
      expect(passwordError.message).toContain('at least');
    });
    test('should return USER_EXISTS error in Spanish', async () => {
      // Create existing user
      await User.create({
        email: 'existing@example.com',
        password: await bcrypt.hash('password123', 10),
        firstName: 'Test',
        lastName: 'User'
      });
      const response = await request(app).post('/api/auth/register').set('x-locale', 'es').send({
        email: 'existing@example.com',
        password: 'password123',
        firstName: 'New',
        lastName: 'User'
      }).expect(409);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'USER_EXISTS',
          message: 'Ya existe un usuario con este correo electrónico'
        }
      });
    });
    test('should return USER_EXISTS error in Arabic', async () => {
      // Create existing user
      await User.create({
        email: 'existing@example.com',
        password: await bcrypt.hash('password123', 10),
        firstName: 'Test',
        lastName: 'User'
      });
      const response = await request(app).post('/api/auth/register').set('x-locale', 'ar').send({
        email: 'existing@example.com',
        password: 'password123',
        firstName: 'New',
        lastName: 'User'
      }).expect(409);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'USER_EXISTS',
          message: 'يوجد مستخدم بهذا البريد الإلكتروني بالفعل'
        }
      });
    });
  });
  describe('Login errors', () => {
    test('should return INVALID_CREDENTIALS error', async () => {
      const response = await request(app).post('/api/auth/login').send({
        email: 'nonexistent@example.com',
        password: 'wrongpassword'
      }).expect(401);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'INVALID_CREDENTIALS',
          message: 'Invalid email or password'
        }
      });
    });
    test('should return INVALID_CREDENTIALS error in French', async () => {
      const response = await request(app).post('/api/auth/login').set('x-locale', 'fr').send({
        email: 'nonexistent@example.com',
        password: 'wrongpassword'
      }).expect(401);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'INVALID_CREDENTIALS',
          message: 'Email ou mot de passe invalide'
        }
      });
    });
    test('should return error for disabled account', async () => {
      // Create disabled user
      await User.create({
        email: 'disabled@example.com',
        password: 'password123',
        firstName: 'Test',
        lastName: 'User',
        isActive: false
      });
      const response = await request(app).post('/api/auth/login').send({
        email: 'disabled@example.com',
        password: 'password123'
      }).expect(403);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'ACCOUNT_DISABLED',
          message: expect.any(String)
        }
      });
    });
  });
  describe('Password reset errors', () => {
    test('should return validation error for invalid email', async () => {
      const response = await request(app).post('/api/auth/forgot-password').send({
        email: 'not-an-email'
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: expect.arrayContaining([expect.objectContaining({
            field: 'email',
            message: expect.stringContaining('email')
          })])
        }
      });
    });
    test('should return error for invalid reset token', async () => {
      const response = await request(app).post('/api/auth/reset-password').send({
        token: 'invalid-token',
        password: 'newpassword123'
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'INVALID_RESET_TOKEN',
          message: expect.any(String)
        }
      });
    });
  });
  describe('Profile update errors', () => {
    let authToken;
    let testUser;
    beforeEach(async () => {
      // Create test user
      testUser = await User.create({
        email: 'test@example.com',
        password: 'password123',
        firstName: 'Test',
        lastName: 'User'
      });

      // Generate auth token
      authToken = jwt.sign({
        userId: testUser._id.toString()
      }, process.env.JWT_SECRET, {
        expiresIn: '1h'
      });
    });
    test('should return validation error for invalid profile data', async () => {
      const response = await request(app).put('/api/auth/profile').set('Authorization', `Bearer ${authToken}`).send({
        firstName: '',
        // Empty name
        email: 'invalid-email' // Invalid email
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'Invalid input data',
          details: expect.any(Array)
        }
      });
    });
    test('should return USER_EXISTS error when email is taken', async () => {
      // Create another user with target email
      await User.create({
        email: 'taken@example.com',
        password: 'password123',
        firstName: 'Another',
        lastName: 'User'
      });
      const response = await request(app).put('/api/auth/profile').set('Authorization', `Bearer ${authToken}`).send({
        email: 'taken@example.com'
      }).expect(409);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'EMAIL_IN_USE',
          message: expect.any(String)
        }
      });
    });
  });
  describe('RTL language support in errors', () => {
    test('should return Hebrew error messages', async () => {
      const response = await request(app).post('/api/auth/login').set('x-locale', 'he').send({
        email: 'wrong@example.com',
        password: 'wrongpass'
      }).expect(401);
      expect(response.body).toEqual({
        success: false,
        error: {
          code: 'INVALID_CREDENTIALS',
          message: 'אימייל או סיסמה לא תקינים'
        }
      });
    });
    test('should handle Arabic validation errors', async () => {
      const response = await request(app).post('/api/auth/register').set('x-locale', 'ar').send({
        email: 'test@example.com',
        password: '123',
        // Too short
        firstName: 'Test',
        lastName: 'User'
      }).expect(400);
      expect(response.body).toMatchObject({
        success: false,
        error: {
          code: 'VALIDATION_ERROR',
          message: 'بيانات الإدخال غير صالحة'
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJ2YWxpZGF0ZUNTUkZUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJqZXN0IiwicmVxdWlyZSIsInJlcXVlc3QiLCJleHByZXNzIiwibW9uZ29vc2UiLCJiY3J5cHQiLCJqd3QiLCJVc2VyIiwiYXV0aFJvdXRlcyIsImkxOG5NaWRkbGV3YXJlIiwiZXJyb3JSZXNwb25zZSIsImdsb2JhbEVycm9ySGFuZGxlciIsImRlc2NyaWJlIiwiYXBwIiwiYmVmb3JlQWxsIiwiY29ubmVjdCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1RFU1RfVVJJIiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiYWZ0ZXJBbGwiLCJjb25uZWN0aW9uIiwiY2xvc2UiLCJiZWZvcmVFYWNoIiwidXNlIiwianNvbiIsInNlc3Npb24iLCJjc3JmVG9rZW4iLCJkZWxldGVNYW55IiwidGVzdCIsInJlc3BvbnNlIiwicG9zdCIsInNlbmQiLCJlbWFpbCIsInBhc3N3b3JkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJleHBlY3QiLCJib2R5IiwidG9NYXRjaE9iamVjdCIsInN1Y2Nlc3MiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiZGV0YWlscyIsImFueSIsIkFycmF5IiwiZW1haWxFcnJvciIsImZpbmQiLCJkIiwiZmllbGQiLCJ0b0JlRGVmaW5lZCIsInRvQ29udGFpbiIsInBhc3N3b3JkRXJyb3IiLCJjcmVhdGUiLCJoYXNoIiwic2V0IiwidG9FcXVhbCIsImlzQWN0aXZlIiwiU3RyaW5nIiwiYXJyYXlDb250YWluaW5nIiwib2JqZWN0Q29udGFpbmluZyIsInN0cmluZ0NvbnRhaW5pbmciLCJ0b2tlbiIsImF1dGhUb2tlbiIsInRlc3RVc2VyIiwic2lnbiIsInVzZXJJZCIsIl9pZCIsInRvU3RyaW5nIiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsInB1dCJdLCJzb3VyY2VzIjpbImF1dGhFcnJvclN0YW5kYXJkaXphdGlvbi50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcbmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHRqcycpO1xuY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL1VzZXInKTtcbmNvbnN0IGF1dGhSb3V0ZXMgPSByZXF1aXJlKCcuLi9yb3V0ZXMvYXV0aCcpO1xuY29uc3QgeyBpMThuTWlkZGxld2FyZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvaTE4bicpO1xuY29uc3QgeyBlcnJvclJlc3BvbnNlIH0gPSByZXF1aXJlKCcuLi91dGlscy9lcnJvckhhbmRsZXInKTtcbmNvbnN0IHsgZ2xvYmFsRXJyb3JIYW5kbGVyIH0gPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2Vycm9ySGFuZGxlcicpO1xuXG4vLyBNb2NrIHRoZSB2YWxpZGF0ZUNTUkZUb2tlbiBtaWRkbGV3YXJlXG5qZXN0Lm1vY2soJy4uL21pZGRsZXdhcmUvc2Vzc2lvbkNTUkYnLCAoKSA9PiAoe1xuICB2YWxpZGF0ZUNTUkZUb2tlbjogKHJlcSwgcmVzLCBuZXh0KSA9PiBuZXh0KClcbn0pKTtcblxuZGVzY3JpYmUoJ0F1dGggUm91dGVzIEVycm9yIFN0YW5kYXJkaXphdGlvbicsICgpID0+IHtcbiAgbGV0IGFwcDtcblxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIC8vIENvbm5lY3QgdG8gdGVzdCBkYXRhYmFzZVxuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QocHJvY2Vzcy5lbnYuTU9OR09EQl9URVNUX1VSSSB8fCAnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy90ZXN0LWJvdXRpcXVlJywge1xuICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlXG4gICAgfSk7XG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIGFwcCA9IGV4cHJlc3MoKTtcbiAgICBhcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbiAgICBhcHAudXNlKGkxOG5NaWRkbGV3YXJlKTtcbiAgICBhcHAudXNlKGVycm9yUmVzcG9uc2UpO1xuICAgIFxuICAgIC8vIE1vY2sgc2Vzc2lvbiBmb3IgQ1NSRlxuICAgIGFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgICByZXEuc2Vzc2lvbiA9IHsgY3NyZlRva2VuOiAndGVzdC10b2tlbicgfTtcbiAgICAgIG5leHQoKTtcbiAgICB9KTtcbiAgICBcbiAgICBhcHAudXNlKCcvYXBpL2F1dGgnLCBhdXRoUm91dGVzKTtcbiAgICBhcHAudXNlKGdsb2JhbEVycm9ySGFuZGxlcik7XG5cbiAgICAvLyBDbGVhciB1c2VycyBjb2xsZWN0aW9uXG4gICAgYXdhaXQgVXNlci5kZWxldGVNYW55KHt9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlZ2lzdHJhdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiB2YWxpZGF0aW9uIGVycm9yIHdpdGggcHJvcGVyIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICdpbnZhbGlkLWVtYWlsJyxcbiAgICAgICAgICBwYXNzd29yZDogJzEyMycsIC8vIFRvbyBzaG9ydFxuICAgICAgICAgIGZpcnN0TmFtZTogJycsXG4gICAgICAgICAgbGFzdE5hbWU6ICcnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnVkFMSURBVElPTl9FUlJPUicsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZGF0YScsXG4gICAgICAgICAgZGV0YWlsczogZXhwZWN0LmFueShBcnJheSlcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIHNwZWNpZmljIHZhbGlkYXRpb24gZXJyb3JzXG4gICAgICBjb25zdCBlbWFpbEVycm9yID0gcmVzcG9uc2UuYm9keS5lcnJvci5kZXRhaWxzLmZpbmQoZCA9PiBkLmZpZWxkID09PSAnZW1haWwnKTtcbiAgICAgIGV4cGVjdChlbWFpbEVycm9yKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGVtYWlsRXJyb3IubWVzc2FnZSkudG9Db250YWluKCdlbWFpbCcpO1xuXG4gICAgICBjb25zdCBwYXNzd29yZEVycm9yID0gcmVzcG9uc2UuYm9keS5lcnJvci5kZXRhaWxzLmZpbmQoZCA9PiBkLmZpZWxkID09PSAncGFzc3dvcmQnKTtcbiAgICAgIGV4cGVjdChwYXNzd29yZEVycm9yKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHBhc3N3b3JkRXJyb3IubWVzc2FnZSkudG9Db250YWluKCdhdCBsZWFzdCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBVU0VSX0VYSVNUUyBlcnJvciBpbiBTcGFuaXNoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGV4aXN0aW5nIHVzZXJcbiAgICAgIGF3YWl0IFVzZXIuY3JlYXRlKHtcbiAgICAgICAgZW1haWw6ICdleGlzdGluZ0BleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiBhd2FpdCBiY3J5cHQuaGFzaCgncGFzc3dvcmQxMjMnLCAxMCksXG4gICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXV0aC9yZWdpc3RlcicpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ2VzJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAnZXhpc3RpbmdAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ05ldycsXG4gICAgICAgICAgbGFzdE5hbWU6ICdVc2VyJ1xuICAgICAgICB9KVxuICAgICAgICAuZXhwZWN0KDQwOSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0VxdWFsKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1VTRVJfRVhJU1RTJyxcbiAgICAgICAgICBtZXNzYWdlOiAnWWEgZXhpc3RlIHVuIHVzdWFyaW8gY29uIGVzdGUgY29ycmVvIGVsZWN0csOzbmljbydcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIFVTRVJfRVhJU1RTIGVycm9yIGluIEFyYWJpYycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBleGlzdGluZyB1c2VyXG4gICAgICBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICAgIGVtYWlsOiAnZXhpc3RpbmdAZXhhbXBsZS5jb20nLFxuICAgICAgICBwYXNzd29yZDogYXdhaXQgYmNyeXB0Lmhhc2goJ3Bhc3N3b3JkMTIzJywgMTApLFxuICAgICAgICBmaXJzdE5hbWU6ICdUZXN0JyxcbiAgICAgICAgbGFzdE5hbWU6ICdVc2VyJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvcmVnaXN0ZXInKVxuICAgICAgICAuc2V0KCd4LWxvY2FsZScsICdhcicpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBlbWFpbDogJ2V4aXN0aW5nQGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3Bhc3N3b3JkMTIzJyxcbiAgICAgICAgICBmaXJzdE5hbWU6ICdOZXcnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnVXNlcidcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCg0MDkpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdVU0VSX0VYSVNUUycsXG4gICAgICAgICAgbWVzc2FnZTogJ9mK2YjYrNivINmF2LPYqtiu2K/ZhSDYqNmH2LDYpyDYp9mE2KjYsdmK2K8g2KfZhNil2YTZg9iq2LHZiNmG2Yog2KjYp9mE2YHYudmEJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xvZ2luIGVycm9ycycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIElOVkFMSURfQ1JFREVOVElBTFMgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2xvZ2luJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAnbm9uZXhpc3RlbnRAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBhc3N3b3JkOiAnd3JvbmdwYXNzd29yZCdcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCg0MDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdJTlZBTElEX0NSRURFTlRJQUxTJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIElOVkFMSURfQ1JFREVOVElBTFMgZXJyb3IgaW4gRnJlbmNoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXV0aC9sb2dpbicpXG4gICAgICAgIC5zZXQoJ3gtbG9jYWxlJywgJ2ZyJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAnbm9uZXhpc3RlbnRAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBhc3N3b3JkOiAnd3JvbmdwYXNzd29yZCdcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCg0MDEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9FcXVhbCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdJTlZBTElEX0NSRURFTlRJQUxTJyxcbiAgICAgICAgICBtZXNzYWdlOiAnRW1haWwgb3UgbW90IGRlIHBhc3NlIGludmFsaWRlJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gZXJyb3IgZm9yIGRpc2FibGVkIGFjY291bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgZGlzYWJsZWQgdXNlclxuICAgICAgYXdhaXQgVXNlci5jcmVhdGUoe1xuICAgICAgICBlbWFpbDogJ2Rpc2FibGVkQGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMycsXG4gICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICBpc0FjdGl2ZTogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2xvZ2luJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAnZGlzYWJsZWRAZXhhbXBsZS5jb20nLFxuICAgICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAzKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnQUNDT1VOVF9ESVNBQkxFRCcsXG4gICAgICAgICAgbWVzc2FnZTogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGFzc3dvcmQgcmVzZXQgZXJyb3JzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gdmFsaWRhdGlvbiBlcnJvciBmb3IgaW52YWxpZCBlbWFpbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wb3N0KCcvYXBpL2F1dGgvZm9yZ290LXBhc3N3b3JkJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAnbm90LWFuLWVtYWlsJ1xuICAgICAgICB9KVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGlucHV0IGRhdGEnLFxuICAgICAgICAgIGRldGFpbHM6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgICBmaWVsZDogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgbWVzc2FnZTogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2VtYWlsJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgXSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGVycm9yIGZvciBpbnZhbGlkIHJlc2V0IHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLnBvc3QoJy9hcGkvYXV0aC9yZXNldC1wYXNzd29yZCcpXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICB0b2tlbjogJ2ludmFsaWQtdG9rZW4nLFxuICAgICAgICAgIHBhc3N3b3JkOiAnbmV3cGFzc3dvcmQxMjMnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAwKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9SRVNFVF9UT0tFTicsXG4gICAgICAgICAgbWVzc2FnZTogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvZmlsZSB1cGRhdGUgZXJyb3JzJywgKCkgPT4ge1xuICAgIGxldCBhdXRoVG9rZW47XG4gICAgbGV0IHRlc3RVc2VyO1xuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgdGVzdCB1c2VyXG4gICAgICB0ZXN0VXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHtcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMycsXG4gICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICBsYXN0TmFtZTogJ1VzZXInXG4gICAgICB9KTtcblxuICAgICAgLy8gR2VuZXJhdGUgYXV0aCB0b2tlblxuICAgICAgYXV0aFRva2VuID0gand0LnNpZ24oXG4gICAgICAgIHsgdXNlcklkOiB0ZXN0VXNlci5faWQudG9TdHJpbmcoKSB9LFxuICAgICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVULFxuICAgICAgICB7IGV4cGlyZXNJbjogJzFoJyB9XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiB2YWxpZGF0aW9uIGVycm9yIGZvciBpbnZhbGlkIHByb2ZpbGUgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wdXQoJy9hcGkvYXV0aC9wcm9maWxlJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGZpcnN0TmFtZTogJycsIC8vIEVtcHR5IG5hbWVcbiAgICAgICAgICBlbWFpbDogJ2ludmFsaWQtZW1haWwnIC8vIEludmFsaWQgZW1haWxcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBkYXRhJyxcbiAgICAgICAgICBkZXRhaWxzOiBleHBlY3QuYW55KEFycmF5KVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gVVNFUl9FWElTVFMgZXJyb3Igd2hlbiBlbWFpbCBpcyB0YWtlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhbm90aGVyIHVzZXIgd2l0aCB0YXJnZXQgZW1haWxcbiAgICAgIGF3YWl0IFVzZXIuY3JlYXRlKHtcbiAgICAgICAgZW1haWw6ICd0YWtlbkBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnLFxuICAgICAgICBmaXJzdE5hbWU6ICdBbm90aGVyJyxcbiAgICAgICAgbGFzdE5hbWU6ICdVc2VyJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5wdXQoJy9hcGkvYXV0aC9wcm9maWxlJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHthdXRoVG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIGVtYWlsOiAndGFrZW5AZXhhbXBsZS5jb20nXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDA5KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnRU1BSUxfSU5fVVNFJyxcbiAgICAgICAgICBtZXNzYWdlOiBleHBlY3QuYW55KFN0cmluZylcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSVEwgbGFuZ3VhZ2Ugc3VwcG9ydCBpbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBIZWJyZXcgZXJyb3IgbWVzc2FnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL2xvZ2luJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnaGUnKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICd3cm9uZ0BleGFtcGxlLmNvbScsXG4gICAgICAgICAgcGFzc3dvcmQ6ICd3cm9uZ3Bhc3MnXG4gICAgICAgIH0pXG4gICAgICAgIC5leHBlY3QoNDAxKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBjb2RlOiAnSU5WQUxJRF9DUkVERU5USUFMUycsXG4gICAgICAgICAgbWVzc2FnZTogJ9eQ15nXnteZ15nXnCDXkNeVINeh15nXodee15Qg15zXkCDXqten15nXoNeZ150nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBBcmFiaWMgdmFsaWRhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAucG9zdCgnL2FwaS9hdXRoL3JlZ2lzdGVyJylcbiAgICAgICAgLnNldCgneC1sb2NhbGUnLCAnYXInKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICBwYXNzd29yZDogJzEyMycsIC8vIFRvbyBzaG9ydFxuICAgICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnVXNlcidcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCg0MDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIGNvZGU6ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAn2KjZitin2YbYp9iqINin2YTYpdiv2K7Yp9mEINi62YrYsSDYtdin2YTYrdipJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQVdBO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLDJCQUEyQixFQUFFLE9BQU87RUFDNUNDLGlCQUFpQixFQUFFQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLQSxJQUFJLENBQUM7QUFDOUMsQ0FBQyxDQUFDLENBQUM7QUFBQyxTQUFBTCxZQUFBO0VBQUE7SUFBQU07RUFBQSxJQUFBQyxPQUFBO0VBQUFQLFdBQUEsR0FBQUEsQ0FBQSxLQUFBTSxJQUFBO0VBQUEsT0FBQUEsSUFBQTtBQUFBO0FBZEosTUFBTUUsT0FBTyxHQUFHRCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3BDLE1BQU1FLE9BQU8sR0FBR0YsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNRyxRQUFRLEdBQUdILE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDcEMsTUFBTUksTUFBTSxHQUFHSixPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ2xDLE1BQU1LLEdBQUcsR0FBR0wsT0FBTyxDQUFDLGNBQWMsQ0FBQztBQUNuQyxNQUFNTSxJQUFJLEdBQUdOLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUN0QyxNQUFNTyxVQUFVLEdBQUdQLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUM1QyxNQUFNO0VBQUVRO0FBQWUsQ0FBQyxHQUFHUixPQUFPLENBQUMsZUFBZSxDQUFDO0FBQ25ELE1BQU07RUFBRVM7QUFBYyxDQUFDLEdBQUdULE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUMxRCxNQUFNO0VBQUVVO0FB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